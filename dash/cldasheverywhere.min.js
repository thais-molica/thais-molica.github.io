function X2JS(U){"use strict";function Y(){void 0===U.escapeMode&&(U.escapeMode=!0),U.attributePrefix=U.attributePrefix||"_",U.arrayAccessForm=U.arrayAccessForm||"none",U.emptyNodeForm=U.emptyNodeForm||"text",void 0===U.enableToStringFunc&&(U.enableToStringFunc=!0),U.arrayAccessFormPaths=U.arrayAccessFormPaths||[],void 0===U.skipEmptyTextNodesForObj&&(U.skipEmptyTextNodesForObj=!0),void 0===U.stripWhitespaces&&(U.stripWhitespaces=!0),U.datetimeAccessFormPaths=U.datetimeAccessFormPaths||[];}function b0(){function v(q){var u=String(q);return 1===u.length&&(u="0"+u),u;}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"");}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+v(this.getUTCMonth()+1)+"-"+v(this.getUTCDate())+"T"+v(this.getUTCHours())+":"+v(this.getUTCMinutes())+":"+v(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z";});}function X(q){var u=q.localName;return null==u&&(u=q.baseName),(null==u||""==u)&&(u=q.nodeName),u;}function a0(q){return q.prefix;}function Z(q){return "string"==typeof q?q.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):q;}function W(q){return q.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/");}function e0(q,u,v){switch(U.arrayAccessForm){case "property":q[u+"_asArray"]=q[u] instanceof Array?q[u]:[q[u]];}if(!(q[u] instanceof Array)&&U.arrayAccessFormPaths.length>0){for(var w=0;w<U.arrayAccessFormPaths.length;w++){var x=U.arrayAccessFormPaths[w];if("string"==typeof x){if(x==v)break;}else if(x instanceof RegExp){if(x.test(v))break;}else if("function"==typeof x&&x(q,u,v))break;}w!=U.arrayAccessFormPaths.length&&(q[u]=[q[u]]);}}function d0(q){var u=q.split(/[-T:+Z]/g),v=new Date(u[0],u[1]-1,u[2]),w=u[5].split(".");if(v.setHours(u[3],u[4],w[0]),w.length>1&&v.setMilliseconds(w[1]),u[6]&&u[7]){var x=60*u[6]+Number(u[7]),y=/\d\d-\d\d:\d\d$/.test(q)?"-":"+";x=0+("-"==y?-1*x:x),v.setMinutes(v.getMinutes()-x-v.getTimezoneOffset());}else -1!==q.indexOf("Z",q.length-1)&&(v=new Date(Date.UTC(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds())));return v;}function c0(q,u,v){if(U.datetimeAccessFormPaths.length>0){for(var w=v.split(".#")[0],x=0;x<U.datetimeAccessFormPaths.length;x++){var y=U.datetimeAccessFormPaths[x];if("string"==typeof y){if(y==w)break;}else if(y instanceof RegExp){if(y.test(w))break;}else if("function"==typeof y&&y(obj,u,w))break;}return x!=U.datetimeAccessFormPaths.length?d0(q):q;}return q;}function f0(x,y){if(x.nodeType==r0.DOCUMENT_NODE){for(var A=new Object,z=x.childNodes,C=0;C<z.length;C++){var B=z.item(C);if(B.nodeType==r0.ELEMENT_NODE){var E=X(B);A[E]=f0(B,E);}}return A;}if(x.nodeType==r0.ELEMENT_NODE){var A=new Object;A.__cnt=0;for(var z=x.childNodes,C=0;C<z.length;C++){var B=z.item(C),E=X(B);B.nodeType!=r0.COMMENT_NODE&&(A.__cnt++,null==A[E]?(A[E]=f0(B,y+"."+E),e0(A,E,y+"."+E)):(null!=A[E]&&(A[E] instanceof Array||(A[E]=[A[E]],e0(A,E,y+"."+E))),A[E][A[E].length]=f0(B,y+"."+E)));}for(var G=31536e3,F=2592e3,D=86400,H=3600,L=60,I=60,K=1e3,M=/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,J=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,O=/^[-+]?[0-9]+[.]?[0-9]*$/,N=[{type:"duration",test:function(q){return M.test(q);},converter:function(q){var u=M.exec(q);return parseFloat(u[2]||0)*G+parseFloat(u[3]||0)*F+parseFloat(u[4]||0)*D+parseFloat(u[5]||0)*H+parseFloat(u[6]||0)*L+parseFloat(u[7]||0);}},{type:"datetime",test:function(q){return J.test(q);},converter:function(q){var u,v=J.exec(q);if(u=Date.UTC(parseInt(v[1],10),parseInt(v[2],10)-1,parseInt(v[3],10),parseInt(v[4],10),parseInt(v[5],10),v[6]&&parseInt(v[6],10)||0,v[7]&&parseFloat(v[7])*K||0),v[9]&&v[10]){var w=parseInt(v[9],10)*I+parseInt(v[10],10);u+=("+"===v[8]?-1:1)*w*L*K;}return new Date(u);}},{type:"numeric",test:function(q){return O.test(q);},converter:function(q){return parseFloat(q);}}],P=0;P<x.attributes.length;P++){var R=x.attributes.item(P);A.__cnt++,R.formattedValue=R.value;for(var V=0;V<N.length;V++)N[V].test(R.value)&&(R.formattedValue=N[V].converter(R.value));A[U.attributePrefix+R.name]=R.formattedValue;}var Q=a0(x);return null!=Q&&""!=Q&&(A.__cnt++,A.__prefix=Q),null!=A["#text"]&&(A.__text=A["#text"],A.__text instanceof Array&&(A.__text=A.__text.join("\n")),U.escapeMode&&(A.__text=W(A.__text)),U.stripWhitespaces&&(A.__text=A.__text.trim()),delete  A["#text"],"property"==U.arrayAccessForm&&delete  A["#text_asArray"],A.__text=c0(A.__text,E,y+"."+E)),null!=A["#cdata-section"]&&(A.__cdata=A["#cdata-section"],delete  A["#cdata-section"],"property"==U.arrayAccessForm&&delete  A["#cdata-section_asArray"]),1==A.__cnt&&null!=A.__text?A=A.__text:0==A.__cnt&&"text"==U.emptyNodeForm?A="":A.__cnt>1&&null!=A.__text&&U.skipEmptyTextNodesForObj&&(U.stripWhitespaces&&""==A.__text||""==A.__text.trim())&&delete  A.__text,delete  A.__cnt,!U.enableToStringFunc||null==A.__text&&null==A.__cdata||(A.toString=function(){return (null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"");}),A;}return x.nodeType==r0.TEXT_NODE||x.nodeType==r0.CDATA_SECTION_NODE?x.nodeValue:void 0;}function h0(q,u,v,w){var x="<"+(null!=q&&null!=q.__prefix?q.__prefix+":":"")+u;if(null!=v)for(var y=0;y<v.length;y++){var A=v[y],z=q[A];U.escapeMode&&(z=Z(z)),x+=" "+A.substr(U.attributePrefix.length)+"='"+z+"'";}return x+=w?"/>":">";}function m0(q,u){return "</"+(null!=q.__prefix?q.__prefix+":":"")+u+">";}function k0(q,u){return -1!==q.indexOf(u,q.length-u.length);}function o0(q,u){return "property"==U.arrayAccessForm&&k0(u.toString(),"_asArray")||0==u.toString().indexOf(U.attributePrefix)||0==u.toString().indexOf("__")||q[u] instanceof Function?!0:!1;}function y0(q){var u=0;if(q instanceof Object)for(var v in q)o0(q,v)||u++;return u;}function u0(q){var u=[];if(q instanceof Object)for(var v in q)-1==v.toString().indexOf("__")&&0==v.toString().indexOf(U.attributePrefix)&&u.push(v);return u;}function s0(q){var u="";return null!=q.__cdata&&(u+="<![CDATA["+q.__cdata+"]]>"),null!=q.__text&&(u+=U.escapeMode?Z(q.__text):q.__text),u;}function t0(q){var u="";return q instanceof Object?u+=s0(q):null!=q&&(u+=U.escapeMode?Z(q):q),u;}function A0(q,u,v){var w="";if(0==q.length)w+=h0(q,u,v,!0);else for(var x=0;x<q.length;x++)w+=h0(q[x],u,u0(q[x]),!1),w+=q0(q[x]),w+=m0(q[x],u);return w;}function q0(q){var u="",v=y0(q);if(v>0)for(var w in q)if(!o0(q,w)){var x=q[w],y=u0(x);if(null==x||void 0==x)u+=h0(x,w,y,!0);else if(x instanceof Object)if(x instanceof Array)u+=A0(x,w,y);else if(x instanceof Date)u+=h0(x,w,y,!1),u+=x.toISOString(),u+=m0(x,w);else{var A=y0(x);A>0||null!=x.__text||null!=x.__cdata?(u+=h0(x,w,y,!1),u+=q0(x),u+=m0(x,w)):u+=h0(x,w,y,!0);}else u+=h0(x,w,y,!1),u+=t0(x),u+=m0(x,w);}return u+=t0(q);}var v0="1.1.5";U=U||{},Y(),b0();var r0={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(u){var v=window.ActiveXObject||"ActiveXObject" in window;if(void 0===u)return null;var w;if(window.DOMParser){var x=new window.DOMParser,y=null;if(!v)try{y=x.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI;}catch(q){y=null;}try{w=x.parseFromString(u,"text/xml"),null!=y&&w.getElementsByTagNameNS(y,"parsererror").length>0&&(w=null);}catch(q){w=null;}}else 0==u.indexOf("<?")&&(u=u.substr(u.indexOf("?>")+2)),w=new ActiveXObject("Microsoft.XMLDOM"),w.async="false",w.loadXML(u);return w;},this.asArray=function(q){return q instanceof Array?q:[q];},this.toXmlDateTime=function(q){return q instanceof Date?q.toISOString():"number"==typeof q?new Date(q).toISOString():null;},this.asDateTime=function(q){return "string"==typeof q?d0(q):q;},this.xml2json=function(q){return f0(q);},this.xml_str2json=function(q){var u=this.parseXmlString(q);return null!=u?this.xml2json(u):null;},this.json2xml_str=function(q){return q0(q);},this.json2xml=function(q){var u=this.json2xml_str(q);return this.parseXmlString(u);},this.getVersion=function(){return v0;};}function ObjectIron(E){var G;for(G=[],i=0,len=E.length;i<len;i+=1)G.push(E[i].isRoot?"root":E[i].name);var F=function(q,u){var v;if(null!==q&&null!==u)for(v in q)q.hasOwnProperty(v)&&(u.hasOwnProperty(v)||(u[v]=q[v]));},D=function(q,u,v){var w,x,y,A,z;if(null!==q&&0!==q.length)for(w=0,x=q.length;x>w;w+=1)y=q[w],u.hasOwnProperty(y.name)&&(v.hasOwnProperty(y.name)?y.merge&&(A=u[y.name],z=v[y.name],"object"==typeof A&&"object"==typeof z?F(A,z):v[y.name]=null!=y.mergeFunction?y.mergeFunction(A,z):A+z):v[y.name]=u[y.name]);},H=function(q,u){var v,w,x,y,A,z,C,B=q;if(null!==B.children&&0!==B.children.length)for(v=0,w=B.children.length;w>v;v+=1)if(z=B.children[v],u.hasOwnProperty(z.name))if(z.isArray)for(A=u[z.name+"_asArray"],x=0,y=A.length;y>x;x+=1)C=A[x],D(B.properties,u,C),H(z,C);else C=u[z.name],D(B.properties,u,C),H(z,C);},L=function(q){var u,v,w,x,y,A,z;if(null===q)return q;if("object"!=typeof q)return q;for(u=0,v=G.length;v>u;u+=1)"root"===G[u]&&(y=E[u],A=q,H(y,A));for(x in q)if(q.hasOwnProperty(x)){if(w=G.indexOf(x),-1!==w)if(y=E[w],y.isArray)for(z=q[x+"_asArray"],u=0,v=z.length;v>u;u+=1)A=z[u],H(y,A);else A=q[x],H(y,A);L(q[x]);}return q;};return {run:L};}function intTobitArray(q,u){for(var v=[],w=0;u>w;w++)v.push((q&Math.pow(2,w))>0);return v;}if(function(F){var D,H=0,L=F.MediaSource||F.WebKitMediaSource||{},I=F.URL||{},K=/video\/flv(;\s*codecs=["']vp6,aac["'])?$/,M="blob:vjs-media-source/";D=function(){},D.prototype.init=function(){this.listeners=[];},D.prototype.addEventListener=function(q,u){this.listeners[q]||(this.listeners[q]=[]),this.listeners[q].unshift(u);},D.prototype.removeEventListener=function(q,u){for(var v=this.listeners[q],w=v.length;w--;)if(v[w]===u)return v.splice(w,1);},D.prototype.trigger=function(q){for(var u=this.listeners[q.type]||[],v=u.length;v--;)u[v](q);},videojs.MediaSource=function(){var u=this;videojs.MediaSource.prototype.init.call(this),this.sourceBuffers=[],this.readyState="closed",this.listeners={sourceopen:[function(q){u.swfObj=document.getElementById(q.swfId),u.readyState="open",u.swfObj&&u.swfObj.vjs_load();}],webkitsourceopen:[function(){u.trigger({type:"sourceopen"});}]};},videojs.MediaSource.prototype=new D,videojs.MediaSource.BYTES_PER_SECOND_GOAL=4194304,videojs.MediaSource.TICKS_PER_SECOND=60,videojs.MediaSource.prototype.addSourceBuffer=function(q){var u;if(K.test(q))u=new videojs.SourceBuffer(this);else{if(!this.nativeSource)throw  new Error("NotSupportedError (Video.js)");u=this.nativeSource.addSourceBuffer.apply(this.nativeSource,arguments);}return this.sourceBuffers.push(u),u;},videojs.MediaSource.prototype.endOfStream=function(){this.readyState="ended";},videojs.mediaSources={},videojs.MediaSource.open=function(q,u){var v=videojs.mediaSources[q];if(!v)throw  new Error("Media Source not found (Video.js)");v.trigger({type:"sourceopen",swfId:u});},videojs.SourceBuffer=function(A){var z=this,C=[],B=0,E=function(q){F.setTimeout(q,Math.ceil(1e3/videojs.MediaSource.TICKS_PER_SECOND));},G=function(){var q,u,v,w,x,y="";if(C.length){for(x=document.hidden?videojs.MediaSource.BYTES_PER_SECOND_GOAL:Math.ceil(videojs.MediaSource.BYTES_PER_SECOND_GOAL/videojs.MediaSource.TICKS_PER_SECOND),w=new Uint8Array(Math.min(x,B)),u=w.byteLength;u;)q=C[0].subarray(0,u),w.set(q,w.byteLength-u),q.byteLength<C[0].byteLength?C[0]=C[0].subarray(u):C.shift(),u-=q.byteLength;for(B-=w.byteLength,u=0,v=w.byteLength;v>u;u++)y+=String.fromCharCode(w[u]);b64str=F.btoa(y),z.source.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+b64str+"</string></arguments></invoke>"),0!==B?E(G):"ended"===z.source.readyState&&z.source.swfObj.vjs_endOfStream();}};videojs.SourceBuffer.prototype.init.call(this),this.source=A,this.appendBuffer=function(q){0===C.length&&E(G),this.source.readyState="open",this.trigger({type:"update"}),C.push(q),B+=q.byteLength;},this.abort=function(){C=[],B=0,this.source.swfObj.vjs_abort();};},videojs.SourceBuffer.prototype=new D,videojs.URL={createObjectURL:function(q){var u=M+H;return H++,videojs.mediaSources[u]=q,u;}},videojs.plugin("mediaSource",function(){var x=this;x.on("loadstart",function(){var u,v=x.currentSrc(),w=function(q){u.trigger(q);};"Html5"===x.techName&&0===v.indexOf(M)&&(u=videojs.mediaSources[v],u.nativeUrl||(u.nativeSource=new L,u.nativeSource.addEventListener("sourceopen",w,!1),u.nativeSource.addEventListener("webkitsourceopen",w,!1),u.nativeUrl=I.createObjectURL(u.nativeSource)),x.src(u.nativeUrl));});});}(this),function(I,K,M,J){"use strict";var O,N,P,R=1.1,V=500;N=function(q){return q.retries&&q.retries>=2;},K.Hls=K.Flash.extend({init:function(q,u,v){var w=u.source,x=q.options();q.hls=this,delete  u.source,u.swf=x.flash.swf,K.Flash.call(this,q,u,v),u.source=w,this.bytesReceived=0,this.currentTime=K.Hls.prototype.currentTime,this.setCurrentTime=K.Hls.prototype.setCurrentTime,this.segmentBuffer_=[],this.startCheckingBuffer_(),K.Hls.prototype.src.call(this,u.source&&u.source.src);}}),K.options.techOrder.unshift("hls"),K.Hls.GOAL_BUFFER_LENGTH=30,K.Hls.prototype.src=function(C){var B,E,G,F=this,D=this.player(),H=D.options().hls||{};C&&(this.src_&&this.resetSrc_(),this.src_=C,B=new K.MediaSource,G={src:K.URL.createObjectURL(B),type:"video/flv"},this.mediaSource=B,this.segmentBuffer_=[],this.segmentParser_=new K.Hls.SegmentParser,function(){var y,A=F.segmentParser_.metadataStream;F.player().addTextTrack&&A.on("data",function(q){var u,v,w,x;if(!y)for(y=F.player().addTextTrack("metadata","Timed Metadata"),y.inBandMetadataTrackDispatchType=K.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16).toUpperCase(),u=0;u<A.descriptor.length;u++)x=("00"+A.descriptor[u].toString(16).toUpperCase()).slice(-2),y.inBandMetadataTrackDispatchType+=x;for(u=0;u<q.frames.length;u++)v=q.frames[u],w=q.pts/1e3,y.addCue(new I.VTTCue(w,w,v.value||v.url));});}(),this.mediaSource.addEventListener("sourceopen",K.bind(this,this.handleSourceOpen)),this.playlists&&this.playlists.dispose(),this.mediaIndex=0,this.playlists=new K.Hls.PlaylistLoader(this.src_,H.withCredentials),this.playlists.on("loadedmetadata",K.bind(this,function(){var q,u,v,w,x,y,A,z;A=function(){this.fillBuffer(),D.trigger("loadedmetadata");},E=this.playlists.media(),this.bandwidth===J&&this.setBandwidth({bandwidth:5*this.playlists.bandwidth}),1/0===this.duration()&&0===this.mediaIndex&&(this.mediaIndex=K.Hls.getMediaIndexForLive_(E)),q=this.selectPlaylist(),v=E.attributes&&E.attributes.BANDWIDTH||0,w=q.attributes&&q.attributes.BANDWIDTH||0,x=E.segments&&E.segments[this.mediaIndex].duration||E.targetDuration,y=x*w/this.bandwidth,y||(y=1/0),z=10,w>v&&z>=y?(this.playlists.media(q),u=K.bind(this,function(){A.call(this),this.playlists.off("loadedplaylist",u);}),this.playlists.on("loadedplaylist",u)):A.call(this);})),this.playlists.on("error",K.bind(this,function(){D.error(this.playlists.error);})),this.playlists.on("loadedplaylist",K.bind(this,function(){var q=this.playlists.media();q&&(this.updateDuration(this.playlists.media()),this.mediaIndex=K.Hls.translateMediaIndex(this.mediaIndex,E,q),E=q,this.fetchKeys_());})),this.playlists.on("mediachange",K.bind(this,function(){O&&this.cancelKeyXhr(),D.trigger("mediachange");})),this.player().ready(function(){F.el()&&F.el().vjs_src(G.src);}));},K.Hls.getMediaIndexForLive_=function(q){if(!q.segments)return 0;for(var u=q.segments.length,v=0,w=3*(q.targetDuration||10);w>v&&u>0;)v+=q.segments[u-1].duration,u--;return u;},K.Hls.prototype.handleSourceOpen=function(){var q=this.player(),u=this.mediaSource.addSourceBuffer('video/flv; codecs="vp6,aac"');this.sourceBuffer=u,u.appendBuffer(this.segmentParser_.getFlvHeader()),q.options().autoplay&&q.play();},K.Hls.prototype.play=function(){return this.ended()&&(this.mediaIndex=0),1/0===this.duration()&&this.playlists.media()&&null!=this.playbackRate()&&(this.mediaIndex=K.Hls.getMediaIndexForLive_(this.playlists.media()),this.setCurrentTime(this.getCurrentTimeByMediaIndex_(this.playlists.media(),this.mediaIndex))),K.Flash.prototype.play.apply(this,arguments);},K.Hls.prototype.currentTime=function(){return this.lastSeekedTime_?this.lastSeekedTime_:this.el()&&this.el().vjs_getProperty?this.el().vjs_getProperty("currentTime"):0;},K.Hls.prototype.setCurrentTime=function(q){return this.playlists&&this.playlists.media()?(this.lastSeekedTime_=q,this.mediaIndex=K.Hls.getMediaIndexByTime(this.playlists.media(),q),this.sourceBuffer.abort(),this.cancelSegmentXhr(),O&&(O.aborted=!0,this.cancelKeyXhr()),this.segmentBuffer_=[],void this.fillBuffer(1e3*q)):0;},K.Hls.prototype.duration=function(){var q=this.playlists;return q?K.Hls.getPlaylistTotalDuration(q.media()):0;},K.Hls.prototype.updateDuration=function(q){var u=this.player(),v=u.duration(),w=K.Hls.getPlaylistTotalDuration(q);v!==w&&u.trigger("durationchange");},K.Hls.prototype.resetSrc_=function(){if(this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&this.sourceBuffer.abort(),this.mediaSource){var q,u,v,w,x=this.mediaSource.listeners;for(q in x){u=x[q];for(w in u)v=u[w],this.mediaSource.removeEventListener(q,v);}}},K.Hls.prototype.cancelKeyXhr=function(){O&&(O.onreadystatechange=null,O.abort(),O=null);},K.Hls.prototype.cancelSegmentXhr=function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null);},K.Hls.prototype.dispose=function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),K.Flash.prototype.dispose.call(this);},K.Hls.prototype.selectPlaylist=function(){var q,u,v,w,x,y,A=this.player(),z=this.playlists.master.playlists.slice(),C=[],B=z.length;for(z.sort(K.Hls.comparePlaylistBandwidth);B--;)u=z[B],u.attributes&&u.attributes.BANDWIDTH&&(q=u.attributes.BANDWIDTH*R,q<A.hls.bandwidth&&(C.push(u),w||(w=u)));for(B=C.length,C.sort(K.Hls.comparePlaylistResolution),u=null;B--;)if(v=u,u=C[B],u.attributes&&u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&u.attributes.RESOLUTION.height){if(u.attributes.RESOLUTION.width===A.width()&&u.attributes.RESOLUTION.height===A.height()){x=null,y=u;break;}if(u.attributes.RESOLUTION.width<A.width()&&u.attributes.RESOLUTION.height<A.height()){v&&v.attributes&&v.attributes.RESOLUTION&&v.attributes.RESOLUTION.width&&v.attributes.RESOLUTION.height&&(x=v),y=u;break;}}return x||y||w||z[0];},K.Hls.prototype.checkBuffer_=function(){this.checkBufferTimeout_&&(I.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=I.setTimeout(K.bind(this,this.checkBuffer_),V);},K.Hls.prototype.startCheckingBuffer_=function(){this.player().on("waiting",K.bind(this,this.drainBuffer)),this.checkBuffer_();},K.Hls.prototype.stopCheckingBuffer_=function(){I.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null,this.player().off("waiting",this.drainBuffer);},K.Hls.prototype.fillBuffer=function(q){var u,v,w=this.player(),x=w.buffered(),y=0;w.currentSrc()&&this.playlists&&(this.segmentXhr_||"HAVE_NOTHING"!==this.playlists.state&&this.playlists.media()&&this.playlists.media().segments&&(u=this.playlists.media().segments[this.mediaIndex],u&&(x&&(y=w.buffered().end(0)-w.currentTime()),"number"!=typeof q&&y>=K.Hls.GOAL_BUFFER_LENGTH||(v=this.playlistUriToUrl(u.uri),this.loadSegment(v,q)))));},K.Hls.prototype.playlistUriToUrl=function(q){var u;return u=this.playlists.media().uri===this.src_?P(this.src_,q):P(P(this.src_,this.playlists.media().uri||""),q);},K.Hls.prototype.setBandwidth=function(q){var u=this;u.segmentXhrTime=q.roundTripTime,u.bandwidth=q.bandwidth,u.bytesReceived+=q.bytesReceived||0,u.trigger("bandwidthupdate");},K.Hls.prototype.loadSegment=function(w,x){var y=this,A=this.player(),z=A.options().hls||{};this.segmentXhr_=K.Hls.xhr({url:w,responseType:"arraybuffer",withCredentials:z.withCredentials},function(q,u){var v;return y.segmentXhr_=null,q?"timeout"===q?(y.bandwidth=1,y.playlists.media(y.selectPlaylist())):(y.error={status:this.status,message:"HLS segment request error at URL: "+u,code:this.status>=500?4:2},void y.mediaIndex++):void (this.response&&(y.setBandwidth(this),v={mediaIndex:y.mediaIndex,playlist:y.playlists.media(),offset:x,bytes:null,encryptedBytes:null,decrypter:null},v.playlist.segments[v.mediaIndex].key?v.encryptedBytes=new Uint8Array(this.response):v.bytes=new Uint8Array(this.response),y.segmentBuffer_.push(v),A.trigger("progress"),y.drainBuffer(),y.mediaIndex++,y.playlists.media(y.selectPlaylist())));});},K.Hls.prototype.drainBuffer=function(v){var w,x,y,A,z,C,B,E,G,F,D,H=0,L=this.segmentBuffer_;if(L.length&&this.sourceBuffer){if(w=L[0],x=w.mediaIndex,y=w.playlist,A=w.offset,C=w.bytes,B=y.segments[x],B.key&&!C)return N(B.key)?L.shift():B.key.bytes?w.decrypter?void 0:(G=B.key.iv||new Uint32Array([0,0,0,x+y.mediaSequence]),E=new K.Hls.Decrypter(w.encryptedBytes,B.key.bytes,G,function(q,u){w.bytes=u;}),void (w.decrypter=E)):this.fetchKeys_();for(v=v||{},D=1e3*K.Hls.getPlaylistDuration(y,0,x),this.segmentParser_.parseSegmentBinaryData(C),this.segmentParser_.flushTags(),z=[];this.segmentParser_.tagsAvailable();)z.push(this.segmentParser_.getNextTag());if("number"==typeof A){for(F=A-D+z[0].pts;z[H].pts<F;)H++;this.el().vjs_setProperty("currentTime",.001*(z[H].pts-z[0].pts+D)),z=z.slice(H),this.lastSeekedTime_=null;}for(B.discontinuity&&z.length&&this.el().vjs_discontinuity(),H=0;H<z.length;H++)this.sourceBuffer.appendBuffer(z[H].bytes,this.player());L.shift(),1/0!==this.duration()&&x+1===y.segments.length&&this.mediaSource.endOfStream();}},K.Hls.prototype.fetchKeys_=function(){var v,w,x,y,A,z,C,B;if(!O&&this.segmentBuffer_.length)for(x=this,y=this.player(),A=y.options().hls||{},B=function(u){return function(q){return O=null,q||!this.response||16!==this.response.byteLength?(u.retries=u.retries||0,u.retries++,void (this.aborted||x.fetchKeys_())):(C=new DataView(this.response),u.bytes=new Uint32Array([C.getUint32(0),C.getUint32(4),C.getUint32(8),C.getUint32(12)]),void x.checkBuffer_());};},v=0;v<x.segmentBuffer_.length;v++)if(z=x.segmentBuffer_[v].playlist.segments[x.segmentBuffer_[v].mediaIndex],w=z.key,w&&!w.bytes&&!N(w)){O=K.Hls.xhr({url:this.playlistUriToUrl(w.uri),responseType:"arraybuffer",withCredentials:A.withCredentials},B(w));break;}},K.Hls.supportsNativeHls=function(){var q,u,v=M.createElement("video");return K.Html5.isSupported()?(q=v.canPlayType("application/x-mpegURL"),u=v.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(q)||/probably|maybe/.test(u)):!1;}(),K.Hls.isSupported=function(){return (!K.Hls.supportsNativeHls||1)&&K.Flash.isSupported()&&K.MediaSource&&I.Uint8Array;},K.Hls.canPlaySource=function(q){var u=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return u.test(q.type);},K.Hls.getPlaylistDuration=function(q,u,v){var w,x,y=0;for(u=u||0,v=v!==J?v:(q.segments||[]).length,x=v-1;x>=u;x--)w=q.segments[x],y+=(w.duration!==J?w.duration:q.targetDuration)||0;return y;},K.Hls.getPlaylistTotalDuration=function(q){return q?q.totalDuration?q.totalDuration:q.endList?K.Hls.getPlaylistDuration(q):I.Infinity:0;},K.Hls.translateMediaIndex=function(q,u,v){var w;return 0===q?0:v&&v.segments?(w=q+(u.mediaSequence-v.mediaSequence),w>=v.segments.length||0>w?K.Hls.getMediaIndexForLive_(v)+1:w):0;},K.Hls.getMediaIndexByTime=function(q,u){var v,w,x,y;for(x=[],v=0;v<q.segments.length;v++)y={},y.start=0===v?0:x[v-1].end,y.end=y.start+q.segments[v].duration,x.push(y);for(w=0;w<x.length;w++)if(u>=x[w].start&&u<x[w].end)return w;return -1;},K.Hls.prototype.getCurrentTimeByMediaIndex_=function(q,u){var v,w=0;if(!q.segments||0===u)return 0;for(v=0;u>v;v++)w+=q.segments[v].duration;return w;},K.Hls.comparePlaylistBandwidth=function(q,u){var v,w;return q.attributes&&q.attributes.BANDWIDTH&&(v=q.attributes.BANDWIDTH),v=v||I.Number.MAX_VALUE,u.attributes&&u.attributes.BANDWIDTH&&(w=u.attributes.BANDWIDTH),w=w||I.Number.MAX_VALUE,v-w;},K.Hls.comparePlaylistResolution=function(q,u){var v,w;return q.attributes&&q.attributes.RESOLUTION&&q.attributes.RESOLUTION.width&&(v=q.attributes.RESOLUTION.width),v=v||I.Number.MAX_VALUE,u.attributes&&u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(w=u.attributes.RESOLUTION.width),w=w||I.Number.MAX_VALUE,v===w&&q.attributes.BANDWIDTH&&u.attributes.BANDWIDTH?q.attributes.BANDWIDTH-u.attributes.BANDWIDTH:v-w;},P=K.Hls.resolveUrl=function(q,u){var v,w,x=M.querySelector("base"),y=M.querySelector("head"),A=M.createElement("a"),z=x;return x?v=x.href:z=y.appendChild(M.createElement("base")),z.href=q,A.href=u,w=A.href,x?x.href=v:y.removeChild(z),w;};}(window,window.videojs,document),function(y){y.Hls.xhr=function(q,u){var v,w,x={method:"GET",timeout:45e3};return "function"!=typeof u&&(u=function(){}),"object"==typeof q&&(x=y.util.mergeOptions(x,q),q=x.url),v=new window.XMLHttpRequest,v.open(x.method,q),v.url=q,v.requestTime=(new Date).getTime(),x.responseType&&(v.responseType=x.responseType),x.withCredentials&&(v.withCredentials=!0),x.timeout&&(w=window.setTimeout(function(){4!==v.readyState&&(v.timedout=!0,v.abort());},x.timeout)),v.onreadystatechange=function(){return 4===this.readyState?(window.clearTimeout(w),v.timedout?u.call(this,"timeout",q):this.status>=400||0===this.status?u.call(this,!0,q):(this.response&&(this.responseTime=(new Date).getTime(),this.roundTripTime=this.responseTime-this.requestTime,this.bytesReceived=this.response.byteLength||this.response.length,this.bandwidth=Math.floor(this.bytesReceived/this.roundTripTime*8*1e3)),u.call(this,!1,q))):void 0;},v.send(null),v;};}(window.videojs),function(D){D.videojs=D.videojs||{},D.videojs.Hls=D.videojs.Hls||{};var H=D.videojs.Hls;H.FlvTag=function(y,A){var z,C=0,B=function(q,u){var v,w=q.position+u;w<q.bytes.byteLength||(v=new Uint8Array(2*w),v.set(q.bytes.subarray(0,q.position),0),q.bytes=v,q.view=new DataView(q.bytes.buffer));},E=H.FlvTag.widthBytes||new Uint8Array("width".length),G=H.FlvTag.heightBytes||new Uint8Array("height".length),F=H.FlvTag.videocodecidBytes||new Uint8Array("videocodecid".length);if(!H.FlvTag.widthBytes){for(z=0;z<"width".length;z++)E[z]="width".charCodeAt(z);for(z=0;z<"height".length;z++)G[z]="height".charCodeAt(z);for(z=0;z<"videocodecid".length;z++)F[z]="videocodecid".charCodeAt(z);H.FlvTag.widthBytes=E,H.FlvTag.heightBytes=G,H.FlvTag.videocodecidBytes=F;}switch(this.keyFrame=!1,y){case H.FlvTag.VIDEO_TAG:this.length=16;break;case H.FlvTag.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case H.FlvTag.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw "Error Unknown TagType";}this.bytes=new Uint8Array(16384),this.view=new DataView(this.bytes.buffer),this.bytes[0]=y,this.position=this.length,this.keyFrame=A,this.pts=0,this.dts=0,this.writeBytes=function(q,u,v){var w,x=u||0;v=v||q.byteLength,w=x+v,B(this,v),this.bytes.set(q.subarray(x,w),this.position),this.position+=v,this.length=Math.max(this.length,this.position);},this.writeByte=function(q){B(this,1),this.bytes[this.position]=q,this.position++,this.length=Math.max(this.length,this.position);},this.writeShort=function(q){B(this,2),this.view.setUint16(this.position,q),this.position+=2,this.length=Math.max(this.length,this.position);},this.negIndex=function(q){return this.bytes[this.length-q];},this.nalUnitSize=function(){return 0===C?0:this.length-(C+4);},this.startNalUnit=function(){if(C>0)throw  new Error("Attempted to create new NAL wihout closing the old one");C=this.length,this.length+=4,this.position=this.length;},this.endNalUnit=function(q){var u,v;this.length===C+4?this.length-=4:C>0&&(u=C+4,v=this.length-u,this.position=C,this.view.setUint32(this.position,v),this.position=this.length,q&&q.push(this.bytes.subarray(u,u+v))),C=0;},this.writeMetaDataDouble=function(q,u){var v;if(B(this,2+q.length+9),this.view.setUint16(this.position,q.length),this.position+=2,"width"===q)this.bytes.set(E,this.position),this.position+=5;else if("height"===q)this.bytes.set(G,this.position),this.position+=6;else if("videocodecid"===q)this.bytes.set(F,this.position),this.position+=12;else for(v=0;v<q.length;v++)this.bytes[this.position]=q.charCodeAt(v),this.position++;this.position++,this.view.setFloat64(this.position,u),this.position+=8,this.length=Math.max(this.length,this.position),++C;},this.writeMetaDataBoolean=function(q,u){var v;for(B(this,2),this.view.setUint16(this.position,q.length),this.position+=2,v=0;v<q.length;v++)console.assert(q.charCodeAt(v)<255),B(this,1),this.bytes[this.position]=q.charCodeAt(v),this.position++;B(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,u?1:0),this.position++,this.length=Math.max(this.length,this.position),++C;},this.finalize=function(){var q,u;switch(this.bytes[0]){case H.FlvTag.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||A?16:32),this.bytes[12]=A?0:1,q=this.pts-this.dts,this.bytes[13]=(16711680&q)>>>16,this.bytes[14]=(65280&q)>>>8,this.bytes[15]=(255&q)>>>0;break;case H.FlvTag.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=A?0:1;break;case H.FlvTag.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,C),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position;}return u=this.length-11,this.bytes[1]=(16711680&u)>>>16,this.bytes[2]=(65280&u)>>>8,this.bytes[3]=(255&u)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,B(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=H.FlvTag.frameTime(this.bytes),console.assert(this.bytes.byteLength===this.length),this;};},H.FlvTag.AUDIO_TAG=8,H.FlvTag.VIDEO_TAG=9,H.FlvTag.METADATA_TAG=18,H.FlvTag.isAudioFrame=function(q){return H.FlvTag.AUDIO_TAG===q[0];},H.FlvTag.isVideoFrame=function(q){return H.FlvTag.VIDEO_TAG===q[0];},H.FlvTag.isMetaData=function(q){return H.FlvTag.METADATA_TAG===q[0];},H.FlvTag.isKeyFrame=function(q){return H.FlvTag.isVideoFrame(q)?23===q[11]:H.FlvTag.isAudioFrame(q)?!0:H.FlvTag.isMetaData(q)?!0:!1;},H.FlvTag.frameTime=function(q){var u=q[4]<<16;return u|=q[5]<<8,u|=q[6]<<0,u|=q[7]<<24;};}(this),function(A){var z=function(){this.init=function(){var y={};this.on=function(q,u){y[q]||(y[q]=[]),y[q].push(u);},this.off=function(q,u){var v;return y[q]?(v=y[q].indexOf(u),y[q].splice(v,1),v>-1):!1;},this.trigger=function(q){var u,v,w,x;if(u=y[q])for(x=Array.prototype.slice.call(arguments,1),w=u.length,v=0;w>v;++v)u[v].apply(this,x);},this.dispose=function(){y={};};};};z.prototype.pipe=function(u){this.on("data",function(q){u.push(q);});},A.Hls.Stream=z;}(window.videojs),function(z){z.videojs.Hls.ExpGolomb=function(w){var x=w.byteLength,y=0,A=0;this.length=function(){return 8*x;},this.bitsAvailable=function(){return 8*x+A;},this.loadWord=function(){var q=w.byteLength-x,u=new Uint8Array(4),v=Math.min(4,x);if(0===v)throw  new Error("no bytes available");u.set(w.subarray(q,q+v)),y=new DataView(u.buffer).getUint32(0),A=8*v,x-=v;},this.skipBits=function(q){var u;A>q?(y<<=q,A-=q):(q-=A,u=q/8,q-=8*u,x-=u,this.loadWord(),y<<=q,A-=q);},this.readBits=function(q){var u=Math.min(A,q),v=y>>>32-u;return console.assert(32>q,"Cannot read more than 32 bits at a time"),A-=u,A>0?y<<=u:x>0&&this.loadWord(),u=q-u,u>0?v<<u|this.readBits(u):v;},this.skipLeadingZeros=function(){var q;for(q=0;A>q;++q)if(0!==(y&2147483648>>>q))return y<<=q,A-=q,q;return this.loadWord(),q+this.skipLeadingZeros();},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());},this.readUnsignedExpGolomb=function(){var q=this.skipLeadingZeros();return this.readBits(q+1)-1;},this.readExpGolomb=function(){var q=this.readUnsignedExpGolomb();return 1&q?1+q>>>1:-1*(q>>>1);},this.readBoolean=function(){return 1===this.readBits(1);},this.readUnsignedByte=function(){return this.readBits(8);},this.loadWord();};}(this),function(J){var O,N=J.videojs.Hls.ExpGolomb,P=J.videojs.Hls.FlvTag,R=function(){this.sps=[],this.pps=[],this.extraDataExists=function(){return this.sps.length>0;},this.scaling_list=function(q,u){var v,w,x=8,y=8;for(v=0;q>v;++v)0!==y&&(w=u.readExpGolomb(),y=(x+w+256)%256),x=0===y?x:y;},this.getSps0Rbsp=function(){for(var q=this.sps[0],u=1,v=1,w=0,x=q.byteLength-2,y=new Uint8Array(q.byteLength);x>u;)0===q[u]&&0===q[u+1]&&3===q[u+2]&&(y.set(q.subarray(v,u+1),w),w+=u+1-v,v=u+3),u++;return y.set(q.subarray(v),w),y.subarray(0,w+(q.byteLength-v));},this.metaDataTag=function(q){var u,v,w,x,y,A,z,C,B,E,G,F,D,H=new P(P.METADATA_TAG),L=0,I=0,K=0,M=0;if(H.dts=q,H.pts=q,u=new N(this.getSps0Rbsp()),v=u.readUnsignedByte(),u.skipBits(16),u.skipUnsignedExpGolomb(),(100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v)&&(w=u.readUnsignedExpGolomb(),3===w&&u.skipBits(1),u.skipUnsignedExpGolomb(),u.skipUnsignedExpGolomb(),u.skipBits(1),u.readBoolean()))for(x=3!==w?8:12,y=0;x>y;++y)u.readBoolean()&&(6>y?this.scaling_list(16,u):this.scaling_list(64,u));if(u.skipUnsignedExpGolomb(),A=u.readUnsignedExpGolomb(),0===A)u.readUnsignedExpGolomb();else if(1===A)for(u.skipBits(1),u.skipExpGolomb(),u.skipExpGolomb(),z=u.readUnsignedExpGolomb(),y=0;z>y;++y)u.skipExpGolomb();return u.skipUnsignedExpGolomb(),u.skipBits(1),C=u.readUnsignedExpGolomb(),B=u.readUnsignedExpGolomb(),E=u.readBits(1),0===E&&u.skipBits(1),u.skipBits(1),G=u.readBoolean(),G&&(L=u.readUnsignedExpGolomb(),I=u.readUnsignedExpGolomb(),K=u.readUnsignedExpGolomb(),M=u.readUnsignedExpGolomb()),F=16*(C+1)-2*L-2*I,D=(2-E)*(B+1)*16-2*K-2*M,H.writeMetaDataDouble("videocodecid",7),H.writeMetaDataDouble("width",F),H.writeMetaDataDouble("height",D),H;},this.extraDataTag=function(q){var u,v=new P(P.VIDEO_TAG,!0);for(v.dts=q,v.pts=q,v.writeByte(1),v.writeByte(this.sps[0][1]),v.writeByte(this.sps[0][2]),v.writeByte(this.sps[0][3]),v.writeByte(255),v.writeByte(225),v.writeShort(this.sps[0].length),v.writeBytes(this.sps[0]),v.writeByte(this.pps.length),u=0;u<this.pps.length;++u)v.writeShort(this.pps[u].length),v.writeBytes(this.pps[u]);return v;};};J.videojs.Hls.NALUnitType=O={unspecified:0,slice_layer_without_partitioning_rbsp_non_idr:1,slice_data_partition_a_layer_rbsp:2,slice_data_partition_b_layer_rbsp:3,slice_data_partition_c_layer_rbsp:4,slice_layer_without_partitioning_rbsp_idr:5,sei_rbsp:6,seq_parameter_set_rbsp:7,pic_parameter_set_rbsp:8,access_unit_delimiter_rbsp:9,end_of_seq_rbsp:10,end_of_stream_rbsp:11},J.videojs.Hls.H264Stream=function(){var z,C,B,E,G,F=new R,D=new R,H=-1;this.tags=[],this.setTimeStampOffset=function(q){B=q;},this.setNextTimeStamp=function(q,u,v){z=q-B,C=u-B,v&&this.finishFrame();},this.finishFrame=function(){E&&(D.extraDataExists()&&(F=D,D=new R),E.keyFrame&&(this.tags.push(F.metaDataTag(E.pts)),this.tags.push(F.extraDataTag(E.pts))),E.endNalUnit(),this.tags.push(E)),E=null,H=-1,G=0;},this.writeBytes=function(q,u,v){var w,x,y,A;if(u=u||0,v=v||0,!(0>=v))switch(G){default:case 0:G=1;case 1:if(q[u]<=1&&(w=E?E.nalUnitSize():0,w>=1&&0===E.negIndex(1))){if(1===q[u]&&w>=2&&0===E.negIndex(2))return E.length-=w>=3&&0===E.negIndex(3)?3:2,G=3,this.writeBytes(q,u+1,v-1);if(v>1&&0===q[u]&&1===q[u+1])return E.length-=w>=2&&0===E.negIndex(2)?2:1,G=3,this.writeBytes(q,u+2,v-2);if(v>2&&0===q[u]&&0===q[u+1]&&1===q[u+2])return G=3,this.writeBytes(q,u+3,v-3);}G=2;case 2:for(x=u,y=x+v,A=y-3;A>u;)if(q[u+2]>1)u+=3;else if(0!==q[u+1])u+=2;else if(0!==q[u])u+=1;else{if(1===q[u+2])return u>x&&E.writeBytes(q,x,u-x),G=3,u+=3,this.writeBytes(q,u,y-u);if(y-u>=4&&0===q[u+2]&&1===q[u+3])return u>x&&E.writeBytes(q,x,u-x),G=3,u+=4,this.writeBytes(q,u,y-u);u+=3;}return G=1,void (E&&E.writeBytes(q,x,v));case 3:if(E)switch(H){case O.seq_parameter_set_rbsp:E.endNalUnit(D.sps);break;case O.pic_parameter_set_rbsp:E.endNalUnit(D.pps);break;case O.slice_layer_without_partitioning_rbsp_idr:E.endNalUnit();break;default:E.endNalUnit();}return H=31&q[u],E&&(H===O.access_unit_delimiter_rbsp?this.finishFrame():H===O.slice_layer_without_partitioning_rbsp_idr&&(E.keyFrame=!0)),E||(E=new P(P.VIDEO_TAG),E.pts=z,E.dts=C),E.startNalUnit(),G=2,this.writeBytes(q,u,v);}};};}(this),function(O){var N=O.videojs.Hls.FlvTag,P=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3];O.videojs.Hls.AacStream=function(){var A,z,C,B,E,G,F,D,H,L,I,K,M,J;this.tags=[],this.setTimeStampOffset=function(q){z=q,E=q-1e3;},this.setNextTimeStamp=function(q,u,v){A=q-z,B=u,v&&(C=0);},this.writeBytes=function(q,u,v){var w,x,y;for(u=u||0,v=v||0,v=v>B?B:v,B-=v,w=u+v;w>u;)switch(C){default:C=0;break;case 0:if(u>=w)return ;if(255!==q[u])return console.assert(!1,"Error no ATDS header found"),u+=1,void (C=0);u+=1,C=1;break;case 1:if(u>=w)return ;if(240!==(240&q[u]))return console.assert(!1,"Error no ATDS header found"),u+=1,void (C=0);G=!!(1&q[u]),u+=1,C=2;break;case 2:if(u>=w)return ;F=((192&q[u])>>>6)+1,D=(60&q[u])>>>2,H=(1&q[u])<<2,u+=1,C=3;break;case 3:if(u>=w)return ;H|=(192&q[u])>>>6,L=(3&q[u])<<11,u+=1,C=4;break;case 4:if(u>=w)return ;L|=q[u]<<3,u+=1,C=5;break;case 5:if(u>=w)return ;L|=(224&q[u])>>>5,L-=G?7:9,u+=1,C=6;break;case 6:if(u>=w)return ;I=1024*((3&q[u])+1),K=1e3*I/P[D],x=F<<11|D<<7|H<<3,(x!==J||A-E>=1e3)&&(M=new N(N.METADATA_TAG),M.pts=A,M.dts=A,M.writeMetaDataDouble("audiocodecid",10),M.writeMetaDataBoolean("stereo",2===H),M.writeMetaDataDouble("audiosamplerate",P[D]),M.writeMetaDataDouble("audiosamplesize",16),this.tags.push(M),J=x,M=new N(N.AUDIO_TAG,!0),M.pts=A,M.dts=M.pts,M.view.setUint16(M.position,x),M.position+=2,M.length=Math.max(M.length,M.position),this.tags.push(M),E=A),u+=1,C=7;break;case 7:if(!G){if(2>w-u)return ;u+=2;}M=new N(N.AUDIO_TAG),M.pts=A,M.dts=A,C=8;break;case 8:for(;L;){if(u>=w)return ;y=L>w-u?w-u:L,M.writeBytes(q,u,y),u+=y,L-=y;}this.tags.push(M),C=0,A+=K;}};};}(this),function(C,B){"use strict";var E,G=function(q,u,v){var w,x="";for(w=u;v>w;w++)x+="%"+("00"+q[w].toString(16)).slice(-2);return C.decodeURIComponent(x);},F={TXXX:function(q){var u;if(3===q.data[0])for(u=1;u<q.data.length;u++)if(0===q.data[u]){q.description=G(q.data,1,u),q.value=G(q.data,u+1,q.data.length);break;}},WXXX:function(q){var u;if(3===q.data[0])for(u=1;u<q.data.length;u++)if(0===q.data[u]){q.description=G(q.data,1,u),q.url=G(q.data,u+1,q.data.length);break;}}};E=function(y){var A,z={debug:!(!y||!y.debug),descriptor:y&&y.descriptor};if(E.prototype.init.call(this),this.dispatchType=B.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16),z.descriptor)for(A=0;A<z.descriptor.length;A++)this.dispatchType+=("00"+z.descriptor[A].toString(16)).slice(-2);this.push=function(q){var u,v,w,x;if(q.data.length<10||q.data[0]!=="I".charCodeAt(0)||q.data[1]!=="D".charCodeAt(0)||q.data[2]!=="3".charCodeAt(0))return void (z.debug&&B.log("Skipping unrecognized metadata stream"));u=q.data.byteLength,v=10,64&q.data[5]&&(v+=4,v+=q.data[10]<<24|q.data[11]<<16|q.data[12]<<8|q.data[13],u-=q.data[16]<<24|q.data[17]<<16|q.data[18]<<8|q.data[19]),this.timestampOffset&&(q.pts-=this.timestampOffset,q.dts-=this.timestampOffset),q.frames=[];do {if(w=q.data[v+4]<<24|q.data[v+5]<<16|q.data[v+6]<<8|q.data[v+7],1>w)return B.log("Malformed ID3 frame encountered. Skipping metadata parsing.");x={id:String.fromCharCode(q.data[v])+String.fromCharCode(q.data[v+1])+String.fromCharCode(q.data[v+2])+String.fromCharCode(q.data[v+3]),data:q.data.subarray(v+10,v+w+10)},F[x.id]&&F[x.id](x),q.frames.push(x),v+=10,v+=w;}while(u>v);this.trigger("data",q);};},E.prototype=new B.Hls.Stream,B.Hls.MetadataStream=E;}(window,window.videojs),function(a0){var Z,W,e0=a0.videojs,d0=e0.Hls.FlvTag,c0=e0.Hls.H264Stream,f0=e0.Hls.AacStream,h0=e0.Hls.MetadataStream;e0.Hls.SegmentParser=function(){var N,P,R=this,V=new Uint8Array(Z),Q=0,U=new c0,Y=new f0,b0=!1,X=!1;R.stream={programMapTable:{}},R.metadataStream=new h0,R.getFlvHeader=function(q,u,v){var w,x,y=new Uint8Array(9),A=new DataView(y.buffer);return q=q||0,u=void 0===u?!0:u,v=void 0===v?!0:v,A.setUint8(0,70),A.setUint8(1,76),A.setUint8(2,86),A.setUint8(3,1),A.setUint8(4,(u?4:0)|(v?1:0)),A.setUint32(5,y.byteLength),0>=q?(x=new Uint8Array(y.byteLength+4),x.set(y),x.set([0,0,0,0],y.byteLength),x):(w=new d0(d0.METADATA_TAG),w.pts=w.dts=0,w.writeMetaDataDouble("duration",q),x=new Uint8Array(y.byteLength+w.byteLength),x.set(A),x.set(A.bytesLength,w.finalize()),x);},R.flushTags=function(){U.finishFrame();},R.tagsAvailable=function(){return U.tags.length+Y.tags.length;},R.getNextTag=function(){var q;return q=U.tags.length?Y.tags.length&&Y.tags[0].dts<U.tags[0].dts?Y.tags.shift():U.tags.shift():Y.tags.shift(),q.finalize();},R.parseSegmentBinaryData=function(q){var u,v=0;if(Q>0){if(q.byteLength+Q<Z)return e0.log("data.length + streamBuffer.length < MP2T_PACKET_LENGTH ??"),void V.readBytes(q,q.length,V.length);u=q.subarray(0,Z-Q),V.set(u,Q),N(V),V=new Uint8Array(Z),Q=0;}for(;;){for(;v<q.byteLength&&71!==q[v];)v++;if(q.byteLength-v<Z)return void (q.byteLength-v>0&&(V.set(q.subarray(v),Q),Q+=q.byteLength-v));N(q.subarray(v,v+Z))?v+=Z:(e0.log("error parsing m2ts packet, attempting to re-align"),v++);}},N=function(q){var u,v,w,x,y,A,z,C,B,E,G,F,D,H,L,I=0,K=I+Z,M=!!(64&q[I+1]),J=(31&q[I+1])<<8|q[I+2],O=(48&q[I+3])>>>4;if(I+=4,O>1&&(I+=q[I]+1),0===J){if(M&&(I+=1+q[I]),u=q[I],0!==u&&e0.log("the table_id of the PAT should be 0x00 but was"+u.toString(16)),v=!!(1&q[I+5])){if(w=(15&q[I+1])<<8|q[I+2],I+=8,(w-5-4)/4!==1)throw  new Error("TS has more that 1 program");R.stream.pmtPid=(31&q[I+2])<<8|q[I+3];}}else if(J===R.stream.programMapTable[W.h264]||J===R.stream.programMapTable[W.adts]||J===R.stream.programMapTable[W.metadata]){if(M){if(0!==q[I+0]||0!==q[I+1]||1!==q[I+2])throw  new Error("PES did not begin with start code");x=q[I+4]<<8|q[I+5],y=0!==(4&q[I+6]),A=q[I+7],z=q[I+8],I+=9,192&A&&(C=(14&q[I+0])<<28|(255&q[I+1])<<21|(254&q[I+2])<<13|(255&q[I+3])<<6|(254&q[I+4])>>>2,C/=45,B=C,64&A&&(B=(14&q[I+5])<<28|(255&q[I+6])<<21|(254&q[I+7])<<13|(255&q[I+8])<<6|(254&q[I+9])>>>2,B/=45)),I+=z,R.metadataStream.timestampOffset||(R.metadataStream.timestampOffset=C),J===R.stream.programMapTable[W.h264]?(b0||(b0=!0,void 0===P&&(P=C),U.setTimeStampOffset(P)),U.setNextTimeStamp(C,B,y)):J===R.stream.programMapTable[W.adts]?(X||(X=!0,void 0===P&&(P=C),Y.setTimeStampOffset(P)),Y.setNextTimeStamp(C,x,y)):R.metadataStream.push({pts:C,dts:B,data:q.subarray(I)});}J===R.stream.programMapTable[W.adts]?Y.writeBytes(q,I,K-I):J===R.stream.programMapTable[W.h264]&&U.writeBytes(q,I,K-I);}else if(R.stream.pmtPid===J){if(M&&(I+=1+q[I]),2!==q[I]&&e0.log("The table_id of a PMT should be 0x02 but was "+q[I].toString(16)),E=!!(1&q[I+5]))for(R.stream.programMapTable={},F=(15&q[I+1])<<8|q[I+2],G=(15&q[I+10])<<8|q[I+11],F-=G,F-=13,I+=12+G;F>0;){if(D=q[I+0],H=(31&q[I+1])<<8|q[I+2],D===W.h264&&R.stream.programMapTable[D]&&R.stream.programMapTable[D]!==H)throw  new Error("Program has more than 1 video stream");if(D===W.adts&&R.stream.programMapTable[D]&&R.stream.programMapTable[D]!==H)throw  new Error("Program has more than 1 audio Stream");R.stream.programMapTable[D]=H,L=(15&q[I+3])<<8|q[I+4],D===W.metadata&&(R.metadataStream.descriptor=new Uint8Array(q.subarray(I+5,I+5+L))),I+=5+L,F-=5+L;}}else 17===J||8191===J||e0.log("Unknown PID parsing TS packet: "+J);return !0;},R.getTags=function(){return U.tags;},R.stats={h264Tags:function(){return U.tags.length;},aacTags:function(){return Y.tags.length;}};},e0.Hls.SegmentParser.MP2T_PACKET_LENGTH=Z=188,e0.Hls.SegmentParser.STREAM_TYPES=W={h264:27,adts:15,metadata:21};}(window),function(A,z,C,B,E){var G,F,D,H=function(){},L=function(){var q="[^=]*",u='"[^"]*"|[^,]*',v="(?:"+q+")=(?:"+u+")";return new RegExp("(?:^|,)("+v+")");}(),I=function(q){for(var u,v=q.split(L),w=v.length,x={};w--;)""!==v[w]&&(u=/([^=]*)=(.*)/.exec(v[w]).slice(1),u[0]=u[0].replace(/^\s+|\s+$/g,""),u[1]=u[1].replace(/^\s+|\s+$/g,""),u[1]=u[1].replace(/^['"](.*)['"]$/g,"$1"),x[u[0]]=u[1]);return x;},K=A.Hls.Stream;G=function(){var v="";G.prototype.init.call(this),this.push=function(q){var u;for(v+=q,u=v.indexOf("\n");u>-1;u=v.indexOf("\n"))this.trigger("data",v.substring(0,u)),v=v.substring(u+1);};},G.prototype=new K,F=function(){F.prototype.init.call(this);},F.prototype=new K,F.prototype.push=function(v){var w,x;if(0!==v.length)return "#"!==v[0]?void this.trigger("data",{type:"uri",uri:v}):0!==v.indexOf("#EXT")?void this.trigger("data",{type:"comment",text:v.slice(1)}):(v=v.replace("\r",""),(w=/^#EXTM3U/.exec(v))?void this.trigger("data",{type:"tag",tagType:"m3u"}):(w=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(v))?(x={type:"tag",tagType:"inf"},w[1]&&(x.duration=parseFloat(w[1])),w[2]&&(x.title=w[2]),void this.trigger("data",x)):(w=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(v))?(x={type:"tag",tagType:"targetduration"},w[1]&&(x.duration=z(w[1],10)),void this.trigger("data",x)):(w=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(v))?(x={type:"tag",tagType:"totalduration"},w[1]&&(x.duration=z(w[1],10)),void this.trigger("data",x)):(w=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(v))?(x={type:"tag",tagType:"version"},w[1]&&(x.version=z(w[1],10)),void this.trigger("data",x)):(w=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(v))?(x={type:"tag",tagType:"media-sequence"},w[1]&&(x.number=z(w[1],10)),void this.trigger("data",x)):(w=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(v))?(x={type:"tag",tagType:"playlist-type"},w[1]&&(x.playlistType=w[1]),void this.trigger("data",x)):(w=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(v))?(x={type:"tag",tagType:"byterange"},w[1]&&(x.length=z(w[1],10)),w[2]&&(x.offset=z(w[2],10)),void this.trigger("data",x)):(w=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(v))?(x={type:"tag",tagType:"allow-cache"},w[1]&&(x.allowed=!/NO/.test(w[1])),void this.trigger("data",x)):(w=/^#EXT-X-STREAM-INF:?(.*)$/.exec(v))?(x={type:"tag",tagType:"stream-inf"},w[1]&&(x.attributes=I(w[1]),x.attributes.RESOLUTION&&!function(){var q=x.attributes.RESOLUTION.split("x"),u={};q[0]&&(u.width=z(q[0],10)),q[1]&&(u.height=z(q[1],10)),x.attributes.RESOLUTION=u;}(),x.attributes.BANDWIDTH&&(x.attributes.BANDWIDTH=z(x.attributes.BANDWIDTH,10)),x.attributes["PROGRAM-ID"]&&(x.attributes["PROGRAM-ID"]=z(x.attributes["PROGRAM-ID"],10))),void this.trigger("data",x)):(w=/^#EXT-X-ENDLIST/.exec(v))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(w=/^#EXT-X-DISCONTINUITY/.exec(v))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(w=/^#EXT-X-KEY:?(.*)$/.exec(v))?(x={type:"tag",tagType:"key"},w[1]&&(x.attributes=I(w[1]),x.attributes.IV&&("0x"===x.attributes.IV.substring(0,2)&&(x.attributes.IV=x.attributes.IV.substring(2)),x.attributes.IV=x.attributes.IV.match(/.{8}/g),x.attributes.IV[0]=z(x.attributes.IV[0],16),x.attributes.IV[1]=z(x.attributes.IV[1],16),x.attributes.IV[2]=z(x.attributes.IV[2],16),x.attributes.IV[3]=z(x.attributes.IV[3],16),x.attributes.IV=new Uint32Array(x.attributes.IV))),void this.trigger("data",x)):void this.trigger("data",{type:"tag",data:v.slice(4,v.length)}));},D=function(){var v,w=this,x=[],y={};D.prototype.init.call(this),this.lineStream=new G,this.parseStream=new F,this.lineStream.pipe(this.parseStream),this.manifest={allowCache:!0},this.parseStream.on("data",function(u){({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=u.allowed,"allowed" in u||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0);},byterange:function(){var q={};"length" in u&&(y.byterange=q,q.length=u.length,"offset" in u||(this.trigger("info",{message:"defaulting offset to zero"}),u.offset=0)),"offset" in u&&(y.byterange=q,q.offset=u.offset);},endlist:function(){this.manifest.endList=!0;},inf:function(){"mediaSequence" in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),u.duration>=0&&(y.duration=u.duration),this.manifest.segments=x;},key:function(){return u.attributes?"NONE"===u.attributes.METHOD?void (v=null):u.attributes.URI?(u.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),v={method:u.attributes.METHOD||"AES-128",uri:u.attributes.URI},void (u.attributes.IV!==E&&(v.iv=u.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"});},"media-sequence":function(){return C(u.number)?void (this.manifest.mediaSequence=u.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+u.number});},"playlist-type":function(){return /VOD|EVENT/.test(u.playlistType)?void (this.manifest.playlistType=u.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+u.playlist});},"stream-inf":function(){return this.manifest.playlists=x,u.attributes?(y.attributes||(y.attributes={}),void (y.attributes=B(y.attributes,u.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"});},discontinuity:function(){y.discontinuity=!0;},targetduration:function(){return !C(u.duration)||u.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+u.duration}):void (this.manifest.targetDuration=u.duration);},totalduration:function(){return !C(u.duration)||u.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+u.duration}):void (this.manifest.totalDuration=u.duration);}})[u.tagType]||H).call(w);},uri:function(){y.uri=u.uri,x.push(y),!this.manifest.targetDuration||"duration" in y||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),y.duration=this.manifest.targetDuration),v&&(y.key=v),y={};},comment:function(){}})[u.type].call(w);});},D.prototype=new K,D.prototype.push=function(q){this.lineStream.push(q);},D.prototype.end=function(){this.lineStream.push("\n");},window.videojs.m3u8={LineStream:G,ParseStream:F,Parser:D};}(window.videojs,window.parseInt,window.isFinite,window.videojs.util.mergeOptions),function(H,L){"use strict";var I=L.Hls.resolveUrl,K=L.Hls.xhr,M=function(q,u){var v,w,x=!1,y=L.util.mergeOptions(q,{});for(v=q.playlists.length;v--;)if(w=y.playlists[v],w.uri===u.uri){if(w.segments&&u.segments&&w.segments.length===u.segments.length&&w.mediaSequence===u.mediaSequence)continue;y.playlists[v]=L.util.mergeOptions(w,u),y.playlists[u.uri]=y.playlists[v],x=!0;}return x?y:null;},J=function(A,z){var C,B,E,G,F=this,D=function(q,u,v){var w,x,y;return F.setBandwidth(G||u),G=null,q?(F.error={status:u.status,message:"HLS playlist request error at URL: "+v,responseText:u.responseText,code:u.status>=500?4:2},F.trigger("error")):(F.state="HAVE_METADATA",w=new L.m3u8.Parser,w.push(u.responseText),w.end(),w.manifest.uri=v,y=M(F.master,w.manifest),x=1e3*(w.manifest.targetDuration||10),y?(F.master=y,B=F.master.playlists[v]):x/=2,F.media().endList||(E=H.setTimeout(function(){F.trigger("mediaupdatetimeout");},x)),void F.trigger("loadedplaylist"));};if(J.prototype.init.call(this),!A)throw  new Error("A non-empty playlist URL is required");F.state="HAVE_NOTHING",C=this.dispose,F.dispose=function(){G&&(G.onreadystatechange=null,G.abort(),G=null),H.clearTimeout(E),C.call(this);},F.media=function(u){var v=!1;if(!u)return B;if("HAVE_NOTHING"===F.state||"HAVE_MASTER"===F.state)throw  new Error("Cannot switch media playlist from "+F.state);if("string"==typeof u){if(!F.master.playlists[u])throw  new Error("Unknown playlist URI: "+u);u=F.master.playlists[u];}if(v=u.uri!==B.uri,F.master.playlists[u.uri].endList)return G&&(G.onreadystatechange=null,G.abort(),G=null),F.state="HAVE_METADATA",B=u,void (v&&F.trigger("mediachange"));if(v){if(F.state="SWITCHING_MEDIA",G){if(I(F.master.uri,u.uri)===G.url)return ;G.onreadystatechange=null,G.abort(),G=null;}G=K({url:I(F.master.uri,u.uri),withCredentials:z},function(q){D(q,this,u.uri),F.trigger("mediachange");});}},F.setBandwidth=function(q){F.bandwidth=q.bandwidth;},F.on("mediaupdatetimeout",function(){"HAVE_METADATA"===F.state&&(F.state="HAVE_CURRENT_METADATA",G=K({url:I(F.master.uri,F.media().uri),withCredentials:z},function(q){D(q,this,F.media().uri);}));}),K({url:A,withCredentials:z},function(u){var v,w;if(u)return F.error={status:this.status,message:"HLS playlist request error at URL: "+A,responseText:this.responseText,code:2},F.trigger("error");if(v=new L.m3u8.Parser,v.push(this.responseText),v.end(),F.state="HAVE_MASTER",v.manifest.uri=A,v.manifest.playlists){for(F.master=v.manifest,w=F.master.playlists.length;w--;)F.master.playlists[F.master.playlists[w].uri]=F.master.playlists[w];return G=K({url:I(A,v.manifest.playlists[0].uri),withCredentials:z},function(q){D(q,this,v.manifest.playlists[0].uri),q||F.trigger("loadedmetadata");}),F.trigger("loadedplaylist");}return F.master={uri:H.location.href,playlists:[{uri:A}]},F.master.playlists[A]=F.master.playlists[0],D(null,this,A),F.trigger("loadedmetadata");});};J.prototype=new L.Hls.Stream,L.Hls.PlaylistLoader=J;}(window,window.videojs),function b(A,z,C){function B(v,w){if(!z[v]){if(!A[v]){var x="function"==typeof require&&require;if(!w&&x)return x(v,!0);if(E)return E(v,!0);throw  new Error("Cannot find module '"+v+"'");}var y=z[v]={exports:{}};A[v][0].call(y.exports,function(q){var u=A[v][1][q];return B(u?u:q);},y,y.exports,b,A,z,C);}return z[v].exports;}for(var E="function"==typeof require&&require,G=0;G<C.length;G++)B(C[G]);return B;}({1:[function(u){(function(q){q.window.pkcs7={unpad:u("./unpad")};}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"./unpad":2}],2:[function(u,v){"use strict";v.exports=function(q){return q.subarray(0,q.byteLength-q[q.byteLength-1]);};},{}]},{},[1]),function(R,V,Q){"use strict";var U,Y,b0,X,a0;a0=function(q){return q<<24|(65280&q)<<8|(16711680&q)>>8|q>>>24;},U=function(q){this._precompute();var u,v,w,x,y,A=this._tables[0][4],z=this._tables[1],C=q.length,B=1;if(4!==C&&6!==C&&8!==C)throw  new Error("Invalid aes key size");for(x=q.slice(0),y=[],this._key=[x,y],u=C;4*C+28>u;u++)w=x[u-1],(u%C===0||8===C&&u%C===4)&&(w=A[w>>>24]<<24^A[w>>16&255]<<16^A[w>>8&255]<<8^A[255&w],u%C===0&&(w=w<<8^w>>>24^B<<24,B=B<<1^283*(B>>7))),x[u]=x[u-C]^w;for(v=0;u;v++,u--)w=x[3&v?u:u-4],y[v]=4>=u||4>v?w:z[0][A[w>>>24]]^z[1][A[w>>16&255]]^z[2][A[w>>8&255]]^z[3][A[255&w]];},U.prototype={_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var q,u,v,w,x,y,A,z,C,B=this._tables[0],E=this._tables[1],G=B[4],F=E[4],D=[],H=[];for(q=0;256>q;q++)H[(D[q]=q<<1^283*(q>>7))^q]=q;for(u=v=0;!G[u];u^=w||1,v=H[v]||1)for(A=v^v<<1^v<<2^v<<3^v<<4,A=A>>8^255&A^99,G[u]=A,F[A]=u,y=D[x=D[w=D[u]]],C=16843009*y^65537*x^257*w^16843008*u,z=257*D[A]^16843008*A,q=0;4>q;q++)B[q][u]=z=z<<24^z>>>8,E[q][A]=C=C<<24^C>>>8;for(q=0;5>q;q++)B[q]=B[q].slice(0),E[q]=E[q].slice(0);},decrypt:function(q,u,v,w,x,y){var A,z,C,B,E=this._key[1],G=q^E[0],F=w^E[1],D=v^E[2],H=u^E[3],L=E.length/4-2,I=4,K=this._tables[1],M=K[0],J=K[1],O=K[2],N=K[3],P=K[4];for(B=0;L>B;B++)A=M[G>>>24]^J[F>>16&255]^O[D>>8&255]^N[255&H]^E[I],z=M[F>>>24]^J[D>>16&255]^O[H>>8&255]^N[255&G]^E[I+1],C=M[D>>>24]^J[H>>16&255]^O[G>>8&255]^N[255&F]^E[I+2],H=M[H>>>24]^J[G>>16&255]^O[F>>8&255]^N[255&D]^E[I+3],I+=4,G=A,F=z,D=C;for(B=0;4>B;B++)x[(3&-B)+y]=P[G>>>24]<<24^P[F>>16&255]<<16^P[D>>8&255]<<8^P[255&H]^E[I++],A=G,G=F,F=D,D=H,H=A;}},X=function(q,u,v){var w,x,y,A,z,C,B,E,G,F=new Int32Array(q.buffer,q.byteOffset,q.byteLength>>2),D=new U(Array.prototype.slice.call(u)),H=new Uint8Array(q.byteLength),L=new Int32Array(H.buffer);for(w=v[0],x=v[1],y=v[2],A=v[3],G=0;G<F.length;G+=4)z=a0(F[G]),C=a0(F[G+1]),B=a0(F[G+2]),E=a0(F[G+3]),D.decrypt(z,C,B,E,L,G),L[G]=a0(L[G]^w),L[G+1]=a0(L[G+1]^x),L[G+2]=a0(L[G+2]^y),L[G+3]=a0(L[G+3]^A),w=z,x=C,y=B,A=E;return H;},Y=function(){this.jobs=[],this.delay=1,this.timeout_=null;},Y.prototype=new V.Hls.Stream,Y.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(V.bind(this,this.processJob_),this.delay):null;},Y.prototype.push=function(q){this.jobs.push(q),this.timeout_||(this.timeout_=setTimeout(V.bind(this,this.processJob_),this.delay));},b0=function(q,u,v,w){var x=b0.STEP,y=new Int32Array(q.buffer),A=new Uint8Array(q.byteLength),z=0;for(this.asyncStream_=new Y,this.asyncStream_.push(this.decryptChunk_(y.subarray(z,z+x),u,v,A,z)),z=x;z<y.length;z+=x)v=new Uint32Array([a0(y[z-4]),a0(y[z-3]),a0(y[z-2]),a0(y[z-1])]),this.asyncStream_.push(this.decryptChunk_(y.subarray(z,z+x),u,v,A));this.asyncStream_.push(function(){w(null,Q(A));});},b0.prototype=new V.Hls.Stream,b0.prototype.decryptChunk_=function(u,v,w,x){return function(){var q=X(u,v,w);x.set(q,u.byteOffset);};},b0.STEP=32e3,V.Hls.decrypt=X,V.Hls.Decrypter=b0,V.Hls.AsyncStream=Y;}(window,window.videojs,window.pkcs7.unpad),function(F){var D={hexDump:function(w){for(var x,y,A=Array.prototype.slice.call(w),z=16,C=function(q,u){var v=q.toString(16);return "00".substring(0,2-v.length)+v+(u%2?" ":"");},B=function(q){return q>=32&&126>q?String.fromCharCode(q):".";},E="",G=0;G<A.length/z;G++)x=A.slice(G*z,G*z+z).map(C).join(""),y=A.slice(G*z,G*z+z).map(B).join(""),E+=x+" "+y+"\n";return E;},tagDump:function(q){return D.hexDump(q.bytes);}};F.videojs.Hls.utils=D;}(this),videojs.plugin("audiotracks",function(x){var y=this,A=videojs.MenuItem.extend({init:function(q,u){videojs.MenuItem.call(this,q,u),this.lang=u.label,this.on("tap",this.onClick),this.on("click",this.onClick);}});A.prototype.onClick=function(){this.trigger({type:"selected",lang:this.lang,trackId:this.options().trackId});};var z=videojs.MenuButton.extend({init:function(q,u,v){this.tracks=void 0!==q.audioTracks?q.audioTracks():[],videojs.MenuButton.call(this,q,u,v),this.tracks.length<=1&&this.hide(),this.el().setAttribute("aria-label","Audio Menu");}});z.prototype.buttonText="Audio",z.prototype.className="vjs-audiotracks-button",z.prototype.createItems=function(){var q;for(this.items=[],q=0;q<this.tracks.length;q++)this.items.push(this.createItem(q,this.tracks[q]));return this.items;},z.prototype.createItem=function(q,u){var v,w=new castLabs.utils.Internationalization;return v=new A(this.player(),{label:w.translateLanguageCode(u,"en"),trackId:q}),v.on("selected",videojs.bind(this,this.selectItem)),v.on("selected",videojs.bind(this,this.setAudioTrack)),v;},z.prototype.selectItem=function(q){var u;for(u=0;u<this.items.length;u++)this.items[u].selected(this.items[u].options().trackId===q.trackId?!0:!1);},z.prototype.setAudioTrack=function(q){y.setAudioTrack(q.trackId),this.player().trigger({type:"trackchanged",trackType:"audio",trackId:q.trackId,trackEnabled:!0});};var C=null;y.on("loadedmetadata",function(){null!==C&&C.dispose&&C.el()&&C.dispose(),C=new z(y,x),y.controlBar.addChild(C);});}),function(F){"use strict";var D={VERSION:"0.5.3"};D.System=function(){this._mappings={},this._outlets={},this._handlers={},this.strictInjections=!0,this.autoMapOutlets=!1,this.postInjectionHook="setup";},D.System.prototype={_createAndSetupInstance:function(q,u){var v=new u;return this.injectInto(v,q),v;},_retrieveFromCacheOrCreate:function(q,u){"undefined"==typeof u&&(u=!1);var v;if(!this._mappings.hasOwnProperty(q))throw  new Error(1e3);var w=this._mappings[q];return !u&&w.isSingleton?(null==w.object&&(w.object=this._createAndSetupInstance(q,w.clazz)),v=w.object):v=w.clazz?this._createAndSetupInstance(q,w.clazz):w.object,v;},mapOutlet:function(q,u,v){if("undefined"==typeof q)throw  new Error(1010);return u=u||"global",v=v||q,this._outlets.hasOwnProperty(u)||(this._outlets[u]={}),this._outlets[u][v]=q,this;},getObject:function(q){if("undefined"==typeof q)throw  new Error(1020);return this._retrieveFromCacheOrCreate(q);},mapValue:function(q,u){if("undefined"==typeof q)throw  new Error(1030);return this._mappings[q]={clazz:null,object:u,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(q),this.hasMapping(q)&&this.injectInto(u,q),this;},hasMapping:function(q){if("undefined"==typeof q)throw  new Error(1040);return this._mappings.hasOwnProperty(q);},mapClass:function(q,u){if("undefined"==typeof q)throw  new Error(1050);if("undefined"==typeof u)throw  new Error(1051);return this._mappings[q]={clazz:u,object:null,isSingleton:!1},this.autoMapOutlets&&this.mapOutlet(q),this;},mapSingleton:function(q,u){if("undefined"==typeof q)throw  new Error(1060);if("undefined"==typeof u)throw  new Error(1061);return this._mappings[q]={clazz:u,object:null,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(q),this;},instantiate:function(q){if("undefined"==typeof q)throw  new Error(1070);return this._retrieveFromCacheOrCreate(q,!0);},injectInto:function(q,u){if("undefined"==typeof q)throw  new Error(1080);if("object"==typeof q){var v=[];this._outlets.hasOwnProperty("global")&&v.push(this._outlets.global),"undefined"!=typeof u&&this._outlets.hasOwnProperty(u)&&v.push(this._outlets[u]);for(var w in v){var x=v[w];for(var y in x){var A=x[y];(!this.strictInjections||y in q)&&(q[y]=this.getObject(A));}}"setup" in q&&q.setup.call(q);}return this;},unmap:function(q){if("undefined"==typeof q)throw  new Error(1090);return delete  this._mappings[q],this;},unmapOutlet:function(q,u){if("undefined"==typeof q)throw  new Error(1100);if("undefined"==typeof u)throw  new Error(1101);return delete  this._outlets[q][u],this;},mapHandler:function(q,u,v,w,x){if("undefined"==typeof q)throw  new Error(1110);return u=u||"global",v=v||q,"undefined"==typeof w&&(w=!1),"undefined"==typeof x&&(x=!1),this._handlers.hasOwnProperty(q)||(this._handlers[q]={}),this._handlers[q].hasOwnProperty(u)||(this._handlers[q][u]=[]),this._handlers[q][u].push({handler:v,oneShot:w,passEvent:x}),this;},unmapHandler:function(q,u,v){if("undefined"==typeof q)throw  new Error(1120);if(u=u||"global",v=v||q,this._handlers.hasOwnProperty(q)&&this._handlers[q].hasOwnProperty(u)){var w=this._handlers[q][u];for(var x in w){var y=w[x];if(y.handler===v){w.splice(x,1);break;}}}return this;},notify:function(q){if("undefined"==typeof q)throw  new Error(1130);var u=Array.prototype.slice.call(arguments),v=u.slice(1);if(this._handlers.hasOwnProperty(q)){var w=this._handlers[q];for(var x in w){var y,A=w[x];"global"!==x&&(y=this.getObject(x));var z,C,B=[];for(z=0,C=A.length;C>z;z++){var E,G=A[z];E=y&&"string"==typeof G.handler?y[G.handler]:G.handler,G.oneShot&&B.unshift(z),G.passEvent?E.apply(y,u):E.apply(y,v);}for(z=0,C=B.length;C>z;z++)A.splice(B[z],1);}}return this;}},F.dijon=D;}(this),"undefined"==typeof utils)var utils={};"undefined"==typeof utils.Math&&(utils.Math={}),utils.Math.to64BitNumber=function(q,u){var v,w,x;return v=new goog.math.Long(0,u),w=new goog.math.Long(q,0),x=v.add(w),x.toNumber();},goog={},goog.math={},goog.math.Long=function(q,u){this.low_=0|q,this.high_=0|u;},goog.math.Long.IntCache_={},goog.math.Long.fromInt=function(q){if(q>=-128&&128>q){var u=goog.math.Long.IntCache_[q];if(u)return u;}var v=new goog.math.Long(0|q,0>q?-1:0);return q>=-128&&128>q&&(goog.math.Long.IntCache_[q]=v),v;},goog.math.Long.fromNumber=function(q){return isNaN(q)||!isFinite(q)?goog.math.Long.ZERO:q<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.MIN_VALUE:q+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.MAX_VALUE:0>q?goog.math.Long.fromNumber(-q).negate():new goog.math.Long(q%goog.math.Long.TWO_PWR_32_DBL_|0,q/goog.math.Long.TWO_PWR_32_DBL_|0);},goog.math.Long.fromBits=function(q,u){return new goog.math.Long(q,u);},goog.math.Long.fromString=function(q,u){if(0==q.length)throw Error("number format error: empty string");var v=u||10;if(2>v||v>36)throw Error("radix out of range: "+v);if("-"==q.charAt(0))return goog.math.Long.fromString(q.substring(1),v).negate();if(q.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+q);for(var w=goog.math.Long.fromNumber(Math.pow(v,8)),x=goog.math.Long.ZERO,y=0;y<q.length;y+=8){var A=Math.min(8,q.length-y),z=parseInt(q.substring(y,y+A),v);if(8>A){var C=goog.math.Long.fromNumber(Math.pow(v,A));x=x.multiply(C).add(goog.math.Long.fromNumber(z));}else x=x.multiply(w),x=x.add(goog.math.Long.fromNumber(z));}return x;},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.TWO_PWR_24_DBL_=1<<24,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_31_DBL_=goog.math.Long.TWO_PWR_32_DBL_/2,goog.math.Long.TWO_PWR_48_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.ZERO=goog.math.Long.fromInt(0),goog.math.Long.ONE=goog.math.Long.fromInt(1),goog.math.Long.NEG_ONE=goog.math.Long.fromInt(-1),goog.math.Long.MAX_VALUE=goog.math.Long.fromBits(-1,2147483647),goog.math.Long.MIN_VALUE=goog.math.Long.fromBits(0,-2147483648),goog.math.Long.TWO_PWR_24_=goog.math.Long.fromInt(1<<24),goog.math.Long.prototype.toInt=function(){return this.low_;},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned();},goog.math.Long.prototype.toString=function(q){var u=q||10;if(2>u||u>36)throw Error("radix out of range: "+u);if(this.isZero())return "0";if(this.isNegative()){if(this.equals(goog.math.Long.MIN_VALUE)){var v=goog.math.Long.fromNumber(u),w=this.div(v),x=w.multiply(v).subtract(this);return w.toString(u)+x.toInt().toString(u);}return "-"+this.negate().toString(u);}for(var y=goog.math.Long.fromNumber(Math.pow(u,6)),x=this,A="";;){var z=x.div(y),C=x.subtract(z.multiply(y)).toInt(),B=C.toString(u);if(x=z,x.isZero())return B+A;for(;B.length<6;)B="0"+B;A=""+B+A;}},goog.math.Long.prototype.getHighBits=function(){return this.high_;},goog.math.Long.prototype.getLowBits=function(){return this.low_;},goog.math.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_;},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var q=0!=this.high_?this.high_:this.low_,u=31;u>0&&0==(q&1<<u);u--);return 0!=this.high_?u+33:u+1;},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_;},goog.math.Long.prototype.isNegative=function(){return this.high_<0;},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_);},goog.math.Long.prototype.equals=function(q){return this.high_==q.high_&&this.low_==q.low_;},goog.math.Long.prototype.notEquals=function(q){return this.high_!=q.high_||this.low_!=q.low_;},goog.math.Long.prototype.lessThan=function(q){return this.compare(q)<0;},goog.math.Long.prototype.lessThanOrEqual=function(q){return this.compare(q)<=0;},goog.math.Long.prototype.greaterThan=function(q){return this.compare(q)>0;},goog.math.Long.prototype.greaterThanOrEqual=function(q){return this.compare(q)>=0;},goog.math.Long.prototype.compare=function(q){if(this.equals(q))return 0;var u=this.isNegative(),v=q.isNegative();return u&&!v?-1:!u&&v?1:this.subtract(q).isNegative()?-1:1;},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.MIN_VALUE)?goog.math.Long.MIN_VALUE:this.not().add(goog.math.Long.ONE);},goog.math.Long.prototype.add=function(q){var u=this.high_>>>16,v=65535&this.high_,w=this.low_>>>16,x=65535&this.low_,y=q.high_>>>16,A=65535&q.high_,z=q.low_>>>16,C=65535&q.low_,B=0,E=0,G=0,F=0;return F+=x+C,G+=F>>>16,F&=65535,G+=w+z,E+=G>>>16,G&=65535,E+=v+A,B+=E>>>16,E&=65535,B+=u+y,B&=65535,goog.math.Long.fromBits(G<<16|F,B<<16|E);},goog.math.Long.prototype.subtract=function(q){return this.add(q.negate());},goog.math.Long.prototype.multiply=function(q){if(this.isZero())return goog.math.Long.ZERO;if(q.isZero())return goog.math.Long.ZERO;if(this.equals(goog.math.Long.MIN_VALUE))return q.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO;if(q.equals(goog.math.Long.MIN_VALUE))return this.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO;if(this.isNegative())return q.isNegative()?this.negate().multiply(q.negate()):this.negate().multiply(q).negate();if(q.isNegative())return this.multiply(q.negate()).negate();if(this.lessThan(goog.math.Long.TWO_PWR_24_)&&q.lessThan(goog.math.Long.TWO_PWR_24_))return goog.math.Long.fromNumber(this.toNumber()*q.toNumber());var u=this.high_>>>16,v=65535&this.high_,w=this.low_>>>16,x=65535&this.low_,y=q.high_>>>16,A=65535&q.high_,z=q.low_>>>16,C=65535&q.low_,B=0,E=0,G=0,F=0;return F+=x*C,G+=F>>>16,F&=65535,G+=w*C,E+=G>>>16,G&=65535,G+=x*z,E+=G>>>16,G&=65535,E+=v*C,B+=E>>>16,E&=65535,E+=w*z,B+=E>>>16,E&=65535,E+=x*A,B+=E>>>16,E&=65535,B+=u*C+v*z+w*A+x*y,B&=65535,goog.math.Long.fromBits(G<<16|F,B<<16|E);},goog.math.Long.prototype.div=function(q){if(q.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.ZERO;if(this.equals(goog.math.Long.MIN_VALUE)){if(q.equals(goog.math.Long.ONE)||q.equals(goog.math.Long.NEG_ONE))return goog.math.Long.MIN_VALUE;if(q.equals(goog.math.Long.MIN_VALUE))return goog.math.Long.ONE;var u=this.shiftRight(1),v=u.div(q).shiftLeft(1);if(v.equals(goog.math.Long.ZERO))return q.isNegative()?goog.math.Long.ONE:goog.math.Long.NEG_ONE;var w=this.subtract(q.multiply(v)),x=v.add(w.div(q));return x;}if(q.equals(goog.math.Long.MIN_VALUE))return goog.math.Long.ZERO;if(this.isNegative())return q.isNegative()?this.negate().div(q.negate()):this.negate().div(q).negate();if(q.isNegative())return this.div(q.negate()).negate();for(var y=goog.math.Long.ZERO,w=this;w.greaterThanOrEqual(q);){for(var v=Math.max(1,Math.floor(w.toNumber()/q.toNumber())),A=Math.ceil(Math.log(v)/Math.LN2),z=48>=A?1:Math.pow(2,A-48),C=goog.math.Long.fromNumber(v),B=C.multiply(q);B.isNegative()||B.greaterThan(w);)v-=z,C=goog.math.Long.fromNumber(v),B=C.multiply(q);C.isZero()&&(C=goog.math.Long.ONE),y=y.add(C),w=w.subtract(B);}return y;},goog.math.Long.prototype.modulo=function(q){return this.subtract(this.div(q).multiply(q));},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_);},goog.math.Long.prototype.and=function(q){return goog.math.Long.fromBits(this.low_&q.low_,this.high_&q.high_);},goog.math.Long.prototype.or=function(q){return goog.math.Long.fromBits(this.low_|q.low_,this.high_|q.high_);},goog.math.Long.prototype.xor=function(q){return goog.math.Long.fromBits(this.low_^q.low_,this.high_^q.high_);},goog.math.Long.prototype.shiftLeft=function(q){if(q&=63,0==q)return this;var u=this.low_;if(32>q){var v=this.high_;return goog.math.Long.fromBits(u<<q,v<<q|u>>>32-q);}return goog.math.Long.fromBits(0,u<<q-32);},goog.math.Long.prototype.shiftRight=function(q){if(q&=63,0==q)return this;var u=this.high_;if(32>q){var v=this.low_;return goog.math.Long.fromBits(v>>>q|u<<32-q,u>>q);}return goog.math.Long.fromBits(u>>q-32,u>=0?0:-1);},goog.math.Long.prototype.shiftRightUnsigned=function(q){if(q&=63,0==q)return this;var u=this.high_;if(32>q){var v=this.low_;return goog.math.Long.fromBits(v>>>q|u<<32-q,u>>>q);}return 32==q?goog.math.Long.fromBits(u,0):goog.math.Long.fromBits(u>>>q-32,0);};var UTF8={};UTF8.encode=function(q){for(var u=[],v=0;v<q.length;++v){var w=q.charCodeAt(v);128>w?u.push(w):2048>w?(u.push(192|w>>6),u.push(128|63&w)):65536>w?(u.push(224|w>>12),u.push(128|63&w>>6),u.push(128|63&w)):(u.push(240|w>>18),u.push(128|63&w>>12),u.push(128|63&w>>6),u.push(128|63&w));}return u;},UTF8.decode=function(q){for(var u=[],v=0;v<q.length;){var w=q[v++];128>w||(224>w?(w=(31&w)<<6,w|=63&q[v++]):240>w?(w=(15&w)<<12,w|=(63&q[v++])<<6,w|=63&q[v++]):(w=(7&w)<<18,w|=(63&q[v++])<<12,w|=(63&q[v++])<<6,w|=63&q[v++])),u.push(String.fromCharCode(w));}return u.join("");};var BASE64={};!function(y){var A=function(q){for(var u=0,v=[],w=0|q.length/3;0<w--;){var x=(q[u]<<16)+(q[u+1]<<8)+q[u+2];u+=3,v.push(y.charAt(63&x>>18)),v.push(y.charAt(63&x>>12)),v.push(y.charAt(63&x>>6)),v.push(y.charAt(63&x));}if(2==q.length-u){var x=(q[u]<<16)+(q[u+1]<<8);v.push(y.charAt(63&x>>18)),v.push(y.charAt(63&x>>12)),v.push(y.charAt(63&x>>6)),v.push("=");}else if(1==q.length-u){var x=q[u]<<16;v.push(y.charAt(63&x>>18)),v.push(y.charAt(63&x>>12)),v.push("==");}return v.join("");},z=function(){for(var q=[],u=0;u<y.length;++u)q[y.charCodeAt(u)]=u;return q["=".charCodeAt(0)]=0,q;}(),C=function(q){for(var u=0,v=[],w=0|q.length/4;0<w--;){var x=(z[q.charCodeAt(u)]<<18)+(z[q.charCodeAt(u+1)]<<12)+(z[q.charCodeAt(u+2)]<<6)+z[q.charCodeAt(u+3)];v.push(255&x>>16),v.push(255&x>>8),v.push(255&x),u+=4;}return v&&("="==q.charAt(u-2)?(v.pop(),v.pop()):"="==q.charAt(u-1)&&v.pop()),v;},B={};B.encode=function(q){for(var u=[],v=0;v<q.length;++v)u.push(q.charCodeAt(v));return u;},B.decode=function(){for(var q=0;q<s.length;++q)a[q]=String.fromCharCode(a[q]);return a.join("");},BASE64.decodeArray=function(q){var u=C(q);return new Uint8Array(u);},BASE64.encodeASCII=function(q){var u=B.encode(q);return A(u);},BASE64.decodeASCII=function(q){var u=C(q);return B.decode(u);},BASE64.encode=function(q){var u=UTF8.encode(q);return A(u);},BASE64.decode=function(q){var u=C(q);return UTF8.decode(u);};}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0===btoa,void 0===atob,MediaPlayer=function(A){"use strict";var z,C,B,E,G,F,D,H,L,I,K,M,J="1.4.0",O=null,N=!1,P=!1,R=!0,V=!1,Q=MediaPlayer.dependencies.BufferController.BUFFER_SIZE_REQUIRED,U=function(){return !!E&&!!G;},Y=function(){if(!N)throw "MediaPlayer not initialized!";if(!this.capabilities.supportsMediaSource())return void this.errHandler.capabilityError("mediasource");if(!E||!G)throw "Missing view or source.";P=!0,this.debug.log("Playback initiated!"),F=z.getObject("streamController"),F.subscribe(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED,H),C.subscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,F),C.subscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,H),F.initialize(),F.setVideoModel(K),F.setAutoPlay(R),F.setProtectionData(O),M.checkInitialBitrate(),F.load(G),z.mapValue("scheduleWhilePaused",V),z.mapOutlet("scheduleWhilePaused","stream"),z.mapOutlet("scheduleWhilePaused","scheduleController"),z.mapValue("bufferMax",Q),z.mapOutlet("bufferMax","bufferController"),D.initialize();},b0=function(){U()&&Y.call(this);},X=function(){var q=I.getReadOnlyMetricsFor("video")||I.getReadOnlyMetricsFor("audio");return L.getCurrentDVRInfo(q);},a0=function(){return X.call(this).manifestInfo.DVRWindowSize;},Z=function(q){var u=X.call(this),v=u.range.start+q;return v>u.range.end&&(v=u.range.end),v;},W=function(q){CL.configs.isLive===!0&&(CL.configs.minStartTime=null),null!=CL.configs.minStartTime&&q<CL.configs.minStartTime&&(q=CL.configs.minStartTime),this.getVideoModel().getElement().currentTime=this.getDVRSeekOffset(q);},e0=function(){var q=X.call(this);return null===q?0:this.duration()-(q.range.end-q.time);},d0=function(){var q,u=X.call(this);return null===u?0:(q=u.range.end-u.range.start,q<u.manifestInfo.DVRWindowSize?q:u.manifestInfo.DVRWindowSize);},c0=function(q){var u,v,w=X.call(this);return null===w?0:(u=w.manifestInfo.availableFrom.getTime()/1e3,v=q+(u+w.range.start));},f0=function(){return c0.call(this,this.time());},h0=function(){return c0.call(this,this.duration());},m0=function(q,u,v){var w=new Date(1e3*q),x=w.toLocaleDateString(u),y=w.toLocaleTimeString(u,{hour12:v});return y+" "+x;},k0=function(q){q=Math.max(q,0);var u=Math.floor(q/3600),v=Math.floor(q%3600/60),w=Math.floor(q%3600%60);return (0===u?"":10>u?"0"+u.toString()+":":u.toString()+":")+(10>v?"0"+v.toString():v.toString())+":"+(10>w?"0"+w.toString():w.toString());},o0=function(q,u,v){u&&void 0!==q&&null!==q&&(v?D.setRules(q,u):D.addRules(q,u));},y0=function(){P&&F&&(F.unsubscribe(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED,H),C.unsubscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,F),C.unsubscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,H),F.reset(),B.reset(),D.reset(),F=null,P=!1);},u0=function(q){for(var u in q){var v=q[u];CL.manifest[u]=v,"debug"==u&&(CL.configs.debug=v);}},s0=function(q){var u=q.toLowerCase(),v=CL.configs.element?CL.configs.element:document.querySelector("video");CL.configs.keyRequests=[],CL.configs.activeTrack=[],MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=CL.manifest.ABRParameters.minBufferLength||MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,(1==CL.manifest.isSmoothStreaming||(u.indexOf(".ism")>-1||u.indexOf("ism/Manifest")>-1)&&-1==u.indexOf("format=mpd")&&-1==u.indexOf(".mpd"))&&(CL.configs.isSmoothStreaming=!0),CL.manifest.url=q,CL.manifest.activeDRM="unprotected",CL.manifest.customDataEncoded=BASE64.encode(JSON.stringify(CL.manifest.customData));var w=[],x=new MediaPlayer.vo.protection.ProtectionData;x.laURL=CL.manifest.widevineLicenseServerURL,x.httpRequestHeaders=[],CL.manifest.sendCustomData===!0&&(x.httpRequestHeaders["dt-custom-data"]=CL.manifest.customDataEncoded),null!=CL.manifest.authenticationToken&&""!=CL.manifest.authenticationToken&&(x.httpRequestHeaders["x-dt-auth-token"]=CL.manifest.authenticationToken),w["com.widevine.alpha"]=x,this.attachProtectionData(w),x=new MediaPlayer.vo.protection.ProtectionData,x.laURL=CL.manifest.playReadyLicenseServerURL,x.httpRequestHeaders=[],CL.manifest.sendCustomData===!0&&(x.httpRequestHeaders["http-header-CustomData"]=CL.manifest.customDataEncoded),w["com.microsoft.playready"]=x,w["com.youtube.playready"]=x,this.attachProtectionData(w),N&&this.reset(),v.autoplay=CL.manifest.autoplay,this.startup(),this.setAutoPlay(CL.manifest.autoplay),this.attachView(v),this.attachSource(q);},t0=function(q){q?A0("text",CL.configs.activeTrack.text.id):F.disableTextTracks();},A0=function(q,u){CL.configs.debug&&console.log("Setting active "+q+" track to id "+u);for(var v,w=0;w<CL.configs.tracks[q].length;w++)if(v=CL.configs.tracks[q][w],v.id==u){var x=JSON.parse(JSON.stringify(v));return CL.configs.activeTrack[q]=x,void F.update(q);}CL.configs.debug&&console.log("Could not switch to "+q+" track "+u+", id unknown.");},q0=function(q){if("text"!=q&&"audio"!=q)throw "Cannot get available tracks for unknown type "+q+". Valid types are 'audio' and 'text'.";return CL.configs.tracks[q];},v0=dijon.System.prototype.getObject;dijon.System.prototype.getObject=function(u){var v=v0.call(this,u);return "object"!=typeof v||v.getName||(v.getName=function(){return u;},v.setMediaType=function(q){v.mediaType=q;},v.getMediaType=function(){return v.mediaType;}),v;},z=new dijon.System,z.mapValue("system",z),z.mapOutlet("system"),z.injectInto(A);var r0=A.config?A.config:{},D0=A.system.getObject("debug");CL.configs.element?CL.configs.element:document.querySelector("video"),this.currentTime=0,this.duration=0;var p0=!1,B0=function(){F.pause();},C0=function(){F.play();},w0=function(){p0=!0,F.reset();},z0=function(){return p0;},u0=function(q){for(var u in q){var v=q[u];CL.manifest[u]=v,"debug"==u&&(CL.configs.debug=v,D0.setLogToBrowserConsole(CL.configs.debug));}};return r0&&u0(r0),CL.manifest.disableChromecastSupport===!0&&(CL.configs.isChromecast=!1),CL.configs.isChromecast&&(window.self.config=r0,loadScript("//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js",initChromecastReceiver,this)),D0.setLogToBrowserConsole(CL.configs.debug),{notifier:void 0,debug:void 0,eventBus:void 0,capabilities:void 0,adapter:void 0,errHandler:void 0,uriQueryFragModel:void 0,videoElementExt:void 0,getABRController:function(){return B;},setup:function(){L=z.getObject("metricsExt"),C=z.getObject("manifestLoader"),H=z.getObject("manifestUpdater"),B=z.getObject("abrController"),D=z.getObject("rulesController"),I=z.getObject("metricsModel"),M=z.getObject("DOMStorage");},addEventListener:function(q,u,v){this.eventBus.addEventListener(q,u,v);},removeEventListener:function(q,u,v){this.eventBus.removeEventListener(q,u,v);},getVersion:function(){return J;},startup:function(){N||(z.injectInto(this),N=!0);},getDebug:function(){return this.debug;},getVideoModel:function(){var q=F?F.getActiveStreamInfo():null,u=q?F.getStreamById(q.id):null;return u?u.getVideoModel():K;},enableLastBitrateCaching:function(q,u){M.enableLastBitrateCaching(q,u);},setMaxAllowedBitrateFor:function(q,u){B.setMaxAllowedBitrateFor(q,u);},getMaxAllowedBitrateFor:function(q){return B.getMaxAllowedBitrateFor(q);},setAutoPlay:function(q){R=q;},getAutoPlay:function(){return R;},setScheduleWhilePaused:function(q){V=q;},getScheduleWhilePaused:function(){return V;},setBufferMax:function(q){Q=q;},getBufferMax:function(){return Q;},getMetricsExt:function(){return L;},getMetricsFor:function(q){return I.getReadOnlyMetricsFor(q);},getQualityFor:function(q){return B.getQualityFor(q,F.getActiveStreamInfo());},setQualityFor:function(q,u){B.setPlaybackQuality(q,F.getActiveStreamInfo(),u);},getBitrateInfoListFor:function(q){var u=F.getActiveStreamInfo(),v=F.getStreamById(u.id);return v.getBitrateListFor(q);},setInitialBitrateFor:function(q,u){B.setInitialBitrateFor(q,u);},getInitialBitrateFor:function(q){return B.getInitialBitrateFor(q);},getAutoSwitchQuality:function(){return B.getAutoSwitchBitrate();},setAutoSwitchQuality:function(q){B.setAutoSwitchBitrate(q);},setSchedulingRules:function(q){o0.call(this,D.SCHEDULING_RULE,q,!0);},addSchedulingRules:function(q){o0.call(this,D.SCHEDULING_RULE,q,!1);},setABRRules:function(q){o0.call(this,D.ABR_RULE,q,!0);},addABRRules:function(q){o0.call(this,D.ABR_RULE,q,!1);},attachView:function(q){if(!N)throw "MediaPlayer not initialized!";E=q,K=null,E&&(K=z.getObject("videoModel"),K.setElement(E)),y0.call(this),U.call(this)&&b0.call(this);},attachSource:function(q){if(!N)throw "MediaPlayer not initialized!";this.uriQueryFragModel.reset(),G=this.uriQueryFragModel.parseURI(q),y0.call(this),U.call(this)&&b0.call(this);},attachProtectionData:function(q){O=q;},reset:function(){this.attachSource(null),this.attachView(null);},play:Y,isReady:U,seek:W,time:e0,duration:d0,timeAsUTC:f0,durationAsUTC:h0,getDVRWindowSize:a0,getDVRSeekOffset:Z,formatUTC:m0,convertToTimeCode:k0,enableSubtitles:t0,setActiveTrack:A0,getAvailableTracks:q0,loadVideo:s0,isDone:z0,setConfig:u0,pause:B0,resume:C0,end:w0};},MediaPlayer.prototype={constructor:MediaPlayer},MediaPlayer.dependencies={},MediaPlayer.dependencies.protection={},MediaPlayer.utils={},MediaPlayer.models={},MediaPlayer.vo={},MediaPlayer.vo.metrics={},MediaPlayer.vo.protection={},MediaPlayer.rules={},MediaPlayer.di={},MediaPlayer.events={METRICS_CHANGED:"metricschanged",METRIC_CHANGED:"metricchanged",METRIC_UPDATED:"metricupdated",METRIC_ADDED:"metricadded",MANIFEST_LOADED:"manifestloaded",SWITCH_STREAM:"streamswitched",STREAM_INITIALIZED:"streaminitialized",TEXT_TRACK_ADDED:"texttrackadded",BUFFER_LOADED:"bufferloaded",BUFFER_EMPTY:"bufferstalled",ERROR:"error",LOG:"log"},MediaPlayer.di.Context=function(){"use strict";var v=function(){var q=document.createElement("video");if(MediaPlayer.models.ProtectionModel_21Jan2015.detect(q))this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_21Jan2015);else if(MediaPlayer.models.ProtectionModel_3Feb2014.detect(q))this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_3Feb2014);else if(MediaPlayer.models.ProtectionModel_01b.detect(q))this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_01b);else{var u=this.system.getObject("debug");u.log("No supported version of EME detected on this user agent!"),u.log("Attempts to play encrypted content will fail!");}};return {system:void 0,setup:function(){this.system.autoMapOutlets=!0,this.system.mapSingleton("debug",MediaPlayer.utils.Debug),this.system.mapSingleton("eventBus",MediaPlayer.utils.EventBus),this.system.mapSingleton("capabilities",MediaPlayer.utils.Capabilities),this.system.mapSingleton("DOMStorage",MediaPlayer.utils.DOMStorage),this.system.mapClass("customTimeRanges",MediaPlayer.utils.CustomTimeRanges),this.system.mapSingleton("textTrackExtensions",MediaPlayer.utils.TextTrackExtensions),this.system.mapSingleton("vttParser",MediaPlayer.utils.VTTParser),this.system.mapSingleton("ttmlParser",MediaPlayer.utils.TTMLParser),this.system.mapClass("videoModel",MediaPlayer.models.VideoModel),this.system.mapSingleton("manifestModel",MediaPlayer.models.ManifestModel),this.system.mapSingleton("metricsModel",MediaPlayer.models.MetricsModel),this.system.mapSingleton("uriQueryFragModel",MediaPlayer.models.URIQueryAndFragmentModel),this.system.mapSingleton("ksPlayReady",MediaPlayer.dependencies.protection.KeySystem_PlayReady),this.system.mapSingleton("ksWidevine",MediaPlayer.dependencies.protection.KeySystem_Widevine),this.system.mapSingleton("ksClearKey",MediaPlayer.dependencies.protection.KeySystem_ClearKey),this.system.mapSingleton("requestModifierExt",MediaPlayer.dependencies.RequestModifierExtensions),this.system.mapSingleton("textSourceBuffer",MediaPlayer.dependencies.TextSourceBuffer),this.system.mapSingleton("mediaSourceExt",MediaPlayer.dependencies.MediaSourceExtensions),this.system.mapSingleton("sourceBufferExt",MediaPlayer.dependencies.SourceBufferExtensions),this.system.mapSingleton("abrController",MediaPlayer.dependencies.AbrController),this.system.mapSingleton("errHandler",MediaPlayer.dependencies.ErrorHandler),this.system.mapSingleton("videoExt",MediaPlayer.dependencies.VideoModelExtensions),this.system.mapSingleton("protectionExt",MediaPlayer.dependencies.ProtectionExtensions),this.system.mapClass("protectionController",MediaPlayer.dependencies.ProtectionController),this.system.mapClass("playbackController",MediaPlayer.dependencies.PlaybackController),v.call(this),this.system.mapSingleton("liveEdgeFinder",MediaPlayer.dependencies.LiveEdgeFinder),this.system.mapClass("metrics",MediaPlayer.models.MetricsList),this.system.mapClass("insufficientBufferRule",MediaPlayer.rules.InsufficientBufferRule),this.system.mapClass("bufferOccupancyRule",MediaPlayer.rules.BufferOccupancyRule),this.system.mapClass("throughputRule",MediaPlayer.rules.ThroughputRule),this.system.mapSingleton("abrRulesCollection",MediaPlayer.rules.ABRRulesCollection),this.system.mapSingleton("rulesController",MediaPlayer.rules.RulesController),this.system.mapClass("bufferLevelRule",MediaPlayer.rules.BufferLevelRule),this.system.mapClass("pendingRequestsRule",MediaPlayer.rules.PendingRequestsRule),this.system.mapClass("playbackTimeRule",MediaPlayer.rules.PlaybackTimeRule),this.system.mapClass("sameTimeRequestRule",MediaPlayer.rules.SameTimeRequestRule),this.system.mapSingleton("scheduleRulesCollection",MediaPlayer.rules.ScheduleRulesCollection),this.system.mapClass("liveEdgeBinarySearchRule",MediaPlayer.rules.LiveEdgeBinarySearchRule),this.system.mapClass("liveEdgeWithTimeSynchronizationRule",MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule),this.system.mapSingleton("synchronizationRulesCollection",MediaPlayer.rules.SynchronizationRulesCollection),this.system.mapClass("streamProcessor",MediaPlayer.dependencies.StreamProcessor),this.system.mapClass("eventController",MediaPlayer.dependencies.EventController),this.system.mapClass("textController",MediaPlayer.dependencies.TextController),this.system.mapClass("bufferController",MediaPlayer.dependencies.BufferController),this.system.mapSingleton("manifestLoader",MediaPlayer.dependencies.ManifestLoader),this.system.mapSingleton("manifestUpdater",MediaPlayer.dependencies.ManifestUpdater),this.system.mapClass("fragmentController",MediaPlayer.dependencies.FragmentController),this.system.mapClass("fragmentLoader",MediaPlayer.dependencies.FragmentLoader),this.system.mapClass("fragmentModel",MediaPlayer.dependencies.FragmentModel),this.system.mapSingleton("streamController",MediaPlayer.dependencies.StreamController),this.system.mapClass("stream",MediaPlayer.dependencies.Stream),this.system.mapClass("scheduleController",MediaPlayer.dependencies.ScheduleController),this.system.mapSingleton("timeSyncController",MediaPlayer.dependencies.TimeSyncController),this.system.mapSingleton("notifier",MediaPlayer.dependencies.Notifier);}};},Dash=function(){"use strict";return {modules:{},dependencies:{},vo:{},di:{}};}(),Dash.di.DashContext=function(){"use strict";return {system:void 0,setup:function(){Dash.di.DashContext.prototype.setup.call(this),this.system.mapClass("parser",Dash.dependencies.DashParser),this.system.mapClass("indexHandler",Dash.dependencies.DashHandler),this.system.mapSingleton("baseURLExt",Dash.dependencies.BaseURLExtensions),this.system.mapClass("fragmentExt",Dash.dependencies.FragmentExtensions),this.system.mapClass("trackController",Dash.dependencies.RepresentationController),this.system.mapSingleton("manifestExt",Dash.dependencies.DashManifestExtensions),this.system.mapSingleton("metricsExt",Dash.dependencies.DashMetricsExtensions),this.system.mapSingleton("timelineConverter",Dash.dependencies.TimelineConverter),this.system.mapSingleton("adapter",Dash.dependencies.DashAdapter);}};},Dash.di.DashContext.prototype=new MediaPlayer.di.Context,Dash.di.DashContext.prototype.constructor=Dash.di.DashContext,Dash.dependencies.DashAdapter=function(){"use strict";var P=[],R={},V=function(q,u){return u.getRepresentationForQuality(q.quality);},Q=function(q){return R[q.streamInfo.id][q.index];},U=function(q){var u,v=P.length,w=0;for(w;v>w;w+=1)if(u=P[w],q.id===u.id)return u;return null;},Y=function(q){var u=new MediaPlayer.vo.TrackInfo,v=q.adaptation.period.mpd.manifest.Period_asArray[q.adaptation.period.index].AdaptationSet_asArray[q.adaptation.index],w=this.manifestExt.getRepresentationFor(q.index,v);return u.id=q.id,u.quality=q.index,u.bandwidth=this.manifestExt.getBandwidth(w),u.DVRWindow=q.segmentAvailabilityRange,u.fragmentDuration=q.segmentDuration||(q.segments&&q.segments.length>0?q.segments[0].duration:0/0),u.MSETimeOffset=q.MSETimeOffset,u.useCalculatedLiveEdgeTime=q.useCalculatedLiveEdgeTime,u.mediaInfo=b0.call(this,q.adaptation),u;},b0=function(u){var v=new MediaPlayer.vo.MediaInfo,w=this,x=u.period.mpd.manifest.Period_asArray[u.period.index].AdaptationSet_asArray[u.index];return v.id=u.id,v.index=u.index,v.type=u.type,v.streamInfo=X.call(this,u.period),v.trackCount=this.manifestExt.getRepresentationCount(x),v.lang=this.manifestExt.getLanguageForAdaptation(x),v.codec=this.manifestExt.getCodec(x),v.mimeType=this.manifestExt.getMimeType(x),v.contentProtection=this.manifestExt.getContentProtectionData(x),v.bitrateList=this.manifestExt.getBitrateListForAdaptation(x),(v.contentProtection||CL.manifest.generatePSSH===!0&&void 0!==CL.manifest.keyId&&null!==CL.manifest.keyId)&&(void 0!==v.contentProtection&&null!==v.contentProtection||CL.manifest.generatePSSH!==!0||void 0===CL.manifest.keyId||null===CL.manifest.keyId||(v.contentProtection=[{KID:CL.manifest.keyId,"cenc:default_KID":CL.manifest.keyId,schemeIdUri:"urn:mpeg:dash:mp4protection:2011",value:"cenc"}]),v.contentProtection.forEach(function(q){q.KID=w.manifestExt.getKID(q);})),v.isText=this.manifestExt.getIsTextTrack(v.mimeType),v;},X=function(q){var u=new MediaPlayer.vo.StreamInfo,v=1;return u.id=q.id,u.index=q.index,u.start=q.start,u.duration=q.duration,u.manifestInfo=a0.call(this,q.mpd),u.isLast=Math.abs(u.start+u.duration-u.manifestInfo.duration)<v,u;},a0=function(q){var u=new MediaPlayer.vo.ManifestInfo,v=this.manifestModel.getValue();return u.DVRWindowSize=q.timeShiftBufferDepth,u.loadedTime=q.manifest.loadedTime,u.availableFrom=q.availabilityStartTime,u.minBufferTime=q.manifest.minBufferTime,u.maxFragmentDuration=q.maxSegmentDuration,u.duration=this.manifestExt.getDuration(v),u.isDynamic=this.manifestExt.getIsDynamic(v),u;},Z=function(q,u,v){var w,x=U(u),y=x.id,A=this.manifestExt.getAdaptationForType(q,u.index,v);return A?(w=this.manifestExt.getIndexForAdaptation(A,q,u.index),R[y]=R[y]||this.manifestExt.getAdaptationsForPeriod(q,x),b0.call(this,R[y][w])):null;},W=function(q,u,v){var w,x,y,A,z=U(u),C=z.id,B=this.manifestExt.getAdaptationsForType(q,u.index,v),E=this;if(E.capabilities=new MediaPlayer.utils.Capabilities,x=document.querySelector("video"),!B)return null;(v.indexOf("text")>-1||v.indexOf("ttml")>-1)&&(v="text");var G=[];CL.configs.tracks[v]=[];var F=0;for(y=0;y<B.length;y++){w=this.manifestExt.getIndexForAdaptation(B[y],q,u.index),R[C]=R[C]||this.manifestExt.getAdaptationsForPeriod(q,z);var D=b0.call(this,R[C][w]),H="text"===v?D.mimeType:D.codec;if(E.capabilities.supportsCodec(x,H)){G.push(D);var L={name:B[y].lang,id:F,adaptionIndex:w,representations:B[y].Representation_asArray};if("text"===v&&(L.lang=B[y].lang,L.src=B[y].Representation_asArray[0].BaseURL,L.subType=B[y].subType?B[y].subType:"subt",L.trackName=B[y].name?B[y].name:B[y].lang,L.mimeType=B[y].mimeType,B[y].SegmentTemplate&&B[y].SegmentTemplate_asArray.length>0)){L.timescale=B[y].SegmentTemplate_asArray[0].timescale,L.sources=[];var I,K,M=(L.src,B[y].SegmentTemplate_asArray[0].media),J=0,O=0,N=B[y].SegmentTemplate_asArray[0].SegmentTimeline_asArray[0].S_asArray;for(M=L.src.replace("$Bandwidth$",B[y].Representation_asArray[0].bandwidth),A=0;A<N.length;A++)I=N[A],I.t&&(J=I.t,B[y].SegmentTemplate_asArray[0].presentationTimeOffset&&(O=B[y].SegmentTemplate_asArray[0].presentationTimeOffset)),K={src:M.replace("$Time$",J),startTime:J-O},L.sources.push(K),J+=I.d;delete  L.src;}CL.configs.tracks[v][L.id]=L,F++;}}return null==CL.configs.activeTrack[v]&&"text"!=v&&(CL.configs.activeTrack[v]=CL.configs.tracks[v][0],CL.configs.previousActiveTrack[v]=CL.configs.tracks[v][0]),G;},e0=function(q){var u,v,w,x=[];if(!q)return null;for(u=this.manifestExt.getMpd(q),P=this.manifestExt.getRegularPeriods(q,u),R={},v=P.length,w=0;v>w;w+=1)x.push(X.call(this,P[w]));return x;},d0=function(q){var u=this.manifestExt.getMpd(q);return a0.call(this,u);},c0=function(q,u){var v=q.trackController.getRepresentationForQuality(u);return q.indexHandler.getInitRequest(v);},f0=function(q,u){var v=V(u,q.trackController);return q.indexHandler.getNextSegmentRequest(v);},h0=function(q,u,v,w){var x=V(u,q.trackController);return q.indexHandler.getSegmentRequestForTime(x,v,w);},m0=function(q,u,v){var w=V(u,q.trackController);return q.indexHandler.generateSegmentRequestForTime(w,v);},k0=function(q){return q.indexHandler.getCurrentTime();},o0=function(q,u){return q.indexHandler.setCurrentTime(u);},y0=function(q){var u,v,w=U(q.getStreamInfo()),x=q.getMediaInfo(),y=Q(x),A=this.manifestModel.getValue(),z=q.getType();(z.indexOf("text")>-1||z.indexOf("ttml")>-1)&&(z="text"),u=x.id,v=u?this.manifestExt.getAdaptationForId(u,A,w.index):this.manifestExt.getAdaptationForIndex(x.index,A,w.index),q.setMediaInfo(x),q.trackController.updateData(v,y,z);},u0=function(q,u){var v=q.getRepresentationForQuality(u);return v?Y.call(this,v):null;},s0=function(q){var u=q.getCurrentRepresentation();return u?Y.call(this,u):null;},t0=function(q,u,v){var w=new Dash.vo.Event,x=q[0],y=q[1],A=q[2],z=q[3],C=q[4],B=q[5],E=q[6],G=v*A+z;return u[x]?(w.eventStream=u[x],w.eventStream.value=y,w.eventStream.timescale=A,w.duration=C,w.id=B,w.presentationTime=G,w.messageData=E,w.presentationTimeDelta=z,w):null;},A0=function(q,u){var v=this.manifestModel.getValue(),w=[];return q instanceof MediaPlayer.vo.StreamInfo?w=this.manifestExt.getEventsForPeriod(v,U(q)):q instanceof MediaPlayer.vo.MediaInfo?w=this.manifestExt.getEventStreamForAdaptationSet(v,Q(q)):q instanceof MediaPlayer.vo.TrackInfo&&(w=this.manifestExt.getEventStreamForRepresentation(v,V(q,u.trackController))),w;};return {system:void 0,manifestExt:void 0,manifestModel:void 0,timelineConverter:void 0,metricsList:{TCP_CONNECTION:"TcpConnection",HTTP_REQUEST:"HttpRequest",HTTP_REQUEST_TRACE:"HttpRequestTrace",TRACK_SWITCH:"RepresentationSwitch",BUFFER_LEVEL:"BufferLevel",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",PLAY_LIST_TRACE:"PlayListTrace"},convertDataToTrack:Y,convertDataToMedia:b0,convertDataToStream:X,getDataForTrack:V,getDataForMedia:Q,getDataForStream:U,getStreamsInfo:e0,getManifestInfo:d0,getMediaInfoForType:Z,getMediaInfosForType:W,getCurrentTrackInfo:s0,getTrackInfoForQuality:u0,updateData:y0,getInitRequest:c0,getNextFragmentRequest:f0,getFragmentRequestForTime:h0,generateFragmentRequestForTime:m0,getIndexHandlerTime:k0,setIndexHandlerTime:o0,getEventsFor:A0,getEvent:t0,reset:function(){P=[],R={};}};},Dash.dependencies.DashAdapter.prototype={constructor:Dash.dependencies.DashAdapter},Dash.create=function(u,v,w){if("undefined"==typeof u||"VIDEO"!=u.nodeName)return null;var x,y=u.id||u.name||"video element";return w=w||new Dash.di.DashContext,v=v||[].slice.call(u.querySelectorAll("source")).filter(function(q){return q.type==Dash.supportedManifestMimeTypes.mimeType;})[0],x=new MediaPlayer(w),x.startup(),x.attachView(u),x.setAutoPlay(u.autoplay),x.attachSource(v.src),x.getDebug().log("Converted "+y+" to dash.js player and added content: "+v.src),x;},Dash.createAll=function(q,u,v){var w=[];q=q||".dashjs-player",u=u||document,v=v||new Dash.di.DashContext;for(var x=u.querySelectorAll(q),y=0;y<x.length;y++){var A=Dash.create(x[y],void 0,v);w.push(A);}return w;},Dash.supportedManifestMimeTypes={mimeType:"application/dash+xml"},Dash.dependencies.DashHandler=function(){"use strict";var U,Y,b0,X=-1,a0=0,Z=new RegExp("^(?:(?:[a-z]+:)?/)?/","i"),W=function(q,u){for(;q.length<u;)q="0"+q;return q;},e0=function(q,u,v){for(var w,x,y,A,z=0,C=0,B=u.length,E="%0",G=E.length;;){if(z=q.indexOf("$"+u),0>z)return q;if(C=q.indexOf("$",z+B),0>C)return q;if(w=q.indexOf(E,z+B),w>z&&C>w)switch(x=q.charAt(C-1),y=parseInt(q.substring(w+G,C-1),10),x){case "d":case "i":case "u":A=W(v.toString(),y);break;case "x":A=W(v.toString(16),y);break;case "X":A=W(v.toString(16),y).toUpperCase();break;case "o":A=W(v.toString(8),y);break;default:return this.log("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),q;}else A=v;q=q.substring(0,z)+A+q.substring(C+1);}},d0=function(q){return q.split("$$").join("$");},c0=function(q,u){if(null===u||-1===q.indexOf("$RepresentationID$"))return q;var v=u.toString();return q.split("$RepresentationID$").join(v);},f0=function(q,u){return q.representation.startNumber+u;},h0=function(q,u){var v,w=u.adaptation.period.mpd.manifest.Period_asArray[u.adaptation.period.index].AdaptationSet_asArray[u.adaptation.index].Representation_asArray[u.index].BaseURL;return v=q===w?q:Z.test(q)?q:w+q;},m0=function(q,u){var v,w,x=this,y=new MediaPlayer.vo.FragmentRequest;return v=q.adaptation.period,y.mediaType=u,y.type="Initialization Segment",-1==q.initialization?(y.url="",y.range=-1):(y.url=h0(q.initialization,q),y.range=q.range),w=v.start,y.availabilityStartTime=x.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(w,q.adaptation.period.mpd,Y),y.availabilityEndTime=x.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(w+v.duration,v.mpd,Y),y.quality=q.index,y;},k0=function(q){var u,v=this;return q?u=m0.call(v,q,b0):null;},o0=function(q){var u,v,w,x=q.adaptation.period,y=!1;return Y?y=!1:0>X?y=!1:X<q.availableSegmentsNumber?(v=w0(X,q),v&&(w=v.presentationStartTime-x.start,u=q.adaptation.period.duration,this.log(q.segmentInfoType+": "+w+" / "+u),y=w>=u)):y=!0,y;},y0=function(q,u){var v,w,x,y,A=this;return w=q.segmentDuration,isNaN(w)&&(w=q.adaptation.period.duration),x=q.adaptation.period.start+u*w,y=x+w,v=new Dash.vo.Segment,v.representation=q,v.duration=w,v.presentationStartTime=x,v.mediaStartTime=A.timelineConverter.calcMediaTimeFromPresentationTime(v.presentationStartTime,q),v.availabilityStartTime=A.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(v.presentationStartTime,q.adaptation.period.mpd,Y),v.availabilityEndTime=A.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(y,q.adaptation.period.mpd,Y),v.wallStartTime=A.timelineConverter.calcWallTimeForSegment(v,Y),v.replacementNumber=f0(v,u),v.availabilityIdx=u,v;},u0=function(u){var v,w,x,y,A,z,C,B,E,G,F,D,H,L,I=this,K=u.adaptation.period.mpd.manifest.Period_asArray[u.adaptation.period.index].AdaptationSet_asArray[u.adaptation.index].Representation_asArray[u.index].SegmentTemplate,M=K.SegmentTimeline,J=u.availableSegmentsNumber>0,O=10,N=[],P=0,R=0,V=-1,Q=function(q){return q0.call(I,u,P,q.d,L,K.media,q.mediaRange,V);};for(L=u.timescale,v=M.S_asArray,E=A0.call(I,u),E?(D=E.start,H=E.end):F=I.timelineConverter.calcMediaTimeFromPresentationTime(U||0,u),x=0,y=v.length;y>x;x+=1)if(w=v[x],z=0,w.hasOwnProperty("r")&&(z=w.r),w.hasOwnProperty("t")&&(P=w.t,R=P/L),0>z&&(B=v[x+1],B&&B.hasOwnProperty("t")?C=B.t/L:(C=I.timelineConverter.calcMediaTimeFromPresentationTime(u.segmentAvailabilityRange.end,u),u.segmentDuration=w.d/L),z=Math.ceil((C-R)/(w.d/L))-1),G){if(J)break;V+=z+1;}else for(A=0;z>=A;A+=1){if(V+=1,E){if(V>H){if(G=!0,J)break;continue;}V>=D&&N.push(Q.call(I,w));}else{if(N.length>O){if(G=!0,J)break;continue;}R>=F-w.d/L&&N.push(Q.call(I,w));}P+=w.d,R=P/L;}return J||(u.availableSegmentsNumber=V+1),N;},s0=function(q){var u,v,w,x,y,A=[],z=this,C=q.adaptation.period.mpd.manifest.Period_asArray[q.adaptation.period.index].AdaptationSet_asArray[q.adaptation.index].Representation_asArray[q.index].SegmentTemplate,B=q.segmentDuration,E=q.segmentAvailabilityRange,G=null,F=null;for(y=q.startNumber,u=isNaN(B)&&!Y?{start:y,end:y}:t0.call(z,q),w=u.start,x=u.end,v=w;x>=v;v+=1)G=y0.call(z,q,v),G.replacementTime=(y+v-1)*q.segmentDuration,F=C.media,F=e0(F,"Number",G.replacementNumber),F=e0(F,"Time",G.replacementTime),G.media=F,A.push(G),G=null;return q.availableSegmentsNumber=isNaN(B)?1:Math.ceil((E.end-E.start)/B),A;},t0=function(q){var u,v,w,x=this,y=q.segmentDuration,A=q.adaptation.period.mpd.manifest.minBufferTime,z=q.segmentAvailabilityRange,C={start:x.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(q,z.start),end:x.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(q,z.end)},B=0/0,E=null,G=q.segments,F=2*y,D=Math.max(2*A,q.segmentAvailabilityRange.end);return C||(C=x.timelineConverter.calcSegmentAvailabilityRange(q,Y)),Y&&!x.timelineConverter.isTimeSyncCompleted()?(u=Math.floor(C.start/y),v=Math.floor(C.end/y),w={start:u,end:v}):(G&&G.length>0?(E=w0(X,q),B=E?x.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(q,E.presentationStartTime):X>0?X*y:x.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(q,U||G[0].presentationStartTime)):B=X>0?X*y:Y?C.end:C.start,u=Math.floor(Math.max(B-F,C.start)/y),v=Math.floor(Math.min(u+D/y,C.end/y)),w={start:u,end:v});},A0=function(){var q,u,v,w=2,x=10,y=0,A=Number.POSITIVE_INFINITY;return Y&&!this.timelineConverter.isTimeSyncCompleted()?v={start:y,end:A}:!Y&&U||0>X?null:(q=Math.max(X-w,y),u=Math.min(X+x,A),v={start:q,end:u});},q0=function(q,u,v,w,x,y,A){var z,C,B,E,G=this,F=u/w,D=Math.min(v/w,q.adaptation.period.mpd.maxSegmentDuration);return z=G.timelineConverter.calcPresentationTimeFromMediaTime(F,q),C=z+D,B=new Dash.vo.Segment,B.representation=q,B.duration=D,B.mediaStartTime=F,B.presentationStartTime=z,B.availabilityStartTime=q.adaptation.period.mpd.manifest.loadedTime,B.availabilityEndTime=G.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(C,q.adaptation.period.mpd,Y),B.wallStartTime=G.timelineConverter.calcWallTimeForSegment(B,Y),E=CL.configs.ssTimeOffset[B.representation.adaptation.id],B.replacementTime=u+(void 0!=E?E:0),B.replacementNumber=f0(B,A),x=e0(x,"Number",B.replacementNumber),x=e0(x,"Time",B.replacementTime),B.media=x,B.mediaRange=y,B.availabilityIdx=A,B;},v0=function(q){var u,v,w,x,y,A,z,C=this,B=[],E=q.adaptation.period.mpd.manifest.Period_asArray[q.adaptation.period.index].AdaptationSet_asArray[q.adaptation.index].Representation_asArray[q.index].SegmentList,G=q.adaptation.period.mpd.manifest.Period_asArray[q.adaptation.period.index].AdaptationSet_asArray[q.adaptation.index].Representation_asArray[q.index].BaseURL,F=E.SegmentURL_asArray.length;for(z=q.startNumber,x=t0.call(C,q),y=Math.max(x.start,0),A=Math.min(x.end,E.SegmentURL_asArray.length-1),u=y;A>=u;u+=1)w=E.SegmentURL_asArray[u],v=y0.call(C,q,u),v.replacementTime=(z+u-1)*q.segmentDuration,v.media=w.media?w.media:G,v.mediaRange=w.mediaRange,v.index=w.index,v.indexRange=w.indexRange,B.push(v),v=null;return q.availableSegmentsNumber=F,B;},r0=function(q){var u,v=this,w=q.segmentInfoType;return "SegmentBase"!==w&&"BaseURL"!==w&&z0.call(v,q)?("SegmentTimeline"===w?u=u0.call(v,q):"SegmentTemplate"===w?u=s0.call(v,q):"SegmentList"===w&&(u=v0.call(v,q)),D0.call(v,q,u)):u=q.segments,u;},D0=function(q,u){var v,w,x,y;q.segments=u,v=u.length-1,Y&&isNaN(this.timelineConverter.getExpectedLiveEdge())&&(y=u[v],w=y.presentationStartTime+y.duration,x=this.metricsModel.getMetricsFor("stream"),this.timelineConverter.setExpectedLiveEdge(w),this.metricsModel.updateManifestUpdateInfo(this.metricsExt.getCurrentManifestUpdate(x),{presentationStartTime:w}));},p0=function(q){var u=this;if(!q)throw  new Error("no representation");return q.segments=null,r0.call(u,q),q;},B0=function(q,u){var v,w=this,x=q.initialization,y="BaseURL"!==q.segmentInfoType&&"SegmentBase"!==q.segmentInfoType;return q.segmentDuration||q.segments||p0.call(w,q),q.segmentAvailabilityRange=null,q.segmentAvailabilityRange=w.timelineConverter.calcSegmentAvailabilityRange(q,Y),q.segmentAvailabilityRange.end<q.segmentAvailabilityRange.start&&!q.useCalculatedLiveEdgeTime?(v=new MediaPlayer.vo.Error(Dash.dependencies.DashHandler.SEGMENTS_UNAVAILABLE_ERROR_CODE,"no segments are available yet",{availabilityDelay:Math.abs(q.segmentAvailabilityRange.end)}),void w.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:q},v)):(u||(X=-1),q.segmentDuration&&p0.call(w,q),x||w.baseURLExt.loadInitialization(q),y||w.baseURLExt.loadSegments(q,b0,q.indexRange),void (x&&y&&w.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:q})));},C0=function(q,u,v){var w,x,y,A,z,C=u.segments,B=C?C.length:null,E=-1;if(C&&B>0)for(z=0;B>z;z+=1)if(x=C[z],y=x.presentationStartTime,A=x.duration,w=void 0===v||null===v?A/2:v,q+w>=y&&y+A>q-w){E=x.availabilityIdx;break;}return E;},w0=function(q,u){if(!u||!u.segments)return null;var v,w,x=u.segments.length;for(w=0;x>w;w+=1)if(v=u.segments[w],v.availabilityIdx===q||0===w&&-1===q)return CL.configs.firstIndex[b0]&&v.presentationStartTime>0&&0===q&&(null!=CL.configs.minStartTime&&v.presentationStartTime>CL.configs.minStartTime||null==CL.configs.minStartTime)&&(CL.configs.minStartTime=v.presentationStartTime,CL.configs.firstIndex[b0]=!1),v;return null;},z0=function(q){var u,v,w=!1,x=q.segments;return x&&0!==x.length?(v=x[0].availabilityIdx,u=x[x.length-1].availabilityIdx,w=v>X||X>u):w=!0,w;},G0=function(q){if(null===q||void 0===q)return null;var u,v=new MediaPlayer.vo.FragmentRequest,w=q.representation,x=w.adaptation.period.mpd.manifest.Period_asArray[w.adaptation.period.index].AdaptationSet_asArray[w.adaptation.index].Representation_asArray[w.index].bandwidth;u=h0(q.media,w),u=e0(u,"Number",q.replacementNumber),u=e0(u,"Time",q.replacementTime),u=e0(u,"Bandwidth",x),u=c0(u,w.id);var y,A="";for(var z in CL.configs.customAttributes[w.id])y=CL.configs.customAttributes[w.id][z],A+=y.Name+"="+y.Value+",";return A.length>0&&(A=A.substring(0,A.length-1),u=e0(u,"CustomAttributes",A)),u=d0(u),v.mediaType=b0,v.type="Media Segment",v.url=u,v.range=q.mediaRange,v.startTime=q.presentationStartTime,v.duration=q.duration,v.timescale=w.timescale,v.availabilityStartTime=q.availabilityStartTime,v.availabilityEndTime=q.availabilityEndTime,v.wallStartTime=q.wallStartTime,v.quality=w.index,v.index=q.availabilityIdx,v;},F0=function(q,u,v){var w,x,y,A=X,z=v?v.keepIdx:!1,C=v?v.timeThreshold:null,B=this;if(!q)return null;if(u<q.segmentAvailabilityRange.start&&u>0&&CL.configs.isLive===!0){var E=Math.min(4,q.segments.length);q.segments.length>0?(CL.configs.minStartTime=q.segmentAvailabilityRange.start+q.segments[0].duration*(E-1),this.streamProcessor.getPlaybackController().seek(CL.configs.minStartTime)):(CL.configs.needManifestUpdate=!0,CL.configs.lookAheadFragments={audio:[],video:[],text:[]},this.streamProcessor.getPlaybackController().seek(q.segmentAvailabilityRange.end-2));}CL.configs.isLive===!0&&CL.configs.adjustLiveEdge===!0&&(CL.configs.adjustLiveEdge=!1,CL.configs.minStartTime=Math.max(u,CL.configs.minStartTime)),1==CL.configs.isLive&&null!=CL.configs.minStartTime&&u<CL.configs.minStartTime&&(u=Math.max(u,CL.configs.minStartTime));var G=u%1;return G>0&&(G>.999999?u+=1-G:1e-6>G&&(u-=G)),U=u,B.log("Getting the request for time: "+u),X=C0.call(B,u,q,C),r0.call(B,q),0>X&&(X=C0.call(B,u,q,C)),0>X&&1==CL.configs.isLive&&(X=0),B.log("Index for "+q.adaptation.type+" time "+u+" is "+X),y=o0.call(B,q),y?(w=new MediaPlayer.vo.FragmentRequest,w.action=w.ACTION_COMPLETE,w.index=X,w.mediaType=b0,B.log("Signal complete."),B.log(w)):(x=w0(X,q),w=G0.call(B,x)),z&&(X=A),w;},H0=function(q,u){var v=(q.segmentAvailabilityRange.end-q.segmentAvailabilityRange.start)/2;return q.segments=null,q.segmentAvailabilityRange={start:u-v,end:u+v},F0.call(this,q,u,{keepIdx:!1});},g0=function(q){var u,v,w,x,y=this;if(!q)return null;if(-1===X)throw "You must call getSegmentRequestForTime first.";return U=null,X+=1,x=X,w=o0.call(y,q),w?(u=new MediaPlayer.vo.FragmentRequest,u.action=u.ACTION_COMPLETE,u.index=x,u.mediaType=b0,y.log("Signal complete.")):(r0.call(y,q),v=w0(x,q),u=G0.call(y,v)),u;},l0=function(q){var u=q.data.representation;u.segments&&this.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:u});},i0=function(q){if(!q.error&&b0===q.data.mediaType){var u,v,w,x,y=this,A=q.data.segments,z=q.data.representation,C=[],B=0;for(u=0,v=A.length;v>u;u+=1)w=A[u],x=q0.call(y,z,w.startTime,w.duration,w.timescale,w.media,w.mediaRange,B),C.push(x),x=null,B+=1;z.segmentAvailabilityRange={start:C[0].presentationStartTime,end:C[v-1].presentationStartTime},z.availableSegmentsNumber=v,D0.call(y,z,C),z.initialization&&this.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:z});}};return {log:void 0,baseURLExt:void 0,timelineConverter:void 0,metricsModel:void 0,metricsExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED]=l0,this[Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED]=i0;},initialize:function(q){this.subscribe(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,q.trackController),b0=q.getType(),this.setMediaType(b0),Y=q.isDynamic(),this.streamProcessor=q;},getType:function(){return b0;},setType:function(q){b0=q;},getIsDynamic:function(){return Y;},setIsDynamic:function(q){Y=q;},setCurrentTime:function(q){a0=q;},getCurrentTime:function(){return a0;},reset:function(){a0=0,U=void 0,X=-1,this.unsubscribe(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,this.streamProcessor.trackController);},getInitRequest:k0,getSegmentRequestForTime:F0,getNextSegmentRequest:g0,generateSegmentRequestForTime:H0,updateRepresentation:B0};},Dash.dependencies.DashHandler.prototype={constructor:Dash.dependencies.DashHandler},Dash.dependencies.DashHandler.SEGMENTS_UNAVAILABLE_ERROR_CODE=1,Dash.dependencies.DashHandler.eventList={ENAME_REPRESENTATION_UPDATED:"representationUpdated"},Dash.dependencies.DashParser=function(){"use strict";var E=function(){var q,u,v,w;return w=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],q={},q.name="AdaptationSet",q.isRoot=!1,q.isArray=!0,q.parent=null,q.children=[],q.properties=w,u={},u.name="Representation",u.isRoot=!1,u.isArray=!0,u.parent=q,u.children=[],u.properties=w,q.children.push(u),v={},v.name="SubRepresentation",v.isRoot=!1,v.isArray=!0,v.parent=u,v.children=[],v.properties=w,u.children.push(v),q;},G=function(){var q,u,v,w;return w=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],q={},q.name="Period",q.isRoot=!1,q.isArray=!0,q.parent=null,q.children=[],q.properties=w,u={},u.name="AdaptationSet",u.isRoot=!1,u.isArray=!0,u.parent=q,u.children=[],u.properties=w,q.children.push(u),v={},v.name="Representation",v.isRoot=!1,v.isArray=!0,v.parent=u,v.children=[],v.properties=w,u.children.push(v),q;},F=function(){var w,x,y,A,z;return z=[{name:"BaseURL",merge:!0,mergeFunction:function(q,u){var v;return v=0===u.indexOf("http://")?u:q+u;}}],w={},w.name="mpd",w.isRoot=!0,w.isArray=!0,w.parent=null,w.children=[],w.properties=z,x={},x.name="Period",x.isRoot=!1,x.isArray=!0,x.parent=null,x.children=[],x.properties=z,w.children.push(x),y={},y.name="AdaptationSet",y.isRoot=!1,y.isArray=!0,y.parent=x,y.children=[],y.properties=z,x.children.push(y),A={},A.name="Representation",A.isRoot=!1,A.isArray=!0,A.parent=y,A.children=[],A.properties=z,y.children.push(A),w;},D=function(){var q=[];return q.push(E()),q.push(G()),q.push(F()),q;},H=function(u,v){var w,x,y=new X2JS({arrayAccessForm:"property"}),A=new ObjectIron(D()),z=new Date,C=null,B=null;try{1==CL.manifest.fixAudioCodec&&(u=u.replace(/mp4a.40.2/gi,"mp4a.40.5")),w=y.xml_str2json(u),w=w.MPD,x=JSON.stringify(w),x=x.replace(/"_/g,'"'),w=JSON.parse(x),C=new Date,w.hasOwnProperty("BaseURL")?(w.BaseURL=w.BaseURL_asArray[0],0!==w.BaseURL.toString().indexOf("http")&&(w.BaseURL=v+w.BaseURL)):w.BaseURL=v,w.hasOwnProperty("Location")&&(w.Location=w.Location_asArray[0]),A.run(w),B=new Date,this.log("Parsing complete: ( xml2json: "+(C.getTime()-z.getTime())+"ms, objectiron: "+(B.getTime()-C.getTime())+"ms, total: "+(B.getTime()-z.getTime())/1e3+"s)");}catch(q){return this.errHandler.manifestError("parsing the manifest failed","parse",u),null;}return w;};return {log:void 0,errHandler:void 0,parse:H};},Dash.dependencies.DashParser.prototype={constructor:Dash.dependencies.DashParser},Dash.dependencies.TimelineConverter=function(){"use strict";var B=0,E=!1,G=0/0,F=function(q,u,v,w){var x=0/0;return x=w?v&&u.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(u.availabilityStartTime.getTime()+1e3*(q+u.timeShiftBufferDepth)):u.availabilityEndTime:v?new Date(u.availabilityStartTime.getTime()+1e3*(q-B)):u.availabilityStartTime;},D=function(q,u,v){return F.call(this,q,u,v);},H=function(q,u,v){return F.call(this,q,u,v,!0);},L=function(q,u){return (q.getTime()-u.mpd.availabilityStartTime.getTime()+1e3*B)/1e3;},I=function(q,u){var v=u.adaptation.period.start,w=u.presentationTimeOffset;return q+(v-w);},K=function(q,u){var v=u.adaptation.period.start,w=u.presentationTimeOffset;return q-v+w;},M=function(q,u){var v,w,x;return u&&(v=q.representation.adaptation.period.mpd.suggestedPresentationDelay,w=q.presentationStartTime+v,x=new Date(q.availabilityStartTime.getTime()+1e3*w)),x;},J=function(q,u){var v,w,x=q.adaptation.period.duration,y=q.adaptation.period.start,A=y+q.adaptation.period.duration,z={start:y,end:A},C=q.segmentDuration||(q.segments&&q.segments.length?q.segments[q.segments.length-1].duration:0);return u?E&&!isNaN(x)||!q.segmentAvailabilityRange?(v=q.adaptation.period.mpd.checkTime,w=L(new Date,q.adaptation.period),y=Math.max(w-q.adaptation.period.mpd.timeShiftBufferDepth,0),A=(isNaN(v)?w:Math.min(v,w))-C,z={start:y,end:A}):q.segmentAvailabilityRange:z;},O=function(q,u){var v=q.adaptation.period.start;return u-v;},N=function(q,u){var v=q.adaptation.period.start;return u+v;},P=function(q){E||q.error||(B=q.data.liveEdge-(G+q.data.searchTime),E=!0);},R=function(q){E||q.error||(B=q.data.offset/1e3,E=!0);},V=function(q){var u=q.presentationTimeOffset,v=q.adaptation.period.start;return v-u;},Q=function(){B=0,E=!1,G=0/0;};return {setup:function(){this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=P,this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=R;},calcAvailabilityStartTimeFromPresentationTime:D,calcAvailabilityEndTimeFromPresentationTime:H,calcPresentationTimeFromWallTime:L,calcPresentationTimeFromMediaTime:I,calcPeriodRelativeTimeFromMpdRelativeTime:O,calcMpdRelativeTimeFromPeriodRelativeTime:N,calcMediaTimeFromPresentationTime:K,calcSegmentAvailabilityRange:J,calcWallTimeForSegment:M,calcMSETimeOffset:V,reset:Q,isTimeSyncCompleted:function(){return E;},getClientTimeOffset:function(){return B;},getExpectedLiveEdge:function(){return G;},setExpectedLiveEdge:function(q){G=q;}};},Dash.dependencies.TimelineConverter.prototype={constructor:Dash.dependencies.TimelineConverter},Dash.dependencies.RepresentationController=function(){"use strict";var B,E=null,G=-1,F=!0,D=[],H=function(q,u,v){var w,x=this,y=null,A=x.streamProcessor.getStreamInfo(),z=x.abrController.getTopQualityIndexFor(v,A.id);if(F=!0,x.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED),D=O.call(x,u),null===E?(y=x.abrController.getInitialBitrateFor(v,A),w=x.abrController.getQualityForBitrate(x.streamProcessor.getMediaInfo(),y)):w=x.abrController.getQualityFor(v,A),w>z&&(w=z),B=K.call(x,w),E=q,"video"!==v&&"audio"!==v&&"fragmentedText"!==v)return F=!1,x.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,{data:E,currentRepresentation:B}),void L.call(x);for(var C=0;C<D.length;C+=1)x.indexHandler.updateRepresentation(D[C],!0);},L=function(){var q=new Date,u=this.getCurrentRepresentation(),v=this.streamProcessor.playbackController.getTime();this.metricsModel.addTrackSwitch(u.adaptation.type,q,v,u.id);},I=function(){var q=this.streamProcessor,u=this.timelineConverter.calcSegmentAvailabilityRange(B,q.isDynamic());this.metricsModel.addDVRInfo(q.getType(),q.playbackController.getTime(),q.getStreamInfo().manifestInfo,u);},K=function(q){return D[q];},M=function(q){return D.indexOf(q);},J=function(){for(var q=0,u=D.length;u>q;q+=1)if(null===D[q].segmentAvailabilityRange||null===D[q].initialization)return !1;return !0;},O=function(q){var u,v=this,w=v.manifestModel.getValue();return G=v.manifestExt.getIndexForAdaptation(E,w,q.period.index),u=v.manifestExt.getRepresentationsForAdaptation(w,q);},N=function(q){for(var u,v=this,w=0,x=D.length;x>w;w+=1)u=D[w],u.segmentAvailabilityRange=v.timelineConverter.calcSegmentAvailabilityRange(u,q);},P=function(u){var v=this,w=1e3*(u+3*B.segmentDuration),x=function(){if(!this.isUpdating()){F=!0,v.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED);for(var q=0;q<D.length;q+=1)v.indexHandler.updateRepresentation(D[q],!0);}};F=!1,setTimeout(x.bind(this),w);},R=function(q){if(this.isUpdating()){var u,v,w=this,x=q.data.representation,y=w.metricsModel.getMetricsFor("stream"),A=w.metricsExt.getCurrentManifestUpdate(y),z=!1;if(q.error&&q.error.code===Dash.dependencies.DashHandler.SEGMENTS_UNAVAILABLE_ERROR_CODE)return I.call(this),P.call(this,q.error.data.availabilityDelay),v=new MediaPlayer.vo.Error(Dash.dependencies.RepresentationController.SEGMENTS_UPDATE_FAILED_ERROR_CODE,"Segments update failed",null),void this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,{data:E,currentRepresentation:B},v);for(var C=0;C<A.trackInfo.length;C+=1)if(u=A.trackInfo[C],u.index===x.index&&u.mediaType===w.streamProcessor.getType()){z=!0;break;}z||w.metricsModel.addManifestUpdateTrackInfo(A,x.id,x.index,x.adaptation.period.index,w.streamProcessor.getType(),x.presentationTimeOffset,x.startNumber,x.segmentInfoType),J()&&(F=!1,w.abrController.setPlaybackQuality(w.streamProcessor.getType(),w.streamProcessor.getStreamInfo(),M.call(this,B)),w.metricsModel.updateManifestUpdateInfo(A,{latency:B.segmentAvailabilityRange.end-w.streamProcessor.playbackController.getTime()}),this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,{data:E,currentRepresentation:B}),L.call(w));}},V=function(q){N.call(this,q.data.isDynamic);},Q=function(q){if(!q.error){N.call(this,!0),this.indexHandler.updateRepresentation(B,!1);var u=this.manifestModel.getValue();B.adaptation.period.mpd.checkTime=this.manifestExt.getCheckTime(u,B.adaptation.period);}},U=function(){I.call(this);},Y=function(q){var u=this;q.data.mediaType===u.streamProcessor.getType()&&u.streamProcessor.getStreamInfo().id===q.data.streamInfo.id&&(B=u.getRepresentationForQuality(q.data.newQuality),b0.call(u,q.data.mediaType,B.bandwidth),L.call(u));},b0=function(q,u){!this.DOMStorage.isSupported(MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL)||"video"!==q&&"audio"!==q||localStorage.setItem(MediaPlayer.utils.DOMStorage["LOCAL_STORAGE_"+q.toUpperCase()+"_BITRATE_KEY"],JSON.stringify({bitrate:u/1e3,timestamp:(new Date).getTime()}));};return {system:void 0,log:void 0,manifestExt:void 0,manifestModel:void 0,metricsModel:void 0,metricsExt:void 0,abrController:void 0,timelineConverter:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,DOMStorage:void 0,setup:function(){this[MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED]=Y,this[Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED]=R,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED]=V,this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=Q,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED]=U;},initialize:function(q){this.streamProcessor=q,this.indexHandler=q.indexHandler;},getData:function(){return E;},getDataIndex:function(){return G;},isUpdating:function(){return F;},updateData:H,getRepresentationForQuality:K,getCurrentRepresentation:function(){return B;}};},Dash.dependencies.RepresentationController.prototype={constructor:Dash.dependencies.RepresentationController},Dash.dependencies.RepresentationController.SEGMENTS_UPDATE_FAILED_ERROR_CODE=1,Dash.dependencies.RepresentationController.eventList={ENAME_DATA_UPDATE_COMPLETED:"dataUpdateCompleted",ENAME_DATA_UPDATE_STARTED:"dataUpdateStarted"},Dash.dependencies.BaseURLExtensions=function(){"use strict";var a0=function(q,u){for(var v,w,x,y,A,z,C,B,E,G,F=new DataView(q),D={},H=0;"sidx"!==B&&H<F.byteLength;){for(E=F.getUint32(H),H+=4,B="",y=0;4>y;y+=1)G=F.getInt8(H),B+=String.fromCharCode(G),H+=1;"moof"!==B&&"traf"!==B&&"sidx"!==B?H+=E-8:"sidx"===B&&(H-=8);}if(x=F.getUint32(H,!1)+H,x>q.byteLength)throw "sidx terminates after array buffer";D.version=F.getUint8(H+8),H+=12,D.timescale=F.getUint32(H+4,!1),H+=8,0===D.version?(D.earliest_presentation_time=F.getUint32(H,!1),D.first_offset=F.getUint32(H+4,!1),H+=8):(D.earliest_presentation_time=utils.Math.to64BitNumber(F.getUint32(H+4,!1),F.getUint32(H,!1)),D.first_offset=(F.getUint32(H+8,!1)<<32)+F.getUint32(H+12,!1),H+=16),D.first_offset+=x+(u||0),D.reference_count=F.getUint16(H+2,!1),H+=4,D.references=[],v=D.first_offset,w=D.earliest_presentation_time;var L=w/D.timescale*1.5;for((null==CL.configs.minStartTime||L>CL.configs.minStartTime)&&(CL.configs.minStartTime=L),y=0;y<D.reference_count;y+=1)z=F.getUint32(H,!1),A=z>>>31,z=2147483647&z,C=F.getUint32(H+4,!1),H+=12,D.references.push({size:z,type:A,offset:v,duration:C,time:w,timescale:D.timescale}),v+=z,w+=C;if(H!==x)throw "Error: final pos "+H+" differs from SIDX end "+x;return D;},Z=function(q,u,v){var w,x,y,A,z,C,B,E;for(w=a0.call(this,q,v),x=w.references,y=[],z=0,C=x.length;C>z;z+=1)A=new Dash.vo.Segment,A.duration=x[z].duration,A.media=u,A.startTime=x[z].time,A.timescale=x[z].timescale,B=x[z].offset,E=x[z].offset+x[z].size-1,A.mediaRange=B+"-"+E,y.push(A);return this.log("Parsed SIDX box: "+y.length+" segments."),y;},W=function(u,v,w){var x,y,A,z,C,B,E,G,F=new DataView(u),D=0,H="",L=0,I=!1,K=this;for(K.log("Searching for initialization.");"moov"!==H&&D<F.byteLength;){for(L=F.getUint32(D),D+=4,H="",C=0;4>C;C+=1)B=F.getInt8(D),H+=String.fromCharCode(B),D+=1;"ftyp"===H&&(x=D-8),"moov"===H&&(y=D-8),"moov"!==H&&(D+=L-8);}"moov"!==H?(K.log("Loading more bytes to find initialization."),v.range.start=0,v.range.end=v.bytesLoaded+v.bytesToLoad,E=new XMLHttpRequest,E.onloadend=function(){I||w.call(K,null,new Error("Error loading initialization."));},E.onload=function(){I=!0,v.bytesLoaded=v.range.end,W.call(K,E.response,function(q){w.call(K,q);});},E.onerror=function(){w.call(K,null,new Error("Error loading initialization."));},f0.call(K,E,v)):(A=void 0===x?y:x,z=y+L-1,G=A+"-"+z,K.log("Found the initialization.  Range: "+G),w.call(K,G));},e0=function(u){var v=new XMLHttpRequest,w=!0,x=this,y=u.adaptation.period.mpd.manifest.Period_asArray[u.adaptation.period.index].AdaptationSet_asArray[u.adaptation.index].Representation_asArray[u.index].BaseURL,A={url:y,range:{},searching:!1,bytesLoaded:0,bytesToLoad:3e3,request:v};x.log("Start searching for initialization."),A.range.start=0,A.range.end=A.bytesToLoad,CL.configs.isSmoothStreaming===!0?(w=!1,A.bytesLoaded=A.range.end,u.initialization=-1,x.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,{representation:u})):(v.onload=function(){v.status<200||v.status>299||(w=!1,A.bytesLoaded=A.range.end,W.call(x,v.response,A,function(q){u.range=q,u.initialization=y,x.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,{representation:u});}));},v.onloadend=v.onerror=function(){w&&(w=!1,x.errHandler.downloadError("initialization",A.url,v),x.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,{representation:u}));},f0.call(x,v,A),x.log("Perform init search: "+A.url));},d0=function(u,v,w,x){var y,A,z,C,B,E,G,F,D,H=new DataView(u),L=new XMLHttpRequest,I=0,K="",M=0,J=!0,O=!1,N=this;for(N.log("Searching for SIDX box."),N.log(v.bytesLoaded+" bytes loaded.");"sidx"!==K&&I<H.byteLength;){for(M=H.getUint32(I),I+=4,K="",E=0;4>E;E+=1)G=H.getInt8(I),K+=String.fromCharCode(G),I+=1;"sidx"!==K&&(I+=M-8);}if(A=H.byteLength-I,"sidx"!==K)x.call(N);else if(M-8>A)N.log("Found SIDX but we don't have all of it."),v.range.start=0,v.range.end=v.bytesLoaded+(M-A),L.onload=function(){L.status<200||L.status>299||(J=!1,v.bytesLoaded=v.range.end,d0.call(N,L.response,v,w,x));},L.onloadend=L.onerror=function(){J&&(J=!1,N.errHandler.downloadError("SIDX",v.url,L),x.call(N));},f0.call(N,L,v);else if(v.range.start=I-8,v.range.end=v.range.start+M,N.log("Found the SIDX box.  Start: "+v.range.start+" | End: "+v.range.end),z=new ArrayBuffer(v.range.end-v.range.start),B=new Uint8Array(z),C=new Uint8Array(u,v.range.start,v.range.end-v.range.start),B.set(C),F=this.parseSIDX.call(this,z,v.range.start),D=F.references,null!==D&&void 0!==D&&D.length>0&&(O=1===D[0].type),O){N.log("Initiate multiple SIDX load.");var P,R,V,Q,U,Y=[],b0=0,X=function(q){q?(Y=Y.concat(q),b0+=1,b0>=R&&x.call(N,Y)):x.call(N);};for(P=0,R=D.length;R>P;P+=1)V=D[P].offset,Q=D[P].offset+D[P].size-1,U=V+"-"+Q,c0.call(N,w,null,U,X);}else N.log("Parsing segments from SIDX."),y=Z.call(N,z,v.url,v.range.start),x.call(N,y);},c0=function(u,v,w,x){var y,A,z=new XMLHttpRequest,C=u.adaptation.period.mpd.manifest.Period_asArray[u.adaptation.period.index].AdaptationSet_asArray[u.adaptation.index].Representation_asArray[u.index].BaseURL,B=!0,E=this,G={url:C,range:{},searching:!1,bytesLoaded:0,bytesToLoad:3e3,request:z};null===w?(E.log("No known range for SIDX request."),G.searching=!0,G.range.start=0,G.range.end=G.bytesToLoad):(A=w.split("-"),G.range.start=parseFloat(A[0]),G.range.end=parseFloat(A[1])),z.onload=function(){z.status<200||z.status>299||(B=!1,G.searching?(G.bytesLoaded=G.range.end,d0.call(E,z.response,G,u,function(q){q&&x.call(E,q,u,v);})):(y=Z.call(E,z.response,G.url,G.range.start),x.call(E,y,u,v)));},z.onloadend=z.onerror=function(){B&&(B=!1,E.errHandler.downloadError("SIDX",G.url,z),x.call(E,null,u,v));},f0.call(E,z,G),E.log("Perform SIDX load: "+G.url);},f0=function(q,u){q.open("GET",this.requestModifierExt.modifyRequestURL(u.url)),q.responseType="arraybuffer",q.setRequestHeader("Range","bytes="+u.range.start+"-"+u.range.end),q=this.requestModifierExt.modifyRequestHeader(q),q.send(null);},h0=function(q,u,v){var w=this;q?w.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,{segments:q,representation:u,mediaType:v}):w.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,{segments:null,representation:u,mediaType:v},new MediaPlayer.vo.Error(null,"error loading segments",null));};return {log:void 0,errHandler:void 0,requestModifierExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,loadSegments:function(q,u,v){c0.call(this,q,u,v,h0.bind(this));},loadInitialization:e0,parseSegments:Z,parseSIDX:a0,findSIDX:d0};},Dash.dependencies.BaseURLExtensions.prototype={constructor:Dash.dependencies.BaseURLExtensions},Dash.dependencies.BaseURLExtensions.eventList={ENAME_INITIALIZATION_LOADED:"initializationLoaded",ENAME_SEGMENTS_LOADED:"segmentsLoaded"},Dash.dependencies.DashManifestExtensions=function(){"use strict";this.timelineConverter=void 0;},Dash.dependencies.DashManifestExtensions.prototype={constructor:Dash.dependencies.DashManifestExtensions,getIsTypeOf:function(q,u){"use strict";var v,w,x,y=q.ContentComponent_asArray,A=new RegExp("text"!==u?u:"(vtt|ttml)"),z=!1,C=!1;if(q.Representation_asArray.length>0&&q.Representation_asArray[0].hasOwnProperty("codecs")&&"stpp"==q.Representation_asArray[0].codecs)return "fragmentedText"==u;if(y)for(v=0,w=y.length;w>v;v+=1)y[v].contentType===u&&(z=!0,C=!0);if(q.hasOwnProperty("mimeType")&&(z=A.test(q.mimeType),C=!0),!C)for(v=0,w=q.Representation_asArray.length;!C&&w>v;)x=q.Representation_asArray[v],x.hasOwnProperty("mimeType")&&(z=A.test(x.mimeType),C=!0),v+=1;return z;},getIsAudio:function(q){"use strict";return this.getIsTypeOf(q,"audio");},getIsVideo:function(q){"use strict";return this.getIsTypeOf(q,"video");},getIsFragmentedText:function(q){"use strict";return this.getIsTypeOf(q,"fragmentedText");},getIsText:function(q){"use strict";return this.getIsTypeOf(q,"text");},getIsTextTrack:function(q){return "text/vtt"===q||"application/ttml+xml"===q;},getLanguageForAdaptation:function(q){var u="";return q.hasOwnProperty("lang")&&(u=q.lang),u;},getIsMain:function(){"use strict";return !1;},processAdaptation:function(v){"use strict";return void 0!==v.Representation_asArray&&null!==v.Representation_asArray&&v.Representation_asArray.sort(function(q,u){return q.bandwidth-u.bandwidth;}),v;},getAdaptationForId:function(q,u,v){"use strict";var w,x,y=u.Period_asArray[v].AdaptationSet_asArray;for(w=0,x=y.length;x>w;w+=1)if(y[w].hasOwnProperty("id")&&y[w].id===q)return y[w];return null;},getAdaptationForIndex:function(q,u,v){"use strict";var w=u.Period_asArray[v].AdaptationSet_asArray;return w[q];},getIndexForAdaptation:function(q,u,v){"use strict";var w,x,y=u.Period_asArray[v].AdaptationSet_asArray;for(w=0,x=y.length;x>w;w+=1)if(y[w]===q)return w;return -1;},getAdaptationsForType:function(q,u,v){"use strict";var w,x,y=this,A=q.Period_asArray[u].AdaptationSet_asArray,z=[];for(w=0,x=A.length;x>w;w+=1)this.getIsTypeOf(A[w],v)&&z.push(y.processAdaptation(A[w]));return z;},getActiveAdaptationForType:function(q,u,v){"use strict";var w,x,y=this,A=q.Period_asArray[u].AdaptationSet_asArray,z=v;for((v.indexOf("text")>-1||v.indexOf("ttml")>-1)&&(z="text"),w=0,x=A.length;x>w;w+=1)if(this.getIsTypeOf(A[w],v)&&CL.configs.activeTrack[z].adaptionIndex==w)return y.processAdaptation(A[w]);},getAdaptationForType:function(q,u,v){"use strict";var w,x,y,A=this;if((v.indexOf("text")>-1||v.indexOf("ttml")>-1)&&(cType="text"),void 0!==CL.configs.activeTrack[v])return this.getActiveAdaptationForType(q,u,v);if(y=this.getAdaptationsForType(q,u,v),!y||0===y.length)return null;for(w=0,x=y.length;x>w;w+=1)if(A.getIsMain(y[w]))return y[w];return y[0];},getCodec:function(q){"use strict";var u=q.Representation_asArray[0],v=u.mimeType+';codecs="'+u.codecs+'"';return v;},getMimeType:function(q){"use strict";return q.Representation_asArray[0].mimeType;},getKID:function(q){"use strict";return q&&q.hasOwnProperty("cenc:default_KID")?q["cenc:default_KID"]:void 0!==CL.manifest.keyId&&null!==CL.manifest.keyId?CL.manifest.keyId:null;},getContentProtectionData:function(q){"use strict";return q&&q.hasOwnProperty("ContentProtection_asArray")&&0!==q.ContentProtection_asArray.length?q.ContentProtection_asArray:null;},getIsDynamic:function(q){"use strict";var u=!1,v="dynamic";return q.hasOwnProperty("type")&&(u=q.type===v),u;},getIsDVR:function(q){"use strict";var u,v,w=this.getIsDynamic(q);return u=!isNaN(q.timeShiftBufferDepth),v=w&&u;},getIsOnDemand:function(q){"use strict";var u=!1;return q.profiles&&q.profiles.length>0&&(u=-1!==q.profiles.indexOf("urn:mpeg:dash:profile:isoff-on-demand:2011")),u;},getDuration:function(q){var u;return u=q.hasOwnProperty("mediaPresentationDuration")?q.mediaPresentationDuration:Number.POSITIVE_INFINITY;},getBandwidth:function(q){"use strict";return q.bandwidth;},getRefreshDelay:function(q){"use strict";var u=0/0,v=2;return q.hasOwnProperty("minimumUpdatePeriod")&&(u=Math.max(parseFloat(q.minimumUpdatePeriod),v)),u;},getRepresentationCount:function(q){"use strict";return q.Representation_asArray.length;},getBitrateListForAdaptation:function(q){if(!q||!q.Representation_asArray||!q.Representation_asArray.length)return null;for(var u=this.processAdaptation(q),v=u.Representation_asArray,w=v.length,x=[],y=0;w>y;y+=1)x.push(v[y].bandwidth);return x;},getRepresentationFor:function(q,u){"use strict";return u.Representation_asArray[q];},getRepresentationsForAdaptation:function(q,u){for(var v,w,x,y,A,z=this,C=z.processAdaptation(q.Period_asArray[u.period.index].AdaptationSet_asArray[u.index]),B=[],E=0;E<C.Representation_asArray.length;E+=1)y=C.Representation_asArray[E],v=new Dash.vo.Representation,v.index=E,v.adaptation=u,y.hasOwnProperty("id")&&(v.id=y.id),y.hasOwnProperty("bandwidth")&&(v.bandwidth=y.bandwidth),y.hasOwnProperty("SegmentBase")?(x=y.SegmentBase,v.segmentInfoType="SegmentBase"):y.hasOwnProperty("SegmentList")?(x=y.SegmentList,v.segmentInfoType="SegmentList",v.useCalculatedLiveEdgeTime=!0):y.hasOwnProperty("SegmentTemplate")?(x=y.SegmentTemplate,x.hasOwnProperty("SegmentTimeline")?(v.segmentInfoType="SegmentTimeline",A=x.SegmentTimeline.S_asArray[x.SegmentTimeline.S_asArray.length-1],(!A.hasOwnProperty("r")||A.r>=0)&&(v.useCalculatedLiveEdgeTime=!0)):v.segmentInfoType="SegmentTemplate",x.hasOwnProperty("initialization")&&(v.initialization=x.initialization.split("$Bandwidth$").join(y.bandwidth).split("$RepresentationID$").join(y.id))):(x=y.BaseURL,v.segmentInfoType="BaseURL"),x.hasOwnProperty("Initialization")?(w=x.Initialization,w.hasOwnProperty("sourceURL")?v.initialization=w.sourceURL:w.hasOwnProperty("range")&&(v.initialization=y.BaseURL,v.range=w.range)):y.hasOwnProperty("mimeType")&&z.getIsTextTrack(y.mimeType)&&(v.initialization=y.BaseURL,v.range=0),x.hasOwnProperty("timescale")&&(v.timescale=x.timescale),x.hasOwnProperty("duration")&&(v.segmentDuration=x.duration/v.timescale),x.hasOwnProperty("startNumber")&&(v.startNumber=x.startNumber),x.hasOwnProperty("indexRange")&&(v.indexRange=x.indexRange),x.hasOwnProperty("presentationTimeOffset")&&(v.presentationTimeOffset=x.presentationTimeOffset/v.timescale),v.MSETimeOffset=z.timelineConverter.calcMSETimeOffset(v),B.push(v);return B;},getAdaptationsForPeriod:function(q,u){for(var v,w,x=q.Period_asArray[u.index],y=[],A=0;A<x.AdaptationSet_asArray.length;A+=1)w=x.AdaptationSet_asArray[A],v=new Dash.vo.AdaptationSet,w.hasOwnProperty("id")&&(v.id=w.id),v.index=A,v.period=u,v.type=this.getIsAudio(w)?"audio":this.getIsVideo(w)?"video":this.getIsFragmentedText(w)?"fragmentedText":"text",y.push(v);return y;},getRegularPeriods:function(q,u){var v,w,x=this,y=[],A=x.getIsDynamic(q),z=null,C=null,B=null,E=null;for(v=0,w=q.Period_asArray.length;w>v;v+=1)C=q.Period_asArray[v],C.hasOwnProperty("start")?(E=new Dash.vo.Period,E.start=C.start):null!==z&&C.hasOwnProperty("duration")&&null!==B?(E=new Dash.vo.Period,E.start=B.start+B.duration,E.duration=C.duration):0!==v||A||(E=new Dash.vo.Period,E.start=0),null!==B&&isNaN(B.duration)&&(B.duration=E.start-B.start),null!==E&&C.hasOwnProperty("id")&&(E.id=C.id),null!==E&&C.hasOwnProperty("duration")&&(E.duration=C.duration),null!==E&&(E.index=v,E.mpd=u,y.push(E),z=C,B=E),C=null,E=null;return 0===y.length?y:(u.checkTime=x.getCheckTime(q,y[0]),null!==B&&isNaN(B.duration)&&(B.duration=x.getEndTimeForLastPeriod(u)-B.start),y);},getMpd:function(q){var u=new Dash.vo.Mpd;return u.manifest=q,u.availabilityStartTime=new Date(q.hasOwnProperty("availabilityStartTime")?void 0!==q.availabilityStartTime.getTime?q.availabilityStartTime.getTime():Date.parse(q.availabilityStartTime):q.loadedTime.getTime()),q.hasOwnProperty("availabilityEndTime")&&(u.availabilityEndTime=new Date(void 0!==q.availabilityEndTime.getTime?q.availabilityEndTime.getTime():Date.parse(q.availabilityEndTime))),q.hasOwnProperty("suggestedPresentationDelay")&&(u.suggestedPresentationDelay=q.suggestedPresentationDelay),q.hasOwnProperty("timeShiftBufferDepth")&&(u.timeShiftBufferDepth=q.timeShiftBufferDepth),q.hasOwnProperty("maxSegmentDuration")&&(u.maxSegmentDuration=q.maxSegmentDuration),u;},getFetchTime:function(q,u){return this.timelineConverter.calcPresentationTimeFromWallTime(q.loadedTime,u);},getCheckTime:function(q,u){var v,w=this,x=0/0;return q.hasOwnProperty("minimumUpdatePeriod")&&(v=w.getFetchTime(q,u),x=v+q.minimumUpdatePeriod),x;},getEndTimeForLastPeriod:function(q){var u;if(q.manifest.mediaPresentationDuration)u=q.manifest.mediaPresentationDuration;else{if(isNaN(q.checkTime))throw  new Error("Must have @mediaPresentationDuration or @minimumUpdatePeriod on MPD or an explicit @duration on the last period.");u=q.checkTime;}return u;},getEventsForPeriod:function(q,u){var v=q.Period_asArray,w=v[u.index].EventStream_asArray,x=[];if(w)for(var y=0;y<w.length;y+=1){var A=new Dash.vo.EventStream;if(A.period=u,A.timescale=1,!w[y].hasOwnProperty("schemeIdUri"))throw "Invalid EventStream. SchemeIdUri has to be set";A.schemeIdUri=w[y].schemeIdUri,w[y].hasOwnProperty("timescale")&&(A.timescale=w[y].timescale),w[y].hasOwnProperty("value")&&(A.value=w[y].value);for(var z=0;z<w[y].Event_asArray.length;z+=1){var C=new Dash.vo.Event;C.presentationTime=0,C.eventStream=A,w[y].Event_asArray[z].hasOwnProperty("presentationTime")&&(C.presentationTime=w[y].Event_asArray[z].presentationTime),w[y].Event_asArray[z].hasOwnProperty("duration")&&(C.duration=w[y].Event_asArray[z].duration),w[y].Event_asArray[z].hasOwnProperty("id")&&(C.id=w[y].Event_asArray[z].id),x.push(C);}}return x;},getEventStreams:function(q,u){var v=[];if(!q)return v;for(var w=0;w<q.length;w++){var x=new Dash.vo.EventStream;if(x.timescale=1,x.representation=u,!q[w].hasOwnProperty("schemeIdUri"))throw "Invalid EventStream. SchemeIdUri has to be set";x.schemeIdUri=q[w].schemeIdUri,q[w].hasOwnProperty("timescale")&&(x.timescale=q[w].timescale),q[w].hasOwnProperty("value")&&(x.value=q[w].value),v.push(x);}return v;},getEventStreamForAdaptationSet:function(q,u){var v=q.Period_asArray[u.period.index].AdaptationSet_asArray[u.index].InbandEventStream_asArray;return this.getEventStreams(v,null);},getEventStreamForRepresentation:function(q,u){var v=q.Period_asArray[u.adaptation.period.index].AdaptationSet_asArray[u.adaptation.index].Representation_asArray[u.index].InbandEventStream_asArray;return this.getEventStreams(v,u);},getUTCTimingSources:function(v){"use strict";var w=this,x=CL.configs.isLive=w.getIsDynamic(v),y=v.hasOwnProperty("availabilityStartTime"),A=v.UTCTiming_asArray,z=[];return (x||y)&&A&&A.forEach(function(q){var u=new Dash.vo.UTCTiming;q.hasOwnProperty("schemeIdUri")&&(u.schemeIdUri=q.schemeIdUri,q.hasOwnProperty("value")&&(u.value=q.value.toString(),z.push(u)));}),z;}},Dash.dependencies.DashMetricsExtensions=function(){"use strict";var E=function(q,u){var v,w,x,y,A,z,C,B;for(z=0;z<q.length;z+=1)for(v=q[z],x=v.AdaptationSet_asArray,C=0;C<x.length;C+=1)for(w=x[C],A=w.Representation_asArray,B=0;B<A.length;B+=1)if(y=A[B],u===y.id)return B;return -1;},G=function(q,u){var v,w,x,y,A,z,C,B;for(z=0;z<q.length;z+=1)for(v=q[z],x=v.AdaptationSet_asArray,C=0;C<x.length;C+=1)for(w=x[C],A=w.Representation_asArray,B=0;B<A.length;B+=1)if(y=A[B],u===y.id)return y;return null;},F=function(q,u){return this.manifestExt.getIsTypeOf(q,u);},D=function(q,u){var v,w,x,y;if(!q||!u)return -1;for(w=q.AdaptationSet_asArray,y=0;y<w.length;y+=1)if(v=w[y],x=v.Representation_asArray,F.call(this,v,u))return x.length;return -1;},H=function(q){var u,v=this,w=v.manifestModel.getValue(),x=w.Period_asArray;return u=G.call(v,x,q),null===u?null:u.bandwidth;},L=function(q){var u,v=this,w=v.manifestModel.getValue(),x=w.Period_asArray;return u=E.call(v,x,q);},I=function(q,u){var v,w=this,x=w.manifestModel.getValue(),y=x.Period_asArray[u];return v=D.call(this,y,q);},K=function(q,u){var v=this.system.getObject("abrController"),w=0;return v&&(w=v.getTopQualityIndexFor(q,u)),w;},M=function(q){if(null===q)return null;var u,v,w,x=q.RepSwitchList;return null===x||x.length<=0?null:(u=x.length,v=u-1,w=x[v]);},J=function(q){if(null===q)return null;var u,v,w,x=q.BufferLevel;return null===x||x.length<=0?null:(u=x.length,v=u-1,w=x[v]);},O=function(q){if(null===q)return null;var u,v,w=q.PlayList;return null===w||w.length<=0?null:(u=w[w.length-1].trace,null===u||u.length<=0?null:v=u[u.length-1].playbackspeed);},N=function(q){if(null===q)return null;var u,v,w=q.HttpList,x=null;if(null===w||w.length<=0)return null;for(u=w.length,v=u-1;v>=0;){if(w[v].responsecode){x=w[v];break;}v-=1;}return x;},P=function(q){return null===q?[]:q.HttpList?q.HttpList:[];},R=function(q){if(null===q)return null;var u,v,w,x=q.DroppedFrames;return null===x||x.length<=0?null:(u=x.length,v=u-1,w=x[v]);},V=function(q){if(null===q)return null;var u,v,w,x=q.SchedulingInfo;return null===x||x.length<=0?null:(u=x.length,v=u-1,w=x[v]);},Q=function(q){if(null===q)return null;var u,v,w,x=q.ManifestUpdate;return null===x||x.length<=0?null:(u=x.length,v=u-1,w=x[v]);},U=function(q){if(null===q)return null;var u,v,w=q.DVRInfo;return null===w||w.length<=0?null:(u=w.length-1,v=w[u]);},Y=function(q,u){if(null===q)return null;var v,w=P(q),x=w[w.length-1];return "MPD"===x.type&&(v=X(x.responseHeaders)),void 0===v[u]?null:v[u];},b0=function(q,u){if(null===q)return null;var v,w=N(q);return null===w||null===w.responseHeaders?null:(v=X(w.responseHeaders),void 0===v[u]?null:v[u]);},X=function(q){var u={};if(!q)return u;for(var v=q.split("\r\n"),w=0,x=v.length;x>w;w++){var y=v[w],A=y.indexOf(": ");A>0&&(u[y.substring(0,A)]=y.substring(A+2));}return u;};return {manifestModel:void 0,manifestExt:void 0,system:void 0,getBandwidthForRepresentation:H,getIndexForRepresentation:L,getMaxIndexForBufferType:I,getMaxAllowedIndexForBufferType:K,getCurrentRepresentationSwitch:M,getCurrentBufferLevel:J,getCurrentPlaybackRate:O,getCurrentHttpRequest:N,getHttpRequests:P,getCurrentDroppedFrames:R,getCurrentSchedulingInfo:V,getCurrentDVRInfo:U,getCurrentManifestUpdate:Q,getLatestFragmentRequestHeaderValueByID:b0,getLatestMPDRequestHeaderValueByID:Y};},Dash.dependencies.DashMetricsExtensions.prototype={constructor:Dash.dependencies.DashMetricsExtensions},Dash.dependencies.FragmentExtensions=function(){"use strict";var J=0,O=1,N=3,P=4,R=5,V=0,Q=2,U=8,Y=9,b0=10,X=11,a0=function(q){for(var u,v,w,x,y,A,z=new DataView(q),C=0;"tfdt"!==x&&C<z.byteLength;){for(w=z.getUint32(C),C+=4,x="",y=0;4>y;y+=1)A=z.getInt8(C),x+=String.fromCharCode(A),C+=1;"moof"!==x&&"traf"!==x&&"tfdt"!==x&&(C+=w-8);}if(C===z.byteLength)throw "Error finding live offset.";return v=z.getUint8(C),0===v?(C+=4,u=z.getUint32(C,!1)):(C+=w-16,u=utils.Math.to64BitNumber(z.getUint32(C+4,!1),z.getUint32(C,!1))),{version:v,base_media_decode_time:u};},Z=function(q){for(var u,v,w,x,y,A,z,C=new DataView(q),B=0;"sidx"!==y&&B<C.byteLength;){for(A=C.getUint32(B),B+=4,y="",x=0;4>x;x+=1)z=C.getInt8(B),y+=String.fromCharCode(z),B+=1;"moof"!==y&&"traf"!==y&&"sidx"!==y?B+=A-8:"sidx"===y&&(B-=8);}return u=C.getUint8(B+8),B+=12,v=C.getUint32(B+4,!1),B+=8,w=0===u?C.getUint32(B,!1):utils.Math.to64BitNumber(C.getUint32(B+4,!1),C.getUint32(B,!1)),{earliestPresentationTime:w,timescale:v};},W=function(q){for(var u,v,w,x,y,A,z,C=new DataView(q),B=0;"tfhd"!==v&&B<C.byteLength;){for(u=C.getUint32(B),B+=4,v="",A=0;4>A;A+=1)z=C.getInt8(B),v+=String.fromCharCode(z),B+=1;"moof"!==v&&"traf"!==v&&"tfhd"!==v&&(B+=u-8);}if(B===C.byteLength)throw "Error finding live offset.";return y={baseDataOffset:0,descriptionIndex:0,sampleDuration:0,sampleSize:0,defaultSampleFlags:0},B+=1,B+=2,w=C.getUint8(B),B+=1,x=intTobitArray(w,8),B+=4,x[J]&&(y.baseDataOffset=utils.Math.to64BitNumber(C.getUint32(B+4,!1),C.getUint32(B,!1)),B+=8),x[O]&&(y.descriptionIndex=C.getUint32(B),B+=4),x[N]&&(y.sampleDuration=C.getUint32(B),B+=4),x[P]&&(y.sampleSize=C.getUint32(B),B+=4),x[R]&&(y.defaultSampleFlags=C.getUint32(B),B+=4),y;},e0=function(q){for(var u,v,w,x,y,A=new DataView(q),z=0;"mdhd"!==w&&z<A.byteLength;){for(v=A.getUint32(z),z+=4,w="",x=0;4>x;x+=1)y=A.getInt8(z),w+=String.fromCharCode(y),z+=1;"moov"!==w&&"trak"!==w&&"mdia"!==w&&"mdhd"!==w&&(z+=v-8);}if(z===A.byteLength)throw "Error finding live offset.";return u=A.getUint8(z),z+=12,1==u&&(z+=8),A.getUint32(z,!1);},d0=function(q){var u,v,w,x,y,A,z,C,B,E,G,F,D,H,L,I,K=new DataView(q),M=0;for(H=W(q),L=a0(q);"trun"!==v&&M<K.byteLength;){for(u=K.getUint32(M),M+=4,v="",G=0;4>G;G+=1)F=K.getInt8(M),v+=String.fromCharCode(F),M+=1;"moof"!==v&&"traf"!==v&&"trun"!==v&&(M+=u-8),"moof"==v&&(D=M-8);}if(M===K.byteLength)throw "Error finding live offset.";for(M+=1,M+=1,B=K.getUint16(M),M+=2,E=intTobitArray(B,16),y=K.getUint32(M),M+=4,z=L.base_media_decode_time,E[V]?(I=K.getUint32(M)+H.baseDataOffset,M+=4):I=H.baseDataOffset,E[Q]&&(M+=4),C=[],G=0;y>G;G++)E[U]?(w=K.getUint32(M),M+=4):w=H.sampleDuration,E[Y]?(A=K.getUint32(M),M+=4):A=H.sampleSize,E[b0]&&(M+=4),E[X]?(x=K.getUint32(M),M+=4):x=0,C.push({dts:z,cts:z+x,duration:w,offset:D+I,size:A}),I+=A,z+=w;return C;},c0=function(q){var u,v=this,w=new XMLHttpRequest,x=q,y=!1,A="Error loading fragment: "+x,z=new MediaPlayer.vo.Error(null,A,null);w.onloadend=function(){y||(A="Error loading fragment: "+x,v.notify(Dash.dependencies.FragmentExtensions.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{fragment:null},z));},w.onload=function(){y=!0,u=a0(w.response),v.notify(Dash.dependencies.FragmentExtensions.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{fragment:u});},w.onerror=function(){A="Error loading fragment: "+x,v.notify(Dash.dependencies.FragmentExtensions.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{fragment:null},z);},w.responseType="arraybuffer",w.open("GET",x),w.send(null);};return {log:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,loadFragment:c0,parseTFDT:a0,parseSIDX:Z,getSamplesInfo:d0,getMediaTimescaleFromMoov:e0};},Dash.dependencies.FragmentExtensions.prototype={constructor:Dash.dependencies.FragmentExtensions},Dash.dependencies.FragmentExtensions.eventList={ENAME_FRAGMENT_LOADING_COMPLETED:"fragmentLoadingCompleted"},Dash.vo.AdaptationSet=function(){"use strict";this.period=null,this.index=-1,this.type=null;},Dash.vo.AdaptationSet.prototype={constructor:Dash.vo.AdaptationSet},Dash.vo.Event=function(){"use strict";this.duration=0/0,this.presentationTime=0/0,this.id=0/0,this.messageData="",this.eventStream=null,this.presentationTimeDelta=0/0;},Dash.vo.Event.prototype={constructor:Dash.vo.Event},Dash.vo.EventStream=function(){"use strict";this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="";},Dash.vo.EventStream.prototype={constructor:Dash.vo.EventStream},Dash.vo.Mpd=function(){"use strict";this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.checkTime=0/0,this.clientServerTimeShift=0,this.isClientServerTimeSyncCompleted=!1;},Dash.vo.Mpd.prototype={constructor:Dash.vo.Mpd},Dash.vo.Period=function(){"use strict";this.id=null,this.index=-1,this.duration=0/0,this.start=0/0,this.mpd=null;},Dash.vo.Period.prototype={constructor:Dash.vo.Period},Dash.vo.Representation=function(){"use strict";this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=0/0,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=0/0,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=0/0;},Dash.vo.Representation.prototype={constructor:Dash.vo.Representation},Dash.vo.Segment=function(){"use strict";this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=0/0,this.replacementTime=null,this.replacementNumber=0/0,this.mediaStartTime=0/0,this.presentationStartTime=0/0,this.availabilityStartTime=0/0,this.availabilityEndTime=0/0,this.availabilityIdx=0/0,this.wallStartTime=0/0,this.representation=null;},Dash.vo.Segment.prototype={constructor:Dash.vo.Segment},Dash.vo.UTCTiming=function(){"use strict";this.schemeIdUri="",this.value="";},Dash.vo.UTCTiming.prototype={constructor:Dash.vo.UTCTiming},MediaPlayer.dependencies.ErrorHandler=function(){"use strict";var w=MediaPlayer.events.ERROR;return {eventBus:void 0,capabilityError:function(q){this.eventBus.dispatchEvent({type:w,error:"capability",event:q});},downloadError:function(q,u,v){this.eventBus.dispatchEvent({type:w,error:"download",event:{id:q,url:u,request:v}});},manifestError:function(q,u,v){this.eventBus.dispatchEvent({type:w,error:"manifestError",event:{message:q,id:u,manifest:v}});},closedCaptionsError:function(q,u,v){this.eventBus.dispatchEvent({type:w,error:"cc",event:{message:q,id:u,cc:v}});},mediaSourceError:function(q){this.eventBus.dispatchEvent({type:w,error:"mediasource",event:q});},mediaKeySessionError:function(q){this.eventBus.dispatchEvent({type:w,error:"key_session",event:q});},mediaKeyMessageError:function(q){this.eventBus.dispatchEvent({type:w,error:"key_message",event:q});},mediaKeySystemSelectionError:function(q){this.eventBus.dispatchEvent({type:w,error:"key_system_selection",event:q});},licenseError:function(q){this.eventBus.dispatchEvent({type:w,error:"licenseError",event:q});}};},MediaPlayer.dependencies.ErrorHandler.prototype={constructor:MediaPlayer.dependencies.ErrorHandler},MediaPlayer.dependencies.FragmentLoader=function(){"use strict";var I=3,K=500,M=[],J=function(A,z){var C=new XMLHttpRequest,B=null,E=!0,G=!0,F=null,D=this,H=function(q,u){G=!1;var v,w,x=new Date,y=C.response;q.firstByteDate||(q.firstByteDate=q.requestStartDate),q.requestEndDate=x,v=q.firstByteDate.getTime()-q.requestStartDate.getTime(),w=q.requestEndDate.getTime()-q.firstByteDate.getTime(),D.log((u?"loaded ":"failed ")+q.mediaType+":"+q.type+":"+q.startTime+" ("+C.status+", "+v+"ms, "+w+"ms)"),B.tresponse=q.firstByteDate,B.tfinish=q.requestEndDate,B.responsecode=C.status,B.responseHeaders=C.getAllResponseHeaders(),D.metricsModel.appendHttpTrace(B,x,x.getTime()-F.getTime(),[y?y.byteLength:0]),F=x;};if(void 0===A.url||""===A.url){var L=new Uint8Array(1);return void setTimeout(function(){D.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:A,response:L});},100);}M.push(C),A.requestStartDate=new Date,B=D.metricsModel.addHttpRequest(A.mediaType,null,A.type,A.url,null,A.range,A.requestStartDate,null,null,null,null,A.duration,null),D.metricsModel.appendHttpTrace(B,A.requestStartDate,A.requestStartDate.getTime()-A.requestStartDate.getTime(),[0]),F=A.requestStartDate,CL.configs.isIE11||(C.timeout=CL.manifest.fragmentRequestTimeout),C.open("GET",D.requestModifierExt.modifyRequestURL(A.url),!0),C.responseType="arraybuffer",C=D.requestModifierExt.modifyRequestHeader(C),A.range&&C.setRequestHeader("Range","bytes="+A.range),C.onprogress=function(q){var u=new Date;E&&(E=!1,(!q.lengthComputable||q.lengthComputable&&q.total!=q.loaded)&&(A.firstByteDate=u,B.tresponse=u)),D.metricsModel.appendHttpTrace(B,u,u.getTime()-F.getTime(),[C.response?C.response.byteLength:0]),F=u;},C.onload=function(){C.status<200||C.status>299||(H(A,!0),D.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:A,response:C.response}));},C.onloadend=C.onerror=function(){-1!==M.indexOf(C)&&(M.splice(M.indexOf(C),1),G&&(H(A,!1),z>0?(D.log("Failed loading fragment: "+A.mediaType+":"+A.type+":"+A.startTime+", retry in "+K+"ms attempts: "+z),z--,setTimeout(function(){J.call(D,A,z);},K)):(D.log("Failed loading fragment: "+A.mediaType+":"+A.type+":"+A.startTime+" no retry attempts left"),D.errHandler.downloadError("content",A.url,C),D.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:A,bytes:null},new MediaPlayer.vo.Error(null,"failed loading fragment",null)))));},C.send();},O=function(q){var u=this,v=new XMLHttpRequest,w=!1;v.open("HEAD",q.url,!0),v.onload=function(){v.status<200||v.status>299||(w=!0,u.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,{request:q,exists:!0}));},v.onloadend=v.onerror=function(){w||u.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,{request:q,exists:!1});},v.send();};return {metricsModel:void 0,errHandler:void 0,log:void 0,requestModifierExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,load:function(q){q?J.call(this,q,I):this.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:q,bytes:null},new MediaPlayer.vo.Error(null,"request is null",null));},checkForExistence:function(q){return q?void O.call(this,q):void this.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,{request:q,exists:!1});},abort:function(){var q,u,v=M.length;for(q=0;v>q;q+=1)u=M[q],M[q]=null,u.abort(),u=null;M=[];}};},MediaPlayer.dependencies.FragmentLoader.prototype={constructor:MediaPlayer.dependencies.FragmentLoader},MediaPlayer.dependencies.FragmentLoader.eventList={ENAME_LOADING_COMPLETED:"loadingCompleted",ENAME_CHECK_FOR_EXISTENCE_COMPLETED:"checkForExistenceCompleted"},MediaPlayer.dependencies.LiveEdgeFinder=function(){"use strict";var x,y=!1,A=0/0,z=MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES,C=function(q){var u=q.value,v=((new Date).getTime()-A)/1e3;this.notify(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,{liveEdge:u,searchTime:v},null===u?new MediaPlayer.vo.Error(MediaPlayer.dependencies.LiveEdgeFinder.LIVE_EDGE_NOT_FOUND_ERROR_CODE,"live edge has not been found",null):null);},B=function(v){var w=this;!w.streamProcessor.isDynamic()||y||v.error||(x=w.synchronizationRulesCollection.getRules(z),y=!0,A=(new Date).getTime(),w.rulesController.applyRules(x,w.streamProcessor,C.bind(w),null,function(q,u){return u;}));},E=function(q){z=q.error?MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES:MediaPlayer.rules.SynchronizationRulesCollection.prototype.TIME_SYNCHRONIZED_RULES;};return {system:void 0,synchronizationRulesCollection:void 0,rulesController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED]=B,this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=E;},initialize:function(q){this.streamProcessor=q,this.fragmentLoader=q.fragmentLoader;},abortSearch:function(){y=!1,A=0/0;}};},MediaPlayer.dependencies.LiveEdgeFinder.prototype={constructor:MediaPlayer.dependencies.LiveEdgeFinder},MediaPlayer.dependencies.LiveEdgeFinder.eventList={ENAME_LIVE_EDGE_SEARCH_COMPLETED:"liveEdgeFound"},MediaPlayer.dependencies.LiveEdgeFinder.LIVE_EDGE_NOT_FOUND_ERROR_CODE=1,MediaPlayer.dependencies.ManifestLoader=function(){"use strict";var F=3,D=500,H=function(q){var u=null;return -1!==q.indexOf("/")&&(-1!==q.indexOf("?")&&(q=q.substring(0,q.indexOf("?"))),u=q.substring(0,q.lastIndexOf("/")+1)),u;},L=function(u,v){var w,x,y,A=H(u),z=new XMLHttpRequest,C=new Date,B=null,E=!0,G=this;x=function(){z.status<200||z.status>299||(E=!1,B=new Date,G.metricsModel.addHttpRequest("stream",null,"MPD",u,null,null,C,B,null,z.status,null,null,z.getAllResponseHeaders()),CL.configs.isIE11||CL.configs.isActiveVideoChrome||(A=H(z.responseURL)),w=G.parser.parse(z.responseText,A),w?(w.url=u,w.loadedTime=B,G.metricsModel.addManifestUpdate("stream",w.type,C,B,w.availabilityStartTime),G.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,{manifest:w})):G.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,{manifest:null},new MediaPlayer.vo.Error(null,"Failed loading manifest: "+u,null)));},y=function(){E&&(E=!1,G.metricsModel.addHttpRequest("stream",null,"MPD",u,null,null,C,new Date,z.status,null,null,z.getAllResponseHeaders()),v>0?(G.log("Failed loading manifest: "+u+", retry in "+D+"ms attempts: "+v),v--,setTimeout(function(){L.call(G,u,v);},D)):(G.log("Failed loading manifest: "+u+" no retry attempts left"),G.errHandler.downloadError("manifest",u,z),G.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,null,new Error("Failed loading manifest: "+u+" no retry attempts left"))));};try{z.onload=x,z.onloadend=y,z.onerror=y,CL.configs.isIE11||(z.timeout=CL.manifest.manifestRequestTimeout),z.open("GET",G.requestModifierExt.modifyRequestURL(u),!0),z.send();}catch(q){z.onerror();}};return {log:void 0,parser:void 0,errHandler:void 0,metricsModel:void 0,requestModifierExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,load:function(q){L.call(this,q,F);}};},MediaPlayer.dependencies.ManifestLoader.prototype={constructor:MediaPlayer.dependencies.ManifestLoader},MediaPlayer.dependencies.ManifestLoader.eventList={ENAME_MANIFEST_LOADED:"manifestLoaded"},MediaPlayer.dependencies.ManifestUpdater=function(){"use strict";var E=0/0,G=null,F=!1,D=!1,H=function(){null!==G&&(clearInterval(G),G=null);},L=function(){H.call(this),isNaN(E)||(this.log("Refresh manifest in "+E+" seconds."),G=setTimeout(K.bind(this),Math.min(1e3*E,Math.pow(2,31)-1),this));},I=function(){var q,u,v=this,w=v.manifestModel.getValue();void 0!==w&&null!==w&&(q=v.manifestExt.getRefreshDelay(w),u=((new Date).getTime()-w.loadedTime.getTime())/1e3,E=Math.max(q-u,0),L.call(v));},K=function(){var q,u,v=this,w=0;if(!D)if(D=!0,q=v.manifestModel.getValue(),u=q.url,q.hasOwnProperty("Location")&&(u=q.Location),q.hasOwnProperty("lookAheadFragmentCount")&&(w=isNaN(q.lookAheadFragmentCount)?0:parseInt(q.lookAheadFragmentCount)),CL.manifest.useLookAheadFragments===!0&&CL.configs.needManifestUpdate===!1&&w>0){var x=["audio","video"];new castLabsDashJS.classes.Utils;for(var y in x){for(var A=x[y],z=q.Period_asArray[0].AdaptationSet_asArray[CL.configs.activeTrack[A].adaptionIndex].SegmentTemplate.SegmentTimeline.S_asArray;CL.configs.lookAheadFragments[A].length>0;){var C,B=CL.configs.lookAheadFragments[A].shift();C={t:B.absoluteTime,d:B.absoluteDuration},z[z.length-1].t!=C.t&&(z.splice(0,1),z.push(C));}q.Period_asArray[0].AdaptationSet_asArray[CL.configs.activeTrack[A].adaptionIndex].SegmentTemplate_asArray[0].SegmentTimeline_asArray[0].S_asArray=z.concat([]);}v.manifestLoader.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,{manifest:q}),q.loadedTime.setTime(q.loadedTime.getTime()+5e3),M.call(v,{data:{manifest:q}});}else v.manifestLoader.load(u),CL.configs.needManifestUpdate=!1;},M=function(q){q.error||(this.manifestModel.setValue(q.data.manifest),this.log("Manifest has been refreshed."),F||I.call(this));},J=function(){this.start();},O=function(){this.stop();},N=function(){D=!1;};return {log:void 0,system:void 0,manifestModel:void 0,manifestExt:void 0,manifestLoader:void 0,setup:function(){this[MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED]=N,this[MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED]=M,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED]=J,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED]=O;},start:function(){F=!1,I.call(this);},stop:function(){F=!0,H.call(this);}};},MediaPlayer.dependencies.ManifestUpdater.prototype={constructor:MediaPlayer.dependencies.ManifestUpdater},MediaPlayer.dependencies.Notifier=function(){"use strict";var x,y="observableId",A=0,z=function(){return this[y]||(A+=1,this[y]="_id_"+A),this[y];};return {system:void 0,setup:function(){x=this.system,x.mapValue("notify",this.notify),x.mapValue("subscribe",this.subscribe),x.mapValue("unsubscribe",this.unsubscribe);},notify:function(){var q=arguments[0]+z.call(this),u=new MediaPlayer.vo.Event;u.sender=this,u.type=arguments[0],u.data=arguments[1],u.error=arguments[2],u.timestamp=(new Date).getTime(),x.notify.call(x,q,u);},subscribe:function(q,u,v,w){if(!v&&u[q]&&(v=u[q]=u[q].bind(u)),!u)throw "observer object cannot be null or undefined";if(!v)throw "event handler cannot be null or undefined";q+=z.call(this),x.mapHandler(q,void 0,v,w);},unsubscribe:function(q,u,v){v=v||u[q],q+=z.call(this),x.unmapHandler(q,void 0,v);}};},MediaPlayer.dependencies.Notifier.prototype={constructor:MediaPlayer.dependencies.Notifier},MediaPlayer.dependencies.Stream=function(){"use strict";var O,N,P={},R=[],V=!0,Q=!1,U=!1,Y=!1,b0=null,X=!0,a0=null,Z={},W=null,e0=function(){Q&&this.playbackController.start();},d0=function(){this.playbackController.pause();},c0=function(q){Q&&(this.log("Do seek: "+q),this.playbackController.seek(q));},f0=[],h0=null,m0=function(q){this.errHandler.mediaKeySessionError(q),this.log(q),this.reset();},k0=function(u){var v=MediaPlayer.dependencies.protection.CommonEncryption.getPSSHForKeySystem(h0,u);if(v)try{this.protectionController.createKeySession(v,"temporary");}catch(q){m0.call(this,"Error creating key session! "+q.message);}else m0.call(this,"Selected key system is "+h0.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!");},o0=function(u){if("cenc"!==u.data.initDataType)return void this.log("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+u.data.initDataType);var v=u.data.initData;if(ArrayBuffer.isView(v)&&(v=v.buffer),h0)k0.call(this,v);else if(void 0===h0){h0=null,f0.push(v);try{this.protectionExt.autoSelectKeySystem(this.protectionExt.getSupportedKeySystems(v),this.protectionModel,this.protectionController,P.video,P.audio);}catch(q){m0.call(this,q.message);}}else f0.push(v);},y0=function(){h0||(h0=this.protectionModel.keySystem);for(var q=0;q<f0.length;q++)k0.call(this,f0[q]);f0=[];},u0=function(q){q.error?m0.call(this,q.error):this.log("DRM: License server certificate successfully updated.");},s0=function(q){q.error?m0.call(this,q.error):this.log("DRM: Session created.  SessionID = "+q.data.getSessionID());},t0=function(){this.log("DRM: Key added.");},A0=function(q){var u,v=q.data.sessionToken;u="DRM: MediaKeyError - sessionId: "+v.getSessionID()+".  "+q.data.error,m0.call(this,u);},q0=function(q){this.log(q.error?q.data.error:"DRM: Session closed.  SessionID = "+q.data);},v0=function(q){this.log(q.error?q.data.error:"DRM: Session removed.  SessionID = "+q.data);},r0=function(u,v){var w,x=this,y=function(q){x.log("MediaSource is open!"),x.log(q),window.URL.revokeObjectURL(w),u.removeEventListener("sourceopen",y),u.removeEventListener("webkitsourceopen",y),v(u);};u.addEventListener("sourceopen",y,!1),u.addEventListener("webkitsourceopen",y,!1),w=x.mediaSourceExt.attachMediaSource(u,x.videoModel);},D0=function(){var q,u=this,v=R.length,w=0;for(w;v>w;w+=1)q=R[w],q.reset(Y),q=null;W&&W.reset(),R=[],N&&u.mediaSourceExt.detachMediaSource(u.videoModel),Q=!1,b0=null,P={},N=null,O=null;},p0=function(x,y){var A,z,C,B=this,E=null,G=function(q){return q.codec;},F=function(u,v){var w=null;try{w=B.sourceBufferExt.createSourceBuffer(u,v);}catch(q){B.errHandler.mediaSourceError("Error creating "+x+" source buffer.");}return w;},D=B.adapter.getMediaInfosForType(y,a0,x),H=null;if(0==D.length)return void B.log("No "+x+" data.");"text"===x&&(G=function(q){return E=q.mimeType;});for(var L=0;L<CL.configs.tracks[x].length;L++)if("text"!==x||CL.manifest.useUniversalSubtitleEngine!==!0){H=null!=CL.configs.activeTrack[x]?CL.configs.activeTrack[x]:CL.configs.tracks[x][L],C=D.length>0?D[H.id]:null,B.log("Create "+x+" buffer.");var I,K=G.call(B,C),M=null;if("text"===x||"fragmentedText"===x)M=F(N,C);else if(A=K,B.log(x+" codec: "+A),P[x]=C,I=C.contentProtection,I&&!B.capabilities.supportsEncryptedMedia())B.errHandler.capabilityError("encryptedmedia");else if(B.capabilities.supportsCodec(B.videoModel.getElement(),A))M=F(N,C);else{var J=x+"Codec ("+A+") is not supported.";B.errHandler.manifestError(J,"codec",y),B.log(J);}if(null!==M){CL.configs.activeTrack[x]=H;break;}}null===M||void 0===M?B.log("No buffer was created, skipping "+x+" data."):(z=B.system.getObject("streamProcessor"),R.push(z),z.initialize(E||x,M,B.videoModel,B.fragmentController,B.playbackController,N,B,W,I),z.setMediaInfo(C),B.abrController.updateTopQualityIndex(C),B.adapter.updateData(z),"fragmentedText"===x&&(z.bufferController.videoModel=B.videoModel,M.initialize(x,z.bufferController)));},B0=function(){var q,u=this;if(W=u.system.getObject("eventController"),W.initialize(u.videoModel),q=u.adapter.getEventsFor(a0),W.addInlineEvents(q),p0.call(u,"video",O),p0.call(u,"audio",O),p0.call(u,"text",O),CL.configs.isChromecast){var v=(window.mediaManager.getMediaInformation(),CL.configs.tracks.text),w=CL.configs.tracks.audio;window.self.audioTracks=w,window.self.textTracks=v;}},C0=function(){var q,u,v=this;q=a0.manifestInfo.duration,u=v.mediaSourceExt.setDuration(N,q),v.log("Duration successfully set to: "+u),Q=!0,G0.call(v);},w0=function(){this.log("element loaded!"),U=!0,z0.call(this);},z0=function(){Q&&U&&0===a0.index&&(W.start(),V&&e0.call(this));},G0=function(){var q=this,u=R.length,v=!!Z.audio||!!Z.video,w=v?new MediaPlayer.vo.Error(MediaPlayer.dependencies.Stream.DATA_UPDATE_FAILED_ERROR_CODE,"Data update failed",null):null,x=0;if(Q){for(x;u>x;x+=1)if(R[x].isUpdating())return ;X=!1,q.eventBus.dispatchEvent({type:MediaPlayer.events.STREAM_INITIALIZED,data:{streamInfo:a0}}),q.notify(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,null,w);}},F0=function(q){for(var u=R.length,v=null,w=0;u>w;w+=1)if(v=R[w],v.getType()===q)return v.getMediaInfo();return null;},H0=function(q){var u=q.data.error.code,v="";if(-1!==u){switch(u){case 1:v="MEDIA_ERR_ABORTED";break;case 2:v="MEDIA_ERR_NETWORK";break;case 3:v="MEDIA_ERR_DECODE";break;case 4:v="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:v="MEDIA_ERR_ENCRYPTED";}Y=!0,this.log("Video Element Error: "+v),this.log(q.error),this.errHandler.mediaSourceError(v),this.reset();}},g0=function(v){var w,x=this,y=function(q){if(N=q,B0.call(x),0===R.length){var u="No streams to play.";x.errHandler.manifestError(u,"nostreams",O),x.log(u);}else x.liveEdgeFinder.initialize(R[0]),x.liveEdgeFinder.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,x.playbackController),C0.call(x),z0.call(x);};O=v,w=x.mediaSourceExt.createMediaSource(),r0.call(x,w,y);},l0=function(){var q=E0(),u=q.length,v=0;for(v;u>v;v+=1)if(!q[v].isBufferingCompleted())return ;N&&a0.isLast&&this.mediaSourceExt.signalEndOfStream(N);},i0=function(q){var u=q.sender.streamProcessor.getType();Z[u]=q.error,G0.call(this);},E0=function(){var q,u,v=[],w=0,x=R.length;for(w;x>w;w+=1)u=R[w],q=u.getType(),("audio"===q||"video"===q)&&v.push(u);return v;},L0=function(){var q,u=this,v=R.length,w=0;for(w;v>w;w+=1){q=R[w];var x=q.getType();if((x.indexOf("text")>-1||x.indexOf("ttml")>-1)&&(x="text"),"text"===x){q.bufferController.clearFutureBuffer(u.getDuration());break;}}},J0=function(w){var x,y,A,z=this,C=R.length,B=0,E=!1;for(X=!0,O=z.manifestModel.getValue(),w&&(w.duration?a0=w:E=!0),z.log("Manifest updated... set new data on buffers."),W&&(y=z.adapter.getEventsFor(a0),W.addInlineEvents(y)),B;C>B;B+=1){A=R[B];var G=A.getType();if((G.indexOf("text")>-1||G.indexOf("ttml")>-1)&&(G="text"),E!==!0||G===w){if(x=z.adapter.getMediaInfosForType(O,a0,G),"text"===G||CL.configs.previousActiveTrack[G]&&CL.configs.previousActiveTrack[G].id!=CL.configs.activeTrack[G].id){var F=function(){var q=z.playbackController.getTime()+z.playbackController.getTimeToStreamEnd(),u=A.getFragmentModel();"text"!=G&&(A.bufferController.scheduleController.stop(),u.abortRequests(),u.removeExecutedRequestsBeforeTime(q),u.cancelPendingRequests(z.abrController.getQualityFor(G,CL.configs.previousActiveTrack[G])));var v=function(){"text"!=G?(A.bufferController.scheduleController.start(),A.indexHandler.setCurrentTime(z.playbackController.getTime())):p0.call(z,"text",O),CL.configs.previousActiveTrack[G]=JSON.parse(JSON.stringify(CL.configs.activeTrack[G]));};"text"!=G&&A.bufferController.subscribe("bufferCleared",z,v,!0),A.bufferController.clearFutureBuffer(q),"text"===G&&v();};z.playbackController.isSeeking()===!0&&"text"!=G?z.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,z,F,!0):F();}if(CL.configs.isSmoothStreaming===!0&&CL.configs.isLive===!0&&B==C-1&&p0.call(z,"text",O),void 0==CL.configs.activeTrack[G]&&console.log(CL.configs.activeTrack[G]),A.setMediaInfo(x[CL.configs.activeTrack[G].id]),z.adapter.updateData(A),E===!0)break;}}};return {system:void 0,eventBus:void 0,manifestModel:void 0,mediaSourceExt:void 0,sourceBufferExt:void 0,adapter:void 0,fragmentController:void 0,playbackController:void 0,protectionModel:void 0,protectionController:void 0,protectionExt:void 0,capabilities:void 0,log:void 0,errHandler:void 0,liveEdgeFinder:void 0,abrController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED]=l0,this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=i0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR]=H0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY]=w0,this[MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY]=o0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=y0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED]=u0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED]=t0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR]=A0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED]=s0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED]=q0.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED]=v0.bind(this),h0=void 0;},load:function(q){g0.call(this,q);},setVideoModel:function(q){this.videoModel=q;},initProtection:function(q){if(this.capabilities.supportsEncryptedMedia()){this.protectionModel=this.system.getObject("protectionModel"),this.protectionModel.init(this.getVideoModel()),this.protectionModel.setMediaElement(this.videoModel.getElement()),this.protectionController=this.system.getObject("protectionController"),this.protectionController.init(this.protectionModel),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this);var u=(this.adapter.getMediaInfoForType(q,a0,"video"),this.adapter.getMediaInfoForType(q,a0,"audio")),v=this.adapter.getMediaInfoForType(q,a0,"video"),w=v?v:u;this.protectionExt.getSupportedKeySystemsFromContentProtection(w.contentProtection),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this);}},getVideoModel:function(){return this.videoModel;},setAutoPlay:function(q){V=q;},getAutoPlay:function(){return V;},reset:function(){d0.call(this),this.protectionModel&&(this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this),h0=void 0,this.protectionController.teardown(),this.protectionModel.teardown(),this.protectionController=void 0,this.protectionModel=void 0),D0.call(this),this.fragmentController&&this.fragmentController.reset(),this.fragmentController=void 0,this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,this),this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY,this),this.playbackController.reset(),this.liveEdgeFinder.abortSearch(),this.liveEdgeFinder.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,this.playbackController),U=!1,Z={};},getDuration:function(){return a0.duration;},getStartTime:function(){return a0.start;},getStreamIndex:function(){return a0.index;},getId:function(){return a0.id;},setStreamInfo:function(q){a0=q;},getStreamInfo:function(){return a0;},hasMedia:function(q){return null!==F0.call(this,q);},getBitrateListFor:function(q){return this.abrController.getBitrateList(P[q]);},startEventController:function(){W.start();},resetEventController:function(){W.reset();},setPlaybackController:function(q){this.playbackController=q,q.initialize(a0,this.videoModel);},getPlaybackController:function(){return this.playbackController;},isUpdating:function(){return X;},updateData:J0,disableTextTracks:L0,play:e0,seek:c0,pause:d0};},MediaPlayer.dependencies.Stream.prototype={constructor:MediaPlayer.dependencies.Stream},MediaPlayer.dependencies.Stream.DATA_UPDATE_FAILED_ERROR_CODE=1,MediaPlayer.dependencies.Stream.eventList={ENAME_STREAM_UPDATED:"streamUpdated"},MediaPlayer.dependencies.StreamProcessor=function(){"use strict";var J,O,N,P,R,V=function(q){var u=this,v="video"===q||"audio"===q||"fragmentedText"===q?"bufferController":"textController";return u.system.getObject(v);};return {system:void 0,indexHandler:void 0,liveEdgeFinder:void 0,timelineConverter:void 0,abrController:void 0,baseURLExt:void 0,adapter:void 0,initialize:function(q,u,v,w,x,y,A,z,C){var B,E=this,G=E.system.getObject("trackController"),F=E.system.getObject("scheduleController"),D=E.liveEdgeFinder,H=E.abrController,L=E.indexHandler,I=E.baseURLExt,K=this.system.getObject("fragmentLoader"),M=V.call(E,q);O=A,P=q,R=z,J=O.getStreamInfo().manifestInfo.isDynamic,E.bufferController=M,E.playbackController=x,E.scheduleController=F,E.trackController=G,E.videoModel=v,E.fragmentController=w,E.fragmentLoader=K,G.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,M),w.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,M),"video"===P||"audio"===P||"fragmentedText"===P?(H.subscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,M),H.subscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,G),H.subscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,F),D.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,this.timelineConverter),D.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,G),D.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,F),G.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED,F),G.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,F),G.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,O),O.subscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,F),x.streamProcessor||(x.streamProcessor=E,G.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,x)),w.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,M),w.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START,F),w.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,F),w.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,M),w.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,F.scheduleRulesCollection.bufferLevelRule),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,v),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,F),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,F),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,F),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,G),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,F),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,F),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED,O),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED,F),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,F.scheduleRulesCollection.bufferLevelRule),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,F.scheduleRulesCollection.bufferLevelRule),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,x),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,M),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,M),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,M),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,F),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,M),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,F),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,F),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,F.scheduleRulesCollection.playbackTimeRule),J&&x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,G),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,M),x.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,F),I.subscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,L),I.subscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,L)):M.subscribe(MediaPlayer.dependencies.TextController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED,F),L.initialize(this),M.initialize(P,u,y,E,C),F.initialize(P,this),H.initialize(P,this),B=this.getFragmentModel(),B.setLoader(K),B.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED,w),B.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,w),B.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED,w),B.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,F),K.subscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,B),("video"===P||"audio"===P||"fragmentedText"===P)&&(M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,B),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,B),M.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED,B)),G.initialize(this);},isUpdating:function(){return this.trackController.isUpdating();},getType:function(){return P;},getFragmentLoader:function(){return this.fragmentLoader;},getFragmentModel:function(){return this.scheduleController.getFragmentModel();},getPlaybackController:function(){return this.playbackController;},getStreamInfo:function(){return O.getStreamInfo();},setMediaInfo:function(q){N=q;},getMediaInfo:function(){return N;},getScheduleController:function(){return this.scheduleController;},getEventController:function(){return R;},start:function(){this.scheduleController.start();},stop:function(){this.scheduleController.stop();},getCurrentTrack:function(){return this.adapter.getCurrentTrackInfo(this.trackController);},getTrackForQuality:function(q){return this.adapter.getTrackInfoForQuality(this.trackController,q);},isBufferingCompleted:function(){return this.bufferController.isBufferingCompleted();},isDynamic:function(){return J;},reset:function(q){var u=this,v=u.bufferController,w=u.trackController,x=u.scheduleController,y=u.liveEdgeFinder,A=u.fragmentController,z=u.abrController,C=u.playbackController,B=this.indexHandler,E=this.baseURLExt,G=this.getFragmentModel(),F=this.fragmentLoader,D=u.videoModel;z.unsubscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,v),z.unsubscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,w),z.unsubscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,x),y.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,this.timelineConverter),y.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,x),y.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,w),w.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED,x),w.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,v),w.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,x),w.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,O),w.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,C),O.unsubscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,x),A.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,v),A.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,v),A.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START,x),A.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,x),A.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,v),A.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,x.scheduleRulesCollection.bufferLevelRule),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,D),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,x),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,x),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,x),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,w),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,x),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,x),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED,O),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED,x),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,x.scheduleRulesCollection.bufferLevelRule),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,x.scheduleRulesCollection.bufferLevelRule),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,C),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,v),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,v),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,v),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,x),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,v),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,x),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,x),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,w),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,v),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,x),C.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,x.scheduleRulesCollection.playbackTimeRule),E.unsubscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,B),E.unsubscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,B),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,G),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,G),v.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED,G),G.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED,A),G.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,A),G.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED,A),G.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,x),F.unsubscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,G),G.reset(),B.reset(),this.bufferController.reset(q),this.scheduleController.reset(),this.bufferController=null,this.scheduleController=null,this.trackController=null,this.videoModel=null,this.fragmentController=null;}};},MediaPlayer.dependencies.StreamProcessor.prototype={constructor:MediaPlayer.dependencies.StreamProcessor},MediaPlayer.utils.TTMLParser=function(){"use strict";var D,H=3600,L=60,I=/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])((\.[0-9][0-9][0-9])|(:[0-9][0-9]))$/,K=function(q){var u,v,w,x=I.test(q);if(!x)return 0/0;if(u=q.split(":"),v=parseFloat(u[0])*H+parseFloat(u[1])*L+parseFloat(u[2]),u[3]){if(w=D.tt._frameRate,!w||isNaN(w))return 0/0;v+=parseFloat(u[3])/w;}return v;},M=function(){var q=!1,u=D.hasOwnProperty("tt"),v=u?D.tt.hasOwnProperty("head"):!1,w=v?D.tt.head.hasOwnProperty("layout"):!1,x=v?D.tt.head.hasOwnProperty("styling"):!1,y=u?D.tt.hasOwnProperty("body"):!1,A=v?D.tt.head.hasOwnProperty("profile"):!1;return u&&v&&w&&x&&y&&(q=!0),q&&(q=A&&("http://www.w3.org/ns/ttml/profile/sdp-us"===D.tt.head.profile.use||"http://www.w3.org/ns/ttml/profile/sdp-us"===D.tt.head.profile._use)),q;},J=function(u,v){var w=Object.keys(u).filter(function(q){return "xmlns"===q.split(":")[0]&&u[q]===v;}).map(function(q){return q.split(":")[1];});return 1!=w.length?null:w[0];},O=function(q){var u,v,w,x,y,A,z,C,B,E=[],G=new X2JS([],"",!1);if(D=G.xml_str2json(q),!M())throw u="TTML document has incorrect structure";if(A=J(D.tt,"http://www.w3.org/ns/ttml#parameter"),D.tt.hasOwnProperty(A+":frameRate")&&(D.tt.frameRate=parseInt(D.tt[A+":frameRate"],10)),v=D.tt.body.div.p,!v||0===v.length)throw u="TTML document does not contain any cues";for(C=0;C<v.length;C+=1){if(w=v[C],x=K(w._begin),y=K(w._end),isNaN(x)||isNaN(y))throw u="TTML document has incorrect timing value";if(void 0!==w["smpte:backgroundImage"]){var F=D.tt.head.metadata.image_asArray;for(B=0;B<F.length;B+=1)"#"+F[B]["xml:id"]==w["smpte:backgroundImage"]&&E.push({start:x,end:y,id:F[B]["xml:id"],data:"data:image/"+F[B].imagetype.toLowerCase()+";base64, "+F[B].__text,type:"image"});}else z=w.span_asArray?w.span_asArray[0].__text:w.__text,E.push({start:x,end:y,data:z,type:"text"});}return E;};return {parse:O};},MediaPlayer.dependencies.TextSourceBuffer=function(){var D,H;return {system:void 0,eventBus:void 0,errHandler:void 0,initialize:function(q,u){H=q,this.videoModel=u.videoModel,D=u.streamProcessor.getCurrentTrack().mediaInfo,this.buffered=this.system.getObject("customTimeRanges"),this.initializationSegmentReceived=!1,this.timescale=9e4;},append:function(u,v){var w,x,y,A,z,C=this,B=this.system.getObject("clUtils"),E=B.B64Tools.decode(B.arrToBase64(u));if("fragmentedText"==H){var G;if(this.initializationSegmentReceived)for(G=C.system.getObject("fragmentExt"),A=G.getSamplesInfo(u.buffer),z=0;z<A.length;z++){this.firstSubtitleStart||(this.firstSubtitleStart=A[0].cts-v.startTime*this.timescale),A[z].cts-=this.firstSubtitleStart,this.buffered.add(A[z].cts/this.timescale,(A[z].cts+A[z].duration)/this.timescale),E=window.UTF8.decode(new Uint8Array(u.buffer.slice(A[z].offset,A[z].offset+A[z].size)));var F=this.system.getObject("ttmlParser");try{w=F.parse(E),this.textTrackExtensions.addCaptions(this.firstSubtitleStart/this.timescale,w);}catch(q){}}else this.initializationSegmentReceived=!0,x=D.id,y=D.lang,this.textTrackExtensions=C.getTextTrackExtensions(),this.textTrackExtensions.addTextTrack(C.videoModel.getElement(),w,x,y,!0),C.eventBus.dispatchEvent({type:MediaPlayer.events.TEXT_TRACK_ADDED}),G=C.system.getObject("fragmentExt"),this.timescale=G.getMediaTimescaleFromMoov(u.buffer);}else{E=window.UTF8.decode(u);try{w=C.getParser().parse(E),x=D.id,y=D.lang,C.getTextTrackExtensions().addTextTrack(C.videoModel.getElement(),w,x,y,!0),C.eventBus.dispatchEvent({type:MediaPlayer.events.TEXT_TRACK_ADDED});}catch(q){C.errHandler.closedCaptionsError(q,"parse",E);}}},abort:function(){this.getTextTrackExtensions().deleteCues(this.videoModel.getElement());},getParser:function(){var q;return "text/vtt"===H?q=this.system.getObject("vttParser"):"application/ttml+xml"===H&&(q=this.system.getObject("ttmlParser")),q;},getTextTrackExtensions:function(){return this.system.getObject("textTrackExtensions");},addEventListener:function(q,u,v){this.eventBus.addEventListener(q,u,v);},removeEventListener:function(q,u,v){this.eventBus.removeEventListener(q,u,v);}};},MediaPlayer.dependencies.TextSourceBuffer.prototype={constructor:MediaPlayer.dependencies.TextSourceBuffer},MediaPlayer.dependencies.TimeSyncController=function(){"use strict";var D=5e3,H=0,L=!1,I=!1,K=function(q){L=q;},M=function(){return L;},J=function(q){I=q;},O=function(q){H=q;},N=function(){return H;},P=function(q){var u,v,w=60,x=60,y=1e3,A=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,z=A.exec(q);return u=Date.UTC(parseInt(z[1],10),parseInt(z[2],10)-1,parseInt(z[3],10),parseInt(z[4],10),parseInt(z[5],10),z[6]&&(parseInt(z[6],10)||0),z[7]&&parseFloat(z[7])*y||0),z[9]&&z[10]&&(v=parseInt(z[9],10)*x+parseInt(z[10],10),u+=("+"===z[8]?-1:1)*v*w*y),new Date(u).getTime();},R=function(q){var u=Date.parse(q);return isNaN(u)&&(u=P(q)),u;},V=function(q){return Date.parse(q);},Q=function(q){return Date.parse(q);},U=function(q,u,v){v();},Y=function(q,u,v){var w=R(q);return isNaN(w)?void v():void u(w);},b0=function(v,w,x,y,A){var z,C,B=!1,E=new XMLHttpRequest,G=A?"HEAD":"GET",F=w.match(/\S+/g);w=F.shift(),z=function(){B||(B=!0,F.length?b0(v,F.join(" "),x,y,A):y());},C=function(){var q,u;200===E.status&&(q=A?E.getResponseHeader("Date"):E.response,u=v(q),isNaN(u)||(x(u),B=!0));},E.open(G,w),E.timeout=D||0,E.onload=C,E.onloadend=z,E.send();},X=function(q,u,v){b0.call(this,Q,q,u,v,!0);},a0={"urn:mpeg:dash:utc:http-head:2014":X,"urn:mpeg:dash:utc:http-xsdate:2014":b0.bind(null,R),"urn:mpeg:dash:utc:http-iso:2014":b0.bind(null,V),"urn:mpeg:dash:utc:direct:2014":Y,"urn:mpeg:dash:utc:http-head:2012":X,"urn:mpeg:dash:utc:http-xsdate:2012":b0.bind(null,R),"urn:mpeg:dash:utc:http-iso:2012":b0.bind(null,V),"urn:mpeg:dash:utc:direct:2012":Y,"urn:mpeg:dash:utc:http-ntp:2014":U,"urn:mpeg:dash:utc:ntp:2014":U,"urn:mpeg:dash:utc:sntp:2014":U},Z=function(w,x){var y=this,A=x||0,z=w[A],C=function(q,u){var v=!q||!u;K(!1),y.notify(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,{time:q,offset:u},v?new MediaPlayer.vo.Error(MediaPlayer.dependencies.TimeSyncController.TIME_SYNC_FAILED_ERROR_CODE):null);};K(!0),z?a0.hasOwnProperty(z.schemeIdUri)?a0[z.schemeIdUri](z.value,function(q){var u=(new Date).getTime(),v=q-u;O(v),y.log("Local time:      "+new Date(u)),y.log("Server time:     "+new Date(q)),y.log("Difference (ms): "+v),C.call(y,q,v);},function(){Z.call(y,w,A+1);}):Z.call(y,w,A+1):(O(0),C.call(y));};return {log:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,getOffsetToDeviceTimeMs:function(){return N();},initialize:function(q){M()||(Z.call(this,q),J(!0));},reset:function(){J(!1),K(!1);}};},MediaPlayer.dependencies.TimeSyncController.prototype={constructor:MediaPlayer.dependencies.TimeSyncController},MediaPlayer.dependencies.TimeSyncController.eventList={ENAME_TIME_SYNCHRONIZATION_COMPLETED:"timeSynchronizationComplete"},MediaPlayer.dependencies.TimeSyncController.TIME_SYNC_FAILED_ERROR_CODE=1,MediaPlayer.utils.VTTParser=function(){"use strict";var B=/(?:\r\n|\r|\n)/gm,E=/-->/,G=/(^[\s]+|[\s]+$)/g,F=/\s\b/g,D=function(q){var u=q.split(":"),v=u.length-1;return q=60*parseInt(u[v-1],10)+parseFloat(u[v]),2===v&&(q+=3600*parseInt(u[0],10)),q;},H=function(q){var u=q.split(E),v=u[1].split(F);return v.shift(),u[1]=v[0],v.shift(),{cuePoints:u,styles:L(v)};},L=function(u){var v={};return u.forEach(function(q){(q.match(/align/)||q.match(/A/))&&(v.align=q.split(/:/)[1]),(q.match(/line/)||q.match(/L/))&&(v.line=q.split(/:/)[1].replace(/%/,"")),(q.match(/position/)||q.match(/P/))&&(v.position=q.split(/:/)[1].replace(/%/,"")),(q.match(/size/)||q.match(/S/))&&(v.size=q.split(/:/)[1].replace(/%/,""));}),v;},I=function(q,u){for(var v,w=u,x="";""!==q[w]&&w<q.length;)w++;if(v=w-u,v>1)for(var y=0;v>y;y++)x+=q[u+y],y!==v-1&&(x+="\n");else x=q[u];return x;};return {parse:function(q){var u,v=[];q=q.split(B),u=q.length;for(var w=0;u>w;w++){var x=q[w];if(x.length>0&&"WEBVTT"!==x&&x.match(E)){var y=H(x),A=y.cuePoints,z=y.styles,C=I(q,w+1);v.push({start:D(A[0].replace(G,"")),end:D(A[1].replace(G,"")),data:C,styles:z});}}return v;}};},MediaPlayer.dependencies.AbrController=function(){"use strict";var G=!0,F={},D={},H={},L={},I={},K=function(q,u){var v;return D[u]=D[u]||{},D[u].hasOwnProperty(q)||(D[u][q]=0),v=D[u][q];},M=function(q,u,v){D[u]=D[u]||{},D[u][q]=v;},J=function(q,u){var v;return H[u]=H[u]||{},H[u].hasOwnProperty(q)||(H[u][q]=0),v=H[u][q];},O=function(q,u,v){H[u]=H[u]||{},H[u][q]=v;},N=function(q,u,v){F[u]=F[u]||{},F[u][q]=v;},P=function(q){return L[q];},R=function(q,u){L[q]=u;},V=function(q){return L.hasOwnProperty("max")&&L.max.hasOwnProperty(q)?L.max[q]:0/0;},Q=function(q,u){L.max=L.max||{},L.max[q]=u;},U=function(q,u){var v;return F[u]=F[u]||{},F[u].hasOwnProperty(q)||(F[u][q]=0),v=Y.call(this,F[u][q],q);},Y=function(q,u){var v=V(u);if(isNaN(v))return q;var w=this.getQualityForBitrate(I[u].getMediaInfo(),v);return Math.min(q,w);};return {log:void 0,abrRulesCollection:void 0,rulesController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,initialize:function(q,u){I[q]=u;},getAutoSwitchBitrate:function(){return G;},setAutoSwitchBitrate:function(q){G=q;},getPlaybackQuality:function(v){var w,x,y,A,z=this,C=v.getType(),B=v.getStreamInfo().id,E=function(q){var u=U.call(z,C,B);w=q.value,A=q.confidence,0>w&&(w=0),w>u&&(w=u),x=K(C,B),w!==x&&(M(C,B,w),O(C,B,A),z.notify(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:C,streamInfo:v.getStreamInfo(),oldQuality:x,newQuality:w}));};w=K(C,B),A=J(C,B),G&&(y=z.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES),z.rulesController.applyRules(y,v,E.bind(z),w,function(q,u){return q=q===MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE?0:q,Math.max(q,u);}));},setPlaybackQuality:function(q,u,v){var w=u.id,x=K(q,w),y=null!==v&&!isNaN(v)&&v%1===0;if(!y)throw "argument is not an integer";v!==x&&v>=0&&v<=U.call(this,q,w)&&(M(q,u.id,v),this.notify(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:q,streamInfo:u,oldQuality:x,newQuality:v}));},getQualityFor:function(q,u){return K(q,u.id);},getConfidenceFor:function(q,u){return J(q,u.id);},setInitialBitrateFor:function(q,u){R(q,u);},getInitialBitrateFor:function(q){return P(q);},setMaxAllowedBitrateFor:function(q,u){Q(q,u);},getMaxAllowedBitrateFor:function(q){return V(q);},getQualityForBitrate:function(q,u){for(var v,w=this.getBitrateList(q),x=w.length,y=0;x>y;y+=1)if(v=w[y],1e3*u<=v.bitrate)return y;return x-1;},getBitrateList:function(q){if(!q||!q.bitrateList)return null;for(var u,v=q.bitrateList,w=q.type,x=[],y=0,A=v.length;A>y;y+=1)u=new MediaPlayer.vo.BitrateInfo,u.mediaType=w,u.qualityIndex=y,u.bitrate=v[y],x.push(u);return x;},updateTopQualityIndex:function(q){var u,v=q.type,w=q.streamInfo.id;return u=q.trackCount-1,N(v,w,u),u;},isPlayingAtTopQuality:function(q){var u,v=this,w=q.id,x=v.getQualityFor("audio",q),y=v.getQualityFor("video",q);return u=x===U.call(this,"audio",w)&&y===U.call(this,"video",w);},getTopQualityIndexFor:U,reset:function(){G=!0,F={},D={},H={},I={};}};},MediaPlayer.dependencies.AbrController.prototype={constructor:MediaPlayer.dependencies.AbrController},MediaPlayer.dependencies.AbrController.eventList={ENAME_QUALITY_CHANGED:"qualityChanged"},MediaPlayer.dependencies.AbrController.DEFAULT_VIDEO_BITRATE=1e3,MediaPlayer.dependencies.AbrController.DEFAULT_AUDIO_BITRATE=100,MediaPlayer.dependencies.BufferController=function(){"use strict";var M,J,O,N,P=.5,R=[],V=0,Q=-1,U=!1,Y=0,b0=0,X=Number.POSITIVE_INFINITY,a0=-1,Z=-1,W=null,e0=null,d0=!1,c0=!1,f0=[],h0=!1,m0=function(){var q=this.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING});return Q>V&&(k0(f0,Q)||k0(q,Q))?!1:Q!==V;},k0=function(q,u){var v=0,w=q.length;for(v;w>v;v+=1)if(q[v].quality===u)return !0;return !1;},o0=function(v,w){var x=function(q,u){return q[w]<u[w]?-1:q[w]>u[w]?1:0;};v.sort(x);},y0=function(q){var u=this;q.data.fragmentModel===u.streamProcessor.getFragmentModel()&&(u.log("Initialization finished loading: "+J),R[q.data.quality]=q.data.bytes,q.data.quality===V&&m0.call(u)&&$.call(u));},u0=function(q){if(q.data.fragmentModel===this.streamProcessor.getFragmentModel()){var u,v=q.data.bytes,w=q.data.quality,x=q.data.index,y=q.data.startTime,A=this.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,quality:w,index:x})[0],z=this.streamProcessor.getTrackForQuality(w),C=this.adapter.getEventsFor(z.mediaInfo,this.streamProcessor),B=this.adapter.getEventsFor(z,this.streamProcessor);(C.length>0||B.length>0)&&(u=q0.call(this,v,A,C,B),this.streamProcessor.getEventController().addInbandEvents(u)),v=v0.call(this,v);var E=y*A.timescale,q=E%1;q>0&&(q>.99?E+=1-q:.01>q&&(E-=q)),f0.push({bytes:v,quality:w,index:x,startTimeInTimescale:E,startTime:y}),o0(f0,"index"),E0.call(this);}},s0=function(q,u,v,w,x){if(void 0===x)var x=null;c0=!0,N={quality:u,index:v,startTime:w};var y=this,A=isNaN(v);if(u!==V&&A||u!==Q&&!A)return void J0.call(y,u,v);var z=y.utils,C=z.getBoxType(q);if(CL.manifest.enableSmoothStreamingCompatibility===!0&&(CL.manifest.parseMoofFragments=!0),CL.configs.isSmoothStreaming===!0&&("moof"!=C||CL.manifest.parseMoofFragments===!0)){var B=this.streamProcessor.getTrackForQuality(u);q=z.parseSmoothStreamingFragment(B,q,J,x);}if("ftyp"===C&&CL.manifest.generatePSSH===!0&&(CL.configs.debug&&console.log(z.byteArrayToHexString(q)),q=z.getSubBox(q,"moov"),C=z.getBoxType(q)),"moov"===C&&CL.manifest.generatePSSH===!0){var E=z.generatePSSHBox(y.contentProtectionData);q=z.injectPSSHBox(q,E);}"moov"===C&&CL.configs.isIE11===!0&&CL.configs.isProtected===!0&&(q=z.filterUUIDBox(q)),y.log("Push ("+J+") bytes: "+q.byteLength),y.sourceBufferExt.append(W,q,N);},t0=function(q){if(W===q.data.buffer){this.isBufferingCompleted()&&this.streamProcessor.getStreamInfo().isLast&&this.mediaSourceExt.signalEndOfStream(M);var u,v=this;if(q.error)return q.error.code===MediaPlayer.dependencies.SourceBufferExtensions.QUOTA_EXCEEDED_ERROR_CODE&&(f0.unshift({bytes:q.data.bytes,quality:N.quality,index:N.index}),X=.8*z0.call(v),v.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED,{criticalBufferLevel:X}),B0.call(v)),void (c0=!1);if(A0.call(v),p0.call(v)||(v.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED,{criticalBufferLevel:X}),B0.call(v)),u=v.sourceBufferExt.getAllRanges(W),u&&(v.log("Append "+J+" complete: "+u.length),u.length>0)){var w,x;for(v.log("Number of buffered "+J+" ranges: "+u.length),w=0,x=u.length;x>w;w+=1){v.log("Buffered "+J+" Range: "+u.start(w)+" - "+u.end(w));var y=v.streamProcessor.videoModel;null!=CL.configs.minStartTime&&CL.configs.minStartTime>0&&0==y.getCurrentTime()&&0==CL.configs.isIE11&&y.setCurrentTime(CL.configs.minStartTime);}}L0.call(v,N.quality,N.index),v.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,{quality:N.quality,index:N.index,bufferedRanges:u});}},A0=function(){var q=this,u=q.playbackController.getTime();return this.playbackController.getTimeToStreamEnd(),Y=q.sourceBufferExt.getBufferLength(W,u),q.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,{bufferLevel:Y}),r0.call(q),F0.call(q),P>Y&&!U&&g0.call(q,!1),!0;},q0=function(q,u,v,w){var x,y,A,z,C=[],B=0,E=Math.pow(256,2),G=Math.pow(256,3),F=Math.max(isNaN(u.startTime)?0:u.startTime,0),D=[];h0=!1,z=v.concat(w);for(var H=0;H<z.length;H++)D[z[H].schemeIdUri]=z[H];for(;B<q.length&&(x=String.fromCharCode(q[B+4],q[B+5],q[B+6],q[B+7]),y=q[B]*G+q[B+1]*E+256*q[B+2]+1*q[B+3],"moov"!=x&&"moof"!=x);){if("emsg"==x){h0=!0;for(var L=["","",0,0,0,0,""],I=0,K=B+12;y+B>K;)0===I||1==I||6==I?(0!==q[K]?L[I]+=String.fromCharCode(q[K]):I+=1,K+=1):(L[I]=q[K]*G+q[K+1]*E+256*q[K+2]+1*q[K+3],K+=4,I+=1);A=this.adapter.getEvent(L,D,F),A&&C.push(A);}B+=y;}return C;},v0=function(q){if(!h0)return q;for(var u,v,w=q.length,x=0,y=0,A=Math.pow(256,2),z=Math.pow(256,3),C=new Uint8Array(q.length);w>x;){if(u=String.fromCharCode(q[x+4],q[x+5],q[x+6],q[x+7]),v=q[x]*z+q[x+1]*A+256*q[x+2]+1*q[x+3],"emsg"!=u)for(var B=x;x+v>B;B++)C[y]=q[B],y+=1;x+=v;}return C.subarray(0,y);},r0=function(){var q=D0.call(this),u=2*O,v=Y-q;v>=u&&!d0?(d0=!0,this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN)):u/2>v&&d0&&(this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED),d0=!1,E0.call(this));},D0=function(){var q=this.metricsModel.getReadOnlyMetricsFor("video"),u=this.metricsExt.getCurrentBufferLevel(q),v=this.metricsModel.getReadOnlyMetricsFor("audio"),w=this.metricsExt.getCurrentBufferLevel(v),x=null;return x=null===u||null===w?null!==w?w.level:null!==u?u.level:null:Math.min(w.level,u.level);},p0=function(){var q=this,u=z0.call(q);return X>u;},B0=function(){var q,u,v,w,x,y=this;W&&(q=y.playbackController.getTime(),x=y.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,time:q})[0],v=x&&!isNaN(x.startTime)?x.startTime:Math.floor(q),w=y.sourceBufferExt.getBufferRange(W,q),null===w&&W.buffered.length>0&&(v=W.buffered.end(W.buffered.length-1)),u=W.buffered.start(0),y.sourceBufferExt.remove(W,u,v,M));},C0=function(q){var u,v=this,w=(v.playbackController.getTime(),q);W&&(w=q,u=0,CL.configs.debug&&console.log("clear buffered audio from "+u+" to "+w),v.sourceBufferExt.waitForUpdateEnd(W,function(){v.sourceBufferExt.remove(W,u,w,M);}));},w0=function(q){W===q.data.buffer&&(A0.call(this),this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,{from:q.data.from,to:q.data.to,hasEnoughSpaceToAppend:p0.call(this)}),p0.call(this)||setTimeout(B0.bind(this),1e3*O));},z0=function(){var q,u,v=this,w=v.sourceBufferExt.getAllRanges(W),x=0;if(!w)return x;for(u=0,q=w.length;q>u;u+=1)x+=w.end(u)-w.start(u);return x;},G0=function(){var q=a0===Z-1;q&&!U&&(U=!0,this.streamProcessor.abrController.setAutoSwitchBitrate(!1),this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED));},F0=function(){var q=this.playbackController.getTimeToStreamEnd();this.streamProcessor.isDynamic()?O/2:O,P>Y&&(q>O&&!U||O>=q)?O>=q||g0.call(this,!1):g0.call(this,!0);},H0=function(){return e0?MediaPlayer.dependencies.BufferController.BUFFER_LOADED:MediaPlayer.dependencies.BufferController.BUFFER_EMPTY;},g0=function(q){if(e0!==q){e0=q;var u=H0(),v=u===MediaPlayer.dependencies.BufferController.BUFFER_LOADED?MediaPlayer.events.BUFFER_LOADED:MediaPlayer.events.BUFFER_EMPTY;this.metricsModel.addBufferState(J,u,b0),this.eventBus.dispatchEvent({type:v,data:{bufferType:J}}),this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,{hasSufficientBuffer:q}),this.log(e0?"Got enough buffer to start.":"Waiting for more buffer before starting playback.");}},l0=function(q){W.timestampOffset===q||isNaN(q)||(W.timestampOffset=q);},i0=function(){var q=this,u=this.streamProcessor.getScheduleController().getFragmentToLoadCount(),v=this.streamProcessor.getCurrentTrack().fragmentDuration;A0.call(q),b0=u>0?u*v+Y:b0,this.metricsModel.addBufferState(J,H0(),b0),E0.call(q);},E0=function(){m0.call(this)?$.call(this):b1.call(this);},L0=function(q,u){c0=!1,isNaN(u)?M0.call(this,q):N0.call(this,u),E0.call(this);},J0=function(q,u){c0=!1,this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED,{quality:q,index:u}),E0.call(this);},M0=function(q){Q=q;},N0=function(q){a0=Math.max(q,a0),G0.call(this);},b1=function(){var q;0===f0.length||d0||c0||m0.call(this)||!p0.call(this)||(q=f0.shift(),s0.call(this,q.bytes,q.quality,q.index,q.startTime,q.startTimeInTimescale));},d1=function(q){if(!q.error){var u,v=this;l0.call(v,q.data.currentRepresentation.MSETimeOffset),u=v.streamProcessor.getStreamInfo().manifestInfo.minBufferTime,CL.manifest.ignoreManifestBufferSettings===!0&&(u=MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME/2),O!==u&&(v.setMinBufferTime(u),v.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_MIN_BUFFER_TIME_UPDATED,{minBufferTime:u}));}},Y0=function(q){var u=this;q.data.fragmentModel===u.streamProcessor.getFragmentModel()&&(Z=q.data.request.index,G0.call(u));},U0=function(q){if(J===q.data.mediaType&&this.streamProcessor.getStreamInfo().id===q.data.streamInfo.id){var u=this,v=q.data.newQuality;V!==v&&(l0.call(u,u.streamProcessor.getTrackForQuality(v).MSETimeOffset),V=v,m0.call(u)&&$.call(u));}},$=function(){var q=this;if(R[V]){if(c0)return ;s0.call(q,R[V],V);}else q.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,{requiredQuality:V});},l1=function(){E0.call(this);},c1=function(){F0.call(this);};return {sourceBufferExt:void 0,eventBus:void 0,bufferMax:void 0,mediaSourceExt:void 0,metricsModel:void 0,metricsExt:void 0,adapter:void 0,log:void 0,system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=d1,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED]=y0,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED]=u0,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=Y0,this[MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED]=U0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS]=i0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=i0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED]=i0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED]=c1,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED]=l1,t0=t0.bind(this),w0=w0.bind(this),this.sourceBufferExt.subscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,this,t0),this.sourceBufferExt.subscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,this,w0);},initialize:function(q,u,v,w,x){var y=this;y.utils=this.system.getObject("clUtils"),J=q,y.setMediaType(J),y.setMediaSource(v),y.setBuffer(u),y.streamProcessor=w,y.fragmentController=w.fragmentController,y.scheduleController=w.scheduleController,y.playbackController=w.playbackController,y.contentProtectionData=x;},getStreamProcessor:function(){return this.streamProcessor;},setStreamProcessor:function(q){this.streamProcessor=q;},getBuffer:function(){return W;},setBuffer:function(q){W=q;},getBufferLevel:function(){return Y;},getMinBufferTime:function(){return O;},setMinBufferTime:function(q){O=q;},getCriticalBufferLevel:function(){return X;},setMediaSource:function(q){M=q;},isBufferingCompleted:function(){return U;},reset:function(q){var u=this;R=[],X=Number.POSITIVE_INFINITY,e0=null,O=null,Q=-1,V=0,u.sourceBufferExt.unsubscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,u,t0),u.sourceBufferExt.unsubscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,u,w0),N=null,d0=!1,c0=!1,f0=[],q||(u.sourceBufferExt.abort(M,W),u.sourceBufferExt.removeSourceBuffer(M,W)),W=null;},clearFutureBuffer:C0,setAudioTrack:function(u){CL.configs.debug&&console.log("CL: Switch audio track request");var v=this,w=v.manifestModel.getValue();v.manifestExt.getAudioDatas(w,periodInfo.index).then(function(q){u<q.length?(q[u],CL.configs.debug&&console.log("CL: Switching to audio track #"+u),dataChanged=!0,C0.call(v)):CL.configs.debug&&console.log("CL: Abort switching audio track. Selected track ()"+u+" doesn't exist.");});}};},MediaPlayer.dependencies.BufferController.BUFFER_SIZE_REQUIRED="required",MediaPlayer.dependencies.BufferController.BUFFER_SIZE_MIN="min",MediaPlayer.dependencies.BufferController.BUFFER_SIZE_INFINITY="infinity",MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=8,MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD=4,MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY=20,MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM=25,MediaPlayer.dependencies.BufferController.LONG_FORM_CONTENT_DURATION_THRESHOLD=600,MediaPlayer.dependencies.BufferController.RICH_BUFFER_THRESHOLD=20,MediaPlayer.dependencies.BufferController.BUFFER_LOADED="bufferLoaded",MediaPlayer.dependencies.BufferController.BUFFER_EMPTY="bufferStalled",MediaPlayer.dependencies.BufferController.prototype={constructor:MediaPlayer.dependencies.BufferController},MediaPlayer.dependencies.BufferController.eventList={ENAME_BUFFER_LEVEL_STATE_CHANGED:"bufferLevelStateChanged",ENAME_BUFFER_LEVEL_UPDATED:"bufferLevelUpdated",ENAME_QUOTA_EXCEEDED:"quotaExceeded",ENAME_BYTES_APPENDED:"bytesAppended",ENAME_BYTES_REJECTED:"bytesRejected",ENAME_BUFFERING_COMPLETED:"bufferingCompleted",ENAME_BUFFER_CLEARED:"bufferCleared",ENAME_INIT_REQUESTED:"initRequested",ENAME_BUFFER_LEVEL_OUTRUN:"bufferLevelOutrun",ENAME_BUFFER_LEVEL_BALANCED:"bufferLevelBalanced",ENAME_MIN_BUFFER_TIME_UPDATED:"minBufferTimeUpdated"},MediaPlayer.dependencies.EventController=function(){"use strict";var A=[],z=[],C=[],B=null,E=100,G=E/1e3,F="urn:mpeg:dash:event:2012",D=1,H=function(){L(),A=null,z=null,C=null;},L=function(){null!==B&&(clearInterval(B),B=null);},I=function(){var q=this;q.log("Start Event Controller"),isNaN(E)||(B=setInterval(J.bind(this),E));},K=function(q){var u=this;A=[],q&&q.length>0&&(A=q),u.log("Added "+q.length+" inline events");},M=function(q){for(var u=this,v=0;v<q.length;v++){var w=q[v];z[w.id]=w,u.log("Add inband event with id "+w.id);}},J=function(){O.call(this,z),O.call(this,A),N.call(this);},O=function(q){var u,v=this,w=this.videoModel.getCurrentTime();if(q)for(var x=0;x<q.length;x++){var y=q[x];void 0!==y&&(u=y.presentationTime/y.eventStream.timescale,(0===u||w>=u&&u+G>w)&&(v.log("Start Event at "+w),y.duration>0&&C.push(y),y.eventStream.schemeIdUri==F&&y.eventStream.value==D&&P.call(this),q.splice(x,1)));}},N=function(){var q=this;if(C)for(var u=this.videoModel.getCurrentTime(),v=0;v<C.length;v++){var w=C[v];null!==w&&(w.duration+w.presentationTime)/w.eventStream.timescale<u&&(q.log("Remove Event at time "+u),w=null,C.splice(v,1));}},P=function(){var q=this,u=q.manifestModel.getValue(),v=u.url;u.hasOwnProperty("Location")&&(v=u.Location),q.log("Refresh manifest @ "+v),q.manifestLoader.load(v);};return {manifestModel:void 0,manifestLoader:void 0,log:void 0,system:void 0,addInlineEvents:K,addInbandEvents:M,reset:H,clear:L,start:I,getVideoModel:function(){return this.videoModel;},setVideoModel:function(q){this.videoModel=q;},initialize:function(q){this.setVideoModel(q);}};},MediaPlayer.dependencies.EventController.prototype={constructor:MediaPlayer.dependencies.EventController},MediaPlayer.dependencies.FragmentController=function(){"use strict";var C=[],B=!1,E=function(q){for(var u=C.length,v=0;u>v;v++)if(C[v].getContext()==q)return C[v];return null;},G=function(v,w){var x=this,y=C[0].getContext().streamProcessor,A=y.getStreamInfo().id,z=x.scheduleRulesCollection.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_EXECUTE_RULES);-1!==z.indexOf(this.scheduleRulesCollection.sameTimeRequestRule)&&this.scheduleRulesCollection.sameTimeRequestRule.setFragmentModels(C,A),x.rulesController.applyRules(z,y,w,v,function(q,u){return u;});},F=function(q){var u=this,v=q.data.request;u.isInitializationRequest(v)?u.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADING_START,{request:v,fragmentModel:q.sender}):u.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START,{request:v,fragmentModel:q.sender});},D=function(q){var u=this,v=q.data.request,w=u.process(q.data.response);if(null===w)return void u.log("No "+v.mediaType+" bytes to push.");if(u.isInitializationRequest(v)){if(-1==v.range){var x=new Uint8Array(8);x[0]=0,x[1]=0,x[2]=2,x[3]=182,x[4]=109,x[5]=111,x[6]=111,x[7]=118,w=x;}u.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,{bytes:w,quality:v.quality,fragmentModel:q.sender});}else u.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,{bytes:w,quality:v.quality,index:v.index,startTime:v.startTime,fragmentModel:q.sender});K.call(this);},H=function(q){this.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,{request:q.data.request,fragmentModel:q.sender});},L=function(){K.call(this);},I=function(q){var u,v,w,x,y,A=q.value;for(x=0;x<A.length;x+=1)if(v=A[x])for(y=0;y<C.length;y+=1)w=C[y],u=w.getContext().streamProcessor.getType(),v.mediaType===u&&(v instanceof MediaPlayer.vo.FragmentRequest||(v=w.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING,time:v.startTime})[0]),w.executeRequest(v));B=!1;},K=function(q){B||(B=!0,G.call(this,q,I.bind(this)));};return {system:void 0,log:void 0,scheduleRulesCollection:void 0,rulesController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED]=F,this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED]=D,this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED]=H,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED]=L,this.scheduleRulesCollection.sameTimeRequestRule&&this.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,this.scheduleRulesCollection.sameTimeRequestRule);},process:function(q){var u=null;return null!==q&&void 0!==q&&q.byteLength>0&&(u=new Uint8Array(q)),u;},getModel:function(q){if(!q)return null;var u=E(q);return u||(u=this.system.getObject("fragmentModel"),u.setContext(q),C.push(u)),u;},detachModel:function(q){var u=C.indexOf(q);u>-1&&C.splice(u,1);},isInitializationRequest:function(q){return q&&q.type&&-1!==q.type.toLowerCase().indexOf("initialization");},prepareFragmentForLoading:function(q,u){q&&u&&q.addRequest(u)&&K.call(this,u);},executePendingRequests:function(){K.call(this);},reset:function(){C=[],this.scheduleRulesCollection.sameTimeRequestRule&&this.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,this.scheduleRulesCollection.sameTimeRequestRule);}};},MediaPlayer.dependencies.FragmentController.prototype={constructor:MediaPlayer.dependencies.FragmentController},MediaPlayer.dependencies.FragmentController.eventList={ENAME_STREAM_COMPLETED:"streamCompleted",ENAME_INIT_FRAGMENT_LOADING_START:"initFragmentLoadingStart",ENAME_MEDIA_FRAGMENT_LOADING_START:"mediaFragmentLoadingStart",ENAME_INIT_FRAGMENT_LOADED:"initFragmentLoaded",ENAME_MEDIA_FRAGMENT_LOADED:"mediaFragmentLoaded"},MediaPlayer.dependencies.PlaybackController=function(){"use strict";var C,B,E,G=1e3,F=0,D=0/0,H=null,L={},I={},K=function(q){var u,v=parseInt(this.uriQueryFragModel.getURIFragmentData().s);return E?(!isNaN(v)&&v>1262304e3&&(u=v-q.manifestInfo.availableFrom.getTime()/1e3,(u>D||u<D-q.manifestInfo.DVRWindowSize)&&(u=null)),u=u||D):u=!isNaN(v)&&v<q.duration&&v>=0?v:q.start,u;},M=function(q){var u,v=this,w=v.metricsModel.getReadOnlyMetricsFor("video")||v.metricsModel.getReadOnlyMetricsFor("audio"),x=v.metricsExt.getCurrentDVRInfo(w),y=x?x.range:null;return y?q>=y.start&&q<=y.end?q:u=Math.max(y.end-2*C.manifestInfo.minBufferTime,y.start):0/0;},J=function(){if(null===H){var q=this,u=function(){m0.call(q);};H=setInterval(u,G);}},O=function(){clearInterval(H),H=null;},N=function(){var q=K.call(this,C);q=Math.max(q,CL.configs.minStartTime),CL.configs.minStartTime=q,this.log("Starting playback at offset: "+q),this.seek(q);},P=function(){if(!this.isPaused()&&E){var q=this.getTime(),u=M.call(this,q);!isNaN(u)&&u!==q;}},R=function(q){if(!q.error){var u=this.adapter.convertDataToTrack(q.data.currentRepresentation);C=u.mediaInfo.streamInfo,E=q.sender.streamProcessor.isDynamic(),P.call(this);}},V=function(q){q.error||0===B.getElement().readyState||N.call(this);},Q=function(){B&&(B.unlisten("play",Y),B.unlisten("playing",b0),B.unlisten("pause",X),B.unlisten("error",h0),B.unlisten("seeking",a0),B.unlisten("seeked",Z),B.unlisten("timeupdate",W),B.unlisten("progress",e0),B.unlisten("ratechange",d0),B.unlisten("loadedmetadata",c0),B.unlisten("ended",f0));},U=function(){this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY);},Y=function(){this.log("<video> play"),P.call(this),J.call(this),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,{startTime:this.getTime()});},b0=function(){this.log("<video> playing"),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PLAYING,{playingTime:this.getTime()});},X=function(){this.log("<video> pause"),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED);},a0=function(){B.getElement().currentTime<CL.configs.minStartTime&&!CL.configs.minStartTimeSeekInProgress&&(B.getElement().currentTime=CL.configs.minStartTime,CL.configs.minStartTimeSeekInProgress=!0),this.log("<video> seek"),J.call(this),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,{seekTime:this.getTime()});},Z=function(){this.log("<video> seeked"),CL.configs.minStartTimeSeekInProgress=!1,this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED);},W=function(){var q=this.getTime();q!==F&&(F=q,this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,{timeToEnd:this.getTimeToStreamEnd()}));},e0=function(){var q,u,v,w=B.getElement().buffered;w.length&&(q=w.length-1,u=w.end(q),v=K.call(this,C)+C.duration-u),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,{bufferedRanges:B.getElement().buffered,remainingUnbufferedDuration:v});},d0=function(){this.log("<video> ratechange: ",this.getPlaybackRate()),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED);},c0=function(){this.log("<video> loadedmetadata"),(!E||this.timelineConverter.isTimeSyncCompleted())&&N.call(this),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_METADATA_LOADED),J.call(this);},f0=function(){this.log("<video> ended"),O.call(this);},h0=function(q){this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,{error:q.srcElement.error});},m0=function(){this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,{isDynamic:E,time:new Date});},k0=function(q){var u,v=q.data.bufferedRanges,w=C.id,x=this.getTime(),y=q.sender.streamProcessor.getType(),A=this.system.getObject("streamController").getStreamById(C.id),z=L[w];0===q.data.index&&(I[w]=I[w]||{},I[w][y]=!0,I.ready=!(A.hasMedia("audio")&&!I[w].audio||A.hasMedia("video")&&!I[w].video)),v&&v.length&&(u=Math.max(v.start(0),C.start),L[w]=void 0===L[w]?u:Math.max(L[w],u),z===L[w]||!I.ready||x>L[w]);},o0=function(q){B=q,B.listen("canplay",U),B.listen("play",Y),B.listen("playing",b0),B.listen("pause",X),B.listen("error",h0),B.listen("seeking",a0),B.listen("seeked",Z),B.listen("timeupdate",W),B.listen("progress",e0),B.listen("ratechange",d0),B.listen("loadedmetadata",c0),B.listen("ended",f0);};return {system:void 0,log:void 0,timelineConverter:void 0,uriQueryFragModel:void 0,metricsModel:void 0,metricsExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,adapter:void 0,setup:function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=R,this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=V,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED]=k0,U=U.bind(this),Y=Y.bind(this),b0=b0.bind(this),X=X.bind(this),h0=h0.bind(this),a0=a0.bind(this),Z=Z.bind(this),W=W.bind(this),e0=e0.bind(this),d0=d0.bind(this),c0=c0.bind(this),f0=f0.bind(this);},initialize:function(q,u){C=q,B!==u&&(Q.call(this),o0.call(this,u));},getTimeToStreamEnd:function(){var q=B.getCurrentTime();return K.call(this,C)+C.duration-q;},getStreamId:function(){return C.id;},getStreamDuration:function(){return C.duration;},getTime:function(){return B.getCurrentTime();},getPlaybackRate:function(){return B.getPlaybackRate();},getPlayedRanges:function(){return B.getElement().played;},setLiveStartTime:function(q){D=q;},getLiveStartTime:function(){return D;},getLiveDelay:function(){return CL.manifest.ABRParameters.liveDelay&&!isNaN(CL.manifest.ABRParameters.liveDelay)?CL.manifest.ABRParameters.liveDelay:2*C.manifestInfo.minBufferTime;},start:function(){B.play();},isPaused:function(){return B.isPaused();},pause:function(){B&&B.pause();},isSeeking:function(){return B.getElement().seeking;},seek:function(q){q!==this.getTime()&&B.setCurrentTime(q);},reset:function(){O.call(this),Q.call(this),B=null,C=null,F=0,D=0/0,L=null;}};},MediaPlayer.dependencies.PlaybackController.prototype={constructor:MediaPlayer.dependencies.PlaybackController},MediaPlayer.dependencies.PlaybackController.eventList={ENAME_CAN_PLAY:"canPlay",ENAME_PLAYBACK_STARTED:"playbackStarted",ENAME_PLAYBACK_PLAYING:"playbackPlaying",ENAME_PLAYBACK_STOPPED:"playbackStopped",ENAME_PLAYBACK_PAUSED:"playbackPaused",ENAME_PLAYBACK_SEEKING:"playbackSeeking",ENAME_PLAYBACK_SEEKED:"playbackSeeked",ENAME_PLAYBACK_TIME_UPDATED:"playbackTimeUpdated",ENAME_PLAYBACK_PROGRESS:"playbackProgress",ENAME_PLAYBACK_RATE_CHANGED:"playbackRateChanged",ENAME_PLAYBACK_METADATA_LOADED:"playbackMetaDataLoaded",ENAME_PLAYBACK_ERROR:"playbackError",ENAME_WALLCLOCK_TIME_UPDATED:"wallclockTimeUpdated"},MediaPlayer.dependencies.ProtectionController=function(){"use strict";var v=null,w=function(q){if(q.error)this.log(q.error);else{var u=q.data;this.protectionModel.keySystem.doLicenseRequest(u.message,u.defaultURL,u.sessionToken);}},x=function(q){q.error?(this.log("DRM: License request failed! -- "+q.error),this.errHandler.licenseError(q)):(this.log("DRM: License request successful.  Session ID = "+q.data.requestData.getSessionID()),this.updateKeySession(q.data.requestData,q.data.message));},y=function(){this.protectionModel.keySystem.subscribe(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,this);};return {system:void 0,log:void 0,protectionExt:void 0,setup:function(){this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE]=w.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=y.bind(this),this[MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE]=x.bind(this);},init:function(q){this.protectionModel=q,v=this.protectionExt.getKeySystems(),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this);},teardown:function(){this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this),this.protectionModel.keySystem&&this.protectionModel.keySystem.unsubscribe(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,this);},requestKeySystemAccess:function(q){this.protectionModel.requestKeySystemAccess(q);},selectKeySystem:function(q){if(this.protectionModel.keySystem)throw  new Error("DRM: KeySystem already selected!");CL.manifest.drm=q.keySystem.systemString,this.protectionModel.selectKeySystem(q);},createKeySession:function(q,u){this.protectionModel.createKeySession(q,u);},updateKeySession:function(q,u){this.protectionModel.updateKeySession(q,u);},loadKeySession:function(q){this.protectionModel.loadKeySession(q);},removeKeySession:function(q){this.protectionModel.removeKeySession(q);},closeKeySession:function(q){this.protectionModel.closeKeySession(q);},setServerCertificate:function(q){this.protectionModel.setServerCertificate(q);},errHandler:void 0};},MediaPlayer.dependencies.ProtectionController.prototype={constructor:MediaPlayer.dependencies.ProtectionController},MediaPlayer.dependencies.ScheduleController=function(){"use strict";var E,G,F,D,H,L=0,I=!0,K=null,M=!1,J=null,O=null,N=!0,P=function(q,u){var v=0,w=null;N===!1&&(w=O.start,v=q.getTime()-w.getTime(),O.duration=v,O.stopreason=u,N=!0);},R=function(){G&&(M=!1,I&&(I=!1),this.log("start"),W.call(this));},V=function(){I&&(Y.call(this,H.quality),v0.call(this,MediaPlayer.vo.metrics.PlayList.INITIAL_PLAY_START_REASON)),R.call(this);},Q=function(q){M||(M=!0,this.log("stop"),q&&F.cancelPendingRequests(),P(new Date,MediaPlayer.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON));},U=function(v){var w=this,x=w.scheduleRulesCollection.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.NEXT_FRAGMENT_RULES);w.rulesController.applyRules(x,w.streamProcessor,v,null,function(q,u){return u;});},Y=function(q){var u,v=this;return u=v.adapter.getInitRequest(v.streamProcessor,q),null!==u&&v.fragmentController.prepareFragmentForLoading(F,u),u;},b0=function(v){var w=this,x=w.scheduleRulesCollection.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_SCHEDULE_RULES);w.rulesController.applyRules(x,w.streamProcessor,v,L,function(q,u){return q=q===MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE?0:q,Math.max(q,u);});},X=function(q){var u,v,w,x=q.length,y=.1;for(w=0;x>w;w+=1)u=q[w],v=u.startTime+u.duration/2+y,u=this.adapter.getFragmentRequestForTime(this.streamProcessor,H,v,{timeThreshold:0}),this.fragmentController.prepareFragmentForLoading(F,u);},a0=function(q){var u=this;return L=q.value,0>=L?void u.fragmentController.executePendingRequests():void U.call(u,Z.bind(u));},Z=function(q){var u=q.value;null===u||u instanceof MediaPlayer.vo.FragmentRequest||(u=this.adapter.getFragmentRequestForTime(this.streamProcessor,H,u.startTime)),u?(L--,this.fragmentController.prepareFragmentForLoading(F,u)):this.fragmentController.executePendingRequests();},W=function(){var q=(new Date).getTime(),u=K?q-K>F.getLoadingTime():!0;this.abrController.getPlaybackQuality(this.streamProcessor),!u||M||this.playbackController.isPaused()&&this.playbackController.getPlayedRanges().length>0&&(!this.scheduleWhilePaused||D)||(K=q,b0.call(this,a0.bind(this)));},e0=function(){var q=this;null!==E&&""!==E&&q.metricsModel.clearCurrentMetricsForType(E);},d0=function(q){q.error||(H=this.adapter.convertDataToTrack(q.data.currentRepresentation));},c0=function(q){q.error||(H=this.streamProcessor.getCurrentTrack(),D||(G=!0),G&&V.call(this));},f0=function(q){q.data.fragmentModel===this.streamProcessor.getFragmentModel()&&(this.log("Stream is complete"),P(new Date,MediaPlayer.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON));},h0=function(q){var u=this;q.data.fragmentModel===u.streamProcessor.getFragmentModel()&&W.call(u);},m0=function(q){q.error&&Q.call(this);},k0=function(){r0.call(this);},o0=function(){Q.call(this,!1);},y0=function(q){Y.call(this,q.data.requiredQuality);},u0=function(q){F.removeExecutedRequestsBeforeTime(q.data.to),q.data.hasEnoughSpaceToAppend&&R.call(this);},s0=function(q){var u=this;q.data.hasSufficientBuffer||u.playbackController.isSeeking()||(u.log("Stalling "+E+" Buffer: "+E),P(new Date,MediaPlayer.vo.metrics.PlayList.Trace.REBUFFERING_REASON));},t0=function(q){var u=this;u.metricsModel.addBufferLevel(E,new Date,q.data.bufferLevel),W.call(this);},A0=function(){Q.call(this,!1);},q0=function(q){if(E===q.data.mediaType&&this.streamProcessor.getStreamInfo().id===q.data.streamInfo.id){var u,v=this;if(u=F.cancelPendingRequests(q.data.oldQuality),H=v.streamProcessor.getTrackForQuality(q.data.newQuality),null===H||void 0===H)throw "Unexpected error!";X.call(v,u),P(new Date,MediaPlayer.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON);}},v0=function(q){var u=new Date,v=this.playbackController.getTime();P(u,MediaPlayer.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON),J=this.metricsModel.addPlayList(E,u,v,q);},r0=function(){var q=this,u=q.playbackController.getTime(),v=q.playbackController.getPlaybackRate(),w=new Date;N===!0&&H&&J&&(N=!1,O=q.metricsModel.appendPlayListTrace(J,H.id,null,w,u,null,v,null));},D0=function(q){var u=this,v=Y.call(u,q.data.CCIndex);F.executeRequest(v);},p0=function(){R.call(this);},B0=function(q){I||F.cancelPendingRequests();var u=this.metricsModel.getMetricsFor("stream"),v=this.metricsExt.getCurrentManifestUpdate(u);this.log("seek: "+q.data.seekTime),v0.call(this,MediaPlayer.vo.metrics.PlayList.SEEK_START_REASON),this.metricsModel.updateManifestUpdateInfo(v,{latency:H.DVRWindow.end-this.playbackController.getTime()});},C0=function(){r0.call(this);},w0=function(){W.call(this);},z0=function(q){if(!q.error){var u,v,w=this,x=q.data.liveEdge,y=H.mediaInfo.streamInfo.manifestInfo,A=x-Math.min(w.playbackController.getLiveDelay(),y.DVRWindowSize/2),z=w.metricsModel.getMetricsFor("stream"),C=w.metricsExt.getCurrentManifestUpdate(z),B=w.playbackController.getLiveStartTime();u=w.adapter.getFragmentRequestForTime(w.streamProcessor,H,A),v=u.startTime,(isNaN(B)||v>B)&&w.playbackController.setLiveStartTime(v),w.metricsModel.updateManifestUpdateInfo(C,{currentTime:v,presentationStartTime:x,latency:x-v,clientTimeOffset:w.timelineConverter.getClientTimeOffset()}),G=!0,H&&V.call(w);}};return {log:void 0,system:void 0,metricsModel:void 0,metricsExt:void 0,scheduleWhilePaused:void 0,timelineConverter:void 0,abrController:void 0,adapter:void 0,scheduleRulesCollection:void 0,rulesController:void 0,setup:function(){this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=z0,this[MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED]=q0,this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED]=o0,this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=d0,this[MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED]=c0,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START]=h0,this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED]=m0,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=f0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED]=u0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED]=k0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED]=s0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED]=t0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED]=y0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED]=A0,this[MediaPlayer.dependencies.TextController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED]=D0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED]=p0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=B0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED]=C0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED]=w0;},initialize:function(q,u){var v=this;E=q,v.setMediaType(E),v.streamProcessor=u,v.playbackController=u.playbackController,v.fragmentController=u.fragmentController,v.liveEdgeFinder=u.liveEdgeFinder,v.bufferController=u.bufferController,D=u.isDynamic(),F=this.fragmentController.getModel(this),v.scheduleRulesCollection.bufferLevelRule&&v.scheduleRulesCollection.bufferLevelRule.setScheduleController(v),v.scheduleRulesCollection.pendingRequestsRule&&v.scheduleRulesCollection.pendingRequestsRule.setScheduleController(v),v.scheduleRulesCollection.playbackTimeRule&&v.scheduleRulesCollection.playbackTimeRule.setScheduleController(v);},getFragmentModel:function(){return F;},getFragmentToLoadCount:function(){return L;},reset:function(){var q=this;Q.call(q,!0),q.bufferController.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,q.scheduleRulesCollection.bufferLevelRule),q.bufferController.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,q.scheduleRulesCollection.bufferLevelRule),F.abortRequests(),q.fragmentController.detachModel(F),e0.call(q),L=0;},start:R,stop:Q};},MediaPlayer.dependencies.ScheduleController.prototype={constructor:MediaPlayer.dependencies.ScheduleController},MediaPlayer.dependencies.StreamController=function(){"use strict";var H,L=[],I=6,K=.2,M=!0,J=!1,O=function(){H.play();},N=function(){H.pause();},P=function(q){H.seek(q);},R=function(q,u){var v=q.getElement(),w=u.getElement();w.parentNode||v.parentNode.insertBefore(w,v),v.style.width="0px",w.style.width="100%",U(v,w);},V=function(q){var u=q.getPlaybackController();u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,this.manifestUpdater),u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,this.manifestUpdater),u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,this),u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,this),u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,this);},Q=function(q){var u=this,v=q.getPlaybackController();setTimeout(function(){v.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,u.manifestUpdater),v.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,u.manifestUpdater),v.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,u),v.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,u),v.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,u);},1);},U=function(u,v){["controls","loop","muted","volume"].forEach(function(q){v[q]=u[q];});},Y=function(q,u){this.eventBus.dispatchEvent({type:MediaPlayer.events.SWITCH_STREAM,data:{fromStreamInfo:q?q.getStreamInfo():null,toStreamInfo:u.getStreamInfo()}});},b0=function(q){!q.data.remainingUnbufferedDuration||q.data.remainingUnbufferedDuration>=I||Z();},X=function(q){var u=this,v=u.videoExt.getPlaybackQuality(H.getVideoModel().getElement());v&&u.metricsModel.addDroppedFrames("video",v),W()&&(H.getVideoModel().getElement().seeking||q.data.timeToEnd<K&&f0.call(this,H,W()));},a0=function(q){var u=e0(q.data.seekTime);u&&u!==H&&f0.call(this,H,u,q.data.seekTime);},Z=function(){var q=W();q&&q.seek(q.getStartTime());},W=function(){var q=H.getStreamIndex()+1;return q<L.length?L[q]:null;},e0=function(q){var u=0,v=null,w=L.length;w>0&&(u+=L[0].getStartTime());for(var x=0;w>x;x++)if(v=L[x],u+=v.getDuration(),u>q)return v;return null;},d0=function(){var q=this.system.getObject("videoModel"),u=document.createElement("video");return q.setElement(u),q;},c0=function(q){q.parentNode&&q.parentNode.removeChild(q);},f0=function(q,u,v){!J&&q&&u&&q!==u&&(J=!0,q.pause(),H=u,R.call(this,q.getVideoModel(),u.getVideoModel()),Q.call(this,q),V.call(this,u),P(v?q.getPlaybackController().getTime():u.getStartTime()),O(),q.resetEventController(),H.startEventController(),J=!1,Y.call(this,q,u));},h0=function(){var u,v,w,x,y,A,z,C,B=this,E=B.manifestModel.getValue(),G=B.metricsModel.getMetricsFor("stream"),F=B.metricsExt.getCurrentManifestUpdate(G),D=H?H.getVideoModel():B.getVideoModel();if(E){z=B.adapter.getStreamsInfo(E);try{if(0===z.length)throw  new Error("There are no streams");for(B.metricsModel.updateManifestUpdateInfo(F,{currentTime:D.getCurrentTime(),buffered:D.getElement().buffered,presentationStartTime:z[0].start,clientTimeOffset:B.timelineConverter.getClientTimeOffset()}),y=0,w=z.length;w>y;y+=1){for(v=z[y],A=0,x=L.length;x>A;A+=1)L[A].getId()===v.id&&(C=L[A],C.updateData(v));C||(C=B.system.getObject("stream"),u=B.system.getObject("playbackController"),C.setStreamInfo(v),C.setVideoModel(0===y?B.videoModel:d0.call(B)),C.setPlaybackController(u),u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,C),u.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY,C),C.initProtection(E),C.setAutoPlay(M),C.load(E),C.subscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,B),L.push(C)),B.metricsModel.addManifestUpdateStreamInfo(F,v.id,v.index,v.start,v.duration),C=null;}H||(H=L[0],V.call(B,H),H.subscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,this.liveEdgeFinder),Y.call(B,null,H));}catch(q){B.errHandler.manifestError(q.message,"nostreamscomposed",B.manifestModel.getValue()),B.reset();}}},m0=function(){var q=this,u=L.length,v=0;for(v;u>v;v+=1)if(L[v].isUpdating())return ;q.notify(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED);},k0=function(){h0.call(this);},o0=function(q){q.error?this.reset():(this.manifestModel.setValue(q.data.manifest),this.log("Manifest has loaded."),this.timeSyncController.initialize(this.manifestExt.getUTCTimingSources(q.data.manifest)));};return {system:void 0,videoModel:void 0,manifestLoader:void 0,manifestUpdater:void 0,manifestModel:void 0,manifestExt:void 0,adapter:void 0,log:void 0,metricsModel:void 0,metricsExt:void 0,videoExt:void 0,liveEdgeFinder:void 0,timelineConverter:void 0,protectionExt:void 0,timeSyncController:void 0,errHandler:void 0,eventBus:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED]=o0,this[MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED]=m0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=a0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS]=b0,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED]=X,this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=k0;},setAutoPlay:function(q){M=q;},getAutoPlay:function(){return M;},setProtectionData:function(q){this.protectionExt.init(q);},getVideoModel:function(){return this.videoModel;},setVideoModel:function(q){this.videoModel=q;},getActiveStreamInfo:function(){return H?H.getStreamInfo():null;},getStreamById:function(u){return L.filter(function(q){return q.getStreamInfo().id===u;})[0];},initialize:function(){this.timeSyncController.subscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.timelineConverter),this.timeSyncController.subscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.liveEdgeFinder),this.timeSyncController.subscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this);},load:function(q){this.manifestLoader.load(q),this.manifestUpdater.start();},reset:function(){H&&(Q.call(this,H),H.getVideoModel()!==this.getVideoModel()&&R.call(this,H.getVideoModel(),this.getVideoModel())),this.timeSyncController.unsubscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.timelineConverter),this.timeSyncController.unsubscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.liveEdgeFinder),this.timeSyncController.unsubscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this),this.timeSyncController.reset();for(var q=0,u=L.length;u>q;q++){var v=L[q];v.unsubscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,this),v.reset(),v.getVideoModel()!==this.getVideoModel()&&c0(v.getVideoModel().getElement());}L=[],this.manifestUpdater.stop(),this.metricsModel.clearAllCurrentMetrics(),this.manifestModel.setValue(null),this.timelineConverter.reset(),this.adapter.reset(),J=!1,H=null;},update:function(q){H.updateData(q);},disableTextTracks:function(){H.disableTextTracks();},play:O,seek:P,pause:N};},MediaPlayer.dependencies.StreamController.prototype={constructor:MediaPlayer.dependencies.StreamController},MediaPlayer.dependencies.StreamController.eventList={ENAME_STREAMS_COMPOSED:"streamsComposed"},MediaPlayer.dependencies.TextController=function(){var y,A,z,C=!1,B=function(){C||(A.hasOwnProperty("initialize")&&A.initialize(z,this),C=!0),this.notify(MediaPlayer.dependencies.TextController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED,{CCIndex:0});},E=function(q){var u=this;q.data.fragmentModel===u.streamProcessor.getFragmentModel()&&null!==q.data.bytes&&u.sourceBufferExt.append(A,q.data.bytes,u.videoModel);},G=function(){A.getTextTrackExtensions().deleteCues(this.videoModel.getElement());};return {sourceBufferExt:void 0,log:void 0,system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=B,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED]=E;},initialize:function(q,u,v,w){var x=this;z=q,x.setBuffer(u),x.setMediaSource(v),x.videoModel=w.videoModel,x.trackController=w.trackController,x.streamProcessor=w;},getBuffer:function(){return A;},setBuffer:function(q){A=q;},setMediaSource:function(q){y=q;},reset:function(q){q||(this.sourceBufferExt.abort(y,A),this.sourceBufferExt.removeSourceBuffer(y,A));},clearFutureBuffer:G};},MediaPlayer.dependencies.TextController.prototype={constructor:MediaPlayer.dependencies.TextController},MediaPlayer.dependencies.TextController.eventList={ENAME_CLOSED_CAPTIONING_REQUESTED:"closedCaptioningRequested"},MediaPlayer.dependencies.MediaSourceExtensions=function(){"use strict";},MediaPlayer.dependencies.MediaSourceExtensions.prototype={constructor:MediaPlayer.dependencies.MediaSourceExtensions,createMediaSource:function(){"use strict";var q="WebKitMediaSource" in window,u="MediaSource" in window;return u?new MediaSource:q?new WebKitMediaSource:null;},attachMediaSource:function(q,u){"use strict";var v=window.URL.createObjectURL(q);return u.setSource(v),v;},detachMediaSource:function(){"use strict";},setDuration:function(q,u){"use strict";return q.duration!=u&&(q.duration=u),q.duration;},signalEndOfStream:function(q){"use strict";var u=q.sourceBuffers,v=u.length,w=0;if("open"===q.readyState){for(w;v>w;w+=1)if(u[w].updating)return ;q.endOfStream();}}},MediaPlayer.dependencies.ProtectionExtensions=function(){"use strict";this.system=void 0,this.log=void 0,this.keySystems=[],this.clearkeyKeySystem=void 0;},MediaPlayer.dependencies.ProtectionExtensions.prototype={constructor:MediaPlayer.dependencies.ProtectionExtensions,setup:function(){var q;q=this.system.getObject("ksPlayReady"),this.keySystems.push(q),q=this.system.getObject("ksWidevine"),this.keySystems.push(q),q=this.system.getObject("ksClearKey"),this.keySystems.push(q),this.clearkeyKeySystem=q;},init:function(v){for(var w=(function(q){var u=null;return v&&(u=q in v?v[q]:null),u;}),x=0;x<this.keySystems.length;x++){var y=this.keySystems[x];y.init(w(y.systemString));}var x,A,z=[];if(CL.manifest.drm){for(var C=-1,A=0;A<this.keySystems.length;++A)if(CL.manifest.drm==this.keySystems[A].systemString){z[0]=this.keySystems[A],C=A;break;}if(C>-1){x=1;for(var A=0;A<this.keySystems.length;++A)A!=C&&(z[x]=this.keySystems[A],x++);}else z=this.keySystems;}else z=this.keySystems;this.keySystems=z;},getKeySystems:function(){return this.keySystems;},getKeySystemBySystemString:function(q){for(var u=0;u<this.keySystems.length;u++)if(this.keySystems[u].systemString===q)return this.keySystems[u];return null;},isClearKey:function(q){return q===this.clearkeyKeySystem;},initDataEquals:function(q,u){if(q.byteLength===u.byteLength){for(var v=0;v<q.byteLength;v++)if(q[v]!==u[v])return !1;return !0;}return !1;},getSupportedKeySystemsFromContentProtection:function(q){var u,v,w,x,y=[];if(q)for(w=0;w<this.keySystems.length;++w)for(v=this.keySystems[w],x=0;x<q.length;++x)if(u=q[x],u.schemeIdUri.toLowerCase()===v.schemeIdURI){var A=v.getInitData(u);A&&y.push({ks:this.keySystems[w],initData:A});}return y;},getSupportedKeySystems:function(q){var u,v=[];for(pssh=MediaPlayer.dependencies.protection.CommonEncryption.parsePSSHList(q),u=0;u<this.keySystems.length;++u)this.keySystems[u].uuid in pssh&&v.push({ks:this.keySystems[u],initData:pssh[this.keySystems[u].uuid]});return v;},autoSelectKeySystem:function(y,A,z,C,B){if(0===y.length)throw  new Error("DRM system for this content not supported by the player!");var E=[],G=[];C&&G.push(new MediaPlayer.vo.protection.MediaCapability(C.codec)),B&&E.push(new MediaPlayer.vo.protection.MediaCapability(B.codec));for(var F=new MediaPlayer.vo.protection.KeySystemConfiguration(E,G),D=[],H=0;H<y.length;H++)D.push({ks:y[H].ks,configs:[F]});var L=this;!function(v,w){var x={};x[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(q){if(v.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,this),q.error)L.log(q.error);else{var u=q.data;L.log("KeySystem Access Granted ("+u.keySystem.systemString+")!"),w.selectKeySystem(u);}},v.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,x),w.requestKeySystemAccess(D);}(A,z);}},MediaPlayer.dependencies.RequestModifierExtensions=function(){"use strict";return {modifyRequestURL:function(q){return q;},modifyRequestHeader:function(q){return q;}};},MediaPlayer.dependencies.SourceBufferExtensions=function(){"use strict";this.system=void 0,this.notify=void 0,this.subscribe=void 0,this.unsubscribe=void 0;},MediaPlayer.dependencies.SourceBufferExtensions.prototype={constructor:MediaPlayer.dependencies.SourceBufferExtensions,createSourceBuffer:function(u,v){"use strict";var w=this,x=v.codec,y=null;try{y=u.addSourceBuffer(x);}catch(q){if(!v.isText&&-1==x.indexOf('codecs="stpp"'))throw q;y=w.system.getObject("textSourceBuffer");}return y;},removeSourceBuffer:function(u,v){"use strict";try{u.removeSourceBuffer(v);}catch(q){}},getBufferRange:function(u,v,w){"use strict";var x,y,A=null,z=0,C=0,B=null,E=null,G=0,F=w||.15;try{A=u.buffered;}catch(q){return null;}if(null!==A&&void 0!==A){for(y=0,x=A.length;x>y;y+=1)if(z=A.start(y),C=A.end(y),null===B)G=Math.abs(z-v),v>=z&&C>v?(B=z,E=C):F>=G&&(B=z,E=C);else{if(G=z-E,!(F>=G))break;E=C;}if(null!==B)return {start:B,end:E};}return null;},getAllRanges:function(u){var v=null;try{return v=u.buffered;}catch(q){return null;}},getBufferLength:function(q,u,v){"use strict";var w,x,y=this;return w=y.getBufferRange(q,u,v),x=null===w?0:w.end-u;},waitForUpdateEnd:function(u,v){"use strict";var w,x=50,y=function(){u.updating||(clearInterval(w),v());},A=function(){u.updating||(u.removeEventListener("updateend",A,!1),v());};if(!u.updating)return void v();if("function"==typeof u.addEventListener)try{u.addEventListener("updateend",A,!1);}catch(q){w=setInterval(y,x);}else w=setInterval(y,x);},append:function(u,v,w){var x=this,y="append" in u?"append":"appendBuffer" in u?"appendBuffer":null;if(y)try{x.waitForUpdateEnd(u,function(){u[y](v,w),x.waitForUpdateEnd(u,function(){x.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,{buffer:u,bytes:v});});});}catch(q){x.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,{buffer:u,bytes:v},new MediaPlayer.vo.Error(q.code,q.message,null));}},remove:function(u,v,w,x){var y=this;try{v>=0&&w>v&&"ended"!==x.readyState&&u.remove(v,w),this.waitForUpdateEnd(u,function(){y.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,{buffer:u,from:v,to:w});});}catch(q){y.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,{buffer:u,from:v,to:w},new MediaPlayer.vo.Error(q.code,q.message,null));}},abort:function(u,v){"use strict";try{"open"===u.readyState&&v.abort();}catch(q){}}},MediaPlayer.dependencies.SourceBufferExtensions.QUOTA_EXCEEDED_ERROR_CODE=22,MediaPlayer.dependencies.SourceBufferExtensions.eventList={ENAME_SOURCEBUFFER_REMOVE_COMPLETED:"sourceBufferRemoveCompleted",ENAME_SOURCEBUFFER_APPEND_COMPLETED:"sourceBufferAppendCompleted"},MediaPlayer.utils.TextTrackExtensions=function(){"use strict";var C;return {setup:function(){C=window.VTTCue||window.TextTrackCue;},addTextTrack:function(q,u,v,w,x){var y=q.addTextTrack("captions",v,w);y["default"]=x,y.mode="showing";for(var A in u){var z=u[A];y.addCue(new C(z.start,z.end,z.data));}return y;},deleteCues:function(q){for(var u=0;u<q.textTracks.length;u++){var v=q.textTracks[u],w=v.cues;if(null!=w){y=w.length-1;for(var x=y;x>=0;x--)v.removeCue(w[x]);v.mode="disabled",v["default"]=!1;}}return ;var x,v,w,y,x;}};},MediaPlayer.dependencies.VideoModelExtensions=function(){"use strict";return {getPlaybackQuality:function(q){var u="webkitDroppedFrameCount" in q,v="getVideoPlaybackQuality" in q,w=null;return v?w=q.getVideoPlaybackQuality():u&&(w={droppedVideoFrames:q.webkitDroppedFrameCount,creationTime:new Date}),w;}};},MediaPlayer.dependencies.VideoModelExtensions.prototype={constructor:MediaPlayer.dependencies.VideoModelExtensions},MediaPlayer.dependencies.FragmentModel=function(){"use strict";var E,G=[],F=[],D=[],H=[],L=!1,I=function(q){var u=this;u.notify(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED,{request:q}),u.fragmentLoader.load(q);},K=function(q,u){var v=q.indexOf(u);-1!==v&&q.splice(v,1);},M=function(q,u,v){var w,x=q.length-1,y=0/0,A=0/0,z=null;for(w=x;w>=0;w-=1)if(z=q[w],y=z.startTime,A=y+z.duration,v=v||z.duration/2,!isNaN(y)&&!isNaN(A)&&u+v>=y&&A>u-v||isNaN(y)&&isNaN(u))return z;return null;},J=function(v,w){return w?w.hasOwnProperty("time")?[M.call(this,v,w.time,w.threshold)]:v.filter(function(q){for(var u in w)if("state"!==u&&w.hasOwnProperty(u)&&q[u]!=w[u])return !1;return !0;}):v;},O=function(q){var u;switch(q){case MediaPlayer.dependencies.FragmentModel.states.PENDING:u=F;break;case MediaPlayer.dependencies.FragmentModel.states.LOADING:u=D;break;case MediaPlayer.dependencies.FragmentModel.states.EXECUTED:u=G;break;case MediaPlayer.dependencies.FragmentModel.states.REJECTED:u=H;break;default:u=[];}return u;},N=function(q,u){if(q){var v=q.mediaType,w=new Date,x=q.type,y=q.startTime,A=q.availabilityStartTime,z=q.duration,C=q.quality,B=q.range;this.metricsModel.addSchedulingInfo(v,w,x,y,A,z,C,B,u);}},P=function(q){var u=q.data.request,v=q.data.response,w=q.error;D.splice(D.indexOf(u),1),v&&!w&&G.push(u),N.call(this,u,w?MediaPlayer.dependencies.FragmentModel.states.FAILED:MediaPlayer.dependencies.FragmentModel.states.EXECUTED),this.notify(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{request:u,response:v},w);},R=function(q){var u=this.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,quality:q.data.quality,index:q.data.index})[0];u&&(K.call(this,G,u),isNaN(q.data.index)||(H.push(u),N.call(this,u,MediaPlayer.dependencies.FragmentModel.states.REJECTED)));},V=function(){L=!0;},Q=function(){L=!1;};return {system:void 0,log:void 0,metricsModel:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN]=V,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED]=Q,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED]=R,this[MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED]=P;},setLoader:function(q){this.fragmentLoader=q;},setContext:function(q){E=q;},getContext:function(){return E;},getIsPostponed:function(){return L;},addRequest:function(q){return !q||this.isFragmentLoadedOrPending(q)?!1:(F.push(q),N.call(this,q,MediaPlayer.dependencies.FragmentModel.states.PENDING),!0);},isFragmentLoadedOrPending:function(y){var A=function(q,u){return "complete"===q.action&&q.action===u.action;},z=function(q,u){return q.url===u.url&&q.startTime===u.startTime;},C=function(q,u){return isNaN(q.index)&&isNaN(u.index)&&q.quality===u.quality;},B=function(q){var u,v,w=!1,x=q.length;for(v=0;x>v;v+=1)if(u=q[v],z(y,u)||C(y,u)||A(y,u)){w=!0;break;}return w;};return B(F)||B(D)||B(G);},getRequests:function(q){var u,v=[],w=[],x=1;if(!q||!q.state)return v;q.state instanceof Array?(x=q.state.length,u=q.state):u=[q.state];for(var y=0;x>y;y+=1)v=O.call(this,u[y]),w=w.concat(J.call(this,v,q));return w;},getLoadingTime:function(){var q,u,v=0;for(u=G.length-1;u>=0;u-=1)if(q=G[u],q.requestEndDate instanceof Date&&q.firstByteDate instanceof Date){v=q.requestEndDate.getTime()-q.firstByteDate.getTime();break;}return v;},removeExecutedRequest:function(q){K.call(this,G,q);},removeRejectedRequest:function(q){K.call(this,H,q);},removeExecutedRequestsBeforeTime:function(q){var u,v=G.length-1,w=0/0,x=null;for(u=v;u>=0;u-=1)x=G[u],w=x.startTime,!isNaN(w)&&q>w&&K.call(this,G,x);},cancelPendingRequests:function(u){var v=this,w=F,x=w;return F=[],void 0!==u&&(F=w.filter(function(q){return q.quality===u?!1:(x.splice(x.indexOf(q),1),!0);})),x.forEach(function(q){N.call(v,q,MediaPlayer.dependencies.FragmentModel.states.CANCELED);}),x;},abortRequests:function(){this.fragmentLoader.abort();for(var q=0,u=D.length;u>q;q+=1)K.call(this,G,D[q]);D=[];},executeRequest:function(q){var u=this,v=F.indexOf(q);if(q&&-1!==v)switch(F.splice(v,1),q.action){case "complete":G.push(q),N.call(u,q,MediaPlayer.dependencies.FragmentModel.states.EXECUTED),u.notify(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED,{request:q});break;case "download":D.push(q),N.call(u,q,MediaPlayer.dependencies.FragmentModel.states.LOADING),I.call(u,q);break;default:this.log("Unknown request action.");}},reset:function(){this.abortRequests(),this.cancelPendingRequests();}};},MediaPlayer.dependencies.FragmentModel.prototype={constructor:MediaPlayer.dependencies.FragmentModel},MediaPlayer.dependencies.FragmentModel.eventList={ENAME_STREAM_COMPLETED:"streamCompleted",ENAME_FRAGMENT_LOADING_STARTED:"fragmentLoadingStarted",ENAME_FRAGMENT_LOADING_COMPLETED:"fragmentLoadingCompleted"},MediaPlayer.dependencies.FragmentModel.states={PENDING:"pending",LOADING:"loading",EXECUTED:"executed",REJECTED:"rejected",CANCELED:"canceled",FAILED:"failed"},MediaPlayer.models.ManifestModel=function(){"use strict";var u;return {system:void 0,eventBus:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,getValue:function(){return u;},setValue:function(q){u=q,this.eventBus.dispatchEvent({type:MediaPlayer.events.MANIFEST_LOADED,data:q}),this.notify(MediaPlayer.models.ManifestModel.eventList.ENAME_MANIFEST_UPDATED,{manifest:q});}};},MediaPlayer.models.ManifestModel.prototype={constructor:MediaPlayer.models.ManifestModel},MediaPlayer.models.ManifestModel.eventList={ENAME_MANIFEST_UPDATED:"manifestUpdated"},MediaPlayer.models.MetricsModel=function(){"use strict";return {system:void 0,eventBus:void 0,adapter:void 0,streamMetrics:{},metricsChanged:function(){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRICS_CHANGED,data:{}});},metricChanged:function(q){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_CHANGED,data:{stream:q}}),this.metricsChanged();},metricUpdated:function(q,u,v){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_UPDATED,data:{stream:q,metric:u,value:v}}),this.metricChanged(q);},metricAdded:function(q,u,v){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_ADDED,data:{stream:q,metric:u,value:v}}),this.metricChanged(q);},clearCurrentMetricsForType:function(q){delete  this.streamMetrics[q],this.metricChanged(q);},clearAllCurrentMetrics:function(){var q=this;this.streamMetrics={},this.metricsChanged.call(q);},getReadOnlyMetricsFor:function(q){return this.streamMetrics.hasOwnProperty(q)?this.streamMetrics[q]:null;},getMetricsFor:function(q){var u;return this.streamMetrics.hasOwnProperty(q)?u=this.streamMetrics[q]:(u=this.system.getObject("metrics"),this.streamMetrics[q]=u),u;},addTcpConnection:function(q,u,v,w,x,y){var A=new MediaPlayer.vo.metrics.TCPConnection;return A.tcpid=u,A.dest=v,A.topen=w,A.tclose=x,A.tconnect=y,this.getMetricsFor(q).TcpList.push(A),this.metricAdded(q,this.adapter.metricsList.TCP_CONNECTION,A),A;},addHttpRequest:function(q,u,v,w,x,y,A,z,C,B,E,G,F){var D=new MediaPlayer.vo.metrics.HTTPRequest;return D.stream=q,D.tcpid=u,D.type=v,D.url=w,D.actualurl=x,D.range=y,D.trequest=A,D.tresponse=z,D.tfinish=C,D.responsecode=B,D.interval=E,D.mediaduration=G,D.responseHeaders=F,this.getMetricsFor(q).HttpList.push(D),this.metricAdded(q,this.adapter.metricsList.HTTP_REQUEST,D),D;},appendHttpTrace:function(q,u,v,w){var x=new MediaPlayer.vo.metrics.HTTPRequest.Trace;return x.s=u,x.d=v,x.b=w,q.trace.push(x),this.metricUpdated(q.stream,this.adapter.metricsList.HTTP_REQUEST_TRACE,q),x;},addTrackSwitch:function(q,u,v,w,x){var y=new MediaPlayer.vo.metrics.TrackSwitch;return y.t=u,y.mt=v,y.to=w,y.lto=x,this.getMetricsFor(q).RepSwitchList.push(y),this.metricAdded(q,this.adapter.metricsList.TRACK_SWITCH,y),y;},addBufferLevel:function(q,u,v){var w=new MediaPlayer.vo.metrics.BufferLevel;return w.t=u,w.level=v,this.getMetricsFor(q).BufferLevel.push(w),this.metricAdded(q,this.adapter.metricsList.BUFFER_LEVEL,w),w;},addBufferState:function(q,u,v){var w=new MediaPlayer.vo.metrics.BufferState;return w.target=v,w.state=u,this.getMetricsFor(q).BufferState.push(w),this.metricAdded(q,this.adapter.metricsList.BUFFER_STATE,w),w;},addDVRInfo:function(q,u,v,w){var x=new MediaPlayer.vo.metrics.DVRInfo;return x.time=u,x.range=w,x.manifestInfo=v,this.getMetricsFor(q).DVRInfo.push(x),this.metricAdded(q,this.adapter.metricsList.DVR_INFO,x),x;},addDroppedFrames:function(q,u){var v=new MediaPlayer.vo.metrics.DroppedFrames,w=this.getMetricsFor(q).DroppedFrames;return v.time=u.creationTime,v.droppedFrames=u.droppedVideoFrames,w.length>0&&w[w.length-1]==v?w[w.length-1]:(w.push(v),this.metricAdded(q,this.adapter.metricsList.DROPPED_FRAMES,v),v);},addSchedulingInfo:function(q,u,v,w,x,y,A,z,C){var B=new MediaPlayer.vo.metrics.SchedulingInfo;return B.mediaType=q,B.t=u,B.type=v,B.startTime=w,B.availabilityStartTime=x,B.duration=y,B.quality=A,B.range=z,B.state=C,this.getMetricsFor(q).SchedulingInfo.push(B),this.metricAdded(q,this.adapter.metricsList.SCHEDULING_INFO,B),B;},addManifestUpdate:function(q,u,v,w,x,y,A,z,C,B){var E=new MediaPlayer.vo.metrics.ManifestUpdate,G=this.getMetricsFor("stream");return E.mediaType=q,E.type=u,E.requestTime=v,E.fetchTime=w,E.availabilityStartTime=x,E.presentationStartTime=y,E.clientTimeOffset=A,E.currentTime=z,E.buffered=C,E.latency=B,G.ManifestUpdate.push(E),this.metricAdded(q,this.adapter.metricsList.MANIFEST_UPDATE,E),E;},updateManifestUpdateInfo:function(q,u){for(var v in u)q[v]=u[v];this.metricUpdated(q.mediaType,this.adapter.metricsList.MANIFEST_UPDATE,q);},addManifestUpdateStreamInfo:function(q,u,v,w,x){var y=new MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo;return y.id=u,y.index=v,y.start=w,y.duration=x,q.streamInfo.push(y),this.metricUpdated(q.mediaType,this.adapter.metricsList.MANIFEST_UPDATE_STREAM_INFO,q),y;},addManifestUpdateTrackInfo:function(q,u,v,w,x,y,A,z){var C=new MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo;return C.id=u,C.index=v,C.streamIndex=w,C.mediaType=x,C.startNumber=A,C.fragmentInfoType=z,C.presentationTimeOffset=y,q.trackInfo.push(C),this.metricUpdated(q.mediaType,this.adapter.metricsList.MANIFEST_UPDATE_TRACK_INFO,q),C;},addPlayList:function(q,u,v,w){var x=new MediaPlayer.vo.metrics.PlayList;return x.stream=q,x.start=u,x.mstart=v,x.starttype=w,this.getMetricsFor(q).PlayList.push(x),this.metricAdded(q,this.adapter.metricsList.PLAY_LIST,x),x;},appendPlayListTrace:function(q,u,v,w,x,y,A,z){var C=new MediaPlayer.vo.metrics.PlayList.Trace;return C.representationid=u,C.subreplevel=v,C.start=w,C.mstart=x,C.duration=y,C.playbackspeed=A,C.stopreason=z,q.trace.push(C),this.metricUpdated(q.stream,this.adapter.metricsList.PLAY_LIST_TRACE,q),C;}};},MediaPlayer.models.MetricsModel.prototype={constructor:MediaPlayer.models.MetricsModel},MediaPlayer.models.ProtectionModel={},MediaPlayer.models.ProtectionModel.eventList={ENAME_NEED_KEY:"needkey",ENAME_KEY_SYSTEM_ACCESS_COMPLETE:"keySystemAccessComplete",ENAME_KEY_SYSTEM_SELECTED:"keySystemSelected",ENAME_VIDEO_ELEMENT_SELECTED:"videoElementSelected",ENAME_SERVER_CERTIFICATE_UPDATED:"serverCertificateUpdated",ENAME_KEY_MESSAGE:"keyMessage",ENAME_KEY_ADDED:"keyAdded",ENAME_KEY_ERROR:"keyError",ENAME_KEY_SESSION_CREATED:"keySessionCreated",ENAME_KEY_SESSION_REMOVED:"keySessionRemoved",ENAME_KEY_SESSION_CLOSED:"keySessionClosed",ENAME_KEY_STATUSES_CHANGED:"keyStatusesChanged"},MediaPlayer.models.ProtectionModel_01b=function(){var H,L=null,I=null,K=[],M=[],J=function(){var w=this;return {handleEvent:function(q){var u=null;switch(q.type){case I.needkey:w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(q.initData,"cenc"));break;case I.keyerror:if(u=N(M,q.sessionId),u||(u=N(K,q.sessionId)),u){var v="";switch(q.errorCode.code){case 1:v+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:v+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:v+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:v+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:v+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:v+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";}v+="  System Code = "+q.systemCode,w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(u,v));}else w.log("No session token found for key error");break;case I.keyadded:u=N(M,q.sessionId),u||(u=N(K,q.sessionId)),u?w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,u):w.log("No session token found for key added");break;case I.keymessage:H=null!==q.sessionId&&void 0!==q.sessionId,H?(u=N(M,q.sessionId),!u&&K.length>0&&(u=K.shift(),M.push(u),u.sessionID=q.sessionId)):K.length>0&&(u=K.shift(),M.push(u),0!==K.length&&w.errHandler.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),u?(u.keyMessage=q.message,w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(u,q.message,q.defaultURL))):w.log("No session token found for key message");}}};},O=null,N=function(q,u){if(u&&q){for(var v=q.length,w=0;v>w;w++)if(q[w].sessionID==u)return q[w];return null;}return null;},P=function(){L.removeEventListener(I.keyerror,O),L.removeEventListener(I.needkey,O),L.removeEventListener(I.keymessage,O),L.removeEventListener(I.keyadded,O);};return {system:void 0,log:void 0,errHandler:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){O=J.call(this);},init:function(){var q=document.createElement("video");I=MediaPlayer.models.ProtectionModel_01b.detect(q);},teardown:function(){L&&P();for(var q=0;q<M.length;q++)this.closeKeySession(M[q]);},requestKeySystemAccess:function(q){var u=L;u||(u=document.createElement("video"));for(var v=!1,w=0;w<q.length;w++)for(var x=q[w].ks.systemString,y=q[w].configs,A=null,z=null,C=0;C<y.length;C++){var B=y[C].videoCapabilities;if(B&&0!==B.length){z=[];for(var E=0;E<B.length;E++)""!==u.canPlayType(B[E].contentType,x)&&z.push(B[E]);}if(!(!A&&!z||A&&0===A.length||z&&0===z.length)){v=!0;var G=new MediaPlayer.vo.protection.KeySystemConfiguration(A,z),F=this.protectionExt.getKeySystemBySystemString(x),D=new MediaPlayer.vo.protection.KeySystemAccess(F,G);this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,D);break;}}v||this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied! -- No valid audio/video content configurations detected!");},selectKeySystem:function(q){this.keySystem=q.keySystem,this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);},setMediaElement:function(q){L&&P(),L=q,L.addEventListener(I.keyerror,O),L.addEventListener(I.needkey,O),L.addEventListener(I.keymessage,O),L.addEventListener(I.keyadded,O),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED);},createKeySession:function(q){if(!this.keySystem)throw  new Error("Can not create sessions until you have selected a key system");var u;for(u=0;u<M.length;u++)if(this.protectionExt.initDataEquals(q,M[u].initData))return ;for(u=0;u<K.length;u++)if(this.protectionExt.initDataEquals(q,K[u].initData))return ;if(H||0===M.length){var v={prototype:(new MediaPlayer.models.SessionToken).prototype,sessionID:null,initData:q,getSessionID:function(){return this.sessionID;}};return K.push(v),L[I.generateKeyRequest](this.keySystem.systemString,new Uint8Array(q)),v;}throw  new Error("Multiple sessions not allowed!");},updateKeySession:function(q,u){var v=q.sessionID;if(this.protectionExt.isClearKey(this.keySystem))for(var w=0;w<u.keyPairs.length;w++)L[I.addKey](this.keySystem.systemString,u.keyPairs[w].key,u.keyPairs[w].keyID,v);else L[I.addKey](this.keySystem.systemString,u,q.initData,v);},closeKeySession:function(q){L[I.cancelKeyRequest](this.keySystem.systemString,q.sessionID);},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){}};},MediaPlayer.models.ProtectionModel_01b.prototype={constructor:MediaPlayer.models.ProtectionModel_01b},MediaPlayer.models.ProtectionModel_01b.APIs=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],MediaPlayer.models.ProtectionModel_01b.detect=function(q){for(var u=MediaPlayer.models.ProtectionModel_01b.APIs,v=0;v<u.length;v++){var w=u[v];if("function"==typeof q[w.generateKeyRequest]&&"function"==typeof q[w.addKey]&&"function"==typeof q[w.cancelKeyRequest])return w;}return null;},MediaPlayer.models.ProtectionModel_21Jan2015=function(){var B=null,E=null,G=[],F=function(A,z){var C=this;!function(w){var x=A[w].ks,y=A[w].configs;navigator.requestMediaKeySystemAccess(x.systemString,y).then(function(q){var u="function"==typeof q.getConfiguration?q.getConfiguration():null,v=new MediaPlayer.vo.protection.KeySystemAccess(x,u);v.mksa=q,C.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,v);})["catch"](function(){++w<A.length?F.call(C,A,w):C.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied!");});}(z);},D=function(){var u=this;return {handleEvent:function(q){switch(q.type){case "encrypted":u.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(q.initData,q.initDataType));}}};},H=null,L=function(q){for(var u=0;u<G.length;u++)if(G[u]===q){G.splice(u,1);break;}},I=function(u,v){var w=this,x={prototype:(new MediaPlayer.models.SessionToken).prototype,session:u,initData:v,handleEvent:function(q){switch(q.type){case "keystatuseschange":w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this);break;case "message":w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(this,q.message,void 0,q.messageType));}},getSessionID:function(){return this.session.sessionId;},getExpirationTime:function(){return this.session.expiration;},getKeyStatuses:function(){return this.session.keyStatuses;}};return u.addEventListener("keystatuseschange",x),u.addEventListener("message",x),u.closed.then(function(){L(x),w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,x.getSessionID());}),G.push(x),x;};return {system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){H=D.call(this);},init:function(){},teardown:function(){B&&B.removeEventListener("encrypted",H);for(var q=0;q<G.length;q++)this.closeKeySession(G[q]);},requestKeySystemAccess:function(q){F.call(this,q,0);},selectKeySystem:function(u){var v=this;u.mksa.createMediaKeys().then(function(q){v.keySystem=u.keySystem,E=q,B&&B.setMediaKeys(E).then(function(){v.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);},function(){v.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+u.keySystem.systemString+")! Could not create MediaKeys");});})["catch"](function(){v.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+u.keySystem.systemString+")! Could not create MediaKeys -- TODO");});},setMediaElement:function(q){B&&B.removeEventListener("encrypted",H),B=q,B.addEventListener("encrypted",H),E&&B.setMediaKeys(E);},setServerCertificate:function(u){if(!this.keySystem||!E)throw  new Error("Can not set server certificate until you have selected a key system");var v=this;E.setServerCertificate(u).then(function(){v.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED);})["catch"](function(q){v.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,null,"Error updating server certificate -- "+q.name);});},createKeySession:function(u,v){if(!this.keySystem||!E)throw  new Error("Can not create sessions until you have selected a key system");for(var w=0;w<G.length;w++)if(this.protectionExt.initDataEquals(u,G[w].initData))return ;var x=E.createSession(v),y=I.call(this,x,u),A=this;x.generateRequest("cenc",u).then(function(){A.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,y);})["catch"](function(q){L(y),A.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Error generating key request -- "+q.name);});},updateKeySession:function(u,v){var w=u.session,x=this;this.protectionExt.isClearKey(this.keySystem)&&(v=v.toJWK()),w.update(v)["catch"](function(q){x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(u,"Error sending update() message! "+q.name));});},loadKeySession:function(v){if(!this.keySystem||!E)throw  new Error("Can not load sessions until you have selected a key system");var w=E.createSession(),x=this;w.load(v).then(function(q){if(q){var u=I.call(this,w);x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,u);}else x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Could not load session! Invalid Session ID ("+v+")");})["catch"](function(q){x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Could not load session ("+v+")! "+q.name);});},removeKeySession:function(u){var v=u.session,w=this;v.remove().then(function(){w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,u.getSessionID());})["catch"](function(q){w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,null,"Error removing session ("+u.getSessionID()+"). "+q.name);});},closeKeySession:function(u){var v=u.session;v.removeEventListener("keystatuseschange",u),v.removeEventListener("message",u);var w=this;v.close()["catch"](function(q){w.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,null,"Error closing session ("+u.getSessionID()+") "+q.name);});}};},MediaPlayer.models.ProtectionModel_21Jan2015.detect=function(q){return void 0===q.onencrypted||void 0===q.mediaKeys?!1:void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess?!1:!0;},MediaPlayer.models.ProtectionModel_21Jan2015.prototype={constructor:MediaPlayer.models.ProtectionModel_21Jan2015},MediaPlayer.models.ProtectionModel_3Feb2014=function(){var L=null,I=null,K=null,M=null,J=[],O=function(){var u=this;return {handleEvent:function(q){switch(q.type){case M.needkey:u.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(q.initData,"cenc"));}}};},N=null,P=function(){var q=function(){L[M.setMediaKeys](I),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED);};L.readyState>=1?q.call(this):L.addEventListener("loadedmetadata",q.bind(this));},R=function(v,w){var x=this;return {prototype:(new MediaPlayer.models.SessionToken).prototype,session:v,initData:w,handleEvent:function(q){switch(q.type){case M.error:var u="KeyError";x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(this,u));break;case M.message:x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(this,q.message,q.destinationURL));break;case M.ready:x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this);break;case M.close:x.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this.getSessionID());}},getSessionID:function(){return this.session.sessionId;}};};return {system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){N=O.call(this);},init:function(){var q=document.createElement("video");M=MediaPlayer.models.ProtectionModel_3Feb2014.detect(q);},teardown:function(){L&&L.removeEventListener(M.needkey,N);for(var q=0;q<J.length;q++)this.closeKeySession(J[q]);},requestKeySystemAccess:function(q){for(var u=!1,v=0;v<q.length;v++)for(var w=q[v].ks.systemString,x=q[v].configs,y=null,A=null,z=0;z<x.length;z++){var C=x[z].audioCapabilities,B=x[z].videoCapabilities;if(C&&0!==C.length){y=[];for(var E=0;E<C.length;E++)window[M.MediaKeys].isTypeSupported(w,C[E].contentType)&&y.push(C[E]);}if(B&&0!==B.length){A=[];for(var G=0;G<B.length;G++)window[M.MediaKeys].isTypeSupported(w,B[G].contentType)&&A.push(B[G]);}if(!(!y&&!A||y&&0===y.length||A&&0===A.length)){u=!0;var F=new MediaPlayer.vo.protection.KeySystemConfiguration(y,A),D=this.protectionExt.getKeySystemBySystemString(w),H=new MediaPlayer.vo.protection.KeySystemAccess(D,F);this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,H);break;}}u||this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied! -- No valid audio/video content configurations detected!");},selectKeySystem:function(u){try{I=u.mediaKeys=new window[M.MediaKeys](u.keySystem.systemString),this.keySystem=u.keySystem,K=u,L&&P.call(this),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);}catch(q){this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+this.keySystem.systemString+")! Could not create MediaKeys -- TODO");}},setMediaElement:function(q){L&&L.removeEventListener(M.needkey,N),L=q,L.addEventListener(M.needkey,N),I&&P.call(this);},createKeySession:function(q){if(!this.keySystem||!I||!K)throw  new Error("Can not create sessions until you have selected a key system");for(var u=0;u<J.length;u++)if(this.protectionExt.initDataEquals(q,J[u].initData))return ;var v=K.ksConfiguration.videoCapabilities[0].contentType,w=I.createSession(v,new Uint8Array(q)),x=R.call(this,w,q);w.addEventListener(M.error,x),w.addEventListener(M.message,x),w.addEventListener(M.ready,x),w.addEventListener(M.close,x),J.push(x),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,x);},updateKeySession:function(q,u){var v=q.session;v.update(this.protectionExt.isClearKey(this.keySystem)?new Uint8Array(u.toJWK()):u);},closeKeySession:function(q){var u=q.session;u.removeEventListener(M.error,q),u.removeEventListener(M.message,q),u.removeEventListener(M.ready,q),u.removeEventListener(M.close,q);for(var v=0;v<J.length;v++)if(J[v]===q){J.splice(v,1);break;}u[M.release]();},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){}};},MediaPlayer.models.ProtectionModel_3Feb2014.APIs=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}],MediaPlayer.models.ProtectionModel_3Feb2014.detect=function(q){for(var u=MediaPlayer.models.ProtectionModel_3Feb2014.APIs,v=0;v<u.length;v++){var w=u[v];if("function"==typeof q[w.setMediaKeys]&&"function"==typeof window[w.MediaKeys])return w;}return null;},MediaPlayer.models.ProtectionModel_3Feb2014.prototype={constructor:MediaPlayer.models.ProtectionModel_3Feb2014},MediaPlayer.models.URIQueryAndFragmentModel=function(){"use strict";var C=new MediaPlayer.vo.URIFragmentData,B=[],E=function(y){function A(q,u,v,w){var x=w[0].split(/[=]/);return w.push({key:x[0],value:x[1]}),w.shift(),w;}if(!y)return null;var z=[];return B.length>0&&(B=B.reduce(A,null)),z.length>0&&(z=z.reduce(A,null),z.forEach(function(q){C[q.key]=q.value;})),y;};return {parseURI:E,getURIFragmentData:function(){return C;},getURIQueryData:function(){return B;},reset:function(){C=new MediaPlayer.vo.URIFragmentData,B=[];}};},MediaPlayer.models.URIQueryAndFragmentModel.prototype={constructor:MediaPlayer.models.URIQueryAndFragmentModel},MediaPlayer.models.VideoModel=function(){"use strict";var v,w=[],x=function(){return w.length>0;},y=function(q){null===q||v.seeking||(this.setPlaybackRate(0),w[q]!==!0&&(w.push(q),w[q]=!0));},A=function(q){if(null!==q){w[q]=!1;var u=w.indexOf(q);-1!==u&&w.splice(u,1),x()===!1&&this.setPlaybackRate(1);}},z=function(q,u){u?y.call(this,q):A.call(this,q);},C=function(q){var u=q.sender.streamProcessor.getType();z.call(this,u,!q.data.hasSufficientBuffer);};return {system:void 0,setup:function(){this.bufferLevelStateChanged=C;},play:function(){null!=CL.configs.minStartTime&&CL.configs.minStartTime>0&&0==v.currentTime&&0==CL.configs.isIE11,v.play();},pause:function(){v.pause();},isPaused:function(){return v.paused;},getPlaybackRate:function(){return v.playbackRate;},setPlaybackRate:function(q){!v||v.readyState<2||(v.playbackRate=q);},getCurrentTime:function(){return v.currentTime;},setCurrentTime:function(q){v.currentTime!=q&&(v.currentTime=q);},listen:function(q,u){v.addEventListener(q,u,!1);},unlisten:function(q,u){v.removeEventListener(q,u,!1);},getElement:function(){return v;},setElement:function(q){v=q;},setSource:function(q){v.src=q;}};},MediaPlayer.models.VideoModel.prototype={constructor:MediaPlayer.models.VideoModel},MediaPlayer.dependencies.protection.CommonEncryption={findCencContentProtection:function(q){for(var u=null,v=0;v<q.length;++v){var w=q[v];"urn:mpeg:dash:mp4protection:2011"===w.schemeIdUri.toLowerCase()&&"cenc"===w.value.toLowerCase()&&(u=w);}return u;},getPSSHData:function(q){return q.slice(32);},getPSSHForKeySystem:function(q,u){var v=MediaPlayer.dependencies.protection.CommonEncryption.parsePSSHList(u);return v.hasOwnProperty(q.uuid.toLowerCase())?v[q.uuid.toLowerCase()]:null;},parseInitDataFromContentProtection:function(q){return "pssh" in q?BASE64.decodeArray(q.pssh.__text).buffer:null;},parsePSSHList:function(q){if(null===q)return [];for(var u=new DataView(q),v=!1,w={},x=0;!v;){var y,A,z,C,B,E=x;if(x>=u.buffer.byteLength)break;if(y=u.getUint32(x),A=x+y,x+=4,1886614376===u.getUint32(x))if(x+=4,z=u.getUint8(x),0===z||1===z){x+=1,x+=3,C="";var G,F;for(G=0;4>G;G++)F=u.getUint8(x+G).toString(16),C+=1===F.length?"0"+F:F;for(x+=4,C+="-",G=0;2>G;G++)F=u.getUint8(x+G).toString(16),C+=1===F.length?"0"+F:F;for(x+=2,C+="-",G=0;2>G;G++)F=u.getUint8(x+G).toString(16),C+=1===F.length?"0"+F:F;for(x+=2,C+="-",G=0;2>G;G++)F=u.getUint8(x+G).toString(16),C+=1===F.length?"0"+F:F;for(x+=2,C+="-",G=0;6>G;G++)F=u.getUint8(x+G).toString(16),C+=1===F.length?"0"+F:F;x+=6,C=C.toLowerCase(),B=u.getUint32(x),x+=4,w[C]=u.buffer.slice(E,A),x=A;}else x=A;else x=A;}return w;}},MediaPlayer.dependencies.protection.KeySystem={eventList:{ENAME_LICENSE_REQUEST_COMPLETE:"licenseRequestComplete"}},MediaPlayer.dependencies.protection.KeySystem_Access=function(){"use strict";},MediaPlayer.dependencies.protection.KeySystem_Access.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_Access},MediaPlayer.dependencies.protection.KeySystem_ClearKey=function(){"use strict";var H,L="org.w3.clearkey",I="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",K=function(w,x){var y,A=this,z=H&&H.laURL&&""!==H.laURL?H.laURL:null,C=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(w)));if(z){for(z+="/?",y=0;y<C.kids.length;y++)z+=C.kids[y]+"&";z=z.substring(0,z.length-1);var B=new XMLHttpRequest;B.onload=function(){if(200==B.status){for(B.response.hasOwnProperty("keys")||A.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: ClearKey Remote update, Illegal response JSON")),y=0;y<B.response.keys.length;y++){var q=B.response.keys[y],u=q.kid.replace(/=/g,"");F=q.k.replace(/=/g,""),E.push(new MediaPlayer.vo.protection.KeyPair(u,F));}var v=new MediaPlayer.vo.protection.LicenseRequestComplete(new MediaPlayer.vo.protection.ClearKeyKeySet(E),x);A.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,v);}else A.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error('DRM: ClearKey Remote update, XHR aborted. status is "'+B.statusText+'" ('+B.status+"), readyState is "+B.readyState));},B.onabort=function(){A.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error('DRM: ClearKey update, XHR aborted. status is "'+B.statusText+'" ('+B.status+"), readyState is "+B.readyState));},B.onerror=function(){A.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error('DRM: ClearKey update, XHR error. status is "'+B.statusText+'" ('+B.status+"), readyState is "+B.readyState));},B.open("GET",z),B.responseType="json",B.send();}else if(H.clearkeys){var E=[];for(y=0;y<C.kids.length;y++){var G=C.kids[y],F=H.clearkeys.hasOwnProperty(G)?H.clearkeys[G]:null;F||this.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: ClearKey keyID ("+G+") is not known!")),E.push(new MediaPlayer.vo.protection.KeyPair(G,F));}var D=new MediaPlayer.vo.protection.LicenseRequestComplete(new MediaPlayer.vo.protection.ClearKeyKeySet(E),x);this.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,D);}else A.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: ClearKey has no way (URL or protection data) to retrieve keys"));};return {system:void 0,schemeIdURI:"urn:uuid:"+I,systemString:L,uuid:I,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(q){H=q;},doLicenseRequest:function(q,u,v){K.call(this,q,v);},getInitData:MediaPlayer.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection};},MediaPlayer.dependencies.protection.KeySystem_ClearKey.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_ClearKey},MediaPlayer.dependencies.protection.KeySystem_PlayReady=function(){"use strict";var O,N="com.microsoft.playready",P="9a04f079-9840-4286-ab92-e65be0885f95",R=function(v,w,x){var y,A,z,C,B,E,G=null,F={},D=new DOMParser,H=this;if(E=new Uint16Array(v.buffer),B=String.fromCharCode.apply(null,E),C=D.parseFromString(B,"application/xml"),C.getElementsByTagName("Challenge")[0]){var L=C.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;L&&(G=BASE64.decode(L));}else H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new MediaPlayer.vo.Error(null,"DRM: playready update, can not find Challenge in keyMessage",null));var I=C.getElementsByTagName("name"),K=C.getElementsByTagName("value");I.length!=K.length&&H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new MediaPlayer.vo.Error(null,"DRM: playready update, invalid header name/value pair in keyMessage",null));for(var M=0;M<I.length;M++)F[I[M].childNodes[0].nodeValue]=K[M].childNodes[0].nodeValue;O&&O.bearerToken&&(F.Authorization=O.bearerToken);var J=new XMLHttpRequest;if(CL.configs.isIE11||(J.timeout=CL.manifest.licenseRequestTimeout),J.onload=function(){if(200==J.status){var q=new MediaPlayer.vo.protection.LicenseRequestComplete(new Uint8Array(J.response),x);H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,q);}else{var u={message:'DRM: playready update, XHR status is "'+J.statusText+'" ('+J.status+"), expected to be 200. readyState is "+J.readyState+".  ",response:this.response?String.fromCharCode.apply(null,new Uint8Array(this.response)):"NONE",status:J.status,statusText:J.statusText,responseURL:J.responseURL};H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,u);}},J.onabort=function(){var q={message:'DRM: playready update, XHR aborted. status is "'+J.statusText+'" ('+J.status+"), readyState is "+J.readyState,response:"NONE",status:J.status,statusText:J.statusText,responseURL:J.responseURL};H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,q);},J.onerror=function(){var q={message:'DRM: playready update, XHR error. status is "'+J.statusText+'" ('+J.status+"), readyState is "+J.readyState,response:"NONE",status:J.status,statusText:J.statusText,responseURL:J.responseURL};H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,q);},J.ontimeout=function(){var q={message:'DRM: playready update, XHR timeout. status is "'+J.statusText+'" ('+J.status+"), readyState is "+J.readyState,response:"NONE",status:J.status,statusText:J.statusText,responseURL:J.responseURL};H.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,q);},CL.configs.isIE11||(J.timeout=CL.manifest.licenseRequestTimeout),J.open("POST",O&&O.laURL&&""!==O.laURL?O.laURL:w),J.responseType="arraybuffer",z=O?O.httpRequestHeaders:null)for(A in z)F[A]=z[A];for(y in F)"authorization"===y.toLowerCase()&&(J.withCredentials=!0),J.setRequestHeader(y,F[y]);O&&O.withCredentials&&(J.withCredentials=!0),J.send(G);},V=function(q){var u,v,w,x,y,A=0,z=new Uint8Array([112,115,115,104,0,0,0,0]),C=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),B=null;if("pro" in q)B=BASE64.decodeArray(q.pro._text);else{if(!("prheader" in q))return null;B=BASE64.decodeArray(q.prheader._text);}return u=B.length,v=4+z.length+C.length+4+u,w=new ArrayBuffer(v),x=new Uint8Array(w),y=new DataView(w),y.setUint32(A,v),A+=4,x.set(z,A),A+=z.length,x.set(C,A),A+=C.length,y.setUint32(A,u),A+=4,x.set(B,A),A+=u,x.buffer;},Q=function(){return !1;};return {schemeIdURI:"urn:uuid:"+P,systemString:N,uuid:P,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(q){O=q;},doLicenseRequest:R,getInitData:V,initDataEquals:Q};},MediaPlayer.dependencies.protection.KeySystem_PlayReady.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_PlayReady},MediaPlayer.dependencies.protection.KeySystem_Widevine=function(){"use strict";var O="com.widevine.alpha",N="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",P,R=new castLabsDashJS.classes.Utils,V=function(E,G,F){var D=new XMLHttpRequest,H={},L,I,K,M,J=this;if(M=P&&P.laURL&&""!==P.laURL?P.laURL:G){if(CL.configs.isIE11||(D.timeout=CL.manifest.licenseRequestTimeout),D.open("POST",M,!0),D.responseType="arraybuffer",D.onload=function(){if(200==this.status){for(var u,v=new Uint8Array(this.response),w="",x=0;x<v.byteLength;++x)w+=String.fromCharCode(v[x]);var y=w.trim();if(0==y.indexOf("{")&&y.lastIndexOf("}")==y.length-1){var A=eval("("+w+")");u=R.base64DecToArr(A.license);try{var z=UTF8ArrToStr(base64DecToArr(A.debug_info));CL.configs.debug&&console.log("debug text:"+z);}catch(q){CL.configs.debug&&console.log("no property 'debug_info'");}}else u=v;var C=new MediaPlayer.vo.protection.LicenseRequestComplete(u,F);J.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,C);}else{var B={message:'DRM: widevine update, XHR status is "'+D.statusText+'" ('+D.status+"), expected to be 200. readyState is "+D.readyState+".  ",response:this.response?String.fromCharCode.apply(null,new Uint8Array(this.response)):"NONE",status:D.status,statusText:D.statusText,responseURL:D.responseURL};J.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,B);}},D.onabort=function(){var q={message:'DRM: widevine update, XHR aborted. status is "'+D.statusText+'" ('+D.status+"), readyState is "+D.readyState,response:"NONE",status:D.status,statusText:D.statusText,responseURL:D.responseURL};J.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,q);},D.onerror=function(){var q={message:'DRM: widevine update, XHR aborted. status is "'+D.statusText+'" ('+D.status+"), readyState is "+D.readyState,response:"NONE",status:D.status,statusText:D.statusText,responseURL:D.responseURL};J.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,q);},D.ontimeout=function(){var q={message:'DRM: widevine update, XHR timeout. status is "'+D.statusText+'" ('+D.status+"), readyState is "+D.readyState,response:"NONE",status:D.status,statusText:D.statusText,responseURL:D.responseURL};J.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,q);},I=P?P.httpRequestHeaders:null)for(L in I)H[L]=I[L];D.setRequestHeader("Content-Type","text/xml");for(K in H)"authorization"===K.toLowerCase()&&(D.withCredentials=!0),D.setRequestHeader(K,H[K]);D.send(E);}else J.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: No valid Widevine Proxy Server URL specified!"));},Q=function(){return null;},U=function(q,u){return R.arrToBase64(q)===R.arrToBase64(u);};return {schemeIdURI:"urn:uuid:"+N,systemString:O,uuid:N,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(q){P=q;},doLicenseRequest:V,getInitData:Q,initDataEquals:U};},MediaPlayer.dependencies.protection.KeySystem_Widevine.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_Widevine},MediaPlayer.rules.ABRRulesCollection=function(){"use strict";var u=[];return {insufficientBufferRule:void 0,bufferOccupancyRule:void 0,throughputRule:void 0,getRules:function(q){switch(q){case MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES:return u;default:return null;}},setup:function(){u.push(this.insufficientBufferRule),u.push(this.throughputRule),u.push(this.bufferOccupancyRule);}};},MediaPlayer.rules.ABRRulesCollection.prototype={constructor:MediaPlayer.rules.ABRRulesCollection,QUALITY_SWITCH_RULES:"qualitySwitchRules"},MediaPlayer.rules.BufferOccupancyRule=function(){"use strict";var L=0;return {log:void 0,metricsModel:void 0,execute:function(q,u){var v=this,w=(new Date).getTime()/1e3,x=q.getMediaInfo(),y=q.getTrackInfo(),A=x.type,z=isNaN(y.fragmentDuration)?2:y.fragmentDuration/2,C=q.getCurrentValue(),B=this.metricsModel.getReadOnlyMetricsFor(A),E=B.BufferLevel.length>0?B.BufferLevel[B.BufferLevel.length-1]:null,G=B.BufferState.length>0?B.BufferState[B.BufferState.length-1]:null,F=!1,D=x.trackCount-1,H=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);return z>w-L?void u(H):(null!==E&&null!==G&&E.level>G.target&&(F=E.level-G.target>MediaPlayer.dependencies.BufferController.RICH_BUFFER_THRESHOLD,F&&x.trackCount>1&&(H=new MediaPlayer.rules.SwitchRequest(D,MediaPlayer.rules.SwitchRequest.prototype.STRONG))),H.value!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&H.value!==C&&v.log("BufferOccupancyRule requesting switch to index: ",H.value,"type: ",A," Priority: ",H.priority===MediaPlayer.rules.SwitchRequest.prototype.DEFAULT?"Default":H.priority===MediaPlayer.rules.SwitchRequest.prototype.STRONG?"Strong":"Weak"),void u(H));},reset:function(){L=0;}};},MediaPlayer.rules.BufferOccupancyRule.prototype={constructor:MediaPlayer.rules.BufferOccupancyRule},MediaPlayer.rules.DownloadRatioRule=function(){"use strict";var O=1,N=[],P=20,R=3,V=CL.manifest.ABRParameters.downloadRatioSafetyFactor||1.4,Q=function(q,u,v){return q.getTrackForQuality(u).bandwidth/q.getTrackForQuality(v).bandwidth;},U=function(q){var u=0,v=N.length;if(q=q>v?v:q,v>0){for(var w=v-q,x=0,y=w;v>y;y++)x+=N[y];u=x/q;}return N.length>P&&N.shift(),u;};return {debug:void 0,metricsExt:void 0,metricsModel:void 0,execute:function(q,u){var v,w,x,y,A,z,C,B=this,E=q.getMediaInfo(),G=E.type,F=q.getCurrentValue(),D=q.getStreamProcessor(),H=D.isDynamic(),L=B.metricsModel.getReadOnlyMetricsFor(G),I=B.metricsExt.getCurrentHttpRequest(L),K=L.BufferLevel[L.BufferLevel.length-1]||null,M=null;if(!L||null===I||null===I.mediaduration||void 0===I.mediaduration||I.mediaduration<=0||isNaN(I.mediaduration))return void u(new MediaPlayer.rules.SwitchRequest);if(w=(I.tfinish.getTime()-I.trequest.getTime())/1e3,v=(I.tfinish.getTime()-I.tresponse.getTime())/1e3,0>=w)return void u(new MediaPlayer.rules.SwitchRequest);if(A=I.mediaduration/w,y=I.mediaduration/v,1/0!==y&&N.push(y),x=U(R),isNaN(x)||isNaN(y)||isNaN(A))return void u(new MediaPlayer.rules.SwitchRequest);if(1>x){if(F>0)for(C=F-1;C>0;C--)if(z=Q.call(B,D,C,F),x>z*V){M=new MediaPlayer.rules.SwitchRequest(C,MediaPlayer.rules.SwitchRequest.prototype.STRONG);break;}}else if(null!==K&&K.level>=K.target||H&&null!==K&&K.level>=MediaPlayer.dependencies.BufferController.DEFAULT_STARTUP_BUFFER_TIME){var J=E.trackCount-1;if(J>F)for(C=J;C>0;C--)if(z=Q.call(B,D,C,F),x>z){F!==C&&(M=new MediaPlayer.rules.SwitchRequest(C,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));break;}}null===M&&(M=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)),M.value!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&B.debug.log("DownloadRatioRule requesting switch to index: ",M.value,"type: ",G," priority: ",M.priority===MediaPlayer.rules.SwitchRequest.prototype.DEFAULT?"default":M.priority===MediaPlayer.rules.SwitchRequest.prototype.STRONG?"strong":"weak"),u(M);},reset:function(){O=1,N=[];}};},MediaPlayer.rules.DownloadRatioRule.prototype={constructor:MediaPlayer.rules.DownloadRatioRule},MediaPlayer.rules.InsufficientBufferRule=function(){"use strict";var M={},J=0,O=1e3,N=function(q,u){M[q]=M[q]||{},M[q].state=u,u!==MediaPlayer.dependencies.BufferController.BUFFER_LOADED||M[q].firstBufferLoadedEvent||(M[q].firstBufferLoadedEvent=!0);};return {log:void 0,metricsModel:void 0,execute:function(q,u){var v=this,w=(new Date).getTime(),x=q.getMediaInfo().type,y=q.getCurrentValue(),A=v.metricsModel.getReadOnlyMetricsFor(x),z=q.getStreamInfo(),C=q.getTrackInfo(),B=z.duration,E=q.getStreamProcessor().getPlaybackController().getTime(),G=q.getStreamProcessor(),F=G.isDynamic(),D=A.BufferLevel.length>0?A.BufferLevel[A.BufferLevel.length-1]:null,H=A.BufferState.length>0?A.BufferState[A.BufferState.length-1]:null,L=Math.min(C.fragmentDuration,MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD),I=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);if(O>w-J||null===H)return void u(I);if(N(x,H.state),H.state===MediaPlayer.dependencies.BufferController.BUFFER_EMPTY&&void 0!==M[x].firstBufferLoadedEvent)I=new MediaPlayer.rules.SwitchRequest(0,MediaPlayer.rules.SwitchRequest.prototype.STRONG);else if(!F&&M[x].state===MediaPlayer.dependencies.BufferController.BUFFER_LOADED&&D.level<2*L&&B-2*L>E){var K=D.level>L?MediaPlayer.rules.SwitchRequest.prototype.DEFAULT:MediaPlayer.rules.SwitchRequest.prototype.STRONG;I=new MediaPlayer.rules.SwitchRequest(Math.max(y-1,0),K);}I.value!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&I.value!==y&&v.log("InsufficientBufferRule requesting switch to index: ",I.value,"type: ",x," Priority: ",I.priority===MediaPlayer.rules.SwitchRequest.prototype.DEFAULT?"Default":I.priority===MediaPlayer.rules.SwitchRequest.prototype.STRONG?"Strong":"Weak"),J=w,u(I);},reset:function(){M={},J=0;}};},MediaPlayer.rules.InsufficientBufferRule.prototype={constructor:MediaPlayer.rules.InsufficientBufferRule},MediaPlayer.rules.LimitSwitchesRule=function(){"use strict";var y=0,A=CL.manifest.ABRParameters.qualitySwitchThreshold||2e3;return {debug:void 0,metricsModel:void 0,execute:function(q,u){var v,w=q.getCurrentValue(),x=(new Date).getTime();return v=x-y,A>v?void u(new MediaPlayer.rules.SwitchRequest(w,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)):(y=x,void u(new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK)));}};},MediaPlayer.rules.LimitSwitchesRule.prototype={constructor:MediaPlayer.rules.LimitSwitchesRule},MediaPlayer.rules.ThroughputRule=function(){"use strict";var R=[],V=0,Q=2,U=3,Y=CL.manifest.ABRParameters.bandwidthSafetyFactor||1,b0=function(q,u){R[q]=R[q]||[],1/0!==u&&u!==R[q][R[q].length-1]&&R[q].push(u);},X=function(q,u){var v=0,w=u?Q:U,x=R[q],y=x.length;if(w=w>y?y:w,y>0){for(var A=y-w,z=0,C=A;y>C;C++)z+=x[C];v=z/w;}return x.length>w&&x.shift(),v;};return {log:void 0,metricsExt:void 0,metricsModel:void 0,manifestExt:void 0,manifestModel:void 0,execute:function(q,u){var v,w,x,y=this,A=(new Date).getTime()/1e3,z=q.getMediaInfo(),C=z.type,B=q.getCurrentValue(),E=q.getTrackInfo(),G=this.manifestModel.getValue(),F=y.metricsModel.getReadOnlyMetricsFor(C),D=q.getStreamProcessor().isDynamic(),H=y.metricsExt.getCurrentHttpRequest(F),L=isNaN(E.fragmentDuration)?2:E.fragmentDuration/2,I=F.BufferState.length>0?F.BufferState[F.BufferState.length-1]:null,K=F.BufferLevel.length>0?F.BufferLevel[F.BufferLevel.length-1]:null,M=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);if(L>A-V||!F||null===H||H.type!==MediaPlayer.vo.metrics.HTTPRequest.MEDIA_SEGMENT_TYPE||null===I||null===K)return void u(M);v=(H.tfinish.getTime()-H.tresponse.getTime())/1e3,x=Math.round(8*H.trace[H.trace.length-1].b/v),b0(C,x),w=Math.round(X(C,D));var J=this.manifestExt.getAdaptationForType(G,z.streamInfo.index,C),O=z.trackCount-1;if(I.state===MediaPlayer.dependencies.BufferController.BUFFER_LOADED&&(K.level>=2*MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD||D))for(var N=O;N>0;N--){var P=this.manifestExt.getRepresentationFor(N,J).bandwidth;if(w>=P*Y){M=new MediaPlayer.rules.SwitchRequest(N,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT),V=A;break;}}M.value!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&M.value!==B&&y.log("ThroughputRule requesting switch to index: ",M.value,"type: ",C," Priority: ",M.priority===MediaPlayer.rules.SwitchRequest.prototype.DEFAULT?"Default":M.priority===MediaPlayer.rules.SwitchRequest.prototype.STRONG?"Strong":"Weak","Average throughput",Math.round(w/1024),"kbps"),u(M);},reset:function(){R=[],V=0;}};},MediaPlayer.rules.ThroughputRule.prototype={constructor:MediaPlayer.rules.ThroughputRule},MediaPlayer.rules.RulesContext=function(q,u){"use strict";var v=q.getCurrentTrack(),w=q;return {getStreamInfo:function(){return v.mediaInfo.streamInfo;},getMediaInfo:function(){return v.mediaInfo;},getTrackInfo:function(){return v;},getCurrentValue:function(){return u;},getManifestInfo:function(){return v.mediaInfo.streamInfo.manifestInfo;},getStreamProcessor:function(){return w;}};},MediaPlayer.rules.RulesContext.prototype={constructor:MediaPlayer.rules.RulesContext},MediaPlayer.rules.RulesController=function(){"use strict";var L={},I=["execute"],K=function(q){return q===this.SCHEDULING_RULE||q===this.ABR_RULE;},M=function(q){var u=I.length,v=0;for(v;u>v;v+=1)if(!q.hasOwnProperty(I[v]))return !1;return !0;},J=function(q,u){return new MediaPlayer.rules.RulesContext(q,u);},O=function(x){var y=x.execute.bind(x);return x.execute=function(u,v){var w=function(q){v.call(x,new MediaPlayer.rules.SwitchRequest(q.value,q.priority));};y(u,w);},"function"!=typeof x.reset&&(x.reset=function(){}),x;},N=function(q,u,v){var w,x,y,A,z,C;for(x in u)if(A=u[x],z=A.length)for(C=0;z>C;C+=1)w=A[C],M.call(this,w)&&(w=O.call(this,w),y=q.getRules(x),v&&(v=!1,y.length=0),this.system.injectInto(w),y.push(w));};return {system:void 0,log:void 0,SCHEDULING_RULE:0,ABR_RULE:1,SYNC_RULE:2,initialize:function(){L[this.ABR_RULE]=this.system.getObject("abrRulesCollection"),L[this.SCHEDULING_RULE]=this.system.getObject("scheduleRulesCollection"),L[this.SYNC_RULE]=this.system.getObject("synchronizationRulesCollection");},setRules:function(q,u){K.call(this,q)&&u&&N.call(this,L[q],u,!0);},addRules:function(q,u){K.call(this,q)&&u&&N.call(this,L[q],u,!1);},applyRules:function(w,x,y,A,z){var C,B,E=w.length,G=E,F={},D=J.call(this,x,A),H=function(q){var u,v;q.value!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(F[q.priority]=z(F[q.priority],q.value)),--E||(F[MediaPlayer.rules.SwitchRequest.prototype.WEAK]!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(v=MediaPlayer.rules.SwitchRequest.prototype.WEAK,u=F[MediaPlayer.rules.SwitchRequest.prototype.WEAK]),F[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(v=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,u=F[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]),F[MediaPlayer.rules.SwitchRequest.prototype.STRONG]!==MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE&&(v=MediaPlayer.rules.SwitchRequest.prototype.STRONG,u=F[MediaPlayer.rules.SwitchRequest.prototype.STRONG]),v!=MediaPlayer.rules.SwitchRequest.prototype.STRONG&&v!=MediaPlayer.rules.SwitchRequest.prototype.WEAK&&(v=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT),y({value:void 0!==u?u:A,confidence:v}));};for(F[MediaPlayer.rules.SwitchRequest.prototype.STRONG]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,F[MediaPlayer.rules.SwitchRequest.prototype.WEAK]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,F[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,B=0;G>B;B+=1)C=w[B],M.call(this,C)?C.execute(D,H):E--;},reset:function(){var q,u,v=L[this.ABR_RULE],w=L[this.SCHEDULING_RULE],x=L[this.SYNC_RULE],y=(v.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES)||[]).concat(w.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.NEXT_FRAGMENT_RULES)||[]).concat(w.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_SCHEDULE_RULES)||[]).concat(w.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_EXECUTE_RULES)||[]).concat(x.getRules(MediaPlayer.rules.SynchronizationRulesCollection.prototype.TIME_SYNCHRONIZED_RULES)||[]).concat(x.getRules(MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES)||[]),A=y.length;for(u=0;A>u;u+=1)q=y[u],"function"==typeof q.reset&&q.reset();L={};}};},MediaPlayer.rules.RulesController.prototype={constructor:MediaPlayer.rules.RulesController},MediaPlayer.rules.BufferLevelRule=function(){"use strict";var J={},O={},N={},P=function(q){var u=this.metricsExt.getCurrentHttpRequest(q);return null!==u?(u.tresponse.getTime()-u.trequest.getTime())/1e3:0;},R=function(q,u,v){var w;return w=v?8:isNaN(u)||MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME<u&&u>q?Math.max(MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,q):q>=u?Math.min(u,MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME):Math.min(u,q);},V=function(q,u,v){var w=this,x=v.bufferController.getCriticalBufferLevel(),y=w.metricsModel.getReadOnlyMetricsFor("video"),A=w.metricsModel.getReadOnlyMetricsFor("audio"),z=R.call(this,v.bufferController.getMinBufferTime(),u,q),C=z,B=v.bufferController.bufferMax,E=0;return B===MediaPlayer.dependencies.BufferController.BUFFER_SIZE_MIN?E=z:B===MediaPlayer.dependencies.BufferController.BUFFER_SIZE_INFINITY?E=u:B===MediaPlayer.dependencies.BufferController.BUFFER_SIZE_REQUIRED&&(!q&&w.abrController.isPlayingAtTopQuality(v.streamProcessor.getStreamInfo())&&(C=null===CL.manifest.ABRParameters.maxBufferLength||isNaN(CL.manifest.ABRParameters.maxBufferLength)?MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY:CL.manifest.ABRParameters.maxBufferLength),E=C+Math.max(P.call(w,y),P.call(w,A))),E=Math.min(E,x);},Q=function(q,u){return O[q]&&O[q][u];},U=function(q,u){return J[q]&&J[q][u];},Y=function(q){var u=q.data.fragmentModel.getContext().streamProcessor.getStreamInfo().id;O[u]=O[u]||{},O[u][q.data.request.mediaType]=!0;},b0=function(q){var u=q.sender.streamProcessor.getStreamInfo().id;J[u]=J[u]||{},J[u][q.sender.streamProcessor.getType()]=!0;},X=function(q){var u=q.sender.streamProcessor.getStreamInfo().id;J[u]=J[u]||{},J[u][q.sender.streamProcessor.getType()]=!1;};return {metricsExt:void 0,metricsModel:void 0,abrController:void 0,playbackController:void 0,setup:function(){this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN]=b0,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED]=X,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=Y;},setScheduleController:function(q){var u=q.streamProcessor.getStreamInfo().id;N[u]=N[u]||{},N[u][q.streamProcessor.getType()]=q;},execute:function(q,u){var v=q.getStreamInfo(),w=v.id,x=q.getMediaInfo().type;if(U(w,x))return void u(new MediaPlayer.rules.SwitchRequest(0,MediaPlayer.rules.SwitchRequest.prototype.STRONG));var y,A=this.metricsModel.getReadOnlyMetricsFor(x),z=this.metricsExt.getCurrentBufferLevel(A)?this.metricsExt.getCurrentBufferLevel(A).level:0,C=N[w][x],B=C.streamProcessor.getCurrentTrack(),E=C.streamProcessor.isDynamic(),G=this.metricsExt.getCurrentPlaybackRate(A),F=v.duration,D=z/Math.max(G,1),H=B.fragmentDuration,L=C.playbackController.getTime(),I=E?Number.POSITIVE_INFINITY:F-L,K=Math.min(V.call(this,E,F,C),I),M=Math.max(K-D,0);y=Math.ceil(M/H),D>=I&&!Q(w,x)&&(y=y||1),u(new MediaPlayer.rules.SwitchRequest(y,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));},reset:function(){J={},O={},N={};}};},MediaPlayer.rules.BufferLevelRule.prototype={constructor:MediaPlayer.rules.BufferLevelRule},MediaPlayer.rules.PendingRequestsRule=function(){"use strict";var F=4,D={};return {metricsExt:void 0,setScheduleController:function(q){var u=q.streamProcessor.getStreamInfo().id;D[u]=D[u]||{},D[u][q.streamProcessor.getType()]=q;},execute:function(q,u){var v=q.getMediaInfo().type,w=q.getStreamInfo().id,x=q.getCurrentValue(),y=D[w][v],A=y.getFragmentModel(),z=A.getRequests({state:[MediaPlayer.dependencies.FragmentModel.states.PENDING,MediaPlayer.dependencies.FragmentModel.states.LOADING]}),C=A.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.REJECTED}),B=C.length,E=z.length,G=Math.max(x-E,0);return B>0?void u(new MediaPlayer.rules.SwitchRequest(B,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)):E>F?void u(new MediaPlayer.rules.SwitchRequest(0,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)):0===x?void u(new MediaPlayer.rules.SwitchRequest(G,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)):void u(new MediaPlayer.rules.SwitchRequest(G,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));},reset:function(){D={};}};},MediaPlayer.rules.PendingRequestsRule.prototype={constructor:MediaPlayer.rules.PendingRequestsRule},MediaPlayer.rules.PlaybackTimeRule=function(){"use strict";var O={},N={},P=function(q){var u=q.sender.getStreamId(),v=q.data.seekTime;O[u]=O[u]||{},O[u].audio=v,O[u].video=v,O[u].fragmentedText=v;};return {adapter:void 0,sourceBufferExt:void 0,setup:function(){this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=P;},setScheduleController:function(q){var u=q.streamProcessor.getStreamInfo().id;N[u]=N[u]||{},N[u][q.streamProcessor.getType()]=q;},execute:function(q,u){var v,w,x,y=q.getMediaInfo().type,A=q.getStreamInfo().id,z=N[A][y],C=.1,B=N[A][y].streamProcessor,E=B.getCurrentTrack(),G=O[A]?O[A][y]:null,F=void 0!==G&&null!==G,D=F?MediaPlayer.rules.SwitchRequest.prototype.STRONG:MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,H=z.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.REJECTED})[0],L=!!H&&!F,I=this.adapter.getIndexHandlerTime(B),K=B.playbackController.getTime(),M=H?H.startTime+H.duration:null,J=!F&&H&&(M>K&&H.startTime<=I||isNaN(I));if(w=F?G:J?H.startTime:I,H&&z.getFragmentModel().removeRejectedRequest(H),isNaN(w))return void u(new MediaPlayer.rules.SwitchRequest(null,D));for(O[A]&&(O[A][y]=null),v=this.sourceBufferExt.getBufferRange(B.bufferController.getBuffer(),w),null!==v&&(w=v.end),x=this.adapter.getFragmentRequestForTime(B,E,w,{keepIdx:L}),J&&x&&x.index!==H.index&&(x=this.adapter.getFragmentRequestForTime(B,E,H.startTime+H.duration/2+C,{keepIdx:L}));x&&B.getFragmentModel().isFragmentLoadedOrPending(x);){if("complete"===x.action){x=null,this.adapter.setIndexHandlerTime(B,0/0);break;}x=this.adapter.getNextFragmentRequest(B,E);}x&&!J&&this.adapter.setIndexHandlerTime(B,Math.floor(x.startTime+x.duration)),u(new MediaPlayer.rules.SwitchRequest(x,D));},reset:function(){O={},N={};}};},MediaPlayer.rules.PlaybackTimeRule.prototype={constructor:MediaPlayer.rules.PlaybackTimeRule},MediaPlayer.rules.SameTimeRequestRule=function(){"use strict";var N=4,P={},R=function(q,u){var v,w,x,y,A,z=0,C=q.length;for(z;C>z;z+=1)for(x=q[z].getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING}),Q.call(this,x,"index"),y=0,A=x.length;A>y;y++){if(v=x[y],isNaN(v.startTime)&&"complete"!==v.action){w=v;break;}v.startTime>u&&(!w||v.startTime<w.startTime)&&(w=v);}return w||v;},V=function(q,u){var v,w,x=q.length,y=null;for(w=0;x>w;w+=1)v=q[w].getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING,time:u})[0],v&&(!y||v.startTime>y.startTime)&&(y=v);return y;},Q=function(v,w){var x=function(q,u){return q[w]<u[w]||isNaN(q[w])&&"complete"!==q.action?-1:q[w]>u[w]?1:0;};v.sort(x);},U=function(q,u){return P[q]&&P[q][u]?P[q][u]:0/0;},Y=function(q){var u=q.data.fragmentModel,v=q.data.request,w=u.getContext().streamProcessor.getStreamInfo().id,x=v.mediaType;P[w]=P[w]||{},P[w][x]=v.index-1;};return {setup:function(){this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=Y;},setFragmentModels:function(q,u){this.fragmentModels=this.fragmentModels||{},this.fragmentModels[u]=q;},execute:function(u,v){var w,x,y,A,z,C,B,E,G,F=u.getStreamInfo().id,D=u.getCurrentValue(),H=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,L=this.fragmentModels[F],I=new Date,K=null,M=L?L.length:null,J=!1,O=[];if(!L||!M)return void v(new MediaPlayer.rules.SwitchRequest([],H));if(C=L[0].getContext().playbackController.getTime(),B=V(L,C),z=B||R(L,C)||D,!z)return void v(new MediaPlayer.rules.SwitchRequest([],H));for(A=0;M>A;A+=1)if(x=L[A],w=x.getContext().streamProcessor.getType(),("video"===w||"audio"===w||"fragmentedText"===w)&&(E=x.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING}),G=x.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING}).length,!x.getIsPostponed()||isNaN(z.startTime))){if(G>N)return void v(new MediaPlayer.rules.SwitchRequest([],H));if(K=K||(z===B?C:z.startTime),-1===E.indexOf(z)){if(y=x.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING,time:K})[0],y||0!==z.index||(y=E.filter(function(q){return q.index===z.index;})[0]),y)O.push(y);else if(y=x.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING,time:K})[0]||x.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,time:K})[0],!y&&z.index!==U.call(this,F,z.mediaType)&&CL.configs.isLive===!1){J=!0;break;}}else O.push(z);}return O=O.filter(function(q){return "complete"===q.action||I.getTime()>=q.availabilityStartTime.getTime();}),J?void v(new MediaPlayer.rules.SwitchRequest([],H)):void v(new MediaPlayer.rules.SwitchRequest(O,H));},reset:function(){P={};}};},MediaPlayer.rules.SameTimeRequestRule.prototype={constructor:MediaPlayer.rules.SameTimeRequestRule},MediaPlayer.rules.ScheduleRulesCollection=function(){"use strict";var u=[],v=[],w=[];return {bufferLevelRule:void 0,pendingRequestsRule:void 0,playbackTimeRule:void 0,sameTimeRequestRule:void 0,getRules:function(q){switch(q){case MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_SCHEDULE_RULES:return u;case MediaPlayer.rules.ScheduleRulesCollection.prototype.NEXT_FRAGMENT_RULES:return w;case MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_EXECUTE_RULES:return v;default:return null;}},setup:function(){u.push(this.bufferLevelRule),u.push(this.pendingRequestsRule),w.push(this.playbackTimeRule),v.push(this.sameTimeRequestRule);}};},MediaPlayer.rules.ScheduleRulesCollection.prototype={constructor:MediaPlayer.rules.ScheduleRulesCollection,FRAGMENTS_TO_SCHEDULE_RULES:"fragmentsToScheduleRules",NEXT_FRAGMENT_RULES:"nextFragmentRules",FRAGMENTS_TO_EXECUTE_RULES:"fragmentsToExecuteRules"},MediaPlayer.rules.SwitchRequest=function(q,u){"use strict";this.value=q,this.priority=u,void 0===this.value&&(this.value=999),void 0===this.priority&&(this.priority=.5);},MediaPlayer.rules.SwitchRequest.prototype={constructor:MediaPlayer.rules.SwitchRequest,NO_CHANGE:999,DEFAULT:.5,STRONG:1,WEAK:0},MediaPlayer.rules.LiveEdgeBinarySearchRule=function(){"use strict";var C,B,E,G=43200,F=0/0,D=null,H=0/0,L=null,I=!1,K=0/0,M=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,J=function(u,v,w,x){var y,A=this;if(null===x)y=A.adapter.generateFragmentRequestForTime(E,L,u),J.call(A,u,v,w,y);else{var z=function(q){B.unsubscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,A,z),q.data.exists?v.call(A,q.data.request,u):w.call(A,q.data.request,u);};B.subscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,A,z),B.checkForExistence(x);}},O=function(q,u){var v,w,x;return I?void P.call(this,!1,u):(x=u-F,v=x>0?F-x:F+Math.abs(x)+H,void (v<D.start&&v>D.end?C(new MediaPlayer.rules.SwitchRequest(null,M)):(w=this.adapter.getFragmentRequestForTime(E,L,v),J.call(this,v,N,O,w))));},N=function(q,u){var v,w,x=q.startTime,y=this;if(!I){if(!L.fragmentDuration)return void C(new MediaPlayer.rules.SwitchRequest(x,M));if(I=!0,D.end=x+2*H,u===F)return w=u+K,v=y.adapter.getFragmentRequestForTime(E,L,w),void J.call(y,w,function(){P.call(y,!0,w);},function(){C(new MediaPlayer.rules.SwitchRequest(w,M));},v);}P.call(this,!0,u);},P=function(q,u){var v,w,x;q?D.start=u:D.end=u,v=Math.floor(D.end-D.start)<=K,v?C(new MediaPlayer.rules.SwitchRequest(q?u:u-K,M)):(x=(D.start+D.end)/2,w=this.adapter.getFragmentRequestForTime(E,L,x),J.call(this,x,N,O,w));};return {metricsExt:void 0,adapter:void 0,timelineConverter:void 0,execute:function(q,u){var v,w,x=this;if(C=u,E=q.getStreamProcessor(),B=E.getFragmentLoader(),L=q.getTrackInfo(),K=L.fragmentDuration,w=L.DVRWindow,F=w.end,L.useCalculatedLiveEdgeTime){var y=x.timelineConverter.getExpectedLiveEdge();return x.timelineConverter.setExpectedLiveEdge(F),void C(new MediaPlayer.rules.SwitchRequest(y,M));}D={start:Math.max(0,F-G),end:F+G},H=Math.floor((w.end-w.start)/2),v=x.adapter.getFragmentRequestForTime(E,L,F),J.call(x,F,N,O,v);},reset:function(){F=0/0,D=null,H=0/0,L=null,I=!1,K=0/0,E=null,B=null;}};},MediaPlayer.rules.LiveEdgeBinarySearchRule.prototype={constructor:MediaPlayer.rules.LiveEdgeBinarySearchRule},MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule=function(){"use strict";return {execute:function(q,u){u(new MediaPlayer.rules.SwitchRequest(q.getTrackInfo().DVRWindow.end,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));}};},MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule.prototype={constructor:MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule},MediaPlayer.rules.SynchronizationRulesCollection=function(){"use strict";var u=[],v=[];return {liveEdgeBinarySearchRule:void 0,liveEdgeWithTimeSynchronizationRule:void 0,getRules:function(q){switch(q){case MediaPlayer.rules.SynchronizationRulesCollection.prototype.TIME_SYNCHRONIZED_RULES:return u;case MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES:return v;default:return null;}},setup:function(){u.push(this.liveEdgeWithTimeSynchronizationRule),v.push(this.liveEdgeBinarySearchRule);}};},MediaPlayer.rules.SynchronizationRulesCollection.prototype={constructor:MediaPlayer.rules.SynchronizationRulesCollection,TIME_SYNCHRONIZED_RULES:"withAccurateTimeSourceRules",BEST_GUESS_RULES:"bestGuestRules"},MediaPlayer.utils.Capabilities=function(){"use strict";},MediaPlayer.utils.Capabilities.prototype={constructor:MediaPlayer.utils.Capabilities,system:void 0,log:void 0,supportsMediaSource:function(){"use strict";var q="WebKitMediaSource" in window,u="MediaSource" in window;return q||u;},supportsEncryptedMedia:function(){return this.system.hasMapping("protectionModel");},supportsCodec:function(q,u){"use strict";if(!(q instanceof HTMLMediaElement))throw "element must be of type HTMLMediaElement.";var v=q.canPlayType(u);return (u.indexOf("vtt")>-1||u.indexOf("ttml")>-1)&&(v="probably"),"probably"===v||"maybe"===v;}},MediaPlayer.utils.CustomTimeRanges=function(){return {customTimeRangeArray:[],length:0,add:function(q,u){var v=0;for(v=0;v<this.customTimeRangeArray.length&&q>this.customTimeRangeArray[v].start;v++);for(this.customTimeRangeArray.splice(v,0,{start:q,end:u}),v=0;v<this.customTimeRangeArray.length-1;v++)this.mergeRanges(v,v+1)&&v--;this.length=this.customTimeRangeArray.length;},remove:function(q,u){for(var v=0;v<this.customTimeRangeArray.length;v++)if(q<=this.customTimeRangeArray[v].start&&u>=this.customTimeRangeArray[v].end)this.customTimeRangeArray.splice(v,1),v--;else{if(q>this.customTimeRangeArray[v].start&&u<this.customTimeRangeArray[v].end){this.customTimeRangeArray.splice(v+1,0,{start:u,end:this.customTimeRangeArray[v].end}),this.customTimeRangeArray[v].end=q;break;}q>this.customTimeRangeArray[v].start&&q<this.customTimeRangeArray[v].end?this.customTimeRangeArray[v].end=q:u>this.customTimeRangeArray[v].start&&u<this.customTimeRangeArray[v].end&&(this.customTimeRangeArray[v].end=q);}},mergeRanges:function(q,u){var v=this.customTimeRangeArray[q],w=this.customTimeRangeArray[u];return v.start<=w.start&&w.start<=v.end&&v.end<=w.end?(v.end=w.end,this.customTimeRangeArray.splice(u,1),!0):w.start<=v.start&&v.start<=w.end&&w.end<=v.end?(v.start=w.start,this.customTimeRangeArray.splice(u,1),!0):w.start<=v.start&&v.start<=w.end&&v.end<=w.end?(this.customTimeRangeArray.splice(q,1),!0):v.start<=w.start&&w.start<=v.end&&w.end<=v.end?(this.customTimeRangeArray.splice(u,1),!0):!1;},start:function(q){return this.customTimeRangeArray[q].start;},end:function(q){return this.customTimeRangeArray[q].end;}};},MediaPlayer.utils.CustomTimeRanges.prototype={constructor:MediaPlayer.utils.CustomTimeRanges},MediaPlayer.utils.DOMStorage=function(){var y=!0,A=function(){["video","audio"].forEach(function(q){if(void 0===this.abrController.getInitialBitrateFor(q)){if(this.isSupported(MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL)&&y){var u=MediaPlayer.utils.DOMStorage["LOCAL_STORAGE_"+q.toUpperCase()+"_BITRATE_KEY"],v=JSON.parse(localStorage.getItem(u))||{},w=(new Date).getTime()-parseInt(v.timestamp)>=MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_BITRATE_EXPIRATION||!1,x=parseInt(v.bitrate);isNaN(x)||w?w&&localStorage.removeItem(u):(this.abrController.setInitialBitrateFor(q,x),this.log("Last bitrate played for "+q+" was "+x));}void 0===this.abrController.getInitialBitrateFor(q)&&this.abrController.setInitialBitrateFor(q,MediaPlayer.dependencies.AbrController["DEFAULT_"+q.toUpperCase()+"_BITRATE"]);}},this);};return {system:void 0,log:void 0,abrController:void 0,checkInitialBitrate:A,enableLastBitrateCaching:function(q,u){y=q,void 0===u||isNaN(u)||"number"!=typeof u||(MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_BITRATE_EXPIRATION=u);},isSupported:function(q){return q===MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL?window.localStorage||!1:q===MediaPlayer.utils.DOMStorage.STORAGE_TYPE_SESSION?window.sessionStorage||!1:!1;}};},MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_VIDEO_BITRATE_KEY="dashjs_vbitrate",MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_AUDIO_BITRATE_KEY="dashjs_abitrate",MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_BITRATE_EXPIRATION=36e4,MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL="local",MediaPlayer.utils.DOMStorage.STORAGE_TYPE_SESSION="session",MediaPlayer.utils.DOMStorage.prototype={constructor:MediaPlayer.utils.DOMStorage},MediaPlayer.utils.Debug=function(){"use strict";var w,x=!0,y=!1,A=!1,z=(new Date).getTime();return {system:void 0,eventBus:void 0,setup:function(){this.system.mapValue("log",this.log),w=this.eventBus;},setLogTimestampVisible:function(q){y=q;},showCalleeName:function(q){A=q;},setLogToBrowserConsole:function(q){x=q;},getLogToBrowserConsole:function(){return x;},log:function(){var u="",v=null;y&&(v=(new Date).getTime(),u+="["+(v-z)+"]"),A&&this.getName&&(u+="["+this.getName()+"]"),this.getMediaType&&this.getMediaType()&&(u+="["+this.getMediaType()+"]"),u.length>0&&(u+=" "),Array.apply(null,arguments).forEach(function(q){u+=q+" ";}),x&&console.log(u),w.dispatchEvent({type:"log",message:u});}};},MediaPlayer.utils.EventBus=function(){"use strict";var y,A=function(q,u){var v=(u?"1":"0")+q;return v in y||(y[v]=[]),y[v];},z=function(){y={};};return z(),{addEventListener:function(q,u,v){var w=A(q,v),x=w.indexOf(u);-1===x&&w.push(u);},removeEventListener:function(q,u,v){var w=A(q,v),x=w.indexOf(u);-1!==x&&w.splice(x,1);},dispatchEvent:function(q){for(var u=A(q.type,!1).slice(),v=0;v<u.length;v++)u[v].call(this,q);return !q.defaultPrevented;}};},MediaPlayer.vo.BitrateInfo=function(){"use strict";this.mediaType=null,this.bitrate=null,this.qualityIndex=0/0;},MediaPlayer.vo.BitrateInfo.prototype={constructor:MediaPlayer.vo.BitrateInfo},MediaPlayer.vo.Error=function(q,u,v){"use strict";this.code=q||null,this.message=u||null,this.data=v||null;},MediaPlayer.vo.Error.prototype={constructor:MediaPlayer.vo.Error},MediaPlayer.vo.Event=function(){"use strict";this.type=null,this.sender=null,this.data=null,this.error=null,this.timestamp=0/0;},MediaPlayer.vo.Event.prototype={constructor:MediaPlayer.vo.Event},MediaPlayer.vo.FragmentRequest=function(){"use strict";this.action="download",this.startTime=0/0,this.mediaType=null,this.type=null,this.duration=0/0,this.timescale=0/0,this.range=null,this.url=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=0/0,this.index=0/0,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null;},MediaPlayer.vo.FragmentRequest.prototype={constructor:MediaPlayer.vo.FragmentRequest,ACTION_DOWNLOAD:"download",ACTION_COMPLETE:"complete"},MediaPlayer.vo.ManifestInfo=function(){"use strict";this.DVRWindowSize=0/0,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=0/0,this.duration=0/0,this.isDynamic=!1,this.maxFragmentDuration=null;},MediaPlayer.vo.ManifestInfo.prototype={constructor:MediaPlayer.vo.ManifestInfo},MediaPlayer.vo.MediaInfo=function(){"use strict";this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.trackCount=0,this.lang=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null;},MediaPlayer.vo.MediaInfo.prototype={constructor:MediaPlayer.vo.MediaInfo},MediaPlayer.models.MetricsList=function(){"use strict";return {TcpList:[],HttpList:[],RepSwitchList:[],BufferLevel:[],BufferState:[],PlayList:[],DroppedFrames:[],SchedulingInfo:[],DVRInfo:[],ManifestUpdate:[]};},MediaPlayer.models.MetricsList.prototype={constructor:MediaPlayer.models.MetricsList},MediaPlayer.vo.StreamInfo=function(){"use strict";this.id=null,this.index=null,this.start=0/0,this.duration=0/0,this.manifestInfo=null,this.isLast=!0;},MediaPlayer.vo.StreamInfo.prototype={constructor:MediaPlayer.vo.StreamInfo},MediaPlayer.vo.TrackInfo=function(){"use strict";this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null;},MediaPlayer.vo.TrackInfo.prototype={constructor:MediaPlayer.vo.TrackInfo},MediaPlayer.vo.URIFragmentData=function(){"use strict";this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null;},MediaPlayer.vo.URIFragmentData.prototype={constructor:MediaPlayer.vo.URIFragmentData},MediaPlayer.vo.metrics.BufferLevel=function(){"use strict";this.t=null,this.level=null;},MediaPlayer.vo.metrics.BufferLevel.prototype={constructor:MediaPlayer.vo.metrics.BufferLevel},MediaPlayer.vo.metrics.BufferState=function(){"use strict";this.target=null,this.state=MediaPlayer.dependencies.BufferController.BUFFER_EMPTY;},MediaPlayer.vo.metrics.BufferState.prototype={constructor:MediaPlayer.vo.metrics.BufferState},MediaPlayer.vo.metrics.DVRInfo=function(){"use strict";this.time=null,this.range=null,this.manifestInfo=null;},MediaPlayer.vo.metrics.DVRInfo.prototype={constructor:MediaPlayer.vo.metrics.DVRInfo},MediaPlayer.vo.metrics.DroppedFrames=function(){"use strict";this.time=null,this.droppedFrames=null;},MediaPlayer.vo.metrics.DroppedFrames.prototype={constructor:MediaPlayer.vo.metrics.DroppedFrames},MediaPlayer.vo.metrics.HTTPRequest=function(){"use strict";this.stream=null,this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.tfinish=null,this.responsecode=null,this.interval=null,this.mediaduration=null,this.responseHeaders=null,this.trace=[];},MediaPlayer.vo.metrics.HTTPRequest.prototype={constructor:MediaPlayer.vo.metrics.HTTPRequest},MediaPlayer.vo.metrics.HTTPRequest.Trace=function(){"use strict";this.s=null,this.d=null,this.b=[];},MediaPlayer.vo.metrics.HTTPRequest.Trace.prototype={constructor:MediaPlayer.vo.metrics.HTTPRequest.Trace},MediaPlayer.vo.metrics.HTTPRequest.MEDIA_SEGMENT_TYPE="Media Segment",MediaPlayer.vo.metrics.HTTPRequest.MPD_TYPE="MPD",MediaPlayer.vo.metrics.ManifestUpdate=function(){"use strict";this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[];},MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo=function(){"use strict";this.id=null,this.index=null,this.start=null,this.duration=null;},MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo=function(){"use strict";this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null;},MediaPlayer.vo.metrics.ManifestUpdate.prototype={constructor:MediaPlayer.vo.metrics.ManifestUpdate},MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo.prototype={constructor:MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo},MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo.prototype={constructor:MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo},MediaPlayer.vo.metrics.PlayList=function(){"use strict";this.stream=null,this.start=null,this.mstart=null,this.starttype=null,this.trace=[];},MediaPlayer.vo.metrics.PlayList.Trace=function(){"use strict";this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null;},MediaPlayer.vo.metrics.PlayList.prototype={constructor:MediaPlayer.vo.metrics.PlayList},MediaPlayer.vo.metrics.PlayList.INITIAL_PLAY_START_REASON="initial_start",MediaPlayer.vo.metrics.PlayList.SEEK_START_REASON="seek",MediaPlayer.vo.metrics.PlayList.Trace.prototype={constructor:MediaPlayer.vo.metrics.PlayList.Trace()},MediaPlayer.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON="user_request",MediaPlayer.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",MediaPlayer.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON="end_of_content",MediaPlayer.vo.metrics.PlayList.Trace.REBUFFERING_REASON="rebuffering",MediaPlayer.vo.metrics.TrackSwitch=function(){"use strict";this.t=null,this.mt=null,this.to=null,this.lto=null;},MediaPlayer.vo.metrics.TrackSwitch.prototype={constructor:MediaPlayer.vo.metrics.TrackSwitch},MediaPlayer.vo.metrics.SchedulingInfo=function(){"use strict";this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null;},MediaPlayer.vo.metrics.SchedulingInfo.prototype={constructor:MediaPlayer.vo.metrics.SchedulingInfo},MediaPlayer.vo.metrics.TCPConnection=function(){"use strict";this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null;},MediaPlayer.vo.metrics.TCPConnection.prototype={constructor:MediaPlayer.vo.metrics.TCPConnection},MediaPlayer.vo.protection.ClearKeyKeySet=function(C,B){if(B&&"persistent"!==B&&"temporary"!==B)throw  new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=C,this.type=B,this.toJWK=function(){var q,u=this.keyPairs.length,v={};for(v.keys=[],q=0;u>q;q++){var w={kty:"oct",alg:"A128KW",kid:this.keyPairs[q].keyID,k:this.keyPairs[q].key};v.keys.push(w);}this.type&&(v.type=this.type);var x=JSON.stringify(v),y=x.length,A=new ArrayBuffer(y),z=new Uint8Array(A);for(q=0;y>q;q++)z[q]=x.charCodeAt(q);return A;};},MediaPlayer.vo.protection.ClearKeyKeySet.prototype={constructor:MediaPlayer.vo.protection.ClearKeyKeySet},MediaPlayer.vo.protection.KeyError=function(q,u){"use strict";this.sessionToken=q,this.error=u;},MediaPlayer.vo.protection.KeyError.prototype={constructor:MediaPlayer.vo.protection.KeyError},MediaPlayer.vo.protection.KeyMessage=function(q,u,v,w){"use strict";this.sessionToken=q,this.message=u,this.defaultURL=v,this.messageType=w;},MediaPlayer.vo.protection.KeyMessage.prototype={constructor:MediaPlayer.vo.protection.KeyMessage},MediaPlayer.vo.protection.KeyPair=function(q,u){"use strict";if(!q||16!==q.length)throw  new Error("Illegal key ID length! Must be 16 bytes (128 bits)");if(!u||16!==u.length)throw  new Error("Illegal key length! Must be 16 bytes (128 bits)");this.keyID=q,this.key=u;},MediaPlayer.vo.protection.KeyPair.prototype={constructor:MediaPlayer.vo.protection.KeyPair},MediaPlayer.vo.protection.KeySystemAccess=function(q,u){this.keySystem=q,this.ksConfiguration=u;},MediaPlayer.vo.protection.KeySystemAccess.prototype={constructor:MediaPlayer.vo.protection.KeySystemAccess},MediaPlayer.vo.protection.KeySystemConfiguration=function(q,u,v,w){this.initDataTypes=["cenc"],this.audioCapabilities=q,this.videoCapabilities=u,this.distinctiveIdentifier=v,this.persistentState=w;},MediaPlayer.vo.protection.KeySystemConfiguration.prototype={constructor:MediaPlayer.vo.protection.KeySystemConfiguration},MediaPlayer.vo.protection.LicenseRequestComplete=function(q,u){"use strict";this.message=q,this.requestData=u;},MediaPlayer.vo.protection.LicenseRequestComplete.prototype={constructor:MediaPlayer.vo.protection.LicenseRequestComplete},MediaPlayer.vo.protection.MediaCapability=function(q,u){this.contentType=q,this.robustness=u;},MediaPlayer.vo.protection.MediaCapability.prototype={constructor:MediaPlayer.vo.protection.MediaCapability},MediaPlayer.vo.protection.NeedKey=function(q,u){this.initData=q,this.initDataType=u;},MediaPlayer.vo.protection.NeedKey.prototype={constructor:MediaPlayer.vo.protection.NeedKey},MediaPlayer.vo.protection.ProtectionData=function(q,u,v,w){this.laURL=q,this.httpRequestHeaders=u,this.bearerToken=v,this.clearkeys=w;},MediaPlayer.vo.protection.ProtectionData.prototype={constructor:MediaPlayer.vo.protection.ProtectionData},MediaPlayer.models.SessionToken=function(){"use strict";},MediaPlayer.models.SessionToken.prototype={initData:null,getSessionID:function(){return "";},getExpirationTime:function(){return 0/0;},getKeyStatuses:function(){return null;}};var CL;if(!window.castLabs)var castLabs={};Number.prototype.round=function(q){return +(Math.round(this+"e+"+q)+"e-"+q);},castLabsDashJS=function(){"use strict";return castLabs={},CL=window.CL||{},CL.configs={debug:!1,minBufferTime:1e3,validateInterval:5e3,bufferingValidateInterval:500,mergeSegmentsThreshold:5e3,switchBitratesWaitTime:5e3,useEME2:!0,isIE11:!1,isChromeDesktop:!1,isChromeAndroid:!1,isChromecast:!1,isSafari:!1,isSafari8:!1,isFirefox:!1,isActiveVideoChrome:!1,isWindows:!1,isPlatformSupported:!1,element:null,isSmoothStreaming:!1,ssTimeOffset:{video:0,audio:0,text:0},codecPrivateData:{},firstIndex:{audio:!0,video:!0},adjustLiveEdge:!0,audioInitData:{},repHeight:{},repWidth:{},timescale:{},customAttributes:{},isProtected:!1,audioTracks:[],activeAudioTrack:null,textTracks:[],activeTextTrack:null,previousActiveTrack:{text:null,audio:null,video:null},activeTrack:{text:null,audio:null,video:null},tracks:{text:[],audio:[],video:[]},subtitlesOff:!1,activePlayer:null,minStartTime:null,minStartTimeSeekInProgress:!1,keyRequests:[],isLive:!1,lookAheadFragments:{audio:[],video:[],text:[]},needManifestUpdate:!1},CL.manifest={drm:"auto",debug:!1,key:null,keyId:null,customData:{userId:null,sessionId:null,merchant:null},assetId:null,variantId:null,authenticationToken:null,sendCustomData:!0,playReadyLicenseServerURL:null,widevineLicenseServerURL:null,accessLicenseServerURL:null,generatePSSH:!1,parseMoofFragments:!1,enableSmoothStreamingCompatibility:!1,ignoreManifestBufferSettings:!1,isSmoothStreaming:!1,useLookAheadFragments:!1,useUniversalSubtitleEngine:!0,fixAudioCodec:!1,widevineHeader:{provider:null,contentId:null,trackType:null,policy:null},playreadyHeader:{laUrl:null,luiUrl:null},autoplay:!1,loop:!1,controls:!0,ABRParameters:{downloadRatioSafetyFactor:1.25,qualitySwitchThreshold:2e3,bandwidthSafetyFactor:1.25,minBufferLength:7.9,maxBufferLength:15,liveDelay:8},licenseRequestTimeout:0,manifestRequestTimeout:0,fragmentRequestTimeout:0,disableChromecastSupport:!1,disableDASHJSOnIE11:!1,pictureSize:"normal"},CL.defaultConfigs=JSON.parse(JSON.stringify(CL.configs)),CL.defaultManifest=JSON.parse(JSON.stringify(CL.manifest)),{classes:{}};}(),window.self={};var initChromecastReceiver=function(){var w="urn:x-cast:com.castlabs.chromecast";if(CL.manifest.useUniversalSubtitleEngine=!1,window.self.video=CL.configs.element?CL.configs.element:document.querySelector("video"),void 0==window.mediaManager){window.mediaManager=new cast.receiver.MediaManager(window.self.video),window.castReceiverManager=cast.receiver.CastReceiverManager.getInstance(),CL.configs.debug&&console.log("Initializing Chromecast receiver app..."),window.castReceiverManager.onReady=function(){CL.configs.debug&&console.log("window.castReceiverManager is ready.");},window.castReceiverManager.onSenderConnected=function(){CL.configs.debug&&console.log("Sender has connected.");},window.castReceiverManager.onSenderDisconnected=function(){CL.configs.debug&&console.log("Sender has disconnected.");},window.castReceiverManager.onShutdown=function(){for(var q,u=window.castReceiverManager.getSenders(),v=0;v<u.length;v++)q=u[v],console.log("Connected sender: "+q);CL.configs.debug&&console.log("Application has shutdown.");},window.castReceiverManager.onSystemVolumeChanged=function(){CL.configs.debug&&console.log("System volume has changed.");},window.castReceiverManager.onVisibilityChanged=function(){CL.configs.debug&&console.log("Visibility has changed.");},window.messageBus=castReceiverManager.getCastMessageBus(w,cast.receiver.CastMessageBus.MessageType.JSON),window.messageBus.onMessage=function(q){var u=(q.senderId,q.data),v=u.command;switch(v){case "setActiveTrack":"audio"===u.type&&CL.configs.activeTrack.audio.id!=u.id&&window.self.player.setActiveTrack("audio",u.id),"text"===u.type&&window.self.player.setActiveTrack("text",u.id);break;case "enableSubtitles":window.self.player.enableSubtitles(!0);break;case "disableSubtitles":window.self.player.enableSubtitles(!1);}};var x=function(q){return q.currentTime=window.self.currentTime,q.customData={duration:window.self.duration,audioTracks:window.self.audioTracks,textTracks:window.self.textTracks},void 0!=q.media&&(q.media.duration=window.self.duration),(null==q.idleReason||"ERROR"==q.idleReason)&&(q.idleReason=cast.receiver.media.IdleReason.CANCELLED),q.playerState==cast.receiver.media.PlayerState.BUFFERING&&4==window.self.video.readyState&&1==window.self.video.playbackRate&&(q.playerState=cast.receiver.media.PlayerState.PLAYING),q;};window.mediaManager.customizedStatusCallback=x;var y=(new Date).getTime();onVideoStateChange=function(q){window.self.currentTime=window.self.video.currentTime,window.self.duration=window.self.video.duration,CL.configs.isChromecast&&("ended"==q&&CL.manifest.loop===!0&&setTimeout(window.self.loadVideo(CL.manifest.url),5e3),now=(new Date).getTime(),now-y>500&&(y=now,window.mediaManager.broadcastStatus(!0)));},window.mediaManager.onLoadOrig=window.mediaManager.onLoad,window.mediaManager.onLoad=function(q){window.self.player&&(window.self.player.pause(),window.self.player.removeEventListener&&(window.self.player.removeEventListener(),window.self.player.reset())),window.self.video=document.querySelector("video"),player=new MediaPlayer(new castLabsDashJS.classes.DRMtodayContext(window.self.config)),window.self.player=player,CL.configs.event=q,CL.configs.debug&&console.log("onLoad called..."),CL.configs.debug&&console.log(q);var u=q.data.media.contentId,v={};v.loop=!0,v.debug=!1,v.generatePSSH=!1,v.autoplay=!0,v.customData={userId:q.data.media.customData.userId,sessionId:q.data.media.customData.sessionId,merchant:q.data.media.customData.merchant},v.useUniversalSubtitleEngine=!1,player.setConfig(v),cast.receiver.logger.setLevelValue(CL.configs.debug?cast.receiver.LoggerLevel.DEBUG:cast.receiver.LoggerLevel.NONE),player.loadVideo(u),window.mediaManager.setMediaElement(window.self.video),window.mediaManager.customizedStatusCallback=x,window.self.video.addEventListener("timeupdate",onVideoStateChange.bind(this,"timeupdate")),window.self.video.addEventListener("durationchange",onVideoStateChange.bind(this,"durationchange")),window.self.video.addEventListener("ended",onVideoStateChange.bind(this,"ended")),window.self.video.addEventListener("pause",onVideoStateChange.bind(this,"pause")),window.self.video.addEventListener("play",onVideoStateChange.bind(this,"play")),window.self.video.addEventListener("ratechange",onVideoStateChange.bind(this,"ratechange"));},MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY=15,window.castReceiverManager.start();}CL.configs.debug&&console.log("Done initializing Chromecast receiver");},loadScript=function(q,u,v){var w=document.getElementsByTagName("head")[0],x=document.createElement("script");x.type="text/javascript",x.src=q,x.onreadystatechange=u,x.onload=function(){u.call(v);},w.appendChild(x);};castLabsDashJS.classes.DRMtodayContext=function(w){"use strict";return {config:w,system:void 0,setup:function(){castLabsDashJS.classes.DRMtodayContext.prototype.setup.call(this),this.system.mapSingleton("clUtils",castLabsDashJS.classes.Utils),this.system.mapSingleton("parser",castLabsDashJS.classes.SmoothParser);var q=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase();CL.configs.useEME2=!1,CL.configs.isChromecast=!1,CL.configs.isChromeAndroid=!1,CL.configs.isChromeDesktop=!1,CL.configs.isIE11=!1,CL.configs.isPlatformSupported=!1,CL.configs.debug&&console.log(q);var v=!1;q.indexOf("chrome")>-1&&q.indexOf("crkey")>-1&&u.indexOf("linux armv7l")>-1?(CL.configs.isChromecast=!0,CL.configs.useEME2=!1,v=!0,CL.configs.debug=!1):q.indexOf("chrome")>-1&&q.indexOf("android")>-1&&u.indexOf("linux armv7l")>-1?(CL.configs.isChromeAndroid=!0,CL.configs.useEME2=!1,v=!0):q.indexOf("chrome")>-1&&(q.indexOf("macintosh")>-1||q.indexOf("windows")>-1)?(CL.configs.isChromeDesktop=!0,CL.configs.useEME2=!1,v=!0):q.indexOf("trident")>-1&&q.indexOf("rv:11")>-1&&q.indexOf("windows nt 6.3")>-1?(CL.configs.isIE11=!0,CL.configs.useEME2=!0,v=!0):q.indexOf("applewebkit")>-1&&q.indexOf("version")>-1&&q.indexOf("mac os x")>-1&&(CL.configs.isSafari8=!0,v=!0),CL.configs.isPlatformSupported=!0;}};},castLabsDashJS.classes.DRMtodayContext.prototype=new Dash.di.DashContext,castLabsDashJS.classes.DRMtodayContext.prototype.constructor=castLabsDashJS.classes.DRMtodayContext,castLabsDashJS.classes.SmoothParser=function(){"use strict";var J0,M0=function(q){this.system=q,this.utils=this.system.getObject("clUtils");},N0=function(y,A){if(J0=new Dash.dependencies.DashParser,J0.log=this.log,J0.errHandler=this.errHandler,J0.debug=this.debug,CL.configs.isSmoothStreaming===!0){var z,C,B,E,G,F,D,H,L,I,K,M,J,O,N,P,R,V,Q,U,Y,b0,X,a0,Z,W,e0,d0,c0,f0,h0,m0=31536e3,k0=2592e3,o0=86400,y0=3600,u0=60,s0=60,t0=1e3,A0=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)+/,q0=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,v0=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,r0=[{type:"duration",test:function(q){return A0.test(q);},converter:function(q){var u=A0.exec(q);return parseFloat(u[2]||0)*m0+parseFloat(u[4]||0)*k0+parseFloat(u[6]||0)*o0+parseFloat(u[8]||0)*y0+parseFloat(u[10]||0)*u0+parseFloat(u[12]||0);}},{type:"datetime",test:function(q){return q0.test(q);},converter:function(q){var u,v=q0.exec(q);if(u=Date.UTC(parseInt(v[1],10),parseInt(v[2],10)-1,parseInt(v[3],10),parseInt(v[4],10),parseInt(v[5],10),v[6]&&parseInt(v[6],10)||0,v[7]&&parseFloat(v[7])*t0||0),v[9]&&v[10]){var w=parseInt(v[9],10)*s0+parseInt(v[10],10);u+=("+"===v[8]?-1:1)*w*u0*t0;}return new Date(u);}},{type:"numeric",test:function(q){return v0.test(q);},converter:function(q){return parseFloat(q);}}],D0=function(q){var u="",v=parseInt(q/3600)%24,w=parseInt(q/60)%60,x=(q%60).toFixed(4);return u="PT"+(v>0?v+"H":"")+(w>0?w+"M":"")+(x>0?x+"S":"");},p0=new X2JS(r0,"",!0),B0=!1,C0=0,w0=0,z0=!1;p0=new X2JS;try{if(this.debug.log("Converting from Smooth->DASH"),z=p0.xml_str2json(y),z=z.SmoothStreamingMedia,C=JSON.stringify(z),C=C.replace(/"_/g,'"'),z=JSON.parse(C),W=void 0!==z.TimeScale?z.TimeScale:void 0!==z.Timescale?z.Timescale:null,null===W&&(W=1e7),X=D0(z.Duration/W),void 0!==z.IsLive&&"true"==z.IsLive.toLowerCase()&&(z0=!0,CL.configs.isLive=!0,void 0===z.DVRWindowLength&&(z.DVRWindowLength=1e8),h0=D0(z.DVRWindowLength/W)),b0=z0?"PT8S":"PT2S",e0=z.LookAheadFragmentCount,(void 0!=z.Protection&&void 0!=z.Protection.ProtectionHeader||1==CL.manifest.generatePSSH)&&(CL.configs.isProtected=!0,CL.manifest.generatePSSH=!0,B0=!0,void 0!=z.Protection&&void 0!=z.Protection.ProtectionHeader?(c0=this.utils.arrayToString(this.utils.removeZeros(this.utils.base64DecToArr(z.Protection.ProtectionHeader._text))),d0=c0.substring(c0.toLowerCase().indexOf("<kid>")+5,c0.toLowerCase().indexOf("</kid>")),d0=this.utils.toMsGuid(this.utils.byteArrayToHexString(this.utils.base64DecToArr(d0))),null==CL.manifest.keyId?CL.manifest.keyId=d0:d0=CL.manifest.keyId):d0=CL.manifest.keyId,CL.manifest.widevineHeader.contentId&&null!=CL.manifest.widevineHeader.contentId&&""!=CL.manifest.widevineHeader.contentId||(CL.manifest.widevineHeader.contentId=this.utils.hexStringToBase64(d0.replace(/-/g,""))),void 0==d0||null==d0||""==d0))throw "Could not find content protection data for this Smooth Content. Please check your configuration.";if(E={MPD:{_profiles:"urn:mpeg:dash:profile:isoff-on-demand:2011",_type:z0?"dynamic":"static",_minBufferTime:b0,_mediaPresentationDuration:X,_xmlns:"urn:mpeg:dash:schema:mpd:2011","_xmlns:cenc":"urn:mpeg:cenc:2013",ProgramInformation:{_moreInformationURL:"www.castLabs.com"},Period:{_start:"PT0S",_duration:X},_lookAheadFragmentCount:e0}},z0===!0&&(E.MPD._profiles="urn:mpeg:dash:profile:isoff-live:2011",E.MPD._type="dynamic",E.MPD._timeShiftBufferDepth=h0),P=[],!Array.isArray(z.StreamIndex)){var G0=z.StreamIndex;z.StreamIndex=[],z.StreamIndex[0]=G0;}var $=[],H0=0;if("video"===z.StreamIndex[z.StreamIndex.length-1].Type)for(var g0=z.StreamIndex.length-1;g0>=0;g0--)$[H0]=z.StreamIndex[g0],H0++;else for(var g0=0;g0<z.StreamIndex.length;g0++)$[H0]=z.StreamIndex[g0],H0++;Z=[];for(var g0=0;g0<z.StreamIndex.length;g0++){if(G=$[g0],W=void 0!==G.TimeScale?G.TimeScale:void 0!==z.Timescale?G.Timescale:W,M=[],!Array.isArray(G.QualityLevel)){var G0=G.QualityLevel;G.QualityLevel=[],G.QualityLevel[0]=G0;}if(V=0,Q=0,N={_segmentAlignment:"true",_maxFrameRate:25,_par:"16:9"},N._lang=G.Language,F=G.Type,N._id=F+"_"+g0,"text"!==F||(N._mimeType="text/vtt",N._subType=G.Subtype?G.Subtype.toLowerCase():"subt",N._name=G.Name?G.Name:G.Language,!G.Subtype||"chap"!=G.Subtype.toLowerCase())){Z[N._id]=0,"video"===F&&(a0=0),"audio"===F&&(a0=0,N._mimeType="audio/mp4"),B0===!0&&(N.ContentProtection={"_cenc:default_KID":d0,_schemeIdUri:"urn:mpeg:dash:mp4protection:2011",_value:"cenc"}),R=0,f0=G.Url,f0=f0.replace(/{bitrate}/gi,"$Bandwidth$"),f0=f0.replace(/{start_time}/gi,"$Time$"),f0=f0.replace(/{start time}/gi,"$Time$"),f0=f0.replace(/{CustomAttributes}/gi,"$CustomAttributes$"),w0=0;for(var l0=0;l0<G.c.length;l0++)H=null,L=G.c[l0],I=null,l0>0&&(H=G.c[l0-1]),l0<G.c.length-1&&(I=G.c[l0+1]),void 0!=L.t?(R=L.t,0==l0&&R>0&&(w0=R),0==l0&&R>C0&&(C0=R/W)):null!=H&&H.t?(R=H.t+H.d,G.c[l0].t=R):G.c[l0].t=0,z0===!1&&(R-=w0,0!=l0||CL.configs.ssTimeOffset[N._id]||(CL.configs.ssTimeOffset[N._id]=w0)),R>0||0==l0?(void 0==L.d&&null!=I&&void 0!=I.t&&(L.d=I.t-L.t),K={_d:L.d,_t:R}):K={_d:L.d},a0+=L.d,Z[N._id]=Z[N._id]+L.d,R=0,M.push(K);O=[],N.SegmentTemplate={_timescale:W,_media:f0,_startNumber:1,SegmentTimeline:{S:M}};for(var l0=0;l0<G.QualityLevel.length;l0++){D=G.QualityLevel[l0];var i0=void 0!=D.FourCC?D.FourCC.toLowerCase():"unknown";if(i0=i0.trim(),"video"==F){if("avc1"!=i0&&"h264"!=i0){CL.configs.debug&&console.log("Skipping unsupported video type "+i0);continue;}}else if("audio"==F){if(""===D.CodecPrivateData&&(D.CodecPrivateData="1190"),"aacl"!=i0&&"ac-3"!=i0&&"ec-3"!=i0&&"mp2"!=i0&&"mp2a"!=i0&&"aach"!=i0){CL.configs.debug&&console.log("Skipping unsupported audio type "+i0);continue;}}else if("text"==F){if("srt"!=i0&&"vtt"!=i0&&"ttml"!=i0){CL.configs.debug&&console.log("Skipping unsupported text type "+i0);continue;}"ttml"===i0&&(N._mimeType="application/ttml+xml");}J={_id:G.Type+"_"+l0,_bandwidth:D.Bitrate,_codecPrivateData:D.CodecPrivateData},CL.configs.codecPrivateData[J._id]=""+D.CodecPrivateData,"audio"===F&&(CL.configs.audioInitData[J._id]={audioTag:D.AudioTag,bitrate:D.Bitrate,bitsPerSample:0==D.BitsPerSample?16:D.BitsPerSample,channels:D.Channels,fourCC:D.FourCC,packetSize:D.PacketSize,samplingRate:D.SamplingRate}),CL.configs.timescale[J._id]=W,D.CustomAttributes&&(CL.configs.customAttributes[J._id]=D.CustomAttributes),"video"===F?(J._mimeType="video/mp4",J._codecs="avc1.42c00c",Y=parseFloat(D.MaxWidth),U=parseFloat(D.MaxHeight),CL.configs.repWidth[J._id]=Y,CL.configs.repHeight[J._id]=U,J._width=Y,J._height=U,J._sar=1,J._startWithSAP=1,V=Y>V?Y:V,Q=U>Q?U:Q):"audio"===F?(J._codecs=0==(""+D.CodecPrivateData).indexOf("1310")?"mp4a.40.5":"mp4a.40.2",J._audioSamplingRate=D.SamplingRate):"text"===F&&(J._bandwidth=D.Bitrate,J.BaseURL=f0),O.push(J);}N._maxWidth=V,N._maxHeight=Q,N.Representation=O,O.length>0&&P.push(N);}}CL.configs.debug&&console.log(z),(void 0===z.Duration||0==z.Duration)&&a0>0&&(X=D0(a0/W),E.MPD._mediaPresentationDuration=X,E.MPD.Period._duration=X);for(var E0 in Z){var L0=Z[E0];E0.indexOf("text")>-1||(CL.configs.debug&&console.log(L0.toFixed()),a0>L0&&(a0=L0));}X=D0(a0/W),E.MPD._mediaPresentationDuration=X,E.MPD.Period._duration=X,z0&&(delete  E.MPD._mediaPresentationDuration,delete  E.MPD._duration,E.MPD._minimumUpdatePeriod="PT8S",CL.configs.availabilityStartTime||(CL.configs.availabilityStartTime=new Date("Jan 01, 1970").toJSON()),E.MPD._availabilityStartTime=CL.configs.availabilityStartTime),E.MPD.Period.AdaptationSet=P,C0>0&&null==CL.configs.minStartTime&&z0&&(CL.configs.minStartTime=C0),B=p0.json2xml_str(E),B=B.replace(/&#x2F;/g,"/"),CL.configs.debug&&console.log(B),CL.configs.debug&&console.log("Done converting."),y=B;}catch(q){CL.configs.debug&&console.log("Failed to convert manifest: "+q);}}return J0.parse.call(this,y,A);};return {setSystem:M0,log:void 0,debug:void 0,errHandler:void 0,parse:N0,system:void 0,setup:function(){this.utils=this.system.getObject("clUtils");}};},castLabsDashJS.classes.SmoothParser.prototype=new Dash.dependencies.DashParser,castLabsDashJS.classes.SmoothParser.prototype.constructor=castLabsDashJS.classes.SmoothParser,castLabsDashJS.classes.Utils=function(){"use strict";var e1=function(q,u){var v=!1,w="WebKitMediaKeys" in window,x="MSMediaKeys" in window,y="MediaKeys" in window,A="WebKitMediaSource" in window,z="MediaSource" in window;return CL.configs.isActiveVideoChrome===!0?!0:(w?v=WebKitMediaKeys.isTypeSupported(q):x?v=MSMediaKeys.isTypeSupported(q):y?v=MediaKeys.isTypeSupported?MediaKeys.isTypeSupported(q):MediaSource&&MediaSource.isTypeSupported?MediaSource.isTypeSupported(u):!0:A?v=WebKitMediaSource.isTypeSupported(u):z&&(v=MediaSource.isTypeSupported(u)),v);},T1=function(){var q=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase();CL.configs.useEME2=!1,CL.configs.isChromecast=!1,CL.configs.isChromeAndroid=!1,CL.configs.isChromeDesktop=!1,CL.configs.isIE11=!1,CL.configs.isWindows=!1,CL.configs.isFirefox=!1,CL.configs.isSafari=!1,CL.configs.isSafari8=!1,CL.configs.isActiveVideoChrome=!1,CL.configs.isPlatformSupported=!1,CL.configs.debug&&console.log(q);var v=!1,w=!1;return q.indexOf("cloud")>-1?(CL.configs.isActiveVideoChrome=!0,CL.configs.useEME2=!1,v=!0,CL.configs.debug=!1):q.indexOf("chrome")>-1&&q.indexOf("crkey")>-1&&u.indexOf("linux armv7l")>-1?(CL.configs.isChromecast=!0,CL.configs.useEME2=!1,v=!0,CL.configs.debug=!1):q.indexOf("chrome")>-1&&q.indexOf("android")>-1&&u.indexOf("linux armv7l")>-1?(CL.configs.isChromeAndroid=!0,CL.configs.useEME2=!1,v=!0):q.indexOf("chrome")>-1&&(q.indexOf("macintosh")>-1||q.indexOf("windows")>-1||q.indexOf("linux"))?(CL.configs.isChromeDesktop=!0,CL.configs.useEME2=!1,q.indexOf("windows")>-1&&(CL.configs.isWindows=!0),v=!0):q.indexOf("trident")>-1&&q.indexOf("rv:11")>-1&&q.indexOf("windows nt 6.3")>-1?(CL.configs.isIE11=!0,CL.configs.useEME2=!0,CL.configs.isWindows=!0,v=!0):q.indexOf("applewebkit")>-1&&q.indexOf("version")>-1&&q.indexOf("mac os x")>-1?(CL.configs.isSafari=!0,q.indexOf("version/8")&&(CL.configs.isSafari8=!0),v=!0):q.indexOf("firefox")>-1&&q.indexOf("gecko")>-1&&(CL.configs.isFirefox=!0,q.indexOf("windows")>-1&&(CL.configs.isWindows=!0),v=!1),v&&((CL.configs.isChromeDesktop||CL.configs.isChromeAndroid)&&e1("com.widevine.alpha",'video/mp4;codecs="avc1.42c00c"')?w=!0:CL.configs.isIE11&&e1("com.microsoft.playready",'video/mp4;codecs="avc1.42c00c"')?w=!0:CL.configs.isChromecast&&(e1("com.widevine.alpha",'video/mp4;codecs="avc1.42c00c"')||e1("com.youtube.playready",'video/mp4;codecs="avc1.42c00c"'))?w=!0:CL.configs.isSafari8&&e1("com.apple.fps.1_0",'video/mp4;codecs="avc1.42c00c"')?w=!1:CL.configs.isActiveVideoChrome&&(w=!0)),CL.configs.isPlatformSupported=w,w;},F1=function(q){for(var u=new Array(2*q.length),v=0;v<2*q.length;v++)u[v]=v%2==0?q[v/2]:0;return u;},x0={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),encode:function(q){var u,v,w,x=x0.toUtf8(q),y=-1,A=x.length,z=[];if(x0.ie){for(var C=[];++y<A;)u=x[y],v=x[++y],z[0]=u>>2,z[1]=(3&u)<<4|v>>4,isNaN(v)?z[2]=z[3]=64:(w=x[++y],z[2]=(15&v)<<2|w>>6,z[3]=isNaN(w)?64:63&w),C.push(x0.alphabet.charAt(z[0]),x0.alphabet.charAt(z[1]),x0.alphabet.charAt(z[2]),x0.alphabet.charAt(z[3]));return C.join("");}for(var C="";++y<A;)u=x[y],v=x[++y],z[0]=u>>2,z[1]=(3&u)<<4|v>>4,isNaN(v)?z[2]=z[3]=64:(w=x[++y],z[2]=(15&v)<<2|w>>6,z[3]=isNaN(w)?64:63&w),C+=x0.alphabet[z[0]]+x0.alphabet[z[1]]+x0.alphabet[z[2]]+x0.alphabet[z[3]];return C;},decode:function(q){if(q.length%4)throw  new Error("InvalidCharacterError: 'B64.decode' failed: The string to be decoded is not correctly encoded.");var u=x0.fromUtf8(q),v=0,w=u.length;if(x0.ieo){for(var x=[];w>v;)x.push(String.fromCharCode(u[v]<128?u[v++]:u[v]>191&&u[v]<224?(31&u[v++])<<6|63&u[v++]:(15&u[v++])<<12|(63&u[v++])<<6|63&u[v++]));return x.join("");}for(var x="";w>v;)x+=String.fromCharCode(u[v]<128?u[v++]:u[v]>191&&u[v]<224?(31&u[v++])<<6|63&u[v++]:(15&u[v++])<<12|(63&u[v++])<<6|63&u[v++]);return x;},toUtf8:function(q){var u,v=-1,w=q.length,x=[];if(/^[\x00-\x7f]*$/.test(q))for(;++v<w;)x.push(q.charCodeAt(v));else for(;++v<w;)u=q.charCodeAt(v),128>u?x.push(u):2048>u?x.push(u>>6|192,63&u|128):x.push(u>>12|224,u>>6&63|128,63&u|128);return x;},fromUtf8:function(q){var u,v=-1,w=[],x=[];if(!x0.lookup){for(u=x0.alphabet.length,x0.lookup={};++v<u;)x0.lookup[x0.alphabet.charAt(v)]=v;v=-1;}for(u=q.length;++v<u&&(x[0]=x0.lookup[q.charAt(v)],x[1]=x0.lookup[q.charAt(++v)],w.push(x[0]<<2|x[1]>>4),x[2]=x0.lookup[q.charAt(++v)],64!=x[2])&&(w.push((15&x[1])<<4|x[2]>>2),x[3]=x0.lookup[q.charAt(++v)],64!=x[3]);)w.push((3&x[2])<<6|x[3]);return w;}},S1=function(q){for(var u=new Array(q.length/2),v=0;v<q.length/2;v++)u[v]=q[2*v];return u;},E1=function(q){q=q.replace(/-/g,"");var u,v=q.split(""),w=new Array(v.length);w[0]=v[6],w[1]=v[7],w[2]=v[4],w[3]=v[5],w[4]=v[2],w[5]=v[3],w[6]=v[0],w[7]=v[1],w[8]=v[10],w[9]=v[11],w[10]=v[8],w[11]=v[9],w[12]=v[14],w[13]=v[15],w[14]=v[12],w[15]=v[13];for(var x=16;32>x;x++)w[x]=v[x];return u=w.join(""),u=u.substring(0,8)+"-"+u.substring(8,12)+"-"+u.substring(12,16)+"-"+u.substring(16,20)+"-"+u.substring(20,32);},I1=function(q){return H1(V0(q));},H1=function(q){return base64js.fromByteArray(q);},V0=function(q){for(var u=q.length/2,v=new Uint8Array(u),w=0;u>w;w++){var x=q.substr(2*w,2),y=parseInt(x,16);v[w]=y;}return v;},J1=function(q){for(var u=[],v=0;v<q.length;v+=2){var w=parseInt(q.substr(v,2),16);w>128&&(w-=256),u.push(w);}return u;},Z1=function(q){return String.fromCharCode.apply(String,q);},v1=function(q){for(var u=new Uint8Array(q.length),v=0;v<q.length;v++)u[v]=q.charCodeAt(v);return u;},S0=function(q,u){for(var v,w,x=q.replace(/[^A-Za-z0-9\+\/]/g,""),y=x.length,A=u?Math.ceil((3*y+1>>2)/u)*u:3*y+1>>2,z=new Uint8Array(A),C=0,B=0,E=0;y>E;E++)if(w=3&E,C|=a2(x.charCodeAt(E))<<18-6*w,3===w||y-E===1){for(v=0;3>v&&A>B;v++,B++)z[B]=C>>>(16>>>v&24)&255;C=0;}return z;},a2=function(q){return q>64&&91>q?q-65:q>96&&123>q?q-71:q>47&&58>q?q+4:43===q?62:47===q?63:0;},j1=function(q){for(var u="",v=0,w=q,x=w.byteLength;x>v;){var y=w[v],A=(16>y?"0":"")+y.toString(16);u+=A,v++;}return u;},Z0=function(q,u,v){for(var w=new Uint8Array(v),x=0;v>x;x++)w[x]=q[u+x];return w;},W1=function(q){var u,v=[],w=[];return v[0]=q.getUint8(9),v[1]=q.getUint8(10),v[2]=q.getUint8(11),w[0]=v[0].toString(16),1===w[0].length&&(w[0]="0"+w[0]),w[1]=v[1].toString(16),1===w[1].length&&(w[1]="0"+w[1]),w[2]=v[2].toString(16),1===w[2].length&&(w[2]="0"+w[2]),u=w[0]+w[1]+w[2];},V1=function(q){return parseInt(q,16);},Y1=function(q,u){for(var v=q.toString(16);v.length<6;)v="0"+v;u.setUint8(9,parseInt(v.substring(0,2),16)),u.setUint8(10,parseInt(v.substring(2,4),16)),u.setUint8(11,parseInt(v.substring(4,6),16));},X1=function(q){return V1(W1(q));},G1=function(q,u){var v=new DataView(q.buffer);return String.fromCharCode(v.getInt8(u+0),v.getInt8(u+1),v.getInt8(u+2),v.getInt8(u+3));},u1=function(q){return G1(q,4);},K1=function(q,u){var v=new DataView(q.buffer);return v.setUint8(4,u.substr(0,1).charCodeAt(0)),v.setUint8(5,u.substr(1,1).charCodeAt(0)),v.setUint8(6,u.substr(2,1).charCodeAt(0)),v.setUint8(7,u.substr(3,1).charCodeAt(0)),q;},k1=function(q,u){var v=new DataView(q.buffer);return v.getUint32(u);},a1=function(q){return k1(q,0);},x1=function(q,u){var v=new DataView(q.buffer);return v.setUint32(0,u),q;},X0=function(q,u){for(var v,w=0;w<q.byteLength-4;w++)if(v=G1(q,w),v===u)return w-4;return -1;},Q0=function(q,u){return -1==X0(q,u)?!1:!0;},j0=function(q,u){var v=X0(q,u),w=k1(q,v);if(v>-1)return Z0(q,v,w);throw  new Exception("Could not find subbox of type "+u);},T0=function(q,u,v){for(var w=q.byteLength,x=u.byteLength,y=w+x,A=new Uint8Array(y),z=(new DataView(A.buffer),0),C=0;v>C;C++)A[z]=q[C],z++;for(var C=0;x>C;C++)A[z]=u[C],z++;for(var C=v;w>C;C++)A[z]=q[C],z++;return A=x1(A,y);},P0=function(q,u){return T0(q,u,q.byteLength);},b2=function(q,u){var v=k1(q,u),w=(q.byteLength-v,Z0(q,0,u));if(0==u)return Z0(q,u+v,q.byteLength-v);w=x1(w,w.byteLength);var x=Z0(q,u+v,q.byteLength-w.byteLength-v);return x.byteLength>0?P0(w,x):w;},W0=function(q,u){return b2(q,X0(q,u));},n0=function(q,u){var v=u1(u),w=X0(q,v);return T0(W0(q,v),u,w);},w1=function(q,u){var v=new Uint8Array(q);return x1(K1(v,u),q);},c2=function(q,u){for(var v;Q0(q,"pssh");)q=W0(q,"pssh");return v=X0(q,Q0(q,"mvhd")?"mvhd":"mfhd"),q=T0(q,u,v+k1(q,v)),CL.configs.debug&&console.log(j1(q)),q;},d2=function(q,u,v,w){if(CL.configs.debug){var x,y,A;x=(new Date).getTime();}var z=u,C=u1(z);if("moov"===C){var B,E;if(E=CL.configs.timescale[q.id],"audio"===v){var G,F,D,H,L,I,K,M,J,O,N,P,R,V,B,Q;if(CL.configs.isProtected===!0){G="AAAFPG1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAACYloAAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAM8cHNzaAAAAACaBPB5mEBChquS5lvgiF+VAAADHBwDAAABAAEAEgM8AFcAUgBNAEgARQBBAEQARQBSACAAeABtAGwAbgBzAD0AIgBoAHQAdABwADoALwAvAHMAYwBoAGUAbQBhAHMALgBtAGkAYwByAG8AcwBvAGYAdAAuAGMAbwBtAC8ARABSAE0ALwAyADAAMAA3AC8AMAAzAC8AUABsAGEAeQBSAGUAYQBkAHkASABlAGEAZABlAHIAIgAgAHYAZQByAHMAaQBvAG4APQAiADQALgAwAC4AMAAuADAAIgA+ADwARABBAFQAQQA+ADwAUABSAE8AVABFAEMAVABJAE4ARgBPAD4APABLAEUAWQBMAEUATgA+ADEANgA8AC8ASwBFAFkATABFAE4APgA8AEEATABHAEkARAA+AEEARQBTAEMAVABSADwALwBBAEwARwBJAEQAPgA8AC8AUABSAE8AVABFAEMAVABJAE4ARgBPAD4APABLAEkARAA+AGUAOAA1ACsAcgBJAG8AZwBpAGsAeQBjADYAYQB5AFEAMgBTAGsAWAA1AGcAPQA9ADwALwBLAEkARAA+ADwAQwBIAEUAQwBLAFMAVQBNAD4ASAA0AFAAYQA5ACsATgBhAG4AawBNAD0APAAvAEMASABFAEMASwBTAFUATQA+ADwATABBAF8AVQBSAEwAPgBoAHQAdABwAHMAOgAvAC8AbgBvAHQALQByAGUAYQBsAC4AYgBsAGkAbgBrAGIAbwB4AC4AbABvAGMAYQBsAC8AbABpAGMAZQBuAHMAZQA8AC8ATABBAF8AVQBSAEwAPgA8AEMAVQBTAFQATwBNAEEAVABUAFIASQBCAFUAVABFAFMAPgA8AEkASQBTAF8ARABSAE0AXwBWAEUAUgBTAEkATwBOAD4ANwAuADEALgAxADUANgA1AC4AMQA1ADwALwBJAEkAUwBfAEQAUgBNAF8AVgBFAFIAUwBJAE8ATgA+ADwALwBDAFUAUwBUAE8ATQBBAFQAVABSAEkAQgBVAFQARQBTAD4APAAvAEQAQQBUAEEAPgA8AC8AVwBSAE0ASABFAEEARABFAFIAPgAAAAAobXZleAAAACB0cmV4AAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAABZHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAQBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAmJaAAAAAAFXEAAAAAAAgaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAAAAALhtaW5mAAAAsHN0YmwAAACoc3RzZAAAAAAAAAABAAAAmGVuY2EAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAJGVzZHMAAAAAAxkAAQAEEUAVAAAAAAAAAAAAAAAFAhGQAAAAUHNpbmYAAAAMZnJtYW1wNGEAAAAUc2NobQAAAABjZW5jAAAAAAAAAChzY2hpAAAAIHRlbmMAAAABAAABCKx+znsgikyKnOmskNkpF+Y=",B=S0(G),Q=new DataView(B.buffer);for(var U=CL.manifest.keyId.replace(/-/g,""),Y=V0(U),b0=B.byteLength-16,X=0;16>X;X++)B[b0+X]=Y[X];F=CL.configs.audioInitData[q.id],O=j0(B,"enca"),N=new DataView(O.buffer),N.setUint16(24,F.channels),N.setUint16(26,F.bitsPerSample),N.setUint16(30,F.packetSize),N.setUint32(32,F.samplingRate<<16),P=S0("AAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAALKOAACyjgFgICABQaAgIABAg=="),P=T0(P,V0(CL.configs.codecPrivateData[q.id]),43),O=n0(O,P),D=j0(B,"trak"),H=j0(D,"mdia"),L=j0(H,"mdhd"),K=j0(H,"minf"),M=j0(K,"stbl"),J=j0(M,"stsd"),I=new DataView(L.buffer),I.setUint32(20,E),J=n0(J,O),M=n0(M,J),K=n0(K,M),H=n0(H,K),H=n0(H,L),D=n0(D,H),B=n0(B,D);}else G="AAABsG1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAACYloAAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAobXZleAAAACB0cmV4AAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAABFHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAALBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAmJaAAAAAAFXEAAAAAAAgaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAAAAAGhtaW5mAAAAYHN0YmwAAABYc3RzZAAAAAAAAAABAAAASG1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAJGVzZHMAAAAAAxkAAQAEEUAVAAAAAAAAAAAAAAAFAhGQ",B=S0(G),F=CL.configs.audioInitData[q.id],R=j0(B,"mp4a"),V=new DataView(R.buffer),V.setUint16(24,F.channels),V.setUint16(26,F.bitsPerSample),V.setUint16(30,F.packetSize),V.setUint32(32,F.samplingRate<<16),P=S0("AAAAJ2VzZHMAAAAAAxkAAQAEEUAVAAAAAAAAAAACUZAFAgYBAg=="),P=T0(P,V0(CL.configs.codecPrivateData[q.id]),34),R=n0(R,P),D=j0(B,"trak"),H=j0(D,"mdia"),L=j0(H,"mdhd"),K=j0(H,"minf"),M=j0(K,"stbl"),J=j0(M,"stsd"),I=new DataView(L.buffer),I.setUint32(20,E),J=n0(J,R),M=n0(M,J),K=n0(K,M),H=n0(H,K),H=n0(H,L),D=n0(D,H),B=n0(B,D);}else{var D,H,K,M,J,a0,Z,W,e0,d0,$=CL.configs.codecPrivateData[q.id],f0=$.split("00000001"),h0=f0[1],m0=f0[2],k0="AAACDW1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAACYloAAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAobXZleAAAACB0cmV4AAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAABcXRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAQ1tZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAmJaAAAAAAFXEAAAAAAAgaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAAAAAMVtaW5mAAAAvXN0YmwAAAClc3RzZAAAAAAAAAABAAAAlWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABcADQAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAA/YXZjQwFNQB7/4QAnZ2QADawspQXG7AVIMDAyAAAH0gABdwDAQAKrgAAqub+McHaEiWWAAQAFaOkJNSUAAAAQc3RzcwAAAAAAAAAA",o0=S0(k0),B=null,y0=null,u0=null,s0=null,t0=null,A0="AAAAlWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABcADQAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8=",q0=null,v0=null,r0=0;if(r0=16,q0=w1(r0,"avcC"),v0=new DataView(q0.buffer),v0.setUint8(8,1),v0.setUint8(9,77),v0.setUint8(10,64),v0.setUint8(11,30),v0.setUint8(12,255),v0.setUint8(13,225),v0.setUint16(14,h0.length/2),q0=P0(q0,V0(h0)),e0=new Uint8Array(3),d0=new DataView(e0.buffer),d0.setUint8(0,1),d0.setUint16(1,m0.length/2),q0=P0(q0,e0),q0=P0(q0,V0(m0)),s0=S0(A0),t0=new DataView(s0.buffer),t0.setUint16(32,CL.configs.repWidth[q.id]),t0.setUint16(34,CL.configs.repHeight[q.id]),s0=P0(s0,q0),CL.configs.isProtected===!0){a0="AAAAUHNpbmYAAAAMZnJtYWF2YzEAAAAUc2NobQAAAABjZW5jAAAAAAAAAChzY2hpAAAAIHRlbmMAAAABAAABCAnjZwKPM0Nspd1g/+ZnHnA=",Z=S0(a0),W=new DataView(Z.buffer);for(var U=CL.manifest.keyId.replace(/-/g,""),Y=V0(U),b0=Z.byteLength-16,X=0;16>X;X++)Z[b0+X]=Y[X];s0=P0(s0,Z),s0=K1(s0,"encv");}B=o0,D=j0(B,"trak"),H=j0(D,"mdia"),K=j0(H,"minf"),M=j0(H,"stbl"),J=j0(M,"stsd");var D0=X0(J,"avc1");J=W0(J,"avc1"),J=T0(J,s0,D0),M=n0(M,J),K=n0(K,M),H=n0(H,K),D=n0(D,H),B=n0(B,D);}var y0=j0(B,"mvhd"),u0=new DataView(y0.buffer),p0=u0.getUint8(8,1);0==p0?u0.setUint32(20,E):u0.setUint32(28,E),B=n0(B,y0),u=B,CL.configs.debug&&console.log(j1(B));}else if("moof"===C){var B0,C0,w0,z0,G0,F0,H0,g0,l0,i0,E0,L0,J0,M0,N0,b1,d1,Y0,U0,O0,l1,c1,M1,L1,o1=j0(z,"moof"),N1=j0(z,"mdat"),R0=o1,n1=0;if(w0=j0(o1,"mfhd"),z0=new DataView(w0.buffer),G0=z0.getUint32(12),g0=j0(o1,"traf"),M1=a1(g0),J0=w1(20,"tfdt"),M0=new jDataView(J0.buffer),M0.setUint8(8,1),M0.setUint8(9,0),M0.setUint8(10,0),M0.setUint8(11,0),null==w&&(w=0),M0.setUint64(12,w),g0=T0(g0,J0,X0(g0,"trun")),Q0(g0,"uuid")){var f1,A1,m1,z1=0;for(f1=new Uint8Array(g0.buffer.slice(0));Q0(f1,"uuid");)f1=W0(f1,"uuid"),z1++;for(var X=0;z1>X;X++){if(l0=j0(g0,"uuid"),i0=new jDataView(l0.buffer),A1=Z0(l0,8,16),m1=j1(A1),"a2394f525a9b4f14a2446c427c648df4"===m1)g0=P0(g0,l0);else if("d4807ef2ca3946958e5426cb9e46a79f"===m1){var p0,I0,C1,q1,r1,K0,B1;p0=i0.getUint8(24),I0=[],I0[0]=i0.getUint8(25),I0[1]=i0.getUint8(26),I0[2]=i0.getUint8(27),C1=i0.getUint8(28),K0=29;for(var X=0;C1>X;X++)1===p0?(q1=parseInt(i0.getUint64(K0).toString()),r1=parseInt(i0.getUint64(K0+8).toString()),K0+=16):(q1=parseInt(i0.getUint32(K0).toString()),r1=parseInt(i0.getUint32(K0+4).toString()),K0+=8),B1=CL.configs.lookAheadFragments[v],B1.push({absoluteTime:q1,absoluteDuration:r1});}g0=W0(g0,"uuid");}}if(CL.configs.isProtected&&!Q0(g0,"saiz")&&Q0(g0,"uuid")){l0=j0(g0,"uuid"),i0=new DataView(l0.buffer),L0=a1(l0)-32,E0=l0.subarray(32);var $b,p1,K0,t1,R1,h1,g1=i0.getUint32(28),I0=[3];I0[0]=i0.getUint8(25),I0[1]=i0.getUint8(26),I0[2]=i0.getUint8(27),R1=a1(l0),$b=8,K0=32,t1=17,h1=[g1];var Q1=17+g1;d1=w1(Q1,"saiz"),Y0=new DataView(d1.buffer),Y0.setUint8(13,0),Y0.setUint32(13,g1);for(var X=0;g1>X;X++)K0+=8,0==I0[2]?h1[X]=8:(p1=i0.getUint16(K0),K0+=2,K0+=6*p1,h1[X]=6*p1+10),Y0.setUint8(t1,h1[X]),t1+=1;g0=P0(g0,d1);}if(CL.configs.isProtected&&!Q0(g0,"saio")){var P1="AAAAFHNhaW8AAAAAAAAAAQAAAsA=",N0=S0(P1);b1=new DataView(N0.buffer),g0=P0(g0,N0);}L0=0,L1=0,Q0(g0,"uuid")&&(l0=j0(g0,"uuid"),L0=a1(l0)-32,E0=l0.subarray(32),g0=W0(g0,"uuid")),U0=j0(g0,"trun"),O0=new DataView(U0.buffer);var D1={dataOffsetPresent:1,firstSampleFlagsPresent:4,sampleDurationPresent:256,sampleSizePresent:512,sampleFlagsPresent:1024,sampleCompositionTimeOffsetsPresent:2048},I0=X1(O0),s1=0;I0!=(I0|D1.dataOffsetPresent)&&(s1=4,U0=T0(U0,new Uint8Array(s1),16),O0=new DataView(U0.buffer)),I0|=D1.dataOffsetPresent,Y1(I0,O0),R0=n0(R0,g0),n1=a1(R0)+s1,l1=O0.getUint32(16),c1=a1(R0)+8,c1=n1+8+L0,O0.setUint32(16,c1),g0=n0(g0,U0),Q0(g0,"saio")&&(N0=j0(g0,"saio"),b1=new DataView(N0.buffer),b1.setUint32(16,n1+8),g0=n0(g0,N0)),F0=j0(g0,"tfhd"),H0=new DataView(F0.buffer),H0.setUint32(12,1),g0=n0(g0,F0),R0=n0(R0,g0),B0=N1,CL.configs.isProtected===!0&&void 0!=E0&&(B0=T0(B0,E0,8));var U1=R0.byteLength+B0.byteLength,i1=0;C0=new Uint8Array(U1);for(var X=0;X<R0.byteLength;X++)C0[i1]=R0[X],i1++;for(var X=0;X<B0.byteLength;X++)C0[i1]=B0[X],i1++;u=C0;}return CL.configs.debug&&(y=(new Date).getTime(),A=y-x,console.log("CL: Parsing of "+C+" took "+A+" ms")),u;},e2=function(q){var u,v,w,x,y,A,z,C,B;return u=j0(q,"moov"),B=j0(u,"schi"),Q0(B,"uuid")?(B=W0(B,"uuid"),j0(u,"sinf"),C=n0(j0(u,"sinf"),B),z=n0(j0(u,"encv"),C),A=n0(j0(u,"stsd"),z),y=n0(j0(u,"stbl"),A),x=n0(j0(u,"minf"),y),w=n0(j0(u,"mdia"),x),v=n0(j0(u,"trak"),w),u=n0(u,v)):q;},g2=function(q){var u=null;Array.isArray(q)&&q.length>0&&(q=q[0]);var v=q["cenc:default_KID"]||q.KID;void 0==CL.manifest.keyId||null==CL.manifest.keyId?CL.manifest.keyId=v:v=CL.manifest.keyId;var w,x;if("auto"===CL.manifest.drm?CL.configs.isChromeAndroid===!0||CL.configs.isChromeDesktop===!0||CL.configs.isChromecast===!0?w=!0:CL.configs.isIE11===!0&&(x=!0):"com.widevine.alpha"===CL.manifest.drm?w=!0:x=!0,w===!0){var y=J1(v.replace(/-/g,"")),A=dcodeIO.ProtoBuf,z={name:"WidevineCencHeader",fields:[{rule:"optional",options:{},type:"Algorithm",name:"algorithm",id:1},{rule:"repeated",options:{},type:"bytes",name:"key_id",id:2},{rule:"optional",options:{},type:"string",name:"provider",id:3},{rule:"optional",options:{},type:"bytes",name:"content_id",id:4},{rule:"optional",options:{},type:"string",name:"track_type",id:5},{rule:"optional",options:{},type:"string",name:"policy",id:6}],enums:[{name:"Algorithm",values:[{name:"UNENCRYPTED",id:0},{name:"AESCTR",id:1}],options:{}}],messages:[],options:{}},C=A.newBuilder();C.define("widevine"),C.create([z]),C.reset();var B=C.build("widevine"),E=B.WidevineCencHeader,G=new E({algorithm:"AESCTR",provider:CL.manifest.widevineHeader.provider,content_id:CL.manifest.widevineHeader.contentId,track_type:CL.manifest.widevineHeader.trackType,policy:CL.manifest.widevineHeader.policy,key_id:[y]}),F=v1(G.encode().toBinary()),D=0,H=0,L=0,I=new Uint8Array([112,115,115,104,0,0,0,0]),K=new Uint8Array([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237]),M=null,J=null;H=F.length,L=4+I.length+K.length+4+H,M=new ArrayBuffer(L),u=new Uint8Array(M),J=new DataView(M),J.setUint32(D,L),D+=4,u.set(I,D),D+=I.length,u.set(K,D),D+=K.length,J.setUint32(D,H),D+=4,u.set(F,D),D+=H;}if(x===!0){var y=E1(v).replace(/-/g,""),O=I1(y),D=0,N=0,L=0,I=new Uint8Array([112,115,115,104,0,0,0,0]),P=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),R=null,V=null,M=null,u=null,J=null,Q=CL.manifest.playreadyHeader.laUrl,U=CL.manifest.playreadyHeader.luiUrl;R=v1('<WRMHEADER xmlns="http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader" version="4.0.0.0"><DATA><PROTECTINFO><KEYLEN>16</KEYLEN><ALGID>AESCTR</ALGID></PROTECTINFO><KID>'+O+"</KID><LA_URL>"+Q+"</LA_URL><LUI_URL>"+U+"</LUI_URL></DATA></WRMHEADER>"),V=F1(R),N=V.length,L=4+I.length+P.length+4+N,M=new ArrayBuffer(L),u=new Uint8Array(M),J=new DataView(M),J.setUint32(D,L),D+=4,u.set(I,D),D+=I.length,u.set(P,D),D+=P.length,J.setUint32(D,N),D+=4,u.set(V,D),D+=N;}return u;},f2=function(q){var u,v,w,x,y,A;x="^|^",y=CryptoJS.enc.Hex.parse("2F42165BB36FEAE11F95F974FE27A614"),A=CryptoJS.enc.Hex.parse("C7D567C26778E6DA5BAA7EF470F1BCD5"),u=(""+Math.random()).substring(0,10),v=q.customData.merchant+x+q.customData.userId+x+u,w=x0.encode(CryptoJS.AES.encrypt(v,y,{iv:A}).toString());},y1=function(x,y){var A=function(q,u,v){for(var w=[];q.length>0&&u.length>0;)w.push(q[0][v]<u[0][v]?q.shift():u.shift());return w=w.concat(q,u);},z=x.length;if(2>z)return x;var C=Math.ceil(z/2);return A(y1(x.slice(0,C),y),y1(x.slice(C),y),y);};return {fillZeros:F1,removeZeros:S1,toMsGuid:E1,hexStringToBase64:I1,arrToBase64:H1,hexStringToByteArray:V0,hexToArray:J1,arrayToString:Z1,stringToArray:v1,byteArrayToHexString:j1,base64DecToArr:S0,parseSmoothStreamingFragment:d2,injectPSSHBox:c2,filterUUIDBox:e2,deleteSubBoxByType:W0,getSubBox:j0,replaceBox:n0,appendBox:P0,getBoxType:u1,B64Tools:x0,supportsMSE:T1,getSubArray:Z0,generatePSSHBox:g2,sdfglksdfgkl:f2,fastSort:y1};},castLabsDashJS.classes.Utils.prototype={constructor:castLabsDashJS.classes.Utils},function(M){function J(F){function D(q,u,v){if("undefined"==typeof q&&(q=D.DEFAULT_CAPACITY),"undefined"==typeof u&&(u=D.DEFAULT_ENDIAN),"undefined"==typeof v&&(v=D.DEFAULT_NOASSERT),!v){if(q|=0,0>q)throw  new RangeError("Illegal capacity: 0 <= "+q);if("boolean"!=typeof u)throw  new TypeError("Illegal littleEndian: Not a boolean");if("boolean"!=typeof v)throw  new TypeError("Illegal noAssert: Not a boolean");}this.buffer=0===q?H:new ArrayBuffer(q),this.view=0===q?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=q,this.littleEndian="undefined"!=typeof u?!!u:!1,this.noAssert=!!v;}D.VERSION="3.1.0",D.LITTLE_ENDIAN=!0,D.BIG_ENDIAN=!1,D.DEFAULT_CAPACITY=16,D.DEFAULT_ENDIAN=D.BIG_ENDIAN,D.DEFAULT_NOASSERT=!1,D.Long=F||null;var H=new ArrayBuffer(0);D.allocate=function(q,u,v){return new D(q,u,v);},D.concat=function(q,u,v,w){("boolean"==typeof u||"string"!=typeof u)&&(w=v,v=u,u=void 0);for(var x,y=0,A=0,z=q.length;z>A;++A)D.isByteBuffer(q[A])||(q[A]=D.wrap(q[A],u)),x=q[A].limit-q[A].offset,x>0&&(y+=x);if(0===y)return new D(0,v,w);for(u=new D(y,v,w),w=new Uint8Array(u.buffer),A=0;z>A;)v=q[A++],x=v.limit-v.offset,0>=x||(w.set(new Uint8Array(v.buffer).subarray(v.offset,v.limit),u.offset),u.offset+=x);return u.limit=u.offset,u.offset=0,u;},D.isByteBuffer=function(q){return q&&q instanceof D;},D.type=function(){return ArrayBuffer;},D.wrap=function(q,u,v,w){if("string"!=typeof u&&(w=v,v=u,u=void 0),"string"==typeof q)switch("undefined"==typeof u&&(u="utf8"),u){case "base64":return D.fromBase64(q,v);case "hex":return D.fromHex(q,v);case "binary":return D.fromBinary(q,v);case "utf8":return D.fromUTF8(q,v);case "debug":return D.fromDebug(q,v);default:throw  new TypeError("Unsupported encoding: "+u);}if(null===q||"object"!=typeof q)throw  new TypeError("Illegal buffer: null or non-object");if(D.isByteBuffer(q))return u=D.prototype.clone.call(q),u.markedOffset=-1,u;if(q instanceof Uint8Array)u=new D(0,v,w),0<q.length&&(u.buffer=q.buffer,u.offset=q.byteOffset,u.limit=q.byteOffset+q.length,u.view=0<q.length?new DataView(q.buffer):null);else if(q instanceof ArrayBuffer)u=new D(0,v,w),0<q.byteLength&&(u.buffer=q,u.offset=0,u.limit=q.byteLength,u.view=0<q.byteLength?new DataView(q):null);else{if("[object Array]"!==Object.prototype.toString.call(q))throw  new TypeError("Illegal buffer");for(u=new D(q.length,v,w),u.limit=q.length,i=0;i<q.length;++i)u.view.setUint8(i,q[i]);}return u;},D.prototype.writeInt8=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q|=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=1;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setInt8(u-1,q),v&&(this.offset+=1),this;},D.prototype.writeByte=D.prototype.writeInt8,D.prototype.readInt8=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+1>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+1) <= "+this.buffer.byteLength);}return q=this.view.getInt8(q),u&&(this.offset+=1),q;},D.prototype.readByte=D.prototype.readInt8,D.prototype.writeUint8=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=1;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setUint8(u-1,q),v&&(this.offset+=1),this;},D.prototype.readUint8=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+1>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+1) <= "+this.buffer.byteLength);}return q=this.view.getUint8(q),u&&(this.offset+=1),q;},D.prototype.writeInt16=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q|=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=2;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setInt16(u-2,q,this.littleEndian),v&&(this.offset+=2),this;},D.prototype.writeShort=D.prototype.writeInt16,D.prototype.readInt16=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+2>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+2) <= "+this.buffer.byteLength);}return q=this.view.getInt16(q,this.littleEndian),u&&(this.offset+=2),q;},D.prototype.readShort=D.prototype.readInt16,D.prototype.writeUint16=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=2;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setUint16(u-2,q,this.littleEndian),v&&(this.offset+=2),this;},D.prototype.readUint16=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+2>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+2) <= "+this.buffer.byteLength);}return q=this.view.getUint16(q,this.littleEndian),u&&(this.offset+=2),q;},D.prototype.writeInt32=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q|=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=4;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setInt32(u-4,q,this.littleEndian),v&&(this.offset+=4),this;},D.prototype.writeInt=D.prototype.writeInt32,D.prototype.readInt32=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+4>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+4) <= "+this.buffer.byteLength);}return q=this.view.getInt32(q,this.littleEndian),u&&(this.offset+=4),q;},D.prototype.readInt=D.prototype.readInt32,D.prototype.writeUint32=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=4;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setUint32(u-4,q,this.littleEndian),v&&(this.offset+=4),this;},D.prototype.readUint32=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+4>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+4) <= "+this.buffer.byteLength);}return q=this.view.getUint32(q,this.littleEndian),u&&(this.offset+=4),q;},F&&(D.prototype.writeInt64=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"==typeof q)q=F.fromNumber(q);else if(!(q&&q instanceof F))throw  new TypeError("Illegal value: "+q+" (not an integer or Long)");if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}"number"==typeof q&&(q=F.fromNumber(q)),u+=8;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),u-=8,this.littleEndian?(this.view.setInt32(u,q.low,!0),this.view.setInt32(u+4,q.high,!0)):(this.view.setInt32(u,q.high,!1),this.view.setInt32(u+4,q.low,!1)),v&&(this.offset+=8),this;},D.prototype.writeLong=D.prototype.writeInt64,D.prototype.readInt64=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+8>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+8) <= "+this.buffer.byteLength);}return q=this.littleEndian?new F(this.view.getInt32(q,!0),this.view.getInt32(q+4,!0),!1):new F(this.view.getInt32(q+4,!1),this.view.getInt32(q,!1),!1),u&&(this.offset+=8),q;},D.prototype.readLong=D.prototype.readInt64,D.prototype.writeUint64=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"==typeof q)q=F.fromNumber(q);else if(!(q&&q instanceof F))throw  new TypeError("Illegal value: "+q+" (not an integer or Long)");if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}"number"==typeof q&&(q=F.fromNumber(q)),u+=8;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),u-=8,this.littleEndian?(this.view.setInt32(u,q.low,!0),this.view.setInt32(u+4,q.high,!0)):(this.view.setInt32(u,q.high,!1),this.view.setInt32(u+4,q.low,!1)),v&&(this.offset+=8),this;},D.prototype.readUint64=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+8>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+8) <= "+this.buffer.byteLength);}return q=this.littleEndian?new F(this.view.getInt32(q,!0),this.view.getInt32(q+4,!0),!0):new F(this.view.getInt32(q+4,!1),this.view.getInt32(q,!1),!0),u&&(this.offset+=8),q;}),D.prototype.writeFloat32=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q)throw  new TypeError("Illegal value: "+q+" (not a number)");if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=4;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setFloat32(u-4,q,this.littleEndian),v&&(this.offset+=4),this;},D.prototype.writeFloat=D.prototype.writeFloat32,D.prototype.readFloat32=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+4>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+4) <= "+this.buffer.byteLength);}return q=this.view.getFloat32(q,this.littleEndian),u&&(this.offset+=4),q;},D.prototype.readFloat=D.prototype.readFloat32,D.prototype.writeFloat64=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q)throw  new TypeError("Illegal value: "+q+" (not a number)");if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}u+=8;var w=this.buffer.byteLength;return u>w&&this.resize((w*=2)>u?w:u),this.view.setFloat64(u-8,q,this.littleEndian),v&&(this.offset+=8),this;},D.prototype.writeDouble=D.prototype.writeFloat64,D.prototype.readFloat64=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+8>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+8) <= "+this.buffer.byteLength);}return q=this.view.getFloat64(q,this.littleEndian),u&&(this.offset+=8),q;},D.prototype.readDouble=D.prototype.readFloat64,D.MAX_VARINT32_BYTES=5,D.calculateVarint32=function(q){return q>>>=0,128>q?1:16384>q?2:2097152>q?3:268435456>q?4:5;},D.zigZagEncode32=function(q){return ((q|=0)<<1^q>>31)>>>0;},D.zigZagDecode32=function(q){return q>>>1^-(1&q)|0;},D.prototype.writeVarint32=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q|=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}var w=D.calculateVarint32(q);u+=w;var x=this.buffer.byteLength;return u>x&&this.resize((x*=2)>u?x:u),u-=w,this.view.setUint8(u,w=128|q),q>>>=0,q>=128?(w=q>>7|128,this.view.setUint8(u+1,w),q>=16384?(w=q>>14|128,this.view.setUint8(u+2,w),q>=2097152?(w=q>>21|128,this.view.setUint8(u+3,w),q>=268435456?(this.view.setUint8(u+4,q>>28&15),w=5):(this.view.setUint8(u+3,127&w),w=4)):(this.view.setUint8(u+2,127&w),w=3)):(this.view.setUint8(u+1,127&w),w=2)):(this.view.setUint8(u,127&w),w=1),v?(this.offset+=w,this):w;},D.prototype.writeVarint32ZigZag=function(q,u){return this.writeVarint32(D.zigZagEncode32(q),u);},D.prototype.readVarint32=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+1>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+1) <= "+this.buffer.byteLength);}var v,w=0,x=0;do v=this.view.getUint8(q+w),5>w&&(x|=(127&v)<<7*w>>>0),++w;while(128===(128&v));return x|=0,u?(this.offset+=w,x):{value:x,length:w};},D.prototype.readVarint32ZigZag=function(q){return q=this.readVarint32(q),"object"==typeof q?q.value=D.zigZagDecode32(q.value):q=D.zigZagDecode32(q),q;},F&&(D.MAX_VARINT64_BYTES=10,D.calculateVarint64=function(q){"number"==typeof q&&(q=F.fromNumber(q));var u=q.toInt()>>>0,v=q.shiftRightUnsigned(28).toInt()>>>0;return q=q.shiftRightUnsigned(56).toInt()>>>0,0==q?0==v?16384>u?128>u?1:2:2097152>u?3:4:16384>v?128>v?5:6:2097152>v?7:8:128>q?9:10;},D.zigZagEncode64=function(q){return "number"==typeof q?q=F.fromNumber(q,!1):!1!==q.unsigned&&(q=q.toSigned()),q.shiftLeft(1).xor(q.shiftRight(63)).toUnsigned();},D.zigZagDecode64=function(q){return "number"==typeof q?q=F.fromNumber(q,!1):!1!==q.unsigned&&(q=q.toSigned()),q.shiftRightUnsigned(1).xor(q.and(F.ONE).toSigned().negate()).toSigned();},D.prototype.writeVarint64=function(q,u){var v="undefined"==typeof u;if(v&&(u=this.offset),!this.noAssert){if("number"==typeof q)q=F.fromNumber(q);else if(!(q&&q instanceof F))throw  new TypeError("Illegal value: "+q+" (not an integer or Long)");if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength);}"number"==typeof q?q=F.fromNumber(q,!1):!1!==q.unsigned&&(q=q.toSigned());var w=D.calculateVarint64(q),x=q.toInt()>>>0,y=q.shiftRightUnsigned(28).toInt()>>>0,A=q.shiftRightUnsigned(56).toInt()>>>0;u+=w;var z=this.buffer.byteLength;switch(u>z&&this.resize((z*=2)>u?z:u),u-=w,w){case 10:this.view.setUint8(u+9,A>>>7&1);case 9:this.view.setUint8(u+8,9!==w?128|A:127&A);case 8:this.view.setUint8(u+7,8!==w?y>>>21|128:y>>>21&127);case 7:this.view.setUint8(u+6,7!==w?y>>>14|128:y>>>14&127);case 6:this.view.setUint8(u+5,6!==w?y>>>7|128:y>>>7&127);case 5:this.view.setUint8(u+4,5!==w?128|y:127&y);case 4:this.view.setUint8(u+3,4!==w?x>>>21|128:x>>>21&127);case 3:this.view.setUint8(u+2,3!==w?x>>>14|128:x>>>14&127);case 2:this.view.setUint8(u+1,2!==w?x>>>7|128:x>>>7&127);case 1:this.view.setUint8(u,1!==w?128|x:127&x);}return v?(this.offset+=w,this):w;},D.prototype.writeVarint64ZigZag=function(q,u){return this.writeVarint64(D.zigZagEncode64(q),u);},D.prototype.readVarint64=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+1>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+1) <= "+this.buffer.byteLength);}var v=q,w=0,x=0,y=0,A=0,A=this.view.getUint8(q++),w=127&A;if(128&A&&(A=this.view.getUint8(q++),w|=(127&A)<<7,128&A&&(A=this.view.getUint8(q++),w|=(127&A)<<14,128&A&&(A=this.view.getUint8(q++),w|=(127&A)<<21,128&A&&(A=this.view.getUint8(q++),x=127&A,128&A&&(A=this.view.getUint8(q++),x|=(127&A)<<7,128&A&&(A=this.view.getUint8(q++),x|=(127&A)<<14,128&A&&(A=this.view.getUint8(q++),x|=(127&A)<<21,128&A&&(A=this.view.getUint8(q++),y=127&A,128&A&&(A=this.view.getUint8(q++),y|=(127&A)<<7,128&A))))))))))throw Error("Data must be corrupt: Buffer overrun");return w=F.from28Bits(w,x,y,!1),u?(this.offset=q,w):{value:w,length:q-v};},D.prototype.readVarint64ZigZag=function(q){return (q=this.readVarint64(q))&&q.value instanceof F?q.value=D.zigZagDecode64(q.value):q=D.zigZagDecode64(q),q;}),D.prototype.writeCString=function(u,v){var w="undefined"==typeof v;w&&(v=this.offset);var x,y=u.length;if(!this.noAssert){if("string"!=typeof u)throw  new TypeError("Illegal str: Not a string");for(x=0;y>x;++x)if(0===u.charCodeAt(x))throw  new RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof v||0!==v%1)throw  new TypeError("Illegal offset: "+v+" (not an integer)");if(v>>>=0,0>v||v+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+v+" (+0) <= "+this.buffer.byteLength);}x=v,y=I.b(I.a(u))[1],v+=y+1;var A=this.buffer.byteLength;return v>A&&this.resize((A*=2)>v?A:v),v-=y+1,I.e(I.a(u),function(q){this.view.setUint8(v++,q);}.bind(this)),this.view.setUint8(v++,0),w?(this.offset=v-x,this):y;},D.prototype.readCString=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+1>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+1) <= "+this.buffer.byteLength);}var v,w=q,x=-1;return I.d(function(){if(0===x)return null;if(q>=this.limit)throw RangeError("Illegal range: Truncated data, "+q+" < "+this.limit);return 0===(x=this.view.getUint8(q++))?null:x;}.bind(this),v=I.c(),!0),u?(this.offset=q,v()):{string:v(),length:q-w};},D.prototype.writeIString=function(u,v){var w="undefined"==typeof v;if(w&&(v=this.offset),!this.noAssert){if("string"!=typeof u)throw  new TypeError("Illegal str: Not a string");if("number"!=typeof v||0!==v%1)throw  new TypeError("Illegal offset: "+v+" (not an integer)");if(v>>>=0,0>v||v+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+v+" (+0) <= "+this.buffer.byteLength);}var x,y=v;x=I.b(I.a(u),this.noAssert)[1],v+=4+x;var A=this.buffer.byteLength;if(v>A&&this.resize((A*=2)>v?A:v),v-=4+x,this.view.setUint32(v,x,this.littleEndian),v+=4,I.e(I.a(u),function(q){this.view.setUint8(v++,q);}.bind(this)),v!==y+4+x)throw  new RangeError("Illegal range: Truncated data, "+v+" == "+(v+4+x));return w?(this.offset=v,this):v-y;},D.prototype.readIString=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+4>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+4) <= "+this.buffer.byteLength);}var v=0,w=q,v=this.view.getUint32(q,this.littleEndian);q+=4;var x=q+v;return I.d(function(){return x>q?this.view.getUint8(q++):null;}.bind(this),v=I.c(),this.noAssert),v=v(),u?(this.offset=q,v):{string:v,length:q-w};},D.METRICS_CHARS="c",D.METRICS_BYTES="b",D.prototype.writeUTF8String=function(u,v){var w="undefined"==typeof v;if(w&&(v=this.offset),!this.noAssert){if("number"!=typeof v||0!==v%1)throw  new TypeError("Illegal offset: "+v+" (not an integer)");if(v>>>=0,0>v||v+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+v+" (+0) <= "+this.buffer.byteLength);}var x,y=v;x=I.b(I.a(u))[1],v+=x;var A=this.buffer.byteLength;return v>A&&this.resize((A*=2)>v?A:v),v-=x,I.e(I.a(u),function(q){this.view.setUint8(v++,q);}.bind(this)),w?(this.offset=v,this):v-y;},D.prototype.writeString=D.prototype.writeUTF8String,D.calculateUTF8Chars=function(q){return I.b(I.a(q))[0];},D.calculateUTF8Bytes=function(q){return I.b(I.a(q))[1];},D.prototype.readUTF8String=function(u,v,w){"number"==typeof v&&(w=v,v=void 0);var x="undefined"==typeof w;if(x&&(w=this.offset),"undefined"==typeof v&&(v=D.METRICS_CHARS),!this.noAssert){if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal length: "+u+" (not an integer)");if(u|=0,"number"!=typeof w||0!==w%1)throw  new TypeError("Illegal offset: "+w+" (not an integer)");if(w>>>=0,0>w||w+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+w+" (+0) <= "+this.buffer.byteLength);}var y,A=0,z=w;if(v===D.METRICS_CHARS){if(y=I.c(),I.i(function(){return u>A&&w<this.limit?this.view.getUint8(w++):null;}.bind(this),function(q){++A,I.g(q,y);}.bind(this)),A!==u)throw  new RangeError("Illegal range: Truncated data, "+A+" == "+u);return x?(this.offset=w,y()):{string:y(),length:w-z};}if(v===D.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof w||0!==w%1)throw  new TypeError("Illegal offset: "+w+" (not an integer)");if(w>>>=0,0>w||w+u>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+w+" (+"+u+") <= "+this.buffer.byteLength);}var C=w+u;if(I.d(function(){return C>w?this.view.getUint8(w++):null;}.bind(this),y=I.c(),this.noAssert),w!==C)throw  new RangeError("Illegal range: Truncated data, "+w+" == "+C);return x?(this.offset=w,y()):{string:y(),length:w-z};}throw  new TypeError("Unsupported metrics: "+v);},D.prototype.readString=D.prototype.readUTF8String,D.prototype.writeVString=function(u,v){var w="undefined"==typeof v;if(w&&(v=this.offset),!this.noAssert){if("string"!=typeof u)throw  new TypeError("Illegal str: Not a string");if("number"!=typeof v||0!==v%1)throw  new TypeError("Illegal offset: "+v+" (not an integer)");if(v>>>=0,0>v||v+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+v+" (+0) <= "+this.buffer.byteLength);}var x,y,A=v;x=I.b(I.a(u),this.noAssert)[1],y=D.calculateVarint32(x),v+=y+x;var z=this.buffer.byteLength;if(v>z&&this.resize((z*=2)>v?z:v),v-=y+x,v+=this.writeVarint32(x,v),I.e(I.a(u),function(q){this.view.setUint8(v++,q);}.bind(this)),v!==A+x+y)throw  new RangeError("Illegal range: Truncated data, "+v+" == "+(v+x+y));return w?(this.offset=v,this):v-A;},D.prototype.readVString=function(q){var u="undefined"==typeof q;if(u&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+1>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+1) <= "+this.buffer.byteLength);}var v=this.readVarint32(q),w=q;q+=v.length;var v=v.value,x=q+v,v=I.c();return I.d(function(){return x>q?this.view.getUint8(q++):null;}.bind(this),v,this.noAssert),v=v(),u?(this.offset=q,v):{string:v,length:q-w};},D.prototype.append=function(q,u,v){("number"==typeof u||"string"!=typeof u)&&(v=u,u=void 0);var w="undefined"==typeof v;if(w&&(v=this.offset),!this.noAssert){if("number"!=typeof v||0!==v%1)throw  new TypeError("Illegal offset: "+v+" (not an integer)");if(v>>>=0,0>v||v+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+v+" (+0) <= "+this.buffer.byteLength);}if(q instanceof D||(q=D.wrap(q,u)),u=q.limit-q.offset,0>=u)return this;v+=u;var x=this.buffer.byteLength;return v>x&&this.resize((x*=2)>v?x:v),new Uint8Array(this.buffer,v-u).set(new Uint8Array(q.buffer).subarray(q.offset,q.limit)),q.offset+=u,w&&(this.offset+=u),this;},D.prototype.appendTo=function(q,u){return q.append(this,u),this;},D.prototype.assert=function(q){return this.noAssert=!q,this;},D.prototype.capacity=function(){return this.buffer.byteLength;},D.prototype.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this;},D.prototype.clone=function(q){var u=new D(0,this.littleEndian,this.noAssert);return q?(q=new ArrayBuffer(this.buffer.byteLength),new Uint8Array(q).set(this.buffer),u.buffer=q,u.view=new DataView(q)):(u.buffer=this.buffer,u.view=this.view),u.offset=this.offset,u.markedOffset=this.markedOffset,u.limit=this.limit,u;},D.prototype.compact=function(q,u){if("undefined"==typeof q&&(q=this.offset),"undefined"==typeof u&&(u=this.limit),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}if(0===q&&u===this.buffer.byteLength)return this;var v=u-q;if(0===v)return this.buffer=H,this.view=null,0<=this.markedOffset&&(this.markedOffset-=q),this.limit=this.offset=0,this;var w=new ArrayBuffer(v);return new Uint8Array(w).set(new Uint8Array(this.buffer).subarray(q,u)),this.buffer=w,this.view=new DataView(w),0<=this.markedOffset&&(this.markedOffset-=q),this.offset=0,this.limit=v,this;},D.prototype.copy=function(q,u){if("undefined"==typeof q&&(q=this.offset),"undefined"==typeof u&&(u=this.limit),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}if(q===u)return new D(0,this.littleEndian,this.noAssert);var v=u-q,w=new D(v,this.littleEndian,this.noAssert);return w.offset=0,w.limit=v,0<=w.markedOffset&&(w.markedOffset-=q),this.copyTo(w,0,q,u),w;},D.prototype.copyTo=function(q,u,v,w){var x,y;if(!this.noAssert&&!D.isByteBuffer(q))throw  new TypeError("Illegal target: Not a ByteBuffer");if(u=(y="undefined"==typeof u)?q.offset:0|u,v=(x="undefined"==typeof v)?this.offset:0|v,w="undefined"==typeof w?this.limit:0|w,0>u||u>q.buffer.byteLength)throw  new RangeError("Illegal target range: 0 <= "+u+" <= "+q.buffer.byteLength);if(0>v||w>this.buffer.byteLength)throw  new RangeError("Illegal source range: 0 <= "+v+" <= "+this.buffer.byteLength);var A=w-v;return 0===A?q:(q.ensureCapacity(u+A),new Uint8Array(q.buffer).set(new Uint8Array(this.buffer).subarray(v,w),u),x&&(this.offset+=A),y&&(q.offset+=A),this);},D.prototype.ensureCapacity=function(q){var u=this.buffer.byteLength;return q>u?this.resize((u*=2)>q?u:q):this;},D.prototype.fill=function(q,u,v){var w="undefined"==typeof u;if(w&&(u=this.offset),"string"==typeof q&&0<q.length&&(q=q.charCodeAt(0)),"undefined"==typeof u&&(u=this.offset),"undefined"==typeof v&&(v=this.limit),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal value: "+q+" (not an integer)");if(q|=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal begin: Not an integer");if(u>>>=0,"number"!=typeof v||0!==v%1)throw  new TypeError("Illegal end: Not an integer");if(v>>>=0,0>u||u>v||v>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+u+" <= "+v+" <= "+this.buffer.byteLength);}if(u>=v)return this;for(;v>u;)this.view.setUint8(u++,q);return w&&(this.offset=u),this;},D.prototype.flip=function(){return this.limit=this.offset,this.offset=0,this;},D.prototype.mark=function(q){if(q="undefined"==typeof q?this.offset:q,!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+q+" (+0) <= "+this.buffer.byteLength);}return this.markedOffset=q,this;},D.prototype.order=function(q){if(!this.noAssert&&"boolean"!=typeof q)throw  new TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!q,this;},D.prototype.LE=function(q){return this.littleEndian="undefined"!=typeof q?!!q:!0,this;},D.prototype.BE=function(q){return this.littleEndian="undefined"!=typeof q?!q:!1,this;},D.prototype.prepend=function(q,u,v){("number"==typeof u||"string"!=typeof u)&&(v=u,u=void 0);var w="undefined"==typeof v;if(w&&(v=this.offset),!this.noAssert){if("number"!=typeof v||0!==v%1)throw  new TypeError("Illegal offset: "+v+" (not an integer)");if(v>>>=0,0>v||v+0>this.buffer.byteLength)throw  new RangeError("Illegal offset: 0 <= "+v+" (+0) <= "+this.buffer.byteLength);}if(q instanceof D||(q=D.wrap(q,u)),u=q.limit-q.offset,0>=u)return this;var x,y=u-v;if(y>0){var A=new ArrayBuffer(this.buffer.byteLength+y);x=new Uint8Array(A),x.set(new Uint8Array(this.buffer).subarray(v,this.buffer.byteLength),u),this.buffer=A,this.view=new DataView(A),this.offset+=y,0<=this.markedOffset&&(this.markedOffset+=y),this.limit+=y,v+=y;}else x=new Uint8Array(this.buffer);return x.set(new Uint8Array(q.buffer).subarray(q.offset,q.limit),v-u),q.offset=q.limit,w&&(this.offset-=u),this;},D.prototype.prependTo=function(q,u){return q.prepend(this,u),this;},D.prototype.printDebug=function(q){"function"!=typeof q&&(q=console.log.bind(console)),q(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0));},D.prototype.remaining=function(){return this.limit-this.offset;},D.prototype.reset=function(){return 0<=this.markedOffset?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this;},D.prototype.resize=function(q){if(!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal capacity: "+q+" (not an integer)");if(q|=0,0>q)throw  new RangeError("Illegal capacity: 0 <= "+q);}return this.buffer.byteLength<q&&(q=new ArrayBuffer(q),new Uint8Array(q).set(new Uint8Array(this.buffer)),this.buffer=q,this.view=new DataView(q)),this;},D.prototype.reverse=function(q,u){if("undefined"==typeof q&&(q=this.offset),"undefined"==typeof u&&(u=this.limit),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}return q===u?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(q,u)),this.view=new DataView(this.buffer),this);},D.prototype.skip=function(q){if(!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal length: "+q+" (not an integer)");q|=0;}var u=this.offset+q;if(!this.noAssert&&(0>u||u>this.buffer.byteLength))throw  new RangeError("Illegal length: 0 <= "+this.offset+" + "+q+" <= "+this.buffer.byteLength);return this.offset=u,this;},D.prototype.slice=function(q,u){if("undefined"==typeof q&&(q=this.offset),"undefined"==typeof u&&(u=this.limit),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}var v=this.clone();return v.offset=q,v.limit=u,v;},D.prototype.toBuffer=function(q){var u=this.offset,v=this.limit;if(u>v)var w=u,u=v,v=w;if(!this.noAssert){if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal offset: Not an integer");if(u>>>=0,"number"!=typeof v||0!==v%1)throw  new TypeError("Illegal limit: Not an integer");if(v>>>=0,0>u||u>v||v>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+u+" <= "+v+" <= "+this.buffer.byteLength);}return q||0!==u||v!==this.buffer.byteLength?u===v?H:(q=new ArrayBuffer(v-u),new Uint8Array(q).set(new Uint8Array(this.buffer).subarray(u,v),0),q):this.buffer;},D.prototype.toArrayBuffer=D.prototype.toBuffer,D.prototype.toString=function(q){if("undefined"==typeof q)return "ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch(q){case "utf8":return this.toUTF8();case "base64":return this.toBase64();case "hex":return this.toHex();case "binary":return this.toBinary();case "debug":return this.toDebug();case "columns":return this.o();default:throw Error("Unsupported encoding: "+q);}};var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",L=L+"";D.prototype.toBase64=function(q,u){if("undefined"==typeof q&&(q=this.offset),"undefined"==typeof u&&(u=this.limit),!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}if(q===u)return "";for(var v,w,x,y,A,z,C="";u>q;)v=this.view.getUint8(q++),w=(y=u>q)?this.view.getUint8(q++):0,x=(A=u>q)?this.view.getUint8(q++):0,z=v>>2,v=(3&v)<<4|w>>4,w=(15&w)<<2|x>>6,x&=63,A||(x=64,y||(w=64)),C+=L.charAt(z)+L.charAt(v)+L.charAt(w)+L.charAt(x);return C;},D.fromBase64=function(q,u,v){if(!v){if("string"!=typeof q)throw  new TypeError("Illegal str: Not a string");if(0!==q.length%4)throw  new TypeError("Illegal str: Length not a multiple of 4");}var w,x=q.length,y=0;for(w=q.length-1;w>=0&&"="===q.charAt(w);--w)y++;if(y>2)throw  new TypeError("Illegal str: Suffix is too large");if(0===x)return new D(0,u,v);var A,z,C,B=new D(x/4*3-y,u,v);for(u=w=0;x>w;){if(y=L.indexOf(q.charAt(w++)),A=x>w?L.indexOf(q.charAt(w++)):0,z=x>w?L.indexOf(q.charAt(w++)):0,C=x>w?L.indexOf(q.charAt(w++)):0,!v&&(0>y||0>A||0>z||0>C))throw  new TypeError("Illegal str: Contains non-base64 characters");B.view.setUint8(u++,y<<2|A>>4),64!==z&&(B.view.setUint8(u++,A<<4&240|z>>2,u),64!==C&&B.view.setUint8(u++,z<<6&192|C));}return B.limit=u,B;},D.btoa=function(q){return D.fromBinary(q).toBase64();},D.atob=function(q){return D.fromBase64(q).toBinary();},D.prototype.toBinary=function(q,u){if(q="undefined"==typeof q?this.offset:q,u="undefined"==typeof u?this.limit:u,!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}if(q===u)return "";for(var v=[];u>q;)v.push(this.view.getUint8(q++));return String.fromCharCode.apply(String,v);},D.fromBinary=function(q,u,v){if(!v&&"string"!=typeof q)throw  new TypeError("Illegal str: Not a string");for(var w=0,x=q.length,y=new D(x,u,v);x>w;){if(u=q.charCodeAt(w),!v&&u>255)throw  new TypeError("Illegal charCode at "+w+": 0 <= "+u+" <= 255");y.view.setUint8(w++,u);}return y.limit=x,y;},D.prototype.toDebug=function(q){for(var u,v=-1,w=this.buffer.byteLength,x="",y="",A="";w>v;){if(-1!==v&&(u=this.view.getUint8(v),x=16>u?x+("0"+u.toString(16).toUpperCase()):x+u.toString(16).toUpperCase(),q&&(y+=u>32&&127>u?String.fromCharCode(u):".")),++v,q&&v>0&&0===v%16&&v!==w){for(;51>x.length;)x+=" ";A+=x+y+"\n",x=y="";}x=v===this.offset&&v===this.limit?x+(v===this.markedOffset?"!":"|"):v===this.offset?x+(v===this.markedOffset?"[":"<"):v===this.limit?x+(v===this.markedOffset?"]":">"):x+(v===this.markedOffset?"'":q||0!==v&&v!==w?" ":"");}if(q&&" "!==x){for(;51>x.length;)x+=" ";A+=x+y+"\n";}return q?A:x;},D.fromDebug=function(q,u,v){var w=q.length;u=new D((w+1)/3|0,u,v);for(var x,y=0,A=0,z=!1,C=!1,B=!1,E=!1,G=!1;w>y;){switch(x=q.charAt(y++)){case "!":if(!v){if(C||B||E){G=!0;break;}C=B=E=!0;}u.offset=u.markedOffset=u.limit=A,z=!1;break;case "|":if(!v){if(C||E){G=!0;break;}C=E=!0;}u.offset=u.limit=A,z=!1;break;case "[":if(!v){if(C||B){G=!0;break;}C=B=!0;}u.offset=u.markedOffset=A,z=!1;break;case "<":if(!v){if(C){G=!0;break;}C=!0;}u.offset=A,z=!1;break;case "]":if(!v){if(E||B){G=!0;break;}E=B=!0;}u.limit=u.markedOffset=A,z=!1;break;case ">":if(!v){if(E){G=!0;break;}E=!0;}u.limit=A,z=!1;break;case "'":if(!v){if(B){G=!0;break;}B=!0;}u.markedOffset=A,z=!1;break;case " ":z=!1;break;default:if(!v&&z){G=!0;break;}if(x=parseInt(x+q.charAt(y++),16),!v&&(isNaN(x)||0>x||x>255))throw  new TypeError("Illegal str: Not a debug encoded string");u.view.setUint8(A++,x),z=!0;}if(G)throw  new TypeError("Illegal str: Invalid symbol at "+y);}if(!v){if(!C||!E)throw  new TypeError("Illegal str: Missing offset or limit");if(A<u.buffer.byteLength)throw  new TypeError("Illegal str: Not a debug encoded string (is it hex?) "+A+" < "+w);}return u;},D.prototype.toHex=function(q,u){if(q="undefined"==typeof q?this.offset:q,u="undefined"==typeof u?this.limit:u,!this.noAssert){if("number"!=typeof q||0!==q%1)throw  new TypeError("Illegal begin: Not an integer");if(q>>>=0,"number"!=typeof u||0!==u%1)throw  new TypeError("Illegal end: Not an integer");if(u>>>=0,0>q||q>u||u>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+q+" <= "+u+" <= "+this.buffer.byteLength);}for(var v,w=Array(u-q);u>q;)v=this.view.getUint8(q++),16>v?w.push("0",v.toString(16)):w.push(v.toString(16));return w.join("");},D.fromHex=function(q,u,v){if(!v){if("string"!=typeof q)throw  new TypeError("Illegal str: Not a string");if(0!==q.length%2)throw  new TypeError("Illegal str: Length not a multiple of 2");}var w=q.length;u=new D(w/2|0,u);for(var x,y=0,A=0;w>y;y+=2){if(x=parseInt(q.substring(y,y+2),16),!v&&(!isFinite(x)||0>x||x>255))throw  new TypeError("Illegal str: Contains non-hex characters");u.view.setUint8(A++,x);}return u.limit=A,u;};var I=function(){var B={j:function(q,u){var v=null;for("number"==typeof q&&(v=q,q=function(){return null;});null!==v||null!==(v=q());)128>v?u(127&v):(2048>v?u(v>>6&31|192):(65536>v?u(v>>12&15|224):(u(v>>18&7|240),u(v>>12&63|128)),u(v>>6&63|128)),u(63&v|128)),v=null;},i:function(v,w){function x(q){q=q.slice(0,q.indexOf(null));var u=Error(q.toString());throw u.name="TruncatedError",u.bytes=q,u;}for(var y,A,z,C;null!==(y=v());)if(0===(128&y))w(y);else if(192===(224&y))null===(A=v())&&x([y,A]),w((31&y)<<6|63&A);else if(224===(240&y))null!==(A=v())&&null!==(z=v())||x([y,A,z]),w((15&y)<<12|(63&A)<<6|63&z);else{if(240!==(248&y))throw RangeError("Illegal starting byte: "+y);null!==(A=v())&&null!==(z=v())&&null!==(C=v())||x([y,A,z,C]),w((7&y)<<18|(63&A)<<12|(63&z)<<6|63&C);}},f:function(q,u){for(var v,w=null;null!==(v=null!==w?w:q());)v>=55296&&57343>=v&&null!==(w=q())&&w>=56320&&57343>=w?(u(1024*(v-55296)+w-56320+65536),w=null):u(v);null!==w&&u(w);},g:function(q,u){var v=null;for("number"==typeof q&&(v=q,q=function(){return null;});null!==v||null!==(v=q());)65535>=v?u(v):(v-=65536,u((v>>10)+55296),u(v%1024+56320)),v=null;},e:function(u,v){B.f(u,function(q){B.j(q,v);});},d:function(u,v){B.i(u,function(q){B.g(q,v);});},k:function(q){if("number"!=typeof q||q!==q)throw TypeError("Illegal byte: "+typeof q);if(-128>q||q>255)throw RangeError("Illegal byte: "+q);return q;},l:function(q){if("number"!=typeof q||q!==q)throw TypeError("Illegal char code: "+typeof q);if(0>q||q>65535)throw RangeError("Illegal char code: "+q);return q;},m:function(q){if("number"!=typeof q||q!==q)throw TypeError("Illegal code point: "+typeof q);if(0>q||q>1114111)throw RangeError("Illegal code point: "+q);return q;},h:function(q){return 128>q?1:2048>q?2:65536>q?3:4;},n:function(q){for(var u,v=0;null!==(u=q());)v+=B.h(u);return v;},b:function(u){var v=0,w=0;return B.f(u,function(q){++v,w+=B.h(q);}),[v,w];}};return B;}(),K=String.fromCharCode;return I.a=function(q){var u=0;return function(){return u<q.length?q.charCodeAt(u++):null;};},I.c=function(){var q=[],u=[];return function(){return 0===arguments.length?u.join("")+K.apply(String,q):(1024<q.length+arguments.length&&(u.push(K.apply(String,q)),q.length=0),void Array.prototype.push.apply(q,arguments));};},D.prototype.toUTF8=function(u,v){if("undefined"==typeof u&&(u=this.offset),"undefined"==typeof v&&(v=this.limit),!this.noAssert){if("number"!=typeof u||0!==u%1)throw  new TypeError("Illegal begin: Not an integer");if(u>>>=0,"number"!=typeof v||0!==v%1)throw  new TypeError("Illegal end: Not an integer");if(v>>>=0,0>u||u>v||v>this.buffer.byteLength)throw  new RangeError("Illegal range: 0 <= "+u+" <= "+v+" <= "+this.buffer.byteLength);}var w,x=this;try{I.d(function(){return v>u?x.view.getUint8(u++):null;},w=I.c());}catch(q){if(u!==v)throw  new RangeError("Illegal range: Truncated data, "+u+" != "+v);}return w();},D.fromUTF8=function(u,v,w){if(!w&&"string"!=typeof u)throw  new TypeError("Illegal str: Not a string");var x=new D(I.b(I.a(u),!0)[1],v,w),y=0;return I.e(I.a(u),function(q){x.view.setUint8(y++,q);}),x.limit=y,x;},D;}"undefined"!=typeof module&&module.exports?module.exports=J(require("long")):"undefined"!=typeof define&&define.amd?define("ByteBuffer",["Math/Long"],function(q){return J(q);}):(M.dcodeIO||(M.dcodeIO={}),M.dcodeIO.ByteBuffer=J(M.dcodeIO.Long));}(this),function(U){function Y(V){if(!V||!V.VERSION||3>V.VERSION.split(".")[0])throw Error("ProtoBuf.js requires ByteBuffer.js >=3");var Q={VERSION:"3.1.0",WIRE_TYPES:{}};return Q.WIRE_TYPES.VARINT=0,Q.WIRE_TYPES.BITS64=1,Q.WIRE_TYPES.LDELIM=2,Q.WIRE_TYPES.STARTGROUP=3,Q.WIRE_TYPES.ENDGROUP=4,Q.WIRE_TYPES.BITS32=5,Q.PACKABLE_WIRE_TYPES=[Q.WIRE_TYPES.VARINT,Q.WIRE_TYPES.BITS64,Q.WIRE_TYPES.BITS32],Q.TYPES={int32:{name:"int32",wireType:Q.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:Q.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:Q.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:Q.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:Q.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:Q.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:Q.WIRE_TYPES.VARINT},"double":{name:"double",wireType:Q.WIRE_TYPES.BITS64},string:{name:"string",wireType:Q.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:Q.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:Q.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:Q.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:Q.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:Q.WIRE_TYPES.BITS64},"float":{name:"float",wireType:Q.WIRE_TYPES.BITS32},"enum":{name:"enum",wireType:Q.WIRE_TYPES.VARINT},message:{name:"message",wireType:Q.WIRE_TYPES.LDELIM},group:{name:"group",wireType:Q.WIRE_TYPES.STARTGROUP}},Q.ID_MIN=1,Q.ID_MAX=536870911,Q.ByteBuffer=V,Q.Long=V.Long||null,Q.convertFieldsToCamelCase=!1,Q.Util=function(){Object.create||(Object.create=function(q){function u(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");return u.prototype=q,new u;});var y={IS_NODE:!1};try{y.IS_NODE="function"==typeof require&&"function"==typeof require("fs").readFileSync&&"function"==typeof require("path").resolve;}catch(q){}return y.XHR=function(){for(var u=[function(){return new XMLHttpRequest;},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Msxml3.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],v=null,w=0;w<u.length;w++){try{v=u[w]();}catch(q){continue;}break;}if(!v)throw Error("XMLHttpRequest is not supported");return v;},y.fetch=function(v,w){if(w&&"function"!=typeof w&&(w=null),y.IS_NODE)if(w)require("fs").readFile(v,function(q,u){w(q?null:""+u);});else try{return require("fs").readFileSync(v);}catch(q){return null;}else{var x=y.XHR();if(x.open("GET",v,w?!0:!1),x.setRequestHeader("Accept","text/plain"),"function"==typeof x.overrideMimeType&&x.overrideMimeType("text/plain"),!w)return x.send(null),200==x.status||0==x.status&&"string"==typeof x.responseText?x.responseText:null;x.onreadystatechange=function(){4==x.readyState&&w(200==x.status||0==x.status&&"string"==typeof x.responseText?x.responseText:null);},4!=x.readyState&&x.send(null);}},y.isArray=function(q){return q?q instanceof Array?!0:Array.isArray?Array.isArray(q):"[object Array]"===Object.prototype.toString.call(q):!1;},y;}(),Q.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/['"]([^'"\\]*(\\.[^"\\]*)*)['"]/g,BOOL:/^(?:true|false)$/i},Q.DotProto=function(A,z){var C={},B=function(q){this.source=""+q,this.index=0,this.line=1,this.stack=[],this.readingString=!1,this.stringEndsWith=z.STRINGCLOSE;};B.prototype._readString=function(){z.STRING.lastIndex=this.index-1;var q;if(null!==(q=z.STRING.exec(this.source)))return q=q[1],this.index=z.STRING.lastIndex,this.stack.push(this.stringEndsWith),q;throw Error("Illegal string value at line "+this.line+", index "+this.index);},B.prototype.next=function(){if(0<this.stack.length)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.readingString)return this.readingString=!1,this._readString();var q,u;do {for(q=!1;z.WHITESPACE.test(u=this.source.charAt(this.index));)if(this.index++,"\n"===u&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(this.index++,this.index==this.source.length)return null;this.index++,this.line++,q=!0;}else{if("*"!==this.source.charAt(this.index))throw Error("Invalid comment at line "+this.line+": /"+this.source.charAt(this.index)+" ('/' or '*' expected)");for(u="";"*/"!==u+(u=this.source.charAt(this.index));)if(this.index++,"\n"===u&&this.line++,this.index===this.source.length)return null;this.index++,q=!0;}}while(q);if(this.index===this.source.length)return null;if(q=this.index,z.DELIM.lastIndex=0,z.DELIM.test(this.source.charAt(q)))q++;else for(q++;q<this.source.length&&!z.DELIM.test(this.source.charAt(q));)q++;return q=this.source.substring(this.index,this.index=q),q===z.STRINGOPEN?(this.readingString=!0,this.stringEndsWith=z.STRINGCLOSE):q===z.STRINGOPEN_SQ&&(this.readingString=!0,this.stringEndsWith=z.STRINGCLOSE_SQ),q;},B.prototype.peek=function(){if(0===this.stack.length){var q=this.next();if(null===q)return null;this.stack.push(q);}return this.stack[0];},B.prototype.toString=function(){return "Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")";},C.Tokenizer=B;var E=function(q){this.tn=new B(q);};return E.prototype.parse=function(){for(var q,u={name:"[ROOT]","package":null,messages:[],enums:[],imports:[],options:{},services:[]},v=!0;q=this.tn.next();)switch(q){case "package":if(!v)throw Error("Illegal package definition at line "+this.tn.line+": Must be declared before the first message or enum");if(null!==u["package"])throw Error("Illegal package definition at line "+this.tn.line+": Package already declared");u["package"]=this._parsePackage(q);break;case "import":if(!v)throw Error("Illegal import definition at line "+this.tn.line+": Must be declared before the first message or enum");u.imports.push(this._parseImport(q));break;case "message":this._parseMessage(u,null,q),v=!1;break;case "enum":this._parseEnum(u,q),v=!1;break;case "option":if(!v)throw Error("Illegal option definition at line "+this.tn.line+": Must be declared before the first message or enum");this._parseOption(u,q);break;case "service":this._parseService(u,q);break;case "extend":this._parseExtend(u,q);break;case "syntax":this._parseIgnoredStatement(u,q);break;default:throw Error("Illegal top level declaration at line "+this.tn.line+": "+q);}return delete  u.name,u;},E.prototype._parseNumber=function(q){var u=1;if("-"==q.charAt(0)&&(u=-1,q=q.substring(1)),z.NUMBER_DEC.test(q))return u*parseInt(q,10);if(z.NUMBER_HEX.test(q))return u*parseInt(q.substring(2),16);if(z.NUMBER_OCT.test(q))return u*parseInt(q.substring(1),8);if(z.NUMBER_FLT.test(q))return u*parseFloat(q);throw Error("Illegal number value at line "+this.tn.line+": "+(0>u?"-":"")+q);},E.prototype._parseId=function(q,u){var v=-1,w=1;if("-"==q.charAt(0)&&(w=-1,q=q.substring(1)),z.NUMBER_DEC.test(q))v=parseInt(q);else if(z.NUMBER_HEX.test(q))v=parseInt(q.substring(2),16);else{if(!z.NUMBER_OCT.test(q))throw Error("Illegal ID value at line "+this.tn.line+": "+(0>w?"-":"")+q);v=parseInt(q.substring(1),8);}if(v=w*v|0,!u&&0>v)throw Error("Illegal ID range at line "+this.tn.line+": "+(0>w?"-":"")+q);return v;},E.prototype._parsePackage=function(q){if(q=this.tn.next(),!z.TYPEREF.test(q))throw Error("Illegal package name at line "+this.tn.line+": "+q);var u=q;if(q=this.tn.next(),q!=z.END)throw Error("Illegal end of package definition at line "+this.tn.line+": "+q+" ('"+z.END+"' expected)");return u;},E.prototype._parseImport=function(q){if(q=this.tn.next(),"public"===q&&(q=this.tn.next()),q!==z.STRINGOPEN&&q!==z.STRINGOPEN_SQ)throw Error("Illegal begin of import value at line "+this.tn.line+": "+q+" ('"+z.STRINGOPEN+"' or '"+z.STRINGOPEN_SQ+"' expected)");var u=this.tn.next();if(q=this.tn.next(),q!==this.tn.stringEndsWith)throw Error("Illegal end of import value at line "+this.tn.line+": "+q+" ('"+this.tn.stringEndsWith+"' expected)");if(q=this.tn.next(),q!==z.END)throw Error("Illegal end of import definition at line "+this.tn.line+": "+q+" ('"+z.END+"' expected)");return u;},E.prototype._parseOption=function(q,u){u=this.tn.next();var v=!1;if(u==z.COPTOPEN&&(v=!0,u=this.tn.next()),!z.TYPEREF.test(u)&&!/google\.protobuf\./.test(u))throw Error("Illegal option name in message "+q.name+" at line "+this.tn.line+": "+u);var w=u;if(u=this.tn.next(),v){if(u!==z.COPTCLOSE)throw Error("Illegal custom option name delimiter in message "+q.name+", option "+w+" at line "+this.tn.line+": "+u+" ('"+z.COPTCLOSE+"' expected)");w="("+w+")",u=this.tn.next(),z.FQTYPEREF.test(u)&&(w+=u,u=this.tn.next());}if(u!==z.EQUAL)throw Error("Illegal option operator in message "+q.name+", option "+w+" at line "+this.tn.line+": "+u+" ('"+z.EQUAL+"' expected)");if(u=this.tn.next(),u===z.STRINGOPEN||u===z.STRINGOPEN_SQ){if(v=this.tn.next(),u=this.tn.next(),u!==this.tn.stringEndsWith)throw Error("Illegal end of option value in message "+q.name+", option "+w+" at line "+this.tn.line+": "+u+" ('"+this.tn.stringEndsWith+"' expected)");}else if(z.NUMBER.test(u))v=this._parseNumber(u,!0);else{if(!z.TYPEREF.test(u))throw Error("Illegal option value in message "+q.name+", option "+w+" at line "+this.tn.line+": "+u);v=u;}if(u=this.tn.next(),u!==z.END)throw Error("Illegal end of option in message "+q.name+", option "+w+" at line "+this.tn.line+": "+u+" ('"+z.END+"' expected)");q.options[w]=v;},E.prototype._parseIgnoredStatement=function(q,u){for(var v;;){if(v=this.tn.next(),null===v)throw Error("Unexpected EOF in "+q.name+", "+u+" (ignored) at line "+this.tn.line);if(v===z.END)break;}},E.prototype._parseService=function(q){var u=this.tn.next();if(!z.NAME.test(u))throw Error("Illegal service name at line "+this.tn.line+": "+u);var v=u,w={name:v,rpc:{},options:{}},u=this.tn.next();if(u!==z.OPEN)throw Error("Illegal OPEN after service "+v+" at line "+this.tn.line+": "+u+" ('"+z.OPEN+"' expected)");do if(u=this.tn.next(),"option"===u)this._parseOption(w,u);else if("rpc"===u)this._parseServiceRPC(w,u);else if(u!==z.CLOSE)throw Error("Illegal type for service "+v+" at line "+this.tn.line+": "+u);while(u!==z.CLOSE);q.services.push(w);},E.prototype._parseServiceRPC=function(q,u){var v=u;if(u=this.tn.next(),!z.NAME.test(u))throw Error("Illegal RPC method name in service "+q.name+" at line "+this.tn.line+": "+u);var w=u,x={request:null,response:null,options:{}};if(u=this.tn.next(),u!==z.COPTOPEN)throw Error("Illegal start of request type in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('"+z.COPTOPEN+"' expected)");if(u=this.tn.next(),!z.TYPEREF.test(u))throw Error("Illegal request type in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u);if(x.request=u,u=this.tn.next(),u!=z.COPTCLOSE)throw Error("Illegal end of request type in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('"+z.COPTCLOSE+"' expected)");if(u=this.tn.next(),"returns"!==u.toLowerCase())throw Error("Illegal request/response delimiter in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('returns' expected)");if(u=this.tn.next(),u!=z.COPTOPEN)throw Error("Illegal start of response type in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('"+z.COPTOPEN+"' expected)");if(u=this.tn.next(),x.response=u,u=this.tn.next(),u!==z.COPTCLOSE)throw Error("Illegal end of response type in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('"+z.COPTCLOSE+"' expected)");if(u=this.tn.next(),u===z.OPEN){do if(u=this.tn.next(),"option"===u)this._parseOption(x,u);else if(u!==z.CLOSE)throw Error("Illegal start of option in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('option' expected)");while(u!==z.CLOSE);this.tn.peek()===z.END&&this.tn.next();}else if(u!==z.END)throw Error("Illegal method delimiter in RPC service "+q.name+"#"+w+" at line "+this.tn.line+": "+u+" ('"+z.END+"' or '"+z.OPEN+"' expected)");"undefined"==typeof q[v]&&(q[v]={}),q[v][w]=x;},E.prototype._parseMessage=function(u,v,w){var x={},y="group"===w;if(w=this.tn.next(),!z.NAME.test(w))throw Error("Illegal "+(y?"group":"message")+" name"+(u?" in message "+u.name:"")+" at line "+this.tn.line+": "+w);if(x.name=w,y){if(w=this.tn.next(),w!==z.EQUAL)throw Error("Illegal id assignment after group "+x.name+" at line "+this.tn.line+": "+w+" ('"+z.EQUAL+"' expected)");w=this.tn.next();try{v.id=this._parseId(w);}catch(q){throw Error("Illegal field id value for group "+x.name+"#"+v.name+" at line "+this.tn.line+": "+w);}x.isGroup=!0;}if(x.fields=[],x.enums=[],x.messages=[],x.options={},w=this.tn.next(),w===z.OPTOPEN&&v&&(this._parseFieldOptions(x,v,w),w=this.tn.next()),w!==z.OPEN)throw Error("Illegal OPEN after "+(y?"group":"message")+" "+x.name+" at line "+this.tn.line+": "+w+" ('"+z.OPEN+"' expected)");for(;;){if(w=this.tn.next(),w===z.CLOSE){w=this.tn.peek(),w===z.END&&this.tn.next();break;}if(z.RULE.test(w))this._parseMessageField(x,w);else if("enum"===w)this._parseEnum(x,w);else if("message"===w)this._parseMessage(x,null,w);else if("option"===w)this._parseOption(x,w);else if("extensions"===w)x.extensions=this._parseExtensions(x,w);else{if("extend"!==w)throw Error("Illegal token in message "+x.name+" at line "+this.tn.line+": "+w+" (type or '"+z.CLOSE+"' expected)");this._parseExtend(x,w);}}return u.messages.push(x),x;},E.prototype._parseMessageField=function(u,v){var w={},x=null;if(w.rule=v,w.options={},v=this.tn.next(),"group"===v){if(x=this._parseMessage(u,w,v),!/^[A-Z]/.test(x.name))throw Error("Group names must start with a capital letter");w.type=x.name,w.name=x.name.toLowerCase(),v=this.tn.peek(),v===z.END&&this.tn.next();}else{if(!z.TYPE.test(v)&&!z.TYPEREF.test(v))throw Error("Illegal field type in message "+u.name+" at line "+this.tn.line+": "+v);if(w.type=v,v=this.tn.next(),!z.NAME.test(v))throw Error("Illegal field name in message "+u.name+" at line "+this.tn.line+": "+v);if(w.name=v,v=this.tn.next(),v!==z.EQUAL)throw Error("Illegal field id assignment in message "+u.name+"#"+w.name+" at line "+this.tn.line+": "+v+" ('"+z.EQUAL+"' expected)");v=this.tn.next();try{w.id=this._parseId(v);}catch(q){throw Error("Illegal field id value in message "+u.name+"#"+w.name+" at line "+this.tn.line+": "+v);}if(v=this.tn.next(),v===z.OPTOPEN&&(this._parseFieldOptions(u,w,v),v=this.tn.next()),v!==z.END)throw Error("Illegal field delimiter in message "+u.name+"#"+w.name+" at line "+this.tn.line+": "+v+" ('"+z.END+"' expected)");}u.fields.push(w);},E.prototype._parseFieldOptions=function(q,u,v){for(var w=!0;v=this.tn.next(),v!==z.OPTCLOSE;){if(v===z.OPTEND){if(w)throw Error("Illegal start of message field options in message "+q.name+"#"+u.name+" at line "+this.tn.line+": "+v);v=this.tn.next();}this._parseFieldOption(q,u,v),w=!1;}},E.prototype._parseFieldOption=function(q,u,v){var w=!1;if(v===z.COPTOPEN&&(v=this.tn.next(),w=!0),!z.TYPEREF.test(v))throw Error("Illegal field option in message "+q.name+"#"+u.name+" at line "+this.tn.line+": "+v);var x=v;if(v=this.tn.next(),w){if(v!==z.COPTCLOSE)throw Error("Illegal custom field option name delimiter in message "+q.name+"#"+u.name+" at line "+this.tn.line+": "+v+" (')' expected)");x="("+x+")",v=this.tn.next(),z.FQTYPEREF.test(v)&&(x+=v,v=this.tn.next());}if(v!==z.EQUAL)throw Error("Illegal field option operation in message "+q.name+"#"+u.name+" at line "+this.tn.line+": "+v+" ('=' expected)");if(v=this.tn.next(),v===z.STRINGOPEN||v===z.STRINGOPEN_SQ){if(w=this.tn.next(),v=this.tn.next(),v!=this.tn.stringEndsWith)throw Error("Illegal end of field value in message "+q.name+"#"+u.name+", option "+x+" at line "+this.tn.line+": "+v+" ('"+this.tn.stringEndsWith+"' expected)");}else if(z.NUMBER.test(v,!0))w=this._parseNumber(v,!0);else if(z.BOOL.test(v))w="true"===v.toLowerCase();else{if(!z.TYPEREF.test(v))throw Error("Illegal field option value in message "+q.name+"#"+u.name+", option "+x+" at line "+this.tn.line+": "+v);w=v;}u.options[x]=w;},E.prototype._parseEnum=function(q,u){var v={};if(u=this.tn.next(),!z.NAME.test(u))throw Error("Illegal enum name in message "+q.name+" at line "+this.tn.line+": "+u);if(v.name=u,u=this.tn.next(),u!==z.OPEN)throw Error("Illegal OPEN after enum "+v.name+" at line "+this.tn.line+": "+u);for(v.values=[],v.options={};;){if(u=this.tn.next(),u===z.CLOSE){u=this.tn.peek(),u===z.END&&this.tn.next();break;}if("option"==u)this._parseOption(v,u);else{if(!z.NAME.test(u))throw Error("Illegal enum value name in enum "+v.name+" at line "+this.tn.line+": "+u);this._parseEnumValue(v,u);}}q.enums.push(v);},E.prototype._parseEnumValue=function(u,v){var w={};if(w.name=v,v=this.tn.next(),v!==z.EQUAL)throw Error("Illegal enum value operator in enum "+u.name+" at line "+this.tn.line+": "+v+" ('"+z.EQUAL+"' expected)");v=this.tn.next();try{w.id=this._parseId(v,!0);}catch(q){throw Error("Illegal enum value id in enum "+u.name+" at line "+this.tn.line+": "+v);}if(u.values.push(w),v=this.tn.next(),v===z.OPTOPEN&&(this._parseFieldOptions(u,{options:{}},v),v=this.tn.next()),v!==z.END)throw Error("Illegal enum value delimiter in enum "+u.name+" at line "+this.tn.line+": "+v+" ('"+z.END+"' expected)");},E.prototype._parseExtensions=function(q,u){var v=[];if(u=this.tn.next(),v.push("min"===u?A.ID_MIN:"max"===u?A.ID_MAX:this._parseNumber(u)),u=this.tn.next(),"to"!==u)throw "Illegal extensions delimiter in message "+q.name+" at line "+this.tn.line+" ('to' expected)";if(u=this.tn.next(),v.push("min"===u?A.ID_MIN:"max"===u?A.ID_MAX:this._parseNumber(u)),u=this.tn.next(),u!==z.END)throw Error("Illegal extension delimiter in message "+q.name+" at line "+this.tn.line+": "+u+" ('"+z.END+"' expected)");return v;},E.prototype._parseExtend=function(q,u){if(u=this.tn.next(),!z.TYPEREF.test(u))throw Error("Illegal extended message name at line "+this.tn.line+": "+u);var v={};if(v.ref=u,v.fields=[],u=this.tn.next(),u!==z.OPEN)throw Error("Illegal OPEN in extend "+v.name+" at line "+this.tn.line+": "+u+" ('"+z.OPEN+"' expected)");for(;;){if(u=this.tn.next(),u===z.CLOSE){u=this.tn.peek(),u==z.END&&this.tn.next();break;}if(!z.RULE.test(u))throw Error("Illegal token in extend "+v.name+" at line "+this.tn.line+": "+u+" (rule or '"+z.CLOSE+"' expected)");this._parseMessageField(v,u);}return q.messages.push(v),v;},E.prototype.toString=function(){return "Parser";},C.Parser=E,C;}(Q,Q.Lang),Q.Reflect=function(H){function L(q,u){var v=u.readVarint32(),w=7&v,v=v>>3;switch(w){case H.WIRE_TYPES.VARINT:do v=u.readUint8();while(128===(128&v));break;case H.WIRE_TYPES.BITS64:u.offset+=8;break;case H.WIRE_TYPES.LDELIM:v=u.readVarint32(),u.offset+=v;break;case H.WIRE_TYPES.STARTGROUP:L(v,u);break;case H.WIRE_TYPES.ENDGROUP:if(v===q)return !1;throw Error("Illegal GROUPEND after unknown group: "+v+" ("+q+" expected)");case H.WIRE_TYPES.BITS32:u.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+q+": "+w);}return !0;}function I(q,u){if(q&&"number"==typeof q.low&&"number"==typeof q.high&&"boolean"==typeof q.unsigned&&q.low===q.low&&q.high===q.high)return new H.Long(q.low,q.high,"undefined"==typeof u?q.unsigned:u);if("string"==typeof q)return H.Long.fromString(q,u||!1,10);if("number"==typeof q)return H.Long.fromNumber(q,u||!1);throw Error("not convertible to Long");}var K={},M=function(q,u){this.parent=q,this.name=u;};M.prototype.fqn=function(){for(var q=this.name,u=this;u=u.parent,null!=u;)q=u.name+"."+q;return q;},M.prototype.toString=function(q){return (q?this.className+" ":"")+this.fqn();},M.prototype.build=function(){throw Error(this.toString(!0)+" cannot be built directly");},K.T=M;var J=function(q,u,v){M.call(this,q,u),this.className="Namespace",this.children=[],this.options=v||{};};J.prototype=Object.create(M.prototype),J.prototype.getChildren=function(q){if(q=q||null,null==q)return this.children.slice();for(var u=[],v=0;v<this.children.length;v++)this.children[v] instanceof q&&u.push(this.children[v]);return u;},J.prototype.addChild=function(q){var u;if(u=this.getChild(q.name))if(u instanceof O.Field&&u.name!==u.originalName&&!this.hasChild(u.originalName))u.name=u.originalName;else{if(!(q instanceof O.Field&&q.name!==q.originalName)||this.hasChild(q.originalName))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+q.name);q.name=q.originalName;}this.children.push(q);},J.prototype.hasChild=function(q){return -1<this._indexOf(q);},J.prototype.getChild=function(q){return q=this._indexOf(q),q>-1?this.children[q]:null;},J.prototype._indexOf=function(q){for(var u="number"==typeof q?"id":"name",v=0;v<this.children.length;v++)if("undefined"!=typeof this.children[v][u]&&this.children[v][u]==q)return v;return -1;},J.prototype.resolve=function(q,u){var v=q.split("."),w=this,x=0;if(""==v[x]){for(;null!=w.parent;)w=w.parent;x++;}do {do {if(w=w.getChild(v[x]),!(w&&w instanceof K.T)||u&&w instanceof K.Message.Field){w=null;break;}x++;}while(x<v.length);if(null!=w)break;if(null!==this.parent)return this.parent.resolve(q,u);}while(null!=w);return w;},J.prototype.build=function(){for(var q,u={},v=this.getChildren(),w=0;w<v.length;w++)q=v[w],q instanceof J&&(u[q.name]=q.build());return Object.defineProperty&&Object.defineProperty(u,"$options",{value:this.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),u;},J.prototype.buildOpt=function(){for(var q={},u=Object.keys(this.options),v=0;v<u.length;v++)q[u[v]]=this.options[u[v]];return q;},J.prototype.getOption=function(q){return "undefined"==typeof q?this.options:"undefined"!=typeof this.options[q]?this.options[q]:null;},K.Namespace=J;var O=function(q,u,v,w){J.call(this,q,u,v),this.className="Message",this.extensions=[H.ID_MIN,H.ID_MAX],this.clazz=null,this.isGroup=!!w;};O.prototype=Object.create(J.prototype),O.prototype.build=function(G){if(this.clazz&&!G)return this.clazz;G=function(y,A){function z(q,u){var v,w={};for(v in q)q.hasOwnProperty(v)&&(null===q[v]||"object"!=typeof q[v]?w[v]=q[v]:q[v] instanceof V?u&&(w[v]=q.toBuffer()):w[v]=z(q[v],u));return w;}var C=A.getChildren(y.Reflect.Message.Field),B=function(u){y.Builder.Message.call(this);var v,w;for(v=0;v<C.length;v++)w=C[v],this[w.name]=w.repeated?[]:null;for(v=0;v<C.length;v++)if(w=C[v],"undefined"!=typeof w.options["default"])try{this.$set(w.name,w.options["default"]);}catch(q){throw Error("[INTERNAL] "+q);}if(1!=arguments.length||"object"!=typeof u||"function"==typeof u.encode||y.Util.isArray(u)||u instanceof V||u instanceof ArrayBuffer||y.Long&&u instanceof y.Long)for(v=0;v<arguments.length;v++)v<C.length&&this.$set(C[v].name,arguments[v]);else for(w=Object.keys(u),v=0;v<w.length;v++)this.$set(w[v],u[w[v]]);};B.prototype=Object.create(y.Builder.Message.prototype),B.prototype.add=function(q,u,v){var w=A.getChild(q);if(!w)throw Error(this+"#"+q+" is undefined");if(!(w instanceof y.Reflect.Message.Field))throw Error(this+"#"+q+" is not a field: "+w.toString(!0));if(!w.repeated)throw Error(this+"#"+q+" is not a repeated field");null===this[w.name]&&(this[w.name]=[]),this[w.name].push(v?u:w.verifyValue(u,!0));},B.prototype.$add=B.prototype.add,B.prototype.set=function(q,u,v){var w=A.getChild(q);if(!w)throw Error(this+"#"+q+" is not a field: undefined");if(!(w instanceof y.Reflect.Message.Field))throw Error(this+"#"+q+" is not a field: "+w.toString(!0));this[w.name]=v?u:w.verifyValue(u);},B.prototype.$set=B.prototype.set,B.prototype.get=function(q){var u=A.getChild(q);if(!(u&&u instanceof y.Reflect.Message.Field))throw Error(this+"#"+q+" is not a field: undefined");if(!(u instanceof y.Reflect.Message.Field))throw Error(this+"#"+q+" is not a field: "+u.toString(!0));return this[u.name];},B.prototype.$get=B.prototype.get;for(var E=0;E<C.length;E++)(function(u){var v=u.originalName.replace(/(_[a-zA-Z])/g,function(q){return q.toUpperCase().replace("_","");}),v=v.substring(0,1).toUpperCase()+v.substring(1),w=u.originalName.replace(/([A-Z])/g,function(q){return "_"+q;});A.hasChild("set"+v)||(B.prototype["set"+v]=function(q){this.$set(u.name,q);}),A.hasChild("set_"+w)||(B.prototype["set_"+w]=function(q){this.$set(u.name,q);}),A.hasChild("get"+v)||(B.prototype["get"+v]=function(){return this.$get(u.name);}),A.hasChild("get_"+w)||(B.prototype["get_"+w]=function(){return this.$get(u.name);});})(C[E]);return B.prototype.encode=function(u){var v=!1;u||(u=new V,v=!0);var w=u.littleEndian;try{return A.encode(this,u.LE()),(v?u.flip():u).LE(w);}catch(q){throw u.LE(w),q;}},B.prototype.encodeDelimited=function(u){var v=!1;u||(u=new V,v=!0);try{var w=(new V).LE();return A.encode(this,w).flip(),u.writeVarint32(w.remaining()),u.append(w),v?u.flip():u;}catch(q){throw q;}},B.prototype.encodeAB=function(){try{return this.encode().toArrayBuffer();}catch(q){throw q.encoded&&(q.encoded=q.encoded.toArrayBuffer()),q;}},B.prototype.toArrayBuffer=B.prototype.encodeAB,B.prototype.encodeNB=function(){try{return this.encode().toBuffer();}catch(q){throw q.encoded&&(q.encoded=q.encoded.toBuffer()),q;}},B.prototype.toBuffer=B.prototype.encodeNB,B.prototype.encode64=function(){try{return this.encode().toBase64();}catch(q){throw q.encoded&&(q.encoded=q.encoded.toBase64()),q;}},B.prototype.toBase64=B.prototype.encode64,B.prototype.encodeHex=function(){try{return this.encode().toHex();}catch(q){throw q.encoded&&(q.encoded=q.encoded.toHex()),q;}},B.prototype.toHex=B.prototype.encodeHex,B.prototype.toRaw=function(q){return z(this,!!q);},B.decode=function(u,v){if(null===u)throw Error("buffer must not be null");"string"==typeof u&&(u=V.wrap(u,v?v:"base64")),u=u instanceof V?u:V.wrap(u);var w=u.littleEndian;try{var x=A.decode(u.LE());return u.LE(w),x;}catch(q){throw u.LE(w),q;}},B.decodeDelimited=function(q,u){if(null===q)throw Error("buffer must not be null");"string"==typeof q&&(q=V.wrap(q,u?u:"base64")),q=q instanceof V?q:V.wrap(q);var v=q.readVarint32(),w=A.decode(q.slice(q.offset,q.offset+v).LE());return q.offset+=v,w;},B.decode64=function(q){return B.decode(q,"base64");},B.decodeHex=function(q){return B.decode(q,"hex");},B.prototype.toString=function(){return A.toString();},Object.defineProperty&&Object.defineProperty(B,"$options",{value:A.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),B;}(H,this);for(var F=this.getChildren(),D=0;D<F.length;D++)if(F[D] instanceof P)G[F[D].name]=F[D].build();else if(F[D] instanceof O)G[F[D].name]=F[D].build();else if(!(F[D] instanceof O.Field))throw Error("Illegal reflect child of "+this.toString(!0)+": "+F[D].toString(!0));return this.clazz=G;},O.prototype.encode=function(q,u){for(var v=this.getChildren(O.Field),w=null,x=0;x<v.length;x++){var y=q.$get(v[x].name);v[x].required&&null===y?null===w&&(w=v[x]):v[x].encode(y,u);}if(null!==w)throw v=Error("Missing at least one required field for "+this.toString(!0)+": "+w),v.encoded=u,v;return u;},O.prototype.decode=function(q,u,v){u="number"==typeof u?u:-1;for(var w,x,y=q.offset,A=new this.clazz;q.offset<y+u||-1==u&&0<q.remaining();){if(w=q.readVarint32(),x=7&w,w>>=3,x===H.WIRE_TYPES.ENDGROUP){if(w!==v)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+w+" ("+(v?v+" expected":"not a group")+")");break;}var z=this.getChild(w);if(z)z.repeated&&!z.options.packed?A.$add(z.name,z.decode(x,q),!0):A.$set(z.name,z.decode(x,q),!0);else switch(x){case H.WIRE_TYPES.VARINT:q.readVarint32();break;case H.WIRE_TYPES.BITS32:q.offset+=4;break;case H.WIRE_TYPES.BITS64:q.offset+=8;break;case H.WIRE_TYPES.LDELIM:x=q.readVarint32(),q.offset+=x;break;case H.WIRE_TYPES.STARTGROUP:for(;L(w,q););break;default:throw Error("Illegal wire type for unknown field "+w+" in "+this.toString(!0)+"#decode: "+x);}}for(q=this.getChildren(H.Reflect.Field),u=0;u<q.length;u++)if(q[u].required&&null===A[q[u].name])throw q=Error("Missing at least one required field for "+this.toString(!0)+": "+q[u].name),q.decoded=A,q;return A;},K.Message=O;var N=function(v,w,x,y,A,z){M.call(this,v,y),this.className="Message.Field",this.required="required"==w,this.repeated="repeated"==w,this.type=x,this.resolvedType=null,this.id=A,this.options=z||{},this.originalName=this.name,H.convertFieldsToCamelCase&&(this.name=this.name.replace(/_([a-zA-Z])/g,function(q,u){return u.toUpperCase();}));};N.prototype=Object.create(M.prototype),N.prototype.verifyValue=function(v,w){w=w||!1;var x=function(q,u){throw Error("Illegal value for "+this.toString(!0)+": "+q+" ("+u+")");}.bind(this);if(null===v)return this.required&&x(typeof v,"required"),null;var y;if(this.repeated&&!w){for(H.Util.isArray(v)||(v=[v]),x=[],y=0;y<v.length;y++)x.push(this.verifyValue(v[y],!0));return x;}switch(!this.repeated&&H.Util.isArray(v)&&x(typeof v,"no array expected"),this.type){case H.TYPES.int32:case H.TYPES.sint32:case H.TYPES.sfixed32:return ("number"!=typeof v||v===v&&0!==v%1)&&x(typeof v,"not an integer"),v>4294967295?0|v:v;case H.TYPES.uint32:case H.TYPES.fixed32:return ("number"!=typeof v||v===v&&0!==v%1)&&x(typeof v,"not an integer"),0>v?v>>>0:v;case H.TYPES.int64:case H.TYPES.sint64:case H.TYPES.sfixed64:if(H.Long)try{return I(v,!1);}catch(q){x(typeof v,q.message);}case H.TYPES.uint64:case H.TYPES.fixed64:if(H.Long)try{return I(v,!0);}catch(q){x(typeof v,q.message);}case H.TYPES.bool:return "boolean"!=typeof v&&x(typeof v,"not a boolean"),v;case H.TYPES["float"]:case H.TYPES["double"]:return "number"!=typeof v&&x(typeof v,"not a number"),v;case H.TYPES.string:return "string"==typeof v||v&&v instanceof String||x(typeof v,"not a string"),""+v;case H.TYPES.bytes:return v&&v instanceof V?v:V.wrap(v);case H.TYPES["enum"]:var A=this.resolvedType.getChildren(P.Value);for(y=0;y<A.length;y++)if(A[y].name==v||A[y].id==v)return A[y].id;x(v,"not a valid enum value");case H.TYPES.group:case H.TYPES.message:return v&&"object"==typeof v||x(typeof v,"object expected"),v instanceof this.resolvedType.clazz?v:new this.resolvedType.clazz(v);}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+v+" (undefined type "+this.type+")");},N.prototype.encode=function(u,v){if(u=this.verifyValue(u),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===u||this.repeated&&0==u.length)return v;try{if(this.repeated){var w;if(this.options.packed&&0<=H.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){v.writeVarint32(this.id<<3|H.WIRE_TYPES.LDELIM),v.ensureCapacity(v.offset+=1);var x=v.offset;for(w=0;w<u.length;w++)this.encodeValue(u[w],v);var y=v.offset-x,A=V.calculateVarint32(y);if(A>1){var z=v.slice(x,v.offset),x=x+(A-1);v.offset=x,v.append(z);}v.writeVarint32(y,x-A);}else for(w=0;w<u.length;w++)v.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(u[w],v);}else v.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(u,v);}catch(q){throw Error("Illegal value for "+this.toString(!0)+": "+u+" ("+q+")");}return v;},N.prototype.encodeValue=function(q,u){if(null!==q){switch(this.type){case H.TYPES.int32:0>q?u.writeVarint64(q):u.writeVarint32(q);break;case H.TYPES.uint32:u.writeVarint32(q);break;case H.TYPES.sint32:u.writeVarint32ZigZag(q);break;case H.TYPES.fixed32:u.writeUint32(q);break;case H.TYPES.sfixed32:u.writeInt32(q);break;case H.TYPES.int64:case H.TYPES.uint64:u.writeVarint64(q);break;case H.TYPES.sint64:u.writeVarint64ZigZag(q);break;case H.TYPES.fixed64:u.writeUint64(q);break;case H.TYPES.sfixed64:u.writeInt64(q);break;case H.TYPES.bool:u.writeVarint32("string"==typeof q?"false"===q.toLowerCase()?0:!!q:q?1:0);break;case H.TYPES["enum"]:u.writeVarint32(q);break;case H.TYPES["float"]:u.writeFloat32(q);break;case H.TYPES["double"]:u.writeFloat64(q);break;case H.TYPES.string:u.writeVString(q);break;case H.TYPES.bytes:q.offset>q.length&&(u=u.clone().flip());var v=q.offset;u.writeVarint32(q.remaining()),u.append(q),q.offset=v;break;case H.TYPES.message:v=(new V).LE(),this.resolvedType.encode(q,v),u.writeVarint32(v.offset),u.append(v.flip());break;case H.TYPES.group:this.resolvedType.encode(q,u),u.writeVarint32(this.id<<3|H.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+q+" (unknown type)");}return u;}},N.prototype.decode=function(q,u,v){if(q!=this.type.wireType&&(v||q!=H.WIRE_TYPES.LDELIM||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+q+" ("+this.type.wireType+" expected)");if(q==H.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&!v){for(q=u.readVarint32(),q=u.offset+q,v=[];u.offset<q;)v.push(this.decode(this.type.wireType,u,!0));return v;}switch(this.type){case H.TYPES.int32:return 0|u.readVarint32();case H.TYPES.uint32:return u.readVarint32()>>>0;case H.TYPES.sint32:return 0|u.readVarint32ZigZag();case H.TYPES.fixed32:return u.readUint32()>>>0;case H.TYPES.sfixed32:return 0|u.readInt32();case H.TYPES.int64:return u.readVarint64();case H.TYPES.uint64:return u.readVarint64().toUnsigned();case H.TYPES.sint64:return u.readVarint64ZigZag();case H.TYPES.fixed64:return u.readUint64();case H.TYPES.sfixed64:return u.readInt64();case H.TYPES.bool:return !!u.readVarint32();case H.TYPES["enum"]:return u.readVarint32();case H.TYPES["float"]:return u.readFloat();case H.TYPES["double"]:return u.readDouble();case H.TYPES.string:return u.readVString();case H.TYPES.bytes:if(q=u.readVarint32(),u.remaining()<q)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+q+" required but got only "+u.remaining());return v=u.clone(),v.limit=v.offset+q,u.offset+=q,v;case H.TYPES.message:return q=u.readVarint32(),this.resolvedType.decode(u,q);case H.TYPES.group:return this.resolvedType.decode(u,-1,this.id);}throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+q);},K.Message.Field=N;var P=function(q,u,v){J.call(this,q,u,v),this.className="Enum",this.object=null;};P.prototype=Object.create(J.prototype),P.prototype.build=function(){for(var q={},u=this.getChildren(P.Value),v=0;v<u.length;v++)q[u[v].name]=u[v].id;return Object.defineProperty&&Object.defineProperty(q,"$options",{value:this.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),this.object=q;},K.Enum=P,N=function(q,u,v){M.call(this,q,u),this.className="Enum.Value",this.id=v;},N.prototype=Object.create(M.prototype),K.Enum.Value=N,N=function(q,u,v){J.call(this,q,u,v),this.className="Service",this.clazz=null;},N.prototype=Object.create(J.prototype),N.prototype.build=function(G){return this.clazz&&!G?this.clazz:this.clazz=function(A,z){var C=function(w){A.Builder.Service.call(this),this.rpcImpl=w||function(q,u,v){setTimeout(v.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0);};};C.prototype=Object.create(A.Builder.Service.prototype),Object.defineProperty&&(Object.defineProperty(C,"$options",{value:z.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(C.prototype,"$options",{value:C.$options,enumerable:!1,configurable:!1,writable:!1}));for(var B=z.getChildren(A.Reflect.Service.RPCMethod),E=0;E<B.length;E++)(function(y){C.prototype[y.name]=function(w,x){try{w&&w instanceof y.resolvedRequestType.clazz||setTimeout(x.bind(this,Error("Illegal request type provided to service method "+z.name+"#"+y.name)),0),this.rpcImpl(y.fqn(),w,function(u,v){if(u)x(u);else{try{v=y.resolvedResponseType.clazz.decode(v);}catch(q){}v&&v instanceof y.resolvedResponseType.clazz?x(null,v):x(Error("Illegal response type received in service method "+z.name+"#"+y.name));}});}catch(q){setTimeout(x.bind(this,q),0);}},C[y.name]=function(q,u,v){new C(q)[y.name](u,v);},Object.defineProperty&&(Object.defineProperty(C[y.name],"$options",{value:y.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(C.prototype[y.name],"$options",{value:C[y.name].$options,enumerable:!1,configurable:!1,writable:!1}));})(B[E]);return C;}(H,this);},K.Service=N;var R=function(q,u,v){M.call(this,q,u),this.className="Service.Method",this.options=v||{};};return R.prototype=Object.create(M.prototype),R.prototype.buildOpt=J.prototype.buildOpt,K.Service.Method=R,N=function(q,u,v,w,x){R.call(this,q,u,x),this.className="Service.RPCMethod",this.requestName=v,this.responseName=w,this.resolvedResponseType=this.resolvedRequestType=null;},N.prototype=Object.create(R.prototype),K.Service.RPCMethod=N,K;}(Q),Q.Builder=function(G,F,D){var H=function(){this.ptr=this.ns=new D.Namespace(null,""),this.resolved=!1,this.result=null,this.files={},this.importRoot=null;};return H.prototype.reset=function(){this.ptr=this.ns;},H.prototype.define=function(q,u){if("string"!=typeof q||!F.TYPEREF.test(q))throw Error("Illegal package name: "+q);var v,w=q.split(".");for(v=0;v<w.length;v++)if(!F.NAME.test(w[v]))throw Error("Illegal package name: "+w[v]);for(v=0;v<w.length;v++)this.ptr.hasChild(w[v])||this.ptr.addChild(new D.Namespace(this.ptr,w[v],u)),this.ptr=this.ptr.getChild(w[v]);return this;},H.isValidMessage=function(q){if("string"!=typeof q.name||!F.NAME.test(q.name)||"undefined"!=typeof q.values||"undefined"!=typeof q.rpc)return !1;var u;if("undefined"!=typeof q.fields){if(!G.Util.isArray(q.fields))return !1;var v,w=[];for(u=0;u<q.fields.length;u++){if(!H.isValidMessageField(q.fields[u]))return !1;if(v=parseInt(q.fields[u].id,10),0<=w.indexOf(v))return !1;w.push(v);}}if("undefined"!=typeof q.enums){if(!G.Util.isArray(q.enums))return !1;for(u=0;u<q.enums.length;u++)if(!H.isValidEnum(q.enums[u]))return !1;}if("undefined"!=typeof q.messages){if(!G.Util.isArray(q.messages))return !1;for(u=0;u<q.messages.length;u++)if(!H.isValidMessage(q.messages[u])&&!H.isValidExtend(q.messages[u]))return !1;}return "undefined"==typeof q.extensions||G.Util.isArray(q.extensions)&&2===q.extensions.length&&"number"==typeof q.extensions[0]&&"number"==typeof q.extensions[1]?!0:!1;},H.isValidMessageField=function(q){if("string"!=typeof q.rule||"string"!=typeof q.name||"string"!=typeof q.type||"undefined"==typeof q.id||!(F.RULE.test(q.rule)&&F.NAME.test(q.name)&&F.TYPEREF.test(q.type)&&F.ID.test(""+q.id)))return !1;if("undefined"!=typeof q.options){if("object"!=typeof q.options)return !1;for(var u,v=Object.keys(q.options),w=0;w<v.length;w++)if("string"!=typeof (u=v[w])||"string"!=typeof q.options[u]&&"number"!=typeof q.options[u]&&"boolean"!=typeof q.options[u])return !1;}return !0;},H.isValidEnum=function(q){if("string"!=typeof q.name||!F.NAME.test(q.name)||"undefined"==typeof q.values||!G.Util.isArray(q.values)||0==q.values.length)return !1;for(var u=0;u<q.values.length;u++)if("object"!=typeof q.values[u]||"string"!=typeof q.values[u].name||"undefined"==typeof q.values[u].id||!F.NAME.test(q.values[u].name)||!F.NEGID.test(""+q.values[u].id))return !1;return !0;},H.prototype.create=function(q){if(q&&(G.Util.isArray(q)||(q=[q]),0!=q.length)){var u,v,w,x,y,A=[];for(A.push(q);0<A.length;){if(q=A.pop(),!G.Util.isArray(q))throw Error("Not a valid namespace definition: "+JSON.stringify(q));for(;0<q.length;)if(u=q.shift(),H.isValidMessage(u)){if(v=new D.Message(this.ptr,u.name,u.options,u.isGroup),u.fields&&0<u.fields.length)for(x=0;x<u.fields.length;x++){if(v.hasChild(u.fields[x].id))throw Error("Duplicate field id in message "+v.name+": "+u.fields[x].id);if(u.fields[x].options)for(w=Object.keys(u.fields[x].options),y=0;y<w.length;y++){if("string"!=typeof w[y])throw Error("Illegal field option name in message "+v.name+"#"+u.fields[x].name+": "+w[y]);if("string"!=typeof u.fields[x].options[w[y]]&&"number"!=typeof u.fields[x].options[w[y]]&&"boolean"!=typeof u.fields[x].options[w[y]])throw Error("Illegal field option value in message "+v.name+"#"+u.fields[x].name+"#"+w[y]+": "+u.fields[x].options[w[y]]);}v.addChild(new D.Message.Field(v,u.fields[x].rule,u.fields[x].type,u.fields[x].name,u.fields[x].id,u.fields[x].options));}if(w=[],"undefined"!=typeof u.enums&&0<u.enums.length)for(x=0;x<u.enums.length;x++)w.push(u.enums[x]);if(u.messages&&0<u.messages.length)for(x=0;x<u.messages.length;x++)w.push(u.messages[x]);u.extensions&&(v.extensions=u.extensions,v.extensions[0]<G.ID_MIN&&(v.extensions[0]=G.ID_MIN),v.extensions[1]>G.ID_MAX&&(v.extensions[1]=G.ID_MAX)),this.ptr.addChild(v),0<w.length&&(A.push(q),q=w,this.ptr=v);}else if(H.isValidEnum(u)){for(v=new D.Enum(this.ptr,u.name,u.options),x=0;x<u.values.length;x++)v.addChild(new D.Enum.Value(v,u.values[x].name,u.values[x].id));this.ptr.addChild(v);}else if(H.isValidService(u)){v=new D.Service(this.ptr,u.name,u.options);for(x in u.rpc)u.rpc.hasOwnProperty(x)&&v.addChild(new D.Service.RPCMethod(v,x,u.rpc[x].request,u.rpc[x].response,u.rpc[x].options));this.ptr.addChild(v);}else{if(!H.isValidExtend(u))throw Error("Not a valid message, enum, service or extend definition: "+JSON.stringify(u));if(v=this.ptr.resolve(u.ref))for(x=0;x<u.fields.length;x++){if(v.hasChild(u.fields[x].id))throw Error("Duplicate extended field id in message "+v.name+": "+u.fields[x].id);if(u.fields[x].id<v.extensions[0]||u.fields[x].id>v.extensions[1])throw Error("Illegal extended field id in message "+v.name+": "+u.fields[x].id+" ("+v.extensions.join(" to ")+" expected)");v.addChild(new D.Message.Field(v,u.fields[x].rule,u.fields[x].type,u.fields[x].name,u.fields[x].id,u.fields[x].options));}else if(!/\.?google\.protobuf\./.test(u.ref))throw Error("Extended message "+u.ref+" is not defined");}this.ptr=this.ptr.parent;}return this.resolved=!1,this.result=null,this;}},H.isValidImport=function(q){return !/google\/protobuf\//.test(q);},H.prototype["import"]=function(w,x){if("string"==typeof x){if(G.Util.IS_NODE&&(x=require("path").resolve(x)),this.files[x])return this.reset(),this;this.files[x]=!0;}if(w.imports&&0<w.imports.length){var y,A="/",z=!1;"object"==typeof x?(this.importRoot=x.root,z=!0,y=this.importRoot,x=x.file,(0<=y.indexOf("\\")||0<=x.indexOf("\\"))&&(A="\\")):"string"==typeof x?this.importRoot?y=this.importRoot:0<=x.indexOf("/")?(y=x.replace(/\/[^\/]*$/,""),""===y&&(y="/")):0<=x.indexOf("\\")?(y=x.replace(/\\[^\\]*$/,""),A="\\"):y=".":y=null;for(var C=0;C<w.imports.length;C++)if("string"==typeof w.imports[C]){if(!y)throw Error("Cannot determine import root: File name is unknown");var B=y+A+w.imports[C];if(H.isValidImport(B)){/\.proto$/i.test(B)&&!G.DotProto&&(B=B.replace(/\.proto$/,".json"));var E=G.Util.fetch(B);if(null===E)throw Error("Failed to import '"+B+"' in '"+x+"': File not found");/\.json$/i.test(B)?this["import"](JSON.parse(E+""),B):this["import"](new G.DotProto.Parser(E+"").parse(),B);}}else x?/\.(\w+)$/.test(x)?this["import"](w.imports[C],x.replace(/^(.+)\.(\w+)$/,function(q,u,v){return u+"_import"+C+"."+v;})):this["import"](w.imports[C],x+"_import"+C):this["import"](w.imports[C]);z&&(this.importRoot=null);}return w.messages&&(w["package"]&&this.define(w["package"],w.options),this.create(w.messages),this.reset()),w.enums&&(w["package"]&&this.define(w["package"],w.options),this.create(w.enums),this.reset()),w.services&&(w["package"]&&this.define(w["package"],w.options),this.create(w.services),this.reset()),w["extends"]&&(w["package"]&&this.define(w["package"],w.options),this.create(w["extends"]),this.reset()),this;},H.isValidService=function(q){return !("string"!=typeof q.name||!F.NAME.test(q.name)||"object"!=typeof q.rpc);},H.isValidExtend=function(q){if("string"!=typeof q.ref||!F.TYPEREF.test(q.name))return !1;var u;if("undefined"!=typeof q.fields){if(!G.Util.isArray(q.fields))return !1;var v,w=[];for(u=0;u<q.fields.length;u++){if(!H.isValidMessageField(q.fields[u]))return !1;if(v=parseInt(q.id,10),0<=w.indexOf(v))return !1;w.push(v);}}return !0;},H.prototype.resolveAll=function(){var q;if(null!=this.ptr&&"object"!=typeof this.ptr.type){if(this.ptr instanceof D.Namespace){q=this.ptr.getChildren();for(var u=0;u<q.length;u++)this.ptr=q[u],this.resolveAll();}else if(this.ptr instanceof D.Message.Field)if(F.TYPE.test(this.ptr.type))this.ptr.type=G.TYPES[this.ptr.type];else{if(!F.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(q=this.ptr.parent.resolve(this.ptr.type,!0),!q)throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=q,q instanceof D.Enum)this.ptr.type=G.TYPES["enum"];else{if(!(q instanceof D.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=q.isGroup?G.TYPES.group:G.TYPES.message;}}else if(!(this.ptr instanceof G.Reflect.Enum.Value)){if(!(this.ptr instanceof G.Reflect.Service.Method))throw Error("Illegal object type in namespace: "+typeof this.ptr+":"+this.ptr);if(!(this.ptr instanceof G.Reflect.Service.RPCMethod))throw Error("Illegal service method type in "+this.ptr.toString(!0));if(q=this.ptr.parent.resolve(this.ptr.requestName),!(q&&q instanceof G.Reflect.Message))throw Error("Illegal request type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=q,q=this.ptr.parent.resolve(this.ptr.responseName),!(q&&q instanceof G.Reflect.Message))throw Error("Illegal response type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=q;}this.reset();}},H.prototype.build=function(q){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null==this.result&&(this.result=this.ns.build()),q){q=q.split(".");for(var u=this.result,v=0;v<q.length;v++){if(!u[q[v]]){u=null;break;}u=u[q[v]];}return u;}return this.result;},H.prototype.lookup=function(q){return q?this.ns.resolve(q):this.ns;},H.prototype.toString=function(){return "Builder";},H.Message=function(){},H.Service=function(){},H;}(Q,Q.Lang,Q.Reflect),Q.loadProto=function(q,u,v){return ("string"==typeof u||u&&"string"==typeof u.file&&"string"==typeof u.root)&&(v=u,u=null),Q.loadJson(new Q.DotProto.Parser(q+"").parse(),u,v);},Q.protoFromString=Q.loadProto,Q.loadProtoFile=function(u,v,w){if(v&&"object"==typeof v?(w=v,v=null):v&&"function"==typeof v||(v=null),!v){var x=Q.Util.fetch("object"==typeof u?u.root+"/"+u.file:u);return null!==x?Q.protoFromString(x,w,u):null;}Q.Util.fetch("object"==typeof u?u.root+"/"+u.file:u,function(q){v(Q.loadProto(q,w,u));});},Q.protoFromFile=Q.loadProtoFile,Q.newBuilder=function(q,u){var v=new Q.Builder;return "undefined"!=typeof q&&null!==q&&v.define(q,u),v;},Q.loadJson=function(q,u,v){return ("string"==typeof u||u&&"string"==typeof u.file&&"string"==typeof u.root)&&(v=u,u=null),u&&"object"==typeof u||(u=Q.newBuilder()),"string"==typeof q&&(q=JSON.parse(q)),u["import"](q,v),u.resolveAll(),u.build(),u;},Q.loadJsonFile=function(v,w,x){if(w&&"object"==typeof w?(x=w,w=null):w&&"function"==typeof w||(w=null),!w){var y=Q.Util.fetch("object"==typeof v?v.root+"/"+v.file:v);return null!==y?Q.loadJson(JSON.parse(y),x,v):null;}Q.Util.fetch("object"==typeof v?v.root+"/"+v.file:v,function(u){try{w(Q.loadJson(JSON.parse(u),x,v));}catch(q){w(q);}});},Q;};"undefined"!=typeof module&&module.exports?module.exports=Y(require("bytebuffer")):"function"==typeof define&&define.amd?define("ProtoBuf",["ByteBuffer"],Y):(U.dcodeIO||(U.dcodeIO={}),U.dcodeIO.ProtoBuf=Y(U.dcodeIO.ByteBuffer));}(this);var CryptoJS=CryptoJS||function(z,C){var B={},E=B.lib={},G=function(){},F=E.Base={extend:function(q){G.prototype=this;var u=new G;return q&&u.mixIn(q),u.hasOwnProperty("init")||(u.init=function(){u.$super.init.apply(this,arguments);}),u.init.prototype=u,u.$super=this,u;},create:function(){var q=this.extend();return q.init.apply(q,arguments),q;},init:function(){},mixIn:function(q){for(var u in q)q.hasOwnProperty(u)&&(this[u]=q[u]);q.hasOwnProperty("toString")&&(this.toString=q.toString);},clone:function(){return this.init.prototype.extend(this);}},D=E.WordArray=F.extend({init:function(q,u){q=this.words=q||[],this.sigBytes=u!=C?u:4*q.length;},toString:function(q){return (q||L).stringify(this);},concat:function(q){var u=this.words,v=q.words,w=this.sigBytes;if(q=q.sigBytes,this.clamp(),w%4)for(var x=0;q>x;x++)u[w+x>>>2]|=(v[x>>>2]>>>24-8*(x%4)&255)<<24-8*((w+x)%4);else if(65535<v.length)for(x=0;q>x;x+=4)u[w+x>>>2]=v[x>>>2];else u.push.apply(u,v);return this.sigBytes+=q,this;},clamp:function(){var q=this.words,u=this.sigBytes;q[u>>>2]&=4294967295<<32-8*(u%4),q.length=z.ceil(u/4);},clone:function(){var q=F.clone.call(this);return q.words=this.words.slice(0),q;},random:function(q){for(var u=[],v=0;q>v;v+=4)u.push(4294967296*z.random()|0);return new D.init(u,q);}}),H=B.enc={},L=H.Hex={stringify:function(q){var u=q.words;q=q.sigBytes;for(var v=[],w=0;q>w;w++){var x=u[w>>>2]>>>24-8*(w%4)&255;v.push((x>>>4).toString(16)),v.push((15&x).toString(16));}return v.join("");},parse:function(q){for(var u=q.length,v=[],w=0;u>w;w+=2)v[w>>>3]|=parseInt(q.substr(w,2),16)<<24-4*(w%8);return new D.init(v,u/2);}},I=H.Latin1={stringify:function(q){var u=q.words;q=q.sigBytes;for(var v=[],w=0;q>w;w++)v.push(String.fromCharCode(u[w>>>2]>>>24-8*(w%4)&255));return v.join("");},parse:function(q){for(var u=q.length,v=[],w=0;u>w;w++)v[w>>>2]|=(255&q.charCodeAt(w))<<24-8*(w%4);return new D.init(v,u);}},K=H.Utf8={stringify:function(u){try{return decodeURIComponent(escape(I.stringify(u)));}catch(q){throw Error("Malformed UTF-8 data");}},parse:function(q){return I.parse(unescape(encodeURIComponent(q)));}},M=E.BufferedBlockAlgorithm=F.extend({reset:function(){this._data=new D.init,this._nDataBytes=0;},_append:function(q){"string"==typeof q&&(q=K.parse(q)),this._data.concat(q),this._nDataBytes+=q.sigBytes;},_process:function(q){var u=this._data,v=u.words,w=u.sigBytes,x=this.blockSize,y=w/(4*x),y=q?z.ceil(y):z.max((0|y)-this._minBufferSize,0);if(q=y*x,w=z.min(4*q,w),q){for(var A=0;q>A;A+=x)this._doProcessBlock(v,A);A=v.splice(0,q),u.sigBytes-=w;}return new D.init(A,w);},clone:function(){var q=F.clone.call(this);return q._data=this._data.clone(),q;},_minBufferSize:0});E.Hasher=M.extend({cfg:F.extend(),init:function(q){this.cfg=this.cfg.extend(q),this.reset();},reset:function(){M.reset.call(this),this._doReset();},update:function(q){return this._append(q),this._process(),this;},finalize:function(q){return q&&this._append(q),this._doFinalize();},blockSize:16,_createHelper:function(v){return function(q,u){return new v.init(u).finalize(q);};},_createHmacHelper:function(v){return function(q,u){return new J.HMAC.init(v,u).finalize(q);};}});var J=B.algo={};return B;}(Math);!function(){var C=CryptoJS,B=C.lib.WordArray;C.enc.Base64={stringify:function(q){var u=q.words,v=q.sigBytes,w=this._map;q.clamp(),q=[];for(var x=0;v>x;x+=3)for(var y=(u[x>>>2]>>>24-8*(x%4)&255)<<16|(u[x+1>>>2]>>>24-8*((x+1)%4)&255)<<8|u[x+2>>>2]>>>24-8*((x+2)%4)&255,A=0;4>A&&v>x+.75*A;A++)q.push(w.charAt(y>>>6*(3-A)&63));if(u=w.charAt(64))for(;q.length%4;)q.push(u);return q.join("");},parse:function(q){var u=q.length,v=this._map,w=v.charAt(64);w&&(w=q.indexOf(w),-1!=w&&(u=w));for(var w=[],x=0,y=0;u>y;y++)if(y%4){var A=v.indexOf(q.charAt(y-1))<<2*(y%4),z=v.indexOf(q.charAt(y))>>>6-2*(y%4);w[x>>>2]|=(A|z)<<24-8*(x%4),x++;}return B.create(w,x);},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};}(),function(R){function V(q,u,v,w,x,y,A){return q=q+(u&v|~u&w)+x+A,(q<<y|q>>>32-y)+u;}function Q(q,u,v,w,x,y,A){return q=q+(u&w|v&~w)+x+A,(q<<y|q>>>32-y)+u;}function U(q,u,v,w,x,y,A){return q=q+(u^v^w)+x+A,(q<<y|q>>>32-y)+u;}function Y(q,u,v,w,x,y,A){return q=q+(v^(u|~w))+x+A,(q<<y|q>>>32-y)+u;}for(var b0=CryptoJS,X=b0.lib,a0=X.WordArray,Z=X.Hasher,X=b0.algo,W=[],e0=0;64>e0;e0++)W[e0]=4294967296*R.abs(R.sin(e0+1))|0;X=X.MD5=Z.extend({_doReset:function(){this._hash=new a0.init([1732584193,4023233417,2562383102,271733878]);},_doProcessBlock:function(q,u){for(var v=0;16>v;v++){var w=u+v,x=q[w];q[w]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8);}var v=this._hash.words,w=q[u+0],x=q[u+1],y=q[u+2],A=q[u+3],z=q[u+4],C=q[u+5],B=q[u+6],E=q[u+7],G=q[u+8],F=q[u+9],D=q[u+10],H=q[u+11],L=q[u+12],I=q[u+13],K=q[u+14],M=q[u+15],J=v[0],O=v[1],N=v[2],P=v[3],J=V(J,O,N,P,w,7,W[0]),P=V(P,J,O,N,x,12,W[1]),N=V(N,P,J,O,y,17,W[2]),O=V(O,N,P,J,A,22,W[3]),J=V(J,O,N,P,z,7,W[4]),P=V(P,J,O,N,C,12,W[5]),N=V(N,P,J,O,B,17,W[6]),O=V(O,N,P,J,E,22,W[7]),J=V(J,O,N,P,G,7,W[8]),P=V(P,J,O,N,F,12,W[9]),N=V(N,P,J,O,D,17,W[10]),O=V(O,N,P,J,H,22,W[11]),J=V(J,O,N,P,L,7,W[12]),P=V(P,J,O,N,I,12,W[13]),N=V(N,P,J,O,K,17,W[14]),O=V(O,N,P,J,M,22,W[15]),J=Q(J,O,N,P,x,5,W[16]),P=Q(P,J,O,N,B,9,W[17]),N=Q(N,P,J,O,H,14,W[18]),O=Q(O,N,P,J,w,20,W[19]),J=Q(J,O,N,P,C,5,W[20]),P=Q(P,J,O,N,D,9,W[21]),N=Q(N,P,J,O,M,14,W[22]),O=Q(O,N,P,J,z,20,W[23]),J=Q(J,O,N,P,F,5,W[24]),P=Q(P,J,O,N,K,9,W[25]),N=Q(N,P,J,O,A,14,W[26]),O=Q(O,N,P,J,G,20,W[27]),J=Q(J,O,N,P,I,5,W[28]),P=Q(P,J,O,N,y,9,W[29]),N=Q(N,P,J,O,E,14,W[30]),O=Q(O,N,P,J,L,20,W[31]),J=U(J,O,N,P,C,4,W[32]),P=U(P,J,O,N,G,11,W[33]),N=U(N,P,J,O,H,16,W[34]),O=U(O,N,P,J,K,23,W[35]),J=U(J,O,N,P,x,4,W[36]),P=U(P,J,O,N,z,11,W[37]),N=U(N,P,J,O,E,16,W[38]),O=U(O,N,P,J,D,23,W[39]),J=U(J,O,N,P,I,4,W[40]),P=U(P,J,O,N,w,11,W[41]),N=U(N,P,J,O,A,16,W[42]),O=U(O,N,P,J,B,23,W[43]),J=U(J,O,N,P,F,4,W[44]),P=U(P,J,O,N,L,11,W[45]),N=U(N,P,J,O,M,16,W[46]),O=U(O,N,P,J,y,23,W[47]),J=Y(J,O,N,P,w,6,W[48]),P=Y(P,J,O,N,E,10,W[49]),N=Y(N,P,J,O,K,15,W[50]),O=Y(O,N,P,J,C,21,W[51]),J=Y(J,O,N,P,L,6,W[52]),P=Y(P,J,O,N,A,10,W[53]),N=Y(N,P,J,O,D,15,W[54]),O=Y(O,N,P,J,x,21,W[55]),J=Y(J,O,N,P,G,6,W[56]),P=Y(P,J,O,N,M,10,W[57]),N=Y(N,P,J,O,B,15,W[58]),O=Y(O,N,P,J,I,21,W[59]),J=Y(J,O,N,P,z,6,W[60]),P=Y(P,J,O,N,H,10,W[61]),N=Y(N,P,J,O,y,15,W[62]),O=Y(O,N,P,J,F,21,W[63]);v[0]=v[0]+J|0,v[1]=v[1]+O|0,v[2]=v[2]+N|0,v[3]=v[3]+P|0;},_doFinalize:function(){var q=this._data,u=q.words,v=8*this._nDataBytes,w=8*q.sigBytes;u[w>>>5]|=128<<24-w%32;var x=R.floor(v/4294967296);for(u[(w+64>>>9<<4)+15]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),u[(w+64>>>9<<4)+14]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),q.sigBytes=4*(u.length+1),this._process(),q=this._hash,u=q.words,v=0;4>v;v++)w=u[v],u[v]=16711935&(w<<8|w>>>24)|4278255360&(w<<24|w>>>8);return q;},clone:function(){var q=Z.clone.call(this);return q._hash=this._hash.clone(),q;}}),b0.MD5=Z._createHelper(X),b0.HmacMD5=Z._createHmacHelper(X);}(Math),function(){var B=CryptoJS,E=B.lib,G=E.Base,F=E.WordArray,E=B.algo,D=E.EvpKDF=G.extend({cfg:G.extend({keySize:4,hasher:E.MD5,iterations:1}),init:function(q){this.cfg=this.cfg.extend(q);},compute:function(q,u){for(var v=this.cfg,w=v.hasher.create(),x=F.create(),y=x.words,A=v.keySize,v=v.iterations;y.length<A;){z&&w.update(z);var z=w.update(q).finalize(u);w.reset();for(var C=1;v>C;C++)z=w.finalize(z),w.reset();x.concat(z);}return x.sigBytes=4*A,x;}});B.EvpKDF=function(q,u,v){return D.create(v).compute(q,u);};}(),CryptoJS.lib.Cipher||function(A){var z=CryptoJS,C=z.lib,B=C.Base,E=C.WordArray,G=C.BufferedBlockAlgorithm,F=z.enc.Base64,D=z.algo.EvpKDF,H=C.Cipher=G.extend({cfg:B.extend(),createEncryptor:function(q,u){return this.create(this._ENC_XFORM_MODE,q,u);},createDecryptor:function(q,u){return this.create(this._DEC_XFORM_MODE,q,u);},init:function(q,u,v){this.cfg=this.cfg.extend(v),this._xformMode=q,this._key=u,this.reset();},reset:function(){G.reset.call(this),this._doReset();},process:function(q){return this._append(q),this._process();},finalize:function(q){return q&&this._append(q),this._doFinalize();},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(w){return {encrypt:function(q,u,v){return ("string"==typeof u?O:J).encrypt(w,q,u,v);},decrypt:function(q,u,v){return ("string"==typeof u?O:J).decrypt(w,q,u,v);}};}});C.StreamCipher=H.extend({_doFinalize:function(){return this._process(!0);},blockSize:1});var L=z.mode={},I=function(q,u,v){var w=this._iv;w?this._iv=A:w=this._prevBlock;for(var x=0;v>x;x++)q[u+x]^=w[x];},K=(C.BlockCipherMode=B.extend({createEncryptor:function(q,u){return this.Encryptor.create(q,u);},createDecryptor:function(q,u){return this.Decryptor.create(q,u);},init:function(q,u){this._cipher=q,this._iv=u;}})).extend();K.Encryptor=K.extend({processBlock:function(q,u){var v=this._cipher,w=v.blockSize;I.call(this,q,u,w),v.encryptBlock(q,u),this._prevBlock=q.slice(u,u+w);}}),K.Decryptor=K.extend({processBlock:function(q,u){var v=this._cipher,w=v.blockSize,x=q.slice(u,u+w);v.decryptBlock(q,u),I.call(this,q,u,w),this._prevBlock=x;}}),L=L.CBC=K,K=(z.pad={}).Pkcs7={pad:function(q,u){for(var v=4*u,v=v-q.sigBytes%v,w=v<<24|v<<16|v<<8|v,x=[],y=0;v>y;y+=4)x.push(w);v=E.create(x,v),q.concat(v);},unpad:function(q){q.sigBytes-=255&q.words[q.sigBytes-1>>>2];}},C.BlockCipher=H.extend({cfg:H.cfg.extend({mode:L,padding:K}),reset:function(){H.reset.call(this);var q=this.cfg,u=q.iv,q=q.mode;if(this._xformMode==this._ENC_XFORM_MODE)var v=q.createEncryptor;else v=q.createDecryptor,this._minBufferSize=1;this._mode=v.call(q,this,u&&u.words);},_doProcessBlock:function(q,u){this._mode.processBlock(q,u);},_doFinalize:function(){var q=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){q.pad(this._data,this.blockSize);var u=this._process(!0);}else u=this._process(!0),q.unpad(u);return u;},blockSize:4});var M=C.CipherParams=B.extend({init:function(q){this.mixIn(q);},toString:function(q){return (q||this.formatter).stringify(this);}}),L=(z.format={}).OpenSSL={stringify:function(q){var u=q.ciphertext;return q=q.salt,(q?E.create([1398893684,1701076831]).concat(q).concat(u):u).toString(F);},parse:function(q){q=F.parse(q);var u=q.words;if(1398893684==u[0]&&1701076831==u[1]){var v=E.create(u.slice(2,4));u.splice(0,4),q.sigBytes-=16;}return M.create({ciphertext:q,salt:v});}},J=C.SerializableCipher=B.extend({cfg:B.extend({format:L}),encrypt:function(q,u,v,w){w=this.cfg.extend(w);var x=q.createEncryptor(v,w);return u=x.finalize(u),x=x.cfg,M.create({ciphertext:u,key:v,iv:x.iv,algorithm:q,mode:x.mode,padding:x.padding,blockSize:q.blockSize,formatter:w.format});},decrypt:function(q,u,v,w){return w=this.cfg.extend(w),u=this._parse(u,w.format),q.createDecryptor(v,w).finalize(u.ciphertext);},_parse:function(q,u){return "string"==typeof q?u.parse(q,this):q;}}),z=(z.kdf={}).OpenSSL={execute:function(q,u,v,w){return w||(w=E.random(8)),q=D.create({keySize:u+v}).compute(q,w),v=E.create(q.words.slice(u),4*v),q.sigBytes=4*u,M.create({key:q,iv:v,salt:w});}},O=C.PasswordBasedCipher=J.extend({cfg:J.cfg.extend({kdf:z}),encrypt:function(q,u,v,w){return w=this.cfg.extend(w),v=w.kdf.execute(v,q.keySize,q.ivSize),w.iv=v.iv,q=J.encrypt.call(this,q,u,v.key,w),q.mixIn(v),q;},decrypt:function(q,u,v,w){return w=this.cfg.extend(w),u=this._parse(u,w.format),v=w.kdf.execute(v,q.keySize,q.ivSize,u.salt),w.iv=v.iv,J.decrypt.call(this,q,u,v.key,w);}});}(),function(){for(var M=CryptoJS,J=M.lib.BlockCipher,O=M.algo,N=[],P=[],R=[],V=[],Q=[],U=[],Y=[],b0=[],X=[],a0=[],Z=[],W=0;256>W;W++)Z[W]=128>W?W<<1:W<<1^283;for(var e0=0,d0=0,W=0;256>W;W++){var c0=d0^d0<<1^d0<<2^d0<<3^d0<<4,c0=c0>>>8^255&c0^99;N[e0]=c0,P[c0]=e0;var f0=Z[e0],h0=Z[f0],m0=Z[h0],k0=257*Z[c0]^16843008*c0;R[e0]=k0<<24|k0>>>8,V[e0]=k0<<16|k0>>>16,Q[e0]=k0<<8|k0>>>24,U[e0]=k0,k0=16843009*m0^65537*h0^257*f0^16843008*e0,Y[c0]=k0<<24|k0>>>8,b0[c0]=k0<<16|k0>>>16,X[c0]=k0<<8|k0>>>24,a0[c0]=k0,e0?(e0=f0^Z[Z[Z[m0^f0]]],d0^=Z[Z[d0]]):e0=d0=1;}var o0=[0,1,2,4,8,16,32,64,128,27,54],O=O.AES=J.extend({_doReset:function(){for(var q=this._key,u=q.words,v=q.sigBytes/4,q=4*((this._nRounds=v+6)+1),w=this._keySchedule=[],x=0;q>x;x++)if(v>x)w[x]=u[x];else{var y=w[x-1];x%v?v>6&&4==x%v&&(y=N[y>>>24]<<24|N[y>>>16&255]<<16|N[y>>>8&255]<<8|N[255&y]):(y=y<<8|y>>>24,y=N[y>>>24]<<24|N[y>>>16&255]<<16|N[y>>>8&255]<<8|N[255&y],y^=o0[x/v|0]<<24),w[x]=w[x-v]^y;}for(u=this._invKeySchedule=[],v=0;q>v;v++)x=q-v,y=v%4?w[x]:w[x-4],u[v]=4>v||4>=x?y:Y[N[y>>>24]]^b0[N[y>>>16&255]]^X[N[y>>>8&255]]^a0[N[255&y]];},encryptBlock:function(q,u){this._doCryptBlock(q,u,this._keySchedule,R,V,Q,U,N);},decryptBlock:function(q,u){var v=q[u+1];q[u+1]=q[u+3],q[u+3]=v,this._doCryptBlock(q,u,this._invKeySchedule,Y,b0,X,a0,P),v=q[u+1],q[u+1]=q[u+3],q[u+3]=v;},_doCryptBlock:function(q,u,v,w,x,y,A,z){for(var C=this._nRounds,B=q[u]^v[0],E=q[u+1]^v[1],G=q[u+2]^v[2],F=q[u+3]^v[3],D=4,H=1;C>H;H++)var L=w[B>>>24]^x[E>>>16&255]^y[G>>>8&255]^A[255&F]^v[D++],I=w[E>>>24]^x[G>>>16&255]^y[F>>>8&255]^A[255&B]^v[D++],K=w[G>>>24]^x[F>>>16&255]^y[B>>>8&255]^A[255&E]^v[D++],F=w[F>>>24]^x[B>>>16&255]^y[E>>>8&255]^A[255&G]^v[D++],B=L,E=I,G=K;L=(z[B>>>24]<<24|z[E>>>16&255]<<16|z[G>>>8&255]<<8|z[255&F])^v[D++],I=(z[E>>>24]<<24|z[G>>>16&255]<<16|z[F>>>8&255]<<8|z[255&B])^v[D++],K=(z[G>>>24]<<24|z[F>>>16&255]<<16|z[B>>>8&255]<<8|z[255&E])^v[D++],F=(z[F>>>24]<<24|z[B>>>16&255]<<16|z[E>>>8&255]<<8|z[255&G])^v[D++],q[u]=L,q[u+1]=I,q[u+2]=K,q[u+3]=F;},keySize:8});M.AES=J._createHelper(O);}();var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(!function(G){"use strict";function F(q){var u=q.charCodeAt(0);return u===I?62:u===K?63:M>u?-1:M+10>u?u-M+26+26:O+26>u?u-O:J+26>u?u-J+26:void 0;}function D(u){function v(q){C[E++]=q;}var w,x,y,A,z,C;if(u.length%4>0)throw  new Error("Invalid string. Length must be a multiple of 4");var B=u.length;z="="===u.charAt(B-2)?2:"="===u.charAt(B-1)?1:0,C=new L(3*u.length/4-z),y=z>0?u.length-4:u.length;var E=0;for(w=0,x=0;y>w;w+=4,x+=3)A=F(u.charAt(w))<<18|F(u.charAt(w+1))<<12|F(u.charAt(w+2))<<6|F(u.charAt(w+3)),v((16711680&A)>>16),v((65280&A)>>8),v(255&A);return 2===z?(A=F(u.charAt(w))<<2|F(u.charAt(w+1))>>4,v(255&A)):1===z&&(A=F(u.charAt(w))<<10|F(u.charAt(w+1))<<4|F(u.charAt(w+2))>>2,v(A>>8&255),v(255&A)),C;}function H(u){function v(q){return lookup.charAt(q);}function w(q){return v(q>>18&63)+v(q>>12&63)+v(q>>6&63)+v(63&q);}var x,y,A,z=u.length%3,C="";for(x=0,A=u.length-z;A>x;x+=3)y=(u[x]<<16)+(u[x+1]<<8)+u[x+2],C+=w(y);switch(z){case 1:y=u[u.length-1],C+=v(y>>2),C+=v(y<<4&63),C+="==";break;case 2:y=(u[u.length-2]<<8)+u[u.length-1],C+=v(y>>10),C+=v(y>>4&63),C+=v(y<<2&63),C+="=";}return C;}var L="undefined"!=typeof Uint8Array?Uint8Array:Array,I="+".charCodeAt(0),K="/".charCodeAt(0),M="0".charCodeAt(0),J="a".charCodeAt(0),O="A".charCodeAt(0);G.toByteArray=D,G.fromByteArray=H;}("undefined"==typeof exports?this.base64js={}:exports),function(P){"use strict";function R(){function v(q){var u=this;return u instanceof v?(q instanceof v?(u.s=q.s,u.e=q.e,u.c=q.c.slice()):Q(u,q),void (u.constructor=v)):void 0===q?R():new v(q);}return v.prototype=c0,v.DP=X,v.RM=a0,v;}function V(q,u,v){var w=q.constructor,x=u-(q=new w(q)).e,y=q.c;for(y.length>++u&&U(q,x,w.RM),y[0]?v?x=u:(y=q.c,x=q.e+x+1):++x;y.length<x;y.push(0));return x=q.e,1===v||v&&(x>=u||e0>=x)?(q.s<0&&y[0]?"-":"")+(y.length>1?y[0]+"."+y.join("").slice(1):y[0])+(0>x?"e":"e+")+x:q.toString();}function Q(q,u){var v,w,x;for(0===u&&0>1/u?u="-0":f0.test(u+="")||Y(0/0),q.s="-"==u.charAt(0)?(u=u.slice(1),-1):1,(v=u.indexOf("."))>-1&&(u=u.replace(".","")),(w=u.search(/e/i))>0?(0>v&&(v=w),v+=+u.slice(w+1),u=u.substring(0,w)):0>v&&(v=u.length),w=0;"0"==u.charAt(w);w++);if(w==(x=u.length))q.c=[q.e=0];else{for(;"0"==u.charAt(--x););for(q.e=v-w-1,q.c=[],v=0;x>=w;q.c[v++]=+u.charAt(w++));}return q;}function U(q,u,v,w){var x,y=q.c,A=q.e+u+1;if(1===v?w=y[A]>=5:2===v?w=y[A]>5||5==y[A]&&(w||0>A||y[A+1]!==x||1&y[A-1]):3===v?w=w||y[A]!==x||0>A:(w=!1,0!==v&&Y("!Big.RM!")),1>A||!y[0])w?(q.e=-u,q.c=[1]):q.c=[q.e=0];else{if(y.length=A--,w)for(;++y[A]>9;)y[A]=0,A--||(++q.e,y.unshift(1));for(A=y.length;!y[--A];y.pop());}return q;}function Y(q){var u=new Error(q);throw u.name="BigError",u;}var b0,X=20,a0=1,Z=1e6,W=1e6,e0=-7,d0=21,c0={},f0=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;c0.abs=function(){var q=new this.constructor(this);return q.s=1,q;},c0.cmp=function(q){var u,v=this,w=v.c,x=(q=new v.constructor(q)).c,y=v.s,A=q.s,z=v.e,C=q.e;if(!w[0]||!x[0])return w[0]?y:x[0]?-A:0;if(y!=A)return y;if(u=0>y,z!=C)return z>C^u?1:-1;for(y=-1,A=(z=w.length)<(C=x.length)?z:C;++y<A;)if(w[y]!=x[y])return w[y]>x[y]^u?1:-1;return z==C?0:z>C^u?1:-1;},c0.div=function(q){var u=this,v=u.constructor,w=u.c,x=(q=new v(q)).c,y=u.s==q.s?1:-1,A=v.DP;if((A!==~~A||0>A||A>Z)&&Y("!Big.DP!"),!w[0]||!x[0])return w[0]==x[0]&&Y(0/0),x[0]||Y(y/0),new v(0*y);var z,C,B,E,G,F,D=x.slice(),H=z=x.length,L=w.length,I=w.slice(0,z),K=I.length,M=q,J=M.c=[],O=0,N=A+(M.e=u.e-q.e)+1;for(M.s=y,y=0>N?0:N,D.unshift(0);K++<z;I.push(0));do {for(B=0;10>B;B++){if(z!=(K=I.length))E=z>K?1:-1;else for(G=-1,E=0;++G<z;)if(x[G]!=I[G]){E=x[G]>I[G]?1:-1;break;}if(!(0>E))break;for(C=K==z?x:D;K;){if(I[--K]<C[K]){for(G=K;G&&!I[--G];I[G]=9);--I[G],I[K]+=10;}I[K]-=C[K];}for(;!I[0];I.shift());}J[O++]=E?B:++B,I[0]&&E?I[K]=w[H]||0:I=[w[H]];}while((H++<L||I[0]!==F)&&y--);return J[0]||1==O||(J.shift(),M.e--),O>N&&U(M,A,v.RM,I[0]!==F),M;},c0.eq=function(q){return !this.cmp(q);},c0.gt=function(q){return this.cmp(q)>0;},c0.gte=function(q){return this.cmp(q)>-1;},c0.lt=function(q){return this.cmp(q)<0;},c0.lte=function(q){return this.cmp(q)<1;},c0.sub=c0.minus=function(q){var u,v,w,x,y=this,A=y.constructor,z=y.s,C=(q=new A(q)).s;if(z!=C)return q.s=-C,y.plus(q);var B=y.c.slice(),E=y.e,G=q.c,F=q.e;if(!B[0]||!G[0])return G[0]?(q.s=-C,q):new A(B[0]?y:0);if(z=E-F){for((x=0>z)?(z=-z,w=B):(F=E,w=G),w.reverse(),C=z;C--;w.push(0));w.reverse();}else for(v=((x=B.length<G.length)?B:G).length,z=C=0;v>C;C++)if(B[C]!=G[C]){x=B[C]<G[C];break;}if(x&&(w=B,B=G,G=w,q.s=-q.s),(C=(v=G.length)-(u=B.length))>0)for(;C--;B[u++]=0);for(C=u;v>z;){if(B[--v]<G[v]){for(u=v;u&&!B[--u];B[u]=9);--B[u],B[v]+=10;}B[v]-=G[v];}for(;0===B[--C];B.pop());for(;0===B[0];)B.shift(),--F;return B[0]||(q.s=1,B=[F=0]),q.c=B,q.e=F,q;},c0.mod=function(q){var u,v=this,w=v.constructor,x=v.s,y=(q=new w(q)).s;return q.c[0]||Y(0/0),v.s=q.s=1,u=1==q.cmp(v),v.s=x,q.s=y,u?new w(v):(x=w.DP,y=w.RM,w.DP=w.RM=0,v=v.div(q),w.DP=x,w.RM=y,this.minus(v.times(q)));},c0.add=c0.plus=function(q){var u,v=this,w=v.constructor,x=v.s,y=(q=new w(q)).s;if(x!=y)return q.s=-y,v.minus(q);var A=v.e,z=v.c,C=q.e,B=q.c;if(!z[0]||!B[0])return B[0]?q:new w(z[0]?v:0*x);if(z=z.slice(),x=A-C){for(x>0?(C=A,u=B):(x=-x,u=z),u.reverse();x--;u.push(0));u.reverse();}for(z.length-B.length<0&&(u=B,B=z,z=u),x=B.length,y=0;x;)y=(z[--x]=z[x]+B[x]+y)/10|0,z[x]%=10;for(y&&(z.unshift(y),++C),x=z.length;0===z[--x];z.pop());return q.c=z,q.e=C,q;},c0.pow=function(q){var u=this,v=new u.constructor(1),w=v,x=0>q;for((q!==~~q||-W>q||q>W)&&Y("!pow!"),q=x?-q:q;1&q&&(w=w.times(u)),q>>=1;)u=u.times(u);return x?v.div(w):w;},c0.round=function(q,u){var v=this,w=v.constructor;return null==q?q=0:(q!==~~q||0>q||q>Z)&&Y("!round!"),U(v=new w(v),q,null==u?w.RM:u),v;},c0.sqrt=function(){var q,u,v,w=this,x=w.constructor,y=w.c,A=w.s,z=w.e,C=new x("0.5");if(!y[0])return new x(w);0>A&&Y(0/0),A=Math.sqrt(w.toString()),0===A||A===1/0?(q=y.join(""),q.length+z&1||(q+="0"),u=new x(Math.sqrt(q).toString()),u.e=((z+1)/2|0)-(0>z||1&z)):u=new x(A.toString()),A=u.e+(x.DP+=4);do v=u,u=C.times(v.plus(w.div(v)));while(v.c.slice(0,A).join("")!==u.c.slice(0,A).join(""));return U(u,x.DP-=4,x.RM),u;},c0.mul=c0.times=function(q){var u,v=this,w=v.constructor,x=v.c,y=(q=new w(q)).c,A=x.length,z=y.length,C=v.e,B=q.e;if(q.s=v.s==q.s?1:-1,!x[0]||!y[0])return new w(0*q.s);for(q.e=C+B,z>A&&(u=x,x=y,y=u,B=A,A=z,z=B),u=new Array(B=A+z);B--;u[B]=0);for(C=z;C--;){for(z=0,B=A+C;B>C;)z=u[B]+y[C]*x[B-C-1]+z,u[B--]=z%10,z=z/10|0;u[B]=(u[B]+z)%10;}for(z&&++q.e,u[0]||u.shift(),C=u.length;!u[--C];u.pop());return q.c=u,q;},c0.toString=c0.valueOf=c0.toJSON=function(){var q=this,u=q.e,v=q.c.join(""),w=v.length;if(e0>=u||u>=d0)v=v.charAt(0)+(w>1?"."+v.slice(1):"")+(0>u?"e":"e+")+u;else if(0>u){for(;++u;v="0"+v);v="0."+v;}else if(u>0)if(++u>w)for(u-=w;u--;v+="0");else w>u&&(v=v.slice(0,u)+"."+v.slice(u));else w>1&&(v=v.charAt(0)+"."+v.slice(1));return q.s<0&&q.c[0]?"-"+v:v;},c0.toExponential=function(q){return null==q?q=this.c.length-1:(q!==~~q||0>q||q>Z)&&Y("!toExp!"),V(this,q,1);},c0.toFixed=function(q){var u,v=this,w=e0,x=d0;return e0=-(d0=1/0),null==q?u=v.toString():q===~~q&&q>=0&&Z>=q&&(u=V(v,v.e+q),v.s<0&&v.c[0]&&u.indexOf("-")<0&&(u="-"+u)),e0=w,d0=x,u||Y("!toFix!"),u;},c0.toPrecision=function(q){return null==q?this.toString():((q!==~~q||1>q||q>Z)&&Y("!toPre!"),V(this,q-1,2));},b0=R(),"function"==typeof define&&define.amd?define(function(){return b0;}):"undefined"!=typeof module&&module.exports?module.exports=b0:P.Big=b0;}(this),!function(q){var u=this;"object"==typeof exports?module.exports=q(u):"function"==typeof define&&define.amd?define([],function(){return q(u);}):u.jDataView=q(u);}(function(G){"use strict";function F(q,u){return !u&&q instanceof Array?q:Array.prototype.slice.call(q);}function D(q,u){return void 0!==q?q:u;}function H(q,u,v,w){if(q instanceof H){var x=q.slice(u,u+v);return x._littleEndian=D(w,x._littleEndian),x;}if(!(this instanceof H))return new H(q,u,v,w);if(this.buffer=q=H.wrapBuffer(q),this._isArrayBuffer=J.ArrayBuffer&&q instanceof ArrayBuffer,this._isPixelData=!0&&J.PixelData&&q instanceof CanvasPixelArray,this._isDataView=J.DataView&&this._isArrayBuffer,this._isNodeBuffer=!1,!(this._isArrayBuffer||this._isPixelData||q instanceof Array))throw  new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!w;var y="byteLength" in q?q.byteLength:q.length;this.byteOffset=u=D(u,0),this.byteLength=v=D(v,y-u),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(q,u,v):this._checkBounds(u,v,y),this._engineAction=this._isDataView?this._dataViewAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction;}function L(q){for(var u=J.ArrayBuffer?Uint8Array:Array,v=new u(q.length),w=0,x=q.length;x>w;w++)v[w]=255&q.charCodeAt(w);return v;}function I(q){return q>=0&&31>q?1<<q:I[q]||(I[q]=Math.pow(2,q));}function K(q,u){this.lo=q,this.hi=u;}function M(){K.apply(this,arguments);}var J={NodeBuffer:!1,DataView:"DataView" in G,ArrayBuffer:"ArrayBuffer" in G,PixelData:!0&&"CanvasPixelArray" in G&&"ImageData" in G&&"document" in G},O=G.TextEncoder,N=G.TextDecoder;if(J.PixelData){var P=function(q,u){var v=P.context2d.createImageData((q+3)/4,1).data;if(v.byteLength=q,void 0!==u)for(var w=0;q>w;w++)v[w]=u[w];return v;};P.context2d=document.createElement("canvas").getContext("2d");}var R={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};H.wrapBuffer=function(q){switch(typeof q){case "number":if(J.ArrayBuffer)q=new Uint8Array(q).buffer;else if(J.PixelData)q=P(q);else{q=new Array(q);for(var u=0;u<q.length;u++)q[u]=0;}return q;case "string":q=L(q);default:return "length" in q&&!(J.ArrayBuffer&&q instanceof ArrayBuffer||J.PixelData&&q instanceof CanvasPixelArray)&&(J.ArrayBuffer?q instanceof ArrayBuffer||(q=new Uint8Array(q).buffer,q instanceof ArrayBuffer||(q=new Uint8Array(F(q,!0)).buffer)):q=J.PixelData?P(q.length,q):F(q)),q;}},H.createBuffer=function(){return H.wrapBuffer(arguments);},H.Uint64=K,K.prototype={valueOf:function(){return this.lo+I(32)*this.hi;},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments);}},K.fromNumber=function(q){var u=Math.floor(q/I(32)),v=q-u*I(32);return new K(v,u);},H.Int64=M,M.prototype="create" in Object?Object.create(K.prototype):new K,M.prototype.valueOf=function(){return this.hi<I(31)?K.prototype.valueOf.apply(this,arguments):-(I(32)-this.lo+I(32)*(I(32)-1-this.hi));},M.fromNumber=function(q){var u,v;if(q>=0){var w=K.fromNumber(q);u=w.lo,v=w.hi;}else v=Math.floor(q/I(32)),u=q-v*I(32),v+=I(32);return new M(u,v);};var V=H.prototype={compatibility:J,_checkBounds:function(q,u,v){if("number"!=typeof q)throw  new TypeError("Offset is not a number.");if("number"!=typeof u)throw  new TypeError("Size is not a number.");if(0>u)throw  new RangeError("Length is negative.");if(0>q||q+u>D(v,this.byteLength))throw  new RangeError("Offsets are out of bounds.");},_action:function(q,u,v,w,x){return this._engineAction(q,u,D(v,this._offset),D(w,this._littleEndian),x);},_dataViewAction:function(q,u,v,w,x){return this._offset=v+R[q],u?this._view["get"+q](v,w):this._view["set"+q](v,x,w);},_arrayBufferAction:function(q,u,v,w,x){var y,A=R[q],z=G[q+"Array"];if(w=D(w,this._littleEndian),1===A||(this.byteOffset+v)%A===0&&w)return y=new z(this.buffer,this.byteOffset+v,1),this._offset=v+A,u?y[0]:y[0]=x;var C=new Uint8Array(u?this.getBytes(A,v,w,!0):A);return y=new z(C.buffer,0,1),u?y[0]:(y[0]=x,void this._setBytes(v,C,w));},_arrayAction:function(q,u,v,w,x){return u?this["_get"+q](v,w):this["_set"+q](v,x,w);},_getBytes:function(q,u,v){v=D(v,this._littleEndian),u=D(u,this._offset),q=D(q,this.byteLength-u),this._checkBounds(u,q),u+=this.byteOffset,this._offset=u-this.byteOffset+q;var w=this._isArrayBuffer?new Uint8Array(this.buffer,u,q):(this.buffer.slice||Array.prototype.slice).call(this.buffer,u,u+q);return v||1>=q?w:F(w).reverse();},getBytes:function(q,u,v,w){var x=this._getBytes(q,u,D(v,!0));return w?F(x):x;},_setBytes:function(q,u,v){var w=u.length;if(0!==w){if(v=D(v,this._littleEndian),q=D(q,this._offset),this._checkBounds(q,w),!v&&w>1&&(u=F(u,!0).reverse()),q+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,q,w).set(u);else for(var x=0;w>x;x++)this.buffer[q+x]=u[x];this._offset=q-this.byteOffset+w;}},setBytes:function(q,u,v){this._setBytes(q,u,D(v,!0));},getString:function(q,u,v){var w=this._getBytes(q,u,!0);if(v="utf8"===v?"utf-8":v||"binary",N&&"binary"!==v)return new N(v).decode(this._isArrayBuffer?w:new Uint8Array(w));var x="";q=w.length;for(var y=0;q>y;y++)x+=String.fromCharCode(w[y]);return "utf-8"===v&&(x=decodeURIComponent(escape(x))),x;},setString:function(q,u,v){v="utf8"===v?"utf-8":v||"binary";var w;O&&"binary"!==v?w=new O(v).encode(u):("utf-8"===v&&(u=unescape(encodeURIComponent(u))),w=L(u)),this._setBytes(q,w,!0);},getChar:function(q){return this.getString(1,q);},setChar:function(q,u){this.setString(q,u);},tell:function(){return this._offset;},seek:function(q){return this._checkBounds(q,0),this._offset=q;},skip:function(q){return this.seek(this._offset+q);},slice:function(v,w,x){function y(q,u){return 0>q?q+u:q;}return v=y(v,this.byteLength),w=y(D(w,this.byteLength),this.byteLength),x?new H(this.getBytes(w-v,v,!0,!0),void 0,void 0,this._littleEndian):new H(this.buffer,this.byteOffset+v,w-v,this._littleEndian);},alignBy:function(q){return this._bitOffset=0,1!==D(q,1)?this.skip(q-(this._offset%q||q)):this._offset;},_getFloat64:function(q,u){var v=this._getBytes(8,q,u),w=1-2*(v[7]>>7),x=((v[7]<<1&255)<<3|v[6]>>4)-1023,y=(15&v[6])*I(48)+v[5]*I(40)+v[4]*I(32)+v[3]*I(24)+v[2]*I(16)+v[1]*I(8)+v[0];return 1024===x?0!==y?0/0:1/0*w:-1023===x?w*y*I(-1074):w*(1+y*I(-52))*I(x);},_getFloat32:function(q,u){var v=this._getBytes(4,q,u),w=1-2*(v[3]>>7),x=(v[3]<<1&255|v[2]>>7)-127,y=(127&v[2])<<16|v[1]<<8|v[0];return 128===x?0!==y?0/0:1/0*w:-127===x?w*y*I(-149):w*(1+y*I(-23))*I(x);},_get64:function(q,u,v){v=D(v,this._littleEndian),u=D(u,this._offset);for(var w=v?[0,4]:[4,0],x=0;2>x;x++)w[x]=this.getUint32(u+w[x],v);return this._offset=u+8,new q(w[0],w[1]);},getInt64:function(q,u){return this._get64(M,q,u);},getUint64:function(q,u){return this._get64(K,q,u);},_getInt32:function(q,u){var v=this._getBytes(4,q,u);return v[3]<<24|v[2]<<16|v[1]<<8|v[0];},_getUint32:function(q,u){return this._getInt32(q,u)>>>0;},_getInt16:function(q,u){return this._getUint16(q,u)<<16>>16;},_getUint16:function(q,u){var v=this._getBytes(2,q,u);return v[1]<<8|v[0];},_getInt8:function(q){return this._getUint8(q)<<24>>24;},_getUint8:function(q){return this._getBytes(1,q)[0];},_getBitRangeData:function(q,u){var v=(D(u,this._offset)<<3)+this._bitOffset,w=v+q,x=v>>>3,y=w+7>>>3,A=this._getBytes(y-x,x,!0),z=0;(this._bitOffset=7&w)&&(this._bitOffset-=8);for(var C=0,B=A.length;B>C;C++)z=z<<8|A[C];return {start:x,bytes:A,wideValue:z};},getSigned:function(q,u){var v=32-q;return this.getUnsigned(q,u)<<v>>v;},getUnsigned:function(q,u){var v=this._getBitRangeData(q,u).wideValue>>>-this._bitOffset;return 32>q?v&~(-1<<q):v;},_setBinaryFloat:function(q,u,v,w,x){var y,A,z=0>u?1:0,C=~(-1<<w-1),B=1-C;0>u&&(u=-u),0===u?(y=0,A=0):isNaN(u)?(y=2*C+1,A=1):1/0===u?(y=2*C+1,A=0):(y=Math.floor(Math.log(u)/Math.LN2),y>=B&&C>=y?(A=Math.floor((u*I(-y)-1)*I(v)),y+=C):(A=Math.floor(u/I(B-v)),y=0));for(var E=[];v>=8;)E.push(A%256),A=Math.floor(A/256),v-=8;for(y=y<<v|A,w+=v;w>=8;)E.push(255&y),y>>>=8,w-=8;E.push(z<<w|y),this._setBytes(q,E,x);},_setFloat32:function(q,u,v){this._setBinaryFloat(q,u,23,8,v);},_setFloat64:function(q,u,v){this._setBinaryFloat(q,u,52,11,v);},_set64:function(q,u,v,w){v instanceof q||(v=q.fromNumber(v)),w=D(w,this._littleEndian),u=D(u,this._offset);var x=w?{lo:0,hi:4}:{lo:4,hi:0};for(var y in x)this.setUint32(u+x[y],v[y],w);this._offset=u+8;},setInt64:function(q,u,v){this._set64(M,q,u,v);},setUint64:function(q,u,v){this._set64(K,q,u,v);},_setUint32:function(q,u,v){this._setBytes(q,[255&u,u>>>8&255,u>>>16&255,u>>>24],v);},_setUint16:function(q,u,v){this._setBytes(q,[255&u,u>>>8&255],v);},_setUint8:function(q,u){this._setBytes(q,[255&u]);},setUnsigned:function(q,u,v){var w=this._getBitRangeData(v,q),x=w.wideValue,y=w.bytes;x&=~(~(-1<<v)<<-this._bitOffset),x|=(32>v?u&~(-1<<v):u)<<-this._bitOffset;for(var A=y.length-1;A>=0;A--)y[A]=255&x,x>>>=8;this._setBytes(w.start,y,!0);}};for(var Q in R)!function(w){V["get"+w]=function(q,u){return this._action(w,!0,q,u);},V["set"+w]=function(q,u,v){this._action(w,!1,q,v,u);};}(Q);V._setInt32=V._setUint32,V._setInt16=V._setUint16,V._setInt8=V._setUint8,V.setSigned=V.setUnsigned;for(var U in V)"set"===U.slice(0,3)&&!function(q){V["write"+q]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+q].apply(this,arguments);};}(U.slice(3));return H;}),videojs.Html5){var onPlaybackrateChanged=function(q){q.srcElement&&this.player().paused()===!1&&(1===q.srcElement.playbackRate?this.player().loadingSpinner.hide():this.player().loadingSpinner.show());},onVideoWaiting=function(){this.player().loadingSpinner.show();},onLoadedMetadata=function(){},onVideoPause=function(){},onVideoPlay=function(){this.forcedEnd=!1;},onVideoPlaying=function(){this.initialPlaybackHasStarted===!1&&(this.initialPlaybackHasStarted=!0),this.player().loadingSpinner.hide();},onVideoEnded=function(){},onVideoTime=function(){if(CL.configs.isLive===!1&&this.player().mediaPlayer.duration()-this.player().mediaPlayer.time()<=2&&this.player().mediaPlayer.duration()==this.el().duration&&(void 0===this.forcedEnd||this.forcedEnd!==!0)){this.forcedEnd=!0;var q=this.player().mediaPlayer.time(),u=this.player().mediaPlayer.duration(),v=this.player().src(),w=this;setTimeout(function(){w.player().paused()===!1&&v===w.player().src()&&w.ended()===!1&&w.player().mediaPlayer.time()>=q&&w.player().mediaPlayer.duration()===u&&w.el().dispatchEvent(new Event("ended"));},2e3);}},onVideoSeeking=function(){this.initialPlaybackHasStarted===!0&&this.player().loadingSpinner.hide();},onVideoSeeked=function(){},onDurationChange=function(){};videojs.Dashjs=videojs.Html5.extend({init:function(Q,U,Y){var b0,X,a0,Z=function(q){if("download"===q.error){var u,v=q.event.request;"manifest"==q.event.id?u="MANIFEST_LOAD_ERROR":"content"==q.event.id&&(u="SEGMENT_LOAD_ERROR"),Q.error({code:2,subtype:u,message:"string"===v.responseType?v.responseText:"",status:v.status,statusText:v.statusText,url:v.responseURL}),Q.removeClass("vjs-error");}else if("licenseError"===q.error){var w=q.event.error;Q.error({code:2,subtype:"LICENSE_ACQUISITION_ERROR",message:w.message,status:w.status,statusText:w.statusText,url:w.responseURL}),Q.removeClass("vjs-error");}},W=function(){Q.trigger({type:"manifestLoaded"});};this.initialPlaybackHasStarted=!1;var e0=!!Q.options().autoplay;b0=U.source,delete  U.source,U.autoplay=!!Q.options().autoplay,void 0!==Q.options().context?(X=Q.options().context,U.autoplay=X.config.autoplay):X=new castLabsDashJS.classes.DRMtodayContext(U),a0=new MediaPlayer(X),Q.usingNativeControls(CL.configs.isChromeAndroid===!0?!0:!1),Q.setAudioTrack=videojs.bind(this,this.setAudioTrack),Q.audioTracks=videojs.bind(this,this.audioTracks),Q.setSubsTrack=videojs.bind(this,this.setSubsTrack),Q.subtitleTracks=videojs.bind(this,this.subtitleTracks),Q.absoluteTime=videojs.bind(this,this.absoluteTime),Q.getPlaybackStatistics=videojs.bind(this,this.getPlaybackStatistics),Q.enableABRSwitching=videojs.bind(this,this.enableABRSwitching),Q.setQualityFor=videojs.bind(this,this.setQualityFor),videojs.Html5.call(this,Q,U,Y),CL.configs.element=this.el(),this.removeEventListener();var d0=this.el();CL.configs.isChromeAndroid===!0&&(d0.controls=!0,d0.style.zIndex=100),d0.addEventListener("durationchange",onDurationChange.bind(this)),d0.addEventListener("ended",onVideoEnded.bind(this)),d0.addEventListener("loadedmetadata",onLoadedMetadata.bind(this)),d0.addEventListener("play",onVideoPlay.bind(this)),d0.addEventListener("playing",onVideoPlaying.bind(this)),d0.addEventListener("pause",onVideoPause.bind(this)),d0.addEventListener("ratechange",onPlaybackrateChanged.bind(this)),d0.addEventListener("seeking",onVideoSeeking.bind(this)),d0.addEventListener("seeked",onVideoSeeked.bind(this)),d0.addEventListener("timeupdate",onVideoTime.bind(this)),d0.addEventListener("waiting",onVideoWaiting.bind(this)),Q.options().children.bigPlayButton=!e0,Q.options().customErrorHandler=Z,Q.options().onManifestLoaded=W,b0&&b0.src&&(a0.loadVideo(b0.src),a0.eventBus.addEventListener("error",Q.options().customErrorHandler,!1),a0.eventBus.addEventListener(MediaPlayer.events.MANIFEST_LOADED,Q.options().onManifestLoaded,!1)),Q.mediaPlayer=a0;var c0=function(q){var u=Q.getPlaybackStatistics();if(!q.data){var v,w=u.video,x=w.bandwidth,y=w.activeTrack.representations,A=0;for(v=0;v<y.length;v++)if(y[v].bandwidth===x){A=v;break;}q.data={mediaType:"video",oldQuality:A,newQuality:A};}var z,C,B=q.data;if("video"===B.mediaType&&"normal"!==CL.manifest.pictureSize){C=u.video.activeTrack.representations[B.oldQuality],z=u.video.activeTrack.representations[B.newQuality];var E,G=Q.el();E=G.childNodes[0];var F,D,H,L,I,K,M,J,O,N,P,R,V;switch(L=G.clientWidth,I=G.clientHeight,M=C.height,K=C.width,D=M/K,O=z.height,J=z.width,H=O/J,F=I/L,G.style.overflow="",E.style.width=L+"px",E.style.height=I+"px",E.style.transform="",CL.manifest.pictureSize){case "crop":G.style.overflow="hidden",R=(E.clientWidth-J)/2+"px",V=(E.clientHeight-O)/2+"px",E.style.width=J+"px",E.style.height=O+"px",E.style.transform="translateX("+R+") translateY("+V+")";break;case "stretch":F>H?(N=1,P=F/H,R="0px"):(N=H/F,P=1,R="0px"),E.style.transform="scaleX("+N+") scaleY("+P+") translateX("+R+")";}}};Q.on("loadedmetadata",function(){Q.mediaPlayer.getABRController().subscribe("qualityChanged",this,c0,!1);}),Q.on("firstplay",c0),Q.context=X;}}),videojs.Dashjs.prototype.removeEventListener=function(){var q=this.el();q.removeEventListener("durationchange",onDurationChange),q.removeEventListener("ended",onVideoEnded),q.removeEventListener("loadedmetadata",onLoadedMetadata),q.removeEventListener("play",onVideoPlay),q.removeEventListener("playing",onVideoPlaying),q.removeEventListener("pause",onVideoPause),q.removeEventListener("ratechange",onPlaybackrateChanged),q.removeEventListener("seeking",onVideoSeeking),q.removeEventListener("seeked",onVideoSeeked),q.removeEventListener("timeupdate",onVideoTime),q.removeEventListener("waiting",onVideoWaiting);},videojs.Dashjs.prototype.buffered=function(){var q=videojs.Html5.prototype.buffered.call(this);if(q.length>1){for(var u=this.currentTime(),v=0;v<q.length;v++)if(q.start(v)<=u&&u<=q.end(v))return videojs.createTimeRange(q.start(v),q.end(v));return videojs.createTimeRange(0,0);}return q;},videojs.Dashjs.prototype.currentTime=function(){if(this.player().mediaPlayer)try{var u=this.player().mediaPlayer.time();return u;}catch(q){}return videojs.Html5.prototype.currentTime.call(this);},videojs.Dashjs.prototype.absoluteTime=function(){if(this.player().mediaPlayer)try{return this.player().mediaPlayer.absoluteTime();}catch(q){}return videojs.Html5.prototype.currentTime.call(this);},videojs.Dashjs.prototype.setAudioTrack=function(q){this.player().mediaPlayer.setActiveTrack("audio",q);},videojs.Dashjs.prototype.setSubsTrack=function(q){this.player().setTextTrack(q);},videojs.Dashjs.prototype.audioTracks=function(){return this.toLangs(this.tracks("audio"));},videojs.Dashjs.prototype.subtitleTracks=function(){return this.tracks("text");},videojs.Dashjs.prototype.tracks=function(q){return this.player().mediaPlayer.getAvailableTracks(q);},videojs.Dashjs.prototype.toLangs=function(q){var u,v=[];for(u=0;u<q.length;u++)v.push(q[u].name);return v;},videojs.Dashjs.prototype.toTrackId=function(q,u){var v;for(v=0;v<u.length;v++)if(u[v].name===q)return u[v].id;return null;},videojs.Dashjs.prototype.setCurrentTime=function(q){this.player().mediaPlayer?this.player().mediaPlayer.seek(q):videojs.Html5.prototype.setCurrentTime.call(this,q);},videojs.Dashjs.prototype.duration=function(){var u=this.player().mediaPlayer;if(u&&u.isReady())try{var v=!1;return null!==u.adapter&&null!==u.adapter.manifestModel&&null!==u.adapter.manifestModel.getValue()&&(v="dynamic"===u.adapter.manifestModel.getValue().type),v?-1:u.duration();}catch(q){}return videojs.Html5.prototype.duration.call(this);},videojs.Dashjs.isSupported=function(){{var q=new castLabsDashJS.classes.Utils;q.supportsMSE();}return CL.configs.isActiveVideoChrome===!0?!0:!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.42c00c');},videojs.Dashjs.canPlaySource=function(q){return "application/dash+xml"===q.type?"maybe":"";},videojs.Dashjs.prototype.play=function(){var q=this.player().mediaPlayer.getVideoModel();q.play();},videojs.Dashjs.prototype.getPlaybackStatistics=function(){var A,z,C={};A=this.player().mediaPlayer,z=A.getMetricsExt();var B=function(q){var u,v,w,x,y;return y={},u=A.getMetricsFor(q),v=z.getCurrentRepresentationSwitch(u),w=z.getCurrentBufferLevel(u),x=z.getCurrentDroppedFrames(u),null!==v&&(y.bandwidth=z.getBandwidthForRepresentation(v.to)),null!==w&&(y.bufferLength=parseFloat(w.level.toPrecision(5)),y.bufferLevel=parseFloat(Math.min(y.bufferLength/MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY,1).toPrecision(2))),null!==x&&(y.droppedFrames=x.droppedFrames),null!==v&&(y.bandwidth=z.getBandwidthForRepresentation(v.to)),y.activeTrack=CL.configs.activeTrack[q],y;};return activeTextTrack=this.player().activeSubtitleTrack,C={audio:B("audio"),video:B("video"),text:{activeTrack:void 0===activeTextTrack?null:activeTextTrack}};},videojs.Dashjs.prototype.enableABRSwitching=function(q){var u;void 0===q&&(q=!0),u=this.player().mediaPlayer,player.mediaPlayer.setAutoSwitchQuality(q);},videojs.Dashjs.prototype.setQualityFor=function(q,u){var v;if(void 0===q||"video"!==q&&"audio"!==q)throw  new Error("You must specify a valid type (video or audio) when setting the quality");if(void 0===u)throw  new Error("You must specify a quality index when setting the quality");v=this.player().mediaPlayer,player.mediaPlayer.setQualityFor(q,u);},videojs.Dashjs.prototype.error=function(){try{var u=this.player().options().sources;return 0===u.length?!0:videojs.Html5.prototype.error.call(this);}catch(q){}};}videojs.Dashas=videojs.Flash.extend({init:function(q,u,v){var w,x;u.assetId&&(w=encodeURIComponent(videojs.Dashas.buildMetadataUrl(u)),x=encodeURIComponent(videojs.Dashas.buildOptData(u))),this.cache_={buffered:{timestamp:0,value:null},currentTime:{timestmap:0,value:null},playing:!1},this.initialized_=!1,this.playPressed_=!1,u.swf=u.flashFile,maxBufferLength=15,void 0!==u.ABRParameters&&null!==u.ABRParameters&&""!==u.ABRParameters&&u.ABRParameters.maxBufferLength&&void 0!==u.ABRParameters.maxBufferLength&&(maxBufferLength=u.ABRParameters.maxBufferLength),u.flashVars=videojs.util.mergeOptions({metadataUrl:w,authenticationToken:x,spinner:!1,watermark:!1,debug:u.debug&&u.debug===!0?!0:!1,quality:"autolow",errorEventProxyFunction:"videojs.Dashas.onError",maxBufferLength:maxBufferLength},u.flashVars),u.source&&u.source.src&&(u.flashVars.src=encodeURIComponent(u.source.src)),videojs.Flash.call(this,q,u,v),q.setAudioTrack=videojs.bind(this,this.setAudioTrack),q.audioTracks=videojs.bind(this,this.audioTracks),q.subtitleTracks=videojs.bind(this,this.textTracks),q.absoluteTime=videojs.bind(this,this.currentTime),q.setSubsTrack=videojs.bind(this,this.setSubsTrack),q.getBuffered=videojs.bind(this,this.getBuffered),q.getBufferLevel=videojs.bind(this,this.getBufferLevel),q.getDroppedFrames=videojs.bind(this,this.getDroppedFrames),q.getCurrentAudioBandwidth=videojs.bind(this,this.getCurrentAudioBandwidth),q.getCurrentVideoBandwidth=videojs.bind(this,this.getCurrentVideoBandwidth),q.getPlaybackStatistics=videojs.bind(this,this.getPlaybackStatistics),q.videoClass=videojs.bind(this,this.videoClass),q.debug_maxRepresentationHeight=videojs.bind(this,this.maxRepresentationHeight),q.debug_minRepresentationHeight=videojs.bind(this,this.minRepresentationHeight),q.loadSrc=videojs.bind(this,this.loadSrc),q.on(["play","playing","seeking","pause","waiting","ended"],videojs.bind(this,this.resetCache)),q.on(["play"],videojs.bind(this,this.markPlay)),q.on(["playing"],videojs.bind(this,this.markPlaying)),q.on(["seeking","pause","waiting","ended"],videojs.bind(this,this.unmarkPlaying)),q.on(["loadedmetadata"],videojs.bind(this,this.markInitializedAndPlayIfNeeded));}}),videojs.Dashas.prototype.maxRepresentationHeight=function(q){return q?void this.el().vjs_setProperty("maxRepresentationHeight",q):this.el().vjs_getProperty("maxRepresentationHeight");},videojs.Dashas.prototype.minRepresentationHeight=function(q){return q?void this.el().vjs_setProperty("minRepresentationHeight",q):this.el().vjs_getProperty("minRepresentationHeight");},videojs.Dashas.buildMetadataUrl=function(q){var u,v,w,x,y="";return u=videojs.Dashas.buildOptData(q),x=q.authenticationToken,v=q.assetId,w=q.variantId,y+=q.accessLicenseServerURL+"?optData="+u,void 0!==v&&null!==v&&""!==v&&(y+="&assetId="+v),void 0!==w&&null!==w&&""!==w&&(y+="&variantId="+w),(void 0===x||null===x||""===x)&&(x=null),y+=null===x?"":"&authToken="+x;},videojs.Dashas.buildOptData=function(q){return (new castLabsDashJS.classes.Utils).B64Tools.encode(JSON.stringify(q.customData));},videojs.Dashas.prototype.limitToXEntries=function(q,u){for(;q.length>u;)q.shift();},videojs.Dashas.prototype.getDroppedFrames=function(){return this.el().vjs_getProperty("droppedFrames");},videojs.Dashas.prototype.videoClass=function(){return this.el().vjs_videoClass();},videojs.Dashas.prototype.getBuffered=function(){return this.el().vjs_getProperty("buffered");},videojs.Dashas.prototype.getBufferLevel=function(){return this.el().vjs_getProperty("bufferLevel");},videojs.Dashas.prototype.getCurrentAudioBandwidth=function(){return this.el().vjs_getProperty("currentAudioBandwidth");},videojs.Dashas.prototype.getCurrentVideoBandwidth=function(){return this.el().vjs_getProperty("currentVideoBandwidth");},videojs.Dashas.prototype.getPlaybackStatistics=function(){var q=this.getBuffered(),u=(this.getBufferLevel(),this.getDroppedFrames()),v=this.getCurrentVideoBandwidth(),w=this.getCurrentAudioBandwidth(),x={bandwidth:v,bufferLength:q,droppedFrames:u},y={bandwidth:w,bufferLength:q};return {video:x,audio:y};},videojs.Dashas.onError=function(q,u){var v=videojs(q);"string"==typeof u&&-1!=u.indexOf("MANIFEST_LOAD_ERROR")?v.error({code:2,subtype:"MANIFEST_LOAD_ERROR"}):"string"==typeof u&&-1!=u.indexOf("SEGMENT_LOAD_ERROR")?v.error({code:2,subtype:"SEGMENT_LOAD_ERROR"}):videojs.Flash.onError(q,u);},videojs.Dashas.prototype.loadSrc=function(q,u){var v,w,x;v=!1,"boolean"==typeof u.autoplay&&(v=u.autoplay),u.assetId&&(w=videojs.Dashas.buildMetadataUrl(u),x=videojs.Dashas.buildOptData(u)),this.el().vjs_source(q,v,w,x);},videojs.Dashas.now=function(){return (new Date).getTime()/1e3;},videojs.Dashas.isSupported=function(){var q=videojs.Flash.version();return q[0]>11||11==q[0]&&q[1]>=5;},videojs.Dashas.canPlaySource=function(q){return "application/dash+xml"===q.type?"maybe":"";},videojs.Dashas.prototype.setSubsTrack=function(q){this.player().setTextTrack(q);},videojs.Dashas.prototype.setAudioTrack=function(q){this.el().vjs_setProperty("forcedAudioLang",q);},videojs.Dashas.prototype.setCurrentTime=function(q){this.el().vjs_setProperty("currentTime",q);},videojs.Dashas.prototype.currentTime=function(){if(!this.el().vjs_getProperty)return 0;if(null===this.cache_.currentTime.value&&this.updateCurrentTime(),this.cache_.playing){var q=videojs.Dashas.now()-this.cache_.currentTime.timestamp;return q>5&&(this.updateCurrentTime(),q=videojs.Dashas.now()-this.cache_.currentTime.timestamp),this.cache_.currentTime.value+q;}return this.cache_.currentTime.value;},videojs.Dashas.prototype.buffered=function(){if(!this.el().vjs_getProperty)return 0;var q=videojs.Dashas.now()-this.cache_.buffered.timestamp;return q>5&&(this.cache_.buffered.value=videojs.createTimeRange(0,this.el().vjs_getProperty("buffered")),this.cache_.buffered.timestamp=videojs.Dashas.now()),this.cache_.buffered.value;},videojs.Dashas.prototype.play=function(){this.initialized_===!1?(this.player().addClass("vjs-waiting"),this.player().removeChild("bigPlayButton"),this.playPressed_=!0):videojs.Flash.prototype.play.call(this);},videojs.Dashas.prototype.resetCache=function(){this.cache_.currentTime.value=null,this.cache_.currentTime.timestamp=0,this.cache_.buffered.value=null,this.cache_.buffered.timestamp=0;},videojs.Dashas.prototype.updateCurrentTime=function(){this.cache_.currentTime.value=this.el().vjs_getProperty("currentTime"),this.cache_.currentTime.timestamp=videojs.Dashas.now();},videojs.Dashas.prototype.unmarkPlaying=function(){this.cache_.playing=!1;},videojs.Dashas.prototype.markPlay=function(){this.cache_.playing=!0;},videojs.Dashas.prototype.markPlaying=function(){this.player().paused()||(this.cache_.playing=!0);},videojs.Dashas.prototype.markInitializedAndPlayIfNeeded=function(){this.initialized_=!0,this.playPressed_===!0&&(this.playPressed_=!1,this.play());},videojs.Dashas.prototype.duration=function(){var q=this.el().vjs_getProperty("duration");return 0>q?q:q+1;},window.Silverlight||(window.Silverlight={}),Silverlight._silverlightCount=0,Silverlight.__onSilverlightInstalledCalled=!1,Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=",Silverlight.__installationEventFired=!1,Silverlight.onGetSilverlight=null,Silverlight.onSilverlightInstalled=function(){window.location.reload(!1);},Silverlight.isInstalled=function(u){void 0==u&&(u=null);var v=!1;try{var w=null,x=!1;if(window.ActiveXObject)try{w=new ActiveXObject("AgControl.AgControl"),null===u?v=!0:w.IsVersionSupported(u)&&(v=!0),w=null;}catch(q){x=!0;}else x=!0;if(x){var y=navigator.plugins["Silverlight Plug-In"];if(y)if(null===u)v=!0;else{var A=y.description;"1.0.30226.2"===A&&(A="2.0.30226.2");for(var z=A.split(".");z.length>3;)z.pop();for(;z.length<4;)z.push(0);for(var C=u.split(".");C.length>4;)C.pop();var B,E,G=0;do B=parseInt(C[G]),E=parseInt(z[G]),G++;while(G<C.length&&B===E);E>=B&&!isNaN(B)&&(v=!0);}}}catch(q){v=!1;}return v;},Silverlight.WaitForInstallCompletion=function(){if(!Silverlight.isBrowserRestartRequired&&Silverlight.onSilverlightInstalled){try{navigator.plugins.refresh();}catch(q){}Silverlight.isInstalled(null)&&!Silverlight.__onSilverlightInstalledCalled?(Silverlight.onSilverlightInstalled(),Silverlight.__onSilverlightInstalledCalled=!0):setTimeout(Silverlight.WaitForInstallCompletion,3e3);}},Silverlight.__startup=function(){if(navigator.plugins.refresh(),Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null),Silverlight.isBrowserRestartRequired){if(window.navigator.mimeTypes){var q=navigator.mimeTypes["application/x-silverlight-2"],u=navigator.mimeTypes["application/x-silverlight-2-b2"],v=navigator.mimeTypes["application/x-silverlight-2-b1"],w=v;u&&(w=u),q||!v&&!u?q&&w&&q.enabledPlugin&&w.enabledPlugin&&q.enabledPlugin.description!=w.enabledPlugin.description&&(Silverlight.__installationEventFired||(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0)):Silverlight.__installationEventFired||(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0);}}else Silverlight.WaitForInstallCompletion(),Silverlight.__installationEventFired||(Silverlight.onInstallRequired(),Silverlight.__installationEventFired=!0);Silverlight.disableAutoStartup||(window.removeEventListener?window.removeEventListener("load",Silverlight.__startup,!1):window.detachEvent("onload",Silverlight.__startup));},Silverlight.disableAutoStartup||(window.addEventListener?window.addEventListener("load",Silverlight.__startup,!1):window.attachEvent("onload",Silverlight.__startup)),Silverlight.createObject=function(u,v,w,x,y,A,z){var C={},B=x,E=y;if(C.version=B.version,B.source=u,C.alt=B.alt,A&&(B.initParams=A),B.isWindowless&&!B.windowless&&(B.windowless=B.isWindowless),B.framerate&&!B.maxFramerate&&(B.maxFramerate=B.framerate),w&&!B.id&&(B.id=w),delete  B.ignoreBrowserVer,delete  B.inplaceInstallPrompt,delete  B.version,delete  B.isWindowless,delete  B.framerate,delete  B.data,delete  B.src,delete  B.alt,Silverlight.isInstalled(C.version)){for(var G in E)if(E[G]){if("onLoad"==G&&"function"==typeof E[G]&&1!=E[G].length){var F=E[G];E[G]=function(q){return F(document.getElementById(w),z,q);};}var D=Silverlight.__getHandlerName(E[G]);if(null==D)throw "typeof events."+G+" must be 'function' or 'string'";B[G]=D,E[G]=null;}slPluginHTML=Silverlight.buildHTML(B);}else slPluginHTML=Silverlight.buildPromptHTML(C);return v?void (v.innerHTML=slPluginHTML):slPluginHTML;},Silverlight.buildHTML=function(q){var u=[];u.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"'),null!=q.id&&u.push(' id="'+Silverlight.HtmlAttributeEncode(q.id)+'"'),null!=q.width&&u.push(' width="'+q.width+'"'),null!=q.height&&u.push(' height="'+q.height+'"'),u.push(" >"),delete  q.id,delete  q.width,delete  q.height;for(var v in q)q[v]&&u.push('<param name="'+Silverlight.HtmlAttributeEncode(v)+'" value="'+Silverlight.HtmlAttributeEncode(q[v])+'" />');return u.push("</object>"),u.join("");},Silverlight.createObjectEx=function(q){var u=q,v=Silverlight.createObject(u.source,u.parentElement,u.id,u.properties,u.events,u.initParams,u.context);return null==u.parentElement?v:void 0;},Silverlight.buildPromptHTML=function(q){var u="",v=Silverlight.fwlinkRoot,w=q.version;return q.alt?u=q.alt:(w||(w=""),u="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>",u=u.replace("{1}",w),u=u.replace("{2}",v+"108181")),u;},Silverlight.getSilverlight=function(q){Silverlight.onGetSilverlight&&Silverlight.onGetSilverlight();var u="",v=String(q).split(".");if(v.length>1){var w=parseInt(v[0]);u=isNaN(w)||2>w?"1.0":v[0]+"."+v[1];}var x="";u.match(/^\d+\056\d+$/)&&(x="&v="+u),Silverlight.followFWLink("149156"+x);},Silverlight.followFWLink=function(q){top.location=Silverlight.fwlinkRoot+String(q);},Silverlight.HtmlAttributeEncode=function(q){var u,v="";if(null==q)return null;for(var w=0;w<q.length;w++)u=q.charCodeAt(w),u>96&&123>u||u>64&&91>u||u>43&&58>u&&47!=u||95==u?v+=String.fromCharCode(u):v=v+"&#"+u+";";return v;},Silverlight.default_error_handler=function(q,u){var v,w=u.ErrorType;v=u.ErrorCode;var x="\nSilverlight error message     \n";x+="ErrorCode: "+v+"\n",x+="ErrorType: "+w+"       \n",x+="Message: "+u.ErrorMessage+"     \n","ParserError"==w?(x+="XamlFile: "+u.xamlFile+"     \n",x+="Line: "+u.lineNumber+"     \n",x+="Position: "+u.charPosition+"     \n"):"RuntimeError"==w&&(0!=u.lineNumber&&(x+="Line: "+u.lineNumber+"     \n",x+="Position: "+u.charPosition+"     \n"),x+="MethodName: "+u.methodName+"     \n"),alert(x);},Silverlight.__cleanup=function(){for(var q=Silverlight._silverlightCount-1;q>=0;q--)window["__slEvent"+q]=null;Silverlight._silverlightCount=0,window.removeEventListener?window.removeEventListener("unload",Silverlight.__cleanup,!1):window.detachEvent("onunload",Silverlight.__cleanup);},Silverlight.__getHandlerName=function(q){var u="";if("string"==typeof q)u=q;else if("function"==typeof q){0==Silverlight._silverlightCount&&(window.addEventListener?window.addEventListener("onunload",Silverlight.__cleanup,!1):window.attachEvent("onunload",Silverlight.__cleanup));var v=Silverlight._silverlightCount++;u="__slEvent"+v,window[u]=q;}else u=null;return u;},Silverlight.onRequiredVersionAvailable=function(){},Silverlight.onRestartRequired=function(){},Silverlight.onUpgradeRequired=function(){},Silverlight.onInstallRequired=function(){},Silverlight.IsVersionAvailableOnError=function(u,v){var w=!1;try{8001!=v.ErrorCode||Silverlight.__installationEventFired?8002!=v.ErrorCode||Silverlight.__installationEventFired?5014==v.ErrorCode||2106==v.ErrorCode?Silverlight.__verifySilverlight2UpgradeSuccess(v.getHost())&&(w=!0):w=!0:(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0):(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0);}catch(q){}return w;},Silverlight.IsVersionAvailableOnLoad=function(u){var v=!1;try{Silverlight.__verifySilverlight2UpgradeSuccess(u.getHost())&&(v=!0);}catch(q){}return v;},Silverlight.__verifySilverlight2UpgradeSuccess=function(u){var v=!1,w="2.0.31005",x=null;try{u.IsVersionSupported(w+".99")?(x=Silverlight.onRequiredVersionAvailable,v=!0):x=u.IsVersionSupported(w+".0")?Silverlight.onRestartRequired:Silverlight.onUpgradeRequired,x&&!Silverlight.__installationEventFired&&(x(),Silverlight.__installationEventFired=!0);}catch(q){}return v;};var fPlayer=null;videojs.Silverlight=videojs.MediaTechController.extend({init:function(z,C,B){var E,G;videojs.MediaTechController.call(this,z,C,B),E=new castLabsDashJS.classes.Utils,G=C.customData?E.B64Tools.encode(JSON.stringify(C.customData)):"",C.autoplay=!!z.options().autoplay,z.options().children.bigPlayButton=!C.autoplay;var F=this;F.cache={playerState:videojs.Silverlight.PlayerStates.IDLE,currentTime:0,duration:0,volume:1,muted:!1},F.initialized=!1,F.playPressed=!1;var D=C.parentEl,H=this.el_=this.createEl("div",{id:"_temp_silverlight"}),L=(z.id()+"_silverlight_api",C.source?C.source.src:"");""===L&&(z.options().children.bigPlayButton=!1),laUrl=C.playReadyLicenseServerURL,D.insertBefore(H,parent.firstChild),onSilverlightLoad=function(){},onSilverlightError=function(){},onPlayerReady=function(u){fPlayer=u;var v="SilverlightPlayer",w=document.getElementById(v),x=(w.content,function(q){F.initialized===!1?(F.initialized=!0,F.cache.duration=q.EndPositionSeconds,F.setVolume(F.cache.volume),F.player().trigger("loadstart"),F.player().trigger("loadedmetadata"),F.player().trigger("loadeddata"),C.autoplay===!0?F.player().play():F.playPressed===!0&&(F.playPressed=!1,F.play())):F.play();}),y=function(q){F.cache.currentTime=q.PlaybackPositionSeconds;},A=function(q){switch(q.PlayState){case 0:break;case 1:F.cache.playerState=videojs.Silverlight.PlayerStates.BUFFERING,F.initialized===!0&&F.player().trigger("waiting");break;case 2:F.cache.playerState=videojs.Silverlight.PlayerStates.BUFFERING,F.player().trigger("waiting");break;case 3:F.cache.playerState=videojs.Silverlight.PlayerStates.PLAYING,F.player().trigger("playing");break;case 4:F.cache.playerState=videojs.Silverlight.PlayerStates.PAUSED;break;case 5:F.cache.playerState=videojs.Silverlight.PlayerStates.STOPPED,F.player().trigger("pause"),F.player().trigger("ended");}};fPlayer.addEventListener("PlayStateChanged",A),fPlayer.addEventListener("PlaybackPositionChanged",y),fPlayer.addEventListener("MediaOpened",x),fPlayer.addEventListener("SeekCompleted",function(){F.player().trigger("seeked"),F.player().trigger("timeupdate");}),F.triggerReady();};{var I='<div style="height:100%;width:100%;border:0px"><object id="SilverlightPlayer"  data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%"><param name="source" value="'+C.silverlightFile+'"/><param name="onError" value="onSilverlightError" /><param name="onLoad" value="onSilverlightLoad" /><param name="minRuntimeVersion" value="4.0.50826.0" /><param name="autoUpgrade" value="false" /><param name="enableGPUAcceleration" value="true" /><param name="windowless" value="false" /><param name="background" value="#000000" /><param name="InteractiveActivationMode" value="None" /><param name="InitParams" value="InteractiveActivationMode=None,CollapsedControlBar=true,scriptableName=fPlayer,mediaurl='+L+",PlayerGraphVisibility=hidden,drmCustomData="+G+",LicenseServerUriOverride="+laUrl+',AutoPlay=false,AutoLoad=true" /></object><iframe style="visibility:hidden;height:0;width:0;border:0px"></iframe></div>',K=I,M=this.createEl("div",{innerHTML:K}).childNodes[0];H.parentNode;}H.parentNode.replaceChild(M,H);var J=function(){};z.enableABRSwitching=videojs.bind(this,J),z.loadSrc=function(v){var w=function(){var q,u=fPlayer.CreatePlaylistItem(v,"","Title","Description");u.DeliveryMethod="AdaptiveStreaming",q=fPlayer.CreatePlaylist(),q.AddPlaylistItem(u),fPlayer.SetPlaylist(q);};null===fPlayer?z.one("ready",function(){w();}):w();},this.el_=M;}}),videojs.Silverlight.PlayerStates={IDLE:0,STOPPED:1,PLAYING:2,PAUSED:3,BUFFERING:4,SEEKING:5},videojs.Silverlight.canPlaySource=function(q){return "application/dash+xml"===q.type?"maybe":"";},videojs.Silverlight.prototype.play=function(){this.initialized===!1?(this.player().addClass("vjs-waiting"),this.player().removeChild("bigPlayButton"),this.playPressed=!0):(this.player().trigger("play"),this.stopped()?fPlayer.GoToPlaylistItem(0):fPlayer.Play());},videojs.Silverlight.prototype.pause=function(){this.player().trigger("pause"),fPlayer.Pause();},videojs.Silverlight.prototype.paused=function(){return this.cache.playerState===videojs.Silverlight.PlayerStates.PAUSED||this.stopped();},videojs.Silverlight.prototype.stopped=function(){return this.cache.playerState===videojs.Silverlight.PlayerStates.STOPPED;},videojs.Silverlight.prototype.currentTime=function(){return Math.min(this.cache.currentTime,this.cache.duration);},videojs.Silverlight.prototype.setCurrentTime=function(q){this.player().trigger("seeking"),this.cache.currentTime=q,fPlayer.SeekToPosition(q);},videojs.Silverlight.prototype.duration=function(){return this.cache.duration;},videojs.Silverlight.prototype.buffered=function(){},videojs.Silverlight.prototype.muted=function(){return this.cache.muted;},videojs.Silverlight.prototype.setMuted=function(q){this.setVolume(q?0:this.cache.volume);},videojs.Silverlight.prototype.volume=function(){return this.cache.muted?0:this.cache.volume;},videojs.Silverlight.prototype.setVolume=function(q){this.cache.muted=0===q,q>0&&(this.cache.volume=q),fPlayer.SetVolume(q),this.player().trigger("volumechange",q);},videojs.Silverlight.prototype.buffered=function(){return null;},videojs.Silverlight.prototype.supportsFullScreen=function(){return !1;},videojs.Silverlight.prototype.enterFullScreen=function(){return !1;},videojs.Silverlight.isSupported=function(){return Silverlight.isInstalled("2.0");},videojs.Silverlight.prototype.dispose=function(){videojs.MediaTechController.prototype.dispose.call(this);},"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(q){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(q){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(q){}try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(q){}throw  new Error("This browser does not support XMLHttpRequest.");});var XHTML_NS="http://www.w3.org/1999/xhtml",DFXP_NS="http://www.w3.org/ns/ttml",DFXP_NS_Parameter="http://www.w3.org/ns/ttml#parameter",DFXP_NS_Style="http://www.w3.org/ns/ttml#styling",DFXP_NS_Style_Extensions="http://www.w3.org/ns/ttml#style-extension",DFXP_NS_Metadata="http://www.w3.org/ns/ttml#metadata",DFXP_NS_Metadata_Extensions="http://www.w3.org/ns/ttml#metadata-extension",DFXP_NS_SMPTE="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",DFXP_TIME_CONTAINER_PAR=1,DFXP_TIME_CONTAINER_SEQ=2,HTML5Caption_debug=!1;HTML5Caption_toSeconds=function(q){var u=0;if(q){var v=q.split(":");switch(v.length){case 0:case 1:case 2:break;case 3:for(var w=0;3>w;w++)u=60*u+parseFloat(v[w].replace(",","."));break;case 4:for(var w=0;3>w;w++)u=60*u+parseFloat(v[w].replace(",","."));u+=.04*parseFloat(v[w].replace(",","."));}}return u;},HTML5Caption_toPixels=function(q){if(q){var u=q.indexOf("px");if(u>0)return 1*q.substring(0,u);}return 0;},HTML5Caption_strip=function(q){return q.replace(/^\s+|\s+$/g,"");},HTML5Caption_convertDFXP2HTMLAttributes=function(q,u,v,w,x){var y;q.hasAttributeNS(XHTML_NS,"style")&&(u.style.cssText=q.getAttributeNS(XHTML_NS,"style"));var A=q.getElementsByTagNameNS(DFXP_NS_SMPTE,"image");if(A&&A.length>0,y=q.getAttribute("smpte:backgroundImage"),q.hasAttribute("smpte:backgroundImage")){var z=q.ownerDocument.getElementById(y);if(null==z&&q.ownerDocument.getElementsByTagNameNS)for(var A=q.ownerDocument.getElementsByTagNameNS(DFXP_NS_SMPTE,"image"),C=0;C<A.length;C++){var B=A.item(C),E=B.getAttribute("xml:id");if(y.indexOf(E)>-1){z=B;break;}}if(null!=z){var G=z.getAttribute("imagetype").toLowerCase(),F=z.getAttribute("encoding").toLowerCase(),D=z.innerHTML.trim();u.style.setProperty("background-image","url(data:image/"+G+";"+F+","+D+")",""),u.style.setProperty("position","absolute",""),u.style.setProperty("left","0em",""),u.style.setProperty("right","0em",""),u.style.setProperty("bottom","0em",""),u.style.setProperty("background-repeat","no-repeat",""),u.style.setProperty("width","100%",""),u.style.setProperty("height","100%",""),u.style.setProperty("display","block",""),u.df_displayValue="block",HTML5Caption_convertDFXP2HTMLAttributes(z,u,v,w,x);}else HTML5Caption_debug&&alert("can't find image "+y);}if(y=q.getAttribute("region"),q.hasAttribute("region")){var z=q.ownerDocument.getElementById(y);if(null==z&&q.ownerDocument.getElementsByTagNameNS)for(var H=q.ownerDocument.getElementsByTagNameNS(DFXP_NS,"region"),C=0;C<H.length;C++){var B=H.item(C),E=B.getAttribute("xml:id");if(E==y){z=B;break;}}if(null!=z){if(u.style.setProperty("overflow","hidden",""),HTML5Caption_convertDFXP2HTMLAttributes(z,u,v,w,x),z.getElementsByTagNameNS)for(var L=z.getElementsByTagNameNS(DFXP_NS,"style"),C=0;C<L.length;C++){var I=L.item(C);HTML5Caption_convertDFXP2HTMLAttributes(I,u,v,w,x);}}else HTML5Caption_debug&&alert("can't find region "+y);}if(q.hasAttribute("style")){y=q.getAttribute("style");var K=y.split(" ");switch(K.length){case 1:var z=q.ownerDocument.getElementById(y);if(null==z&&q.ownerDocument.getElementsByTagNameNS)for(var L=q.ownerDocument.getElementsByTagNameNS(DFXP_NS,"style"),C=0;C<L.length;C++){var I=L.item(C),E=I.getAttribute("xml:id");if(E==y){z=I;break;}}break;default:HTML5Caption_debug&&alert("@@TODO IDREFS");}null!=z?HTML5Caption_convertDFXP2HTMLAttributes(z,u,v,w,x):HTML5Caption_debug&&alert("can't find "+y);}if(q.hasAttributeNS(DFXP_NS_SMPTE,"backgroundImageHorizontal")||q.hasAttributeNS(DFXP_NS_SMPTE,"backgroundImageVertical")){var M="",J="";M=q.getAttributeNS(DFXP_NS_SMPTE,"backgroundImageHorizontal"),J=q.getAttributeNS(DFXP_NS_SMPTE,"backgroundImageVertical"),u.style.setProperty("background-position",M+" "+J,"");}if(q.hasAttributeNS(DFXP_NS_Style,"backgroundColor")&&u.style.setProperty("background-color",q.getAttributeNS(DFXP_NS_Style,"backgroundColor"),""),q.hasAttributeNS(DFXP_NS_Style,"color")&&u.style.setProperty("color",q.getAttributeNS(DFXP_NS_Style,"color"),""),q.hasAttributeNS(DFXP_NS_Style,"direction")&&u.style.setProperty("direction",q.getAttributeNS(DFXP_NS_Style,"direction"),""),y=q.getAttributeNS(DFXP_NS_Style,"display"),"none"==y)u.style.setProperty("display","none",""),u.df_displayValue="none";else{var O;O="span"==u.localName?"inline":"block",(q.hasAttributeNS(DFXP_NS_Style,"display")||!u.df_displayValue)&&(u.style.setProperty("display",O,""),u.df_displayValue=O);}if(q.hasAttributeNS(DFXP_NS_Style,"fontFamily")&&u.style.setProperty("font-family",q.getAttributeNS(DFXP_NS_Style,"fontFamily"),""),q.hasAttributeNS(DFXP_NS_Style,"fontSize")&&u.style.setProperty("font-size",q.getAttributeNS(DFXP_NS_Style,"fontSize"),""),q.hasAttributeNS(DFXP_NS_Style,"fontStyle")&&u.style.setProperty("font-style",q.getAttributeNS(DFXP_NS_Style,"fontStyle"),""),q.hasAttributeNS(DFXP_NS_Style,"fontWeight")&&u.style.setProperty("font-weight",q.getAttributeNS(DFXP_NS_Style,"fontWeight"),""),y=q.getAttributeNS(DFXP_NS_Style,"lineHeight"),q.hasAttributeNS(DFXP_NS_Style,"lineHeight")&&("normal"==y&&(y="100%"),u.style.setProperty("line-height",y,"")),y=q.getAttributeNS(DFXP_NS_Style,"opacity"),q.hasAttributeNS(DFXP_NS_Style,"opacity")&&u.style.setProperty("opacity",y,""),y=q.getAttributeNS(DFXP_NS_Style,"overflow"),q.hasAttributeNS(DFXP_NS_Style,"overflow")&&("dynamic"==y?u.style.setProperty("overflow","scroll",""):u.style.setProperty("overflow",y,"")),y=q.getAttributeNS(DFXP_NS_Style,"extent"),q.hasAttributeNS(DFXP_NS_Style,"extent")&&"auto"!=y){var K=y.split(" ");(K.length=2)&&(u.style.setProperty("width",K[0],""),u.style.setProperty("height",K[1],""),u.dfxp_width=K[0],u.dfxp_height=K[1]);}if(y=q.getAttributeNS(DFXP_NS_Style,"origin"),q.hasAttributeNS(DFXP_NS_Style,"origin")&&"auto"!=y&&"inherit"!=y){var K=y.split(" ");if(K.length=2){for(var N=u;null!=N;){if(N.hasOrigin){v=!0;break;}N=N.parentNode;}v||(u.style.setProperty("position","absolute",""),u.style.setProperty("left",K[0].indexOf("%")>-1?K[0]:x+HTML5Caption_toPixels(K[0])+"px",""),u.style.setProperty("top",K[1].indexOf("%")>-1?K[1]:x+HTML5Caption_toPixels(K[1])+"px","")),u.hasOrigin=!0;}}y=q.getAttributeNS(DFXP_NS_Style,"padding"),q.hasAttributeNS(DFXP_NS_Style,"padding")&&u.style.setProperty("padding",y,""),y=q.getAttributeNS(DFXP_NS_Style,"textAlign"),q.hasAttributeNS(DFXP_NS_Style,"textAlign")&&("start"==y||"left"==y?u.style.setProperty("text-align","left",""):"end"==y||"right"==y?u.style.setProperty("text-align","right",""):"center"==y?u.style.setProperty("text-align","center",""):u.style.setProperty("text-align",y,"")),y=q.getAttributeNS(DFXP_NS_Style,"textDecoration"),q.hasAttributeNS(DFXP_NS_Style,"textDecoration")&&("noUnderline"==y||"noOverline"==y||"noLineThrough"==y?y="none":"lineThrough"==y&&(y="line-through"),u.style.setProperty("text-decoration",y,"")),y=q.getAttributeNS(DFXP_NS_Style,"unicodeBidi"),q.hasAttributeNS(DFXP_NS_Style,"unicodeBidi")&&("bidiOverride"==y&&(y="bidi-override"),u.style.setProperty("unicode-bidi",y,"")),y=q.getAttributeNS(DFXP_NS_Style,"visibility"),q.hasAttributeNS(DFXP_NS_Style,"visibility")&&u.style.setProperty("visibility",y,""),y=q.getAttribute("xml:space"),q.hasAttribute("xml:space")&&(y="preserve"==y?"pre":"normal",u.style.setProperty("white-space",y,"")),y=q.getAttributeNS(DFXP_NS_Style,"wrapOption"),q.hasAttributeNS(DFXP_NS_Style,"wrapOption")&&"noWrap"==y&&u.style.setProperty("white-space","nowrap","");},HTML5Caption_convertDFXP2HTML=function(u,v,w,x){var y=null;if(0==u.aDur)return null;if(3==u.nodeType||4==u.nodeType){if("p"!=u.parentNode.localName&&"span"!=u.parentNode.localName)return null;if(u.parentNode.tContainer==DFXP_TIME_CONTAINER_SEQ)return null;y=document.createTextNode(u.data);}else if(1==u.nodeType){if(u.namespaceURI==DFXP_NS_Metadata_Extensions||u.namespaceURI==DFXP_NS_Metadata)return null;if(u.namespaceURI==DFXP_NS){if("head"==u.localName)return null;if(u.aDur<=0)return null;if("span"==u.localName)y=document.createElementNS(XHTML_NS,"span");else if("p"==u.localName)y=document.createElementNS(XHTML_NS,"p");else if("div"==u.localName)y=document.createElementNS(XHTML_NS,"div");else if("br"==u.localName)y=document.createElementNS(XHTML_NS,"br");else{if("body"!=u.localName)return null;y=document.createElementNS(XHTML_NS,"div"),y.className="dfxp";}}else if(u.namespaceURI==XHTML_NS)try{y=document.importNode(u,!0);}catch(q){return null;}}if(y.aBegin=u.aBegin,y.aEnd=u.aEnd,HTML5Caption_debug&&1==y.nodeType){y.setAttribute("relative_begin",u.rBegin),y.setAttribute("relative_end",u.rEnd),y.setAttribute("relative_dur",u.rDur),y.setAttribute("active_begin",u.aBegin),y.setAttribute("active_end",u.aEnd),y.setAttribute("active_dur",u.aDur);var A=null;u.tContainer==DFXP_TIME_CONTAINER_PAR?A="par":u.tContainer==DFXP_TIME_CONTAINER_SEQ&&(A="seq"),null!=A&&y.setAttribute("timeContainer",A);}if(u.tContainer){y.hasOrigin=!1,HTML5Caption_convertDFXP2HTMLAttributes(u,y,v,w,x),HTML5Caption_debug&&("p"==y.localName||"div"==y.localName||"span"==y.localName)&&y.appendChild(document.createTextNode("["+y.aBegin+"-"+y.aEnd+"]"));for(var z=u.childNodes,C=0;C<z.length;C++){var B=HTML5Caption_convertDFXP2HTML(z.item(C),y.hasOrigin,w,x);null!=B&&y.appendChild(B);}}return y;};var TIME_INDEFINITE=-1,TIME_INFINITY_AND_BEYOND=1/0;HTML5Caption_convertDFXPDuration=function(q){var u=0;if(null==q||""==q)return TIME_INDEFINITE;if(-1!=q.indexOf(":"))return HTML5Caption_toSeconds(q);if(-1!=(u=q.indexOf("h")))return 3600*parseFloat(q.substring(0,u));if(-1!=(u=q.indexOf("m")))return 60*parseFloat(q.substring(0,u));if(-1!=(u=q.indexOf("s")))return parseFloat(q.substring(0,u));if(-1!=(u=q.indexOf("ms")))return parseFloat(q.substring(0,u))/1e3;if(-1!=(u=q.indexOf("t")))throw  new Error("tick duration is not supported");if(-1!=(u=q.indexOf("f")))throw  new Error("frame duration is not supported");},HTML5Caption_computeRelativeTimeIntervals=function(q){if(q.namespaceURI!=DFXP_NS||"body"!=q.localName&&"div"!=q.localName&&"p"!=q.localName&&"span"!=q.localName)return void ("p"!=q.parentNode.localName&&"span"!=q.parentNode.localName?(q.rBegin=0,q.rEnd=0,q.rDur=0):q.parentNode.tContainer==DFXP_TIME_CONTAINER_SEQ?(q.rBegin=0,q.rEnd=0,q.rDur=0):q.parentNode.tContainer==DFXP_TIME_CONTAINER_PAR&&(q.rBegin=0,q.rEnd=TIME_INFINITY_AND_BEYOND,q.rDur=TIME_INFINITY_AND_BEYOND));var u=q.getAttribute("timeContainer");q.tContainer="seq"==u?DFXP_TIME_CONTAINER_SEQ:DFXP_TIME_CONTAINER_PAR;var v=HTML5Caption_convertDFXPDuration(q.getAttribute("begin")),w=HTML5Caption_convertDFXPDuration(q.getAttribute("end")),x=HTML5Caption_convertDFXPDuration(q.getAttribute("dur"));v!=TIME_INDEFINITE?w!=TIME_INDEFINITE?x=w-v:x!=TIME_INDEFINITE&&(w=v+x):(v=0,w!=TIME_INDEFINITE?x=w:x!=TIME_INDEFINITE&&(w=x)),0>=x&&(w=TIME_INDEFINITE,x=TIME_INDEFINITE),x==TIME_INDEFINITE&&q.parentNode.tContainer==DFXP_TIME_CONTAINER_SEQ&&(v=0,w=0,x=0),q.rBegin=v,q.rEnd=w,q.rDur=x;for(var y=q.childNodes,A=0;A<y.length;A++){var z=y.item(A);HTML5Caption_computeRelativeTimeIntervals(z);}if(q.rEnd==TIME_INDEFINITE){if(q.tContainer==DFXP_TIME_CONTAINER_PAR)for(var y=q.childNodes,A=0;A<y.length;A++){var z=y.item(A);z.rEnd>q.rEnd&&(q.rEnd=z.rEnd);}else{for(var C=!1,B=0,y=q.childNodes,A=0;!C&&A<y.length;A++){var z=y.item(A);z.rEnd==TIME_INDEFINITE&&(C=!0),B+=z.rDur+z.rBegin;}C||(q.rEnd=B);}q.rEnd!=TIME_INDEFINITE&&(q.rDur=q.rEnd-q.rBegin);}},HTML5Caption_computeActiveTimeIntervals=function(q){1==q.nodeType&&q.namespaceURI==DFXP_NS&&"body"==q.localName&&HTML5Caption_computeRelativeTimeIntervals(q),q.aBegin=TIME_INDEFINITE,q.aEnd=TIME_INDEFINITE,q.aDur=TIME_INDEFINITE;var u=q.parentNode;if("body"==q.localName)q.aBegin=q.rBegin,q.aEnd=q.rEnd;else if(u.tContainer==DFXP_TIME_CONTAINER_PAR)q.rDur!=TIME_INDEFINITE&&(q.aBegin=q.rBegin+q.parentNode.aBegin,q.aEnd=q.rEnd+q.parentNode.aBegin);else if(q.rDur!=TIME_INDEFINITE){for(var v=q.previousSibling;null!=v&&!v.tContainer;)v=v.previousSibling;null!=v?v.aDur!=TIME_INDEFINITE&&(q.aBegin=q.rBegin+v.aEnd,q.aEnd=q.rEnd+v.aEnd):q.rDur!=TIME_INDEFINITE&&(q.aBegin=q.rBegin+q.parentNode.aBegin,q.aEnd=q.rEnd+q.parentNode.aBegin);}if(q.aEnd!=TIME_INDEFINITE&&(q.aEnd>q.parentNode.aEnd&&(q.aEnd=q.parentNode.aEnd),q.aBegin>q.aEnd?(q.aBegin=TIME_INDEFINITE,q.aEnd=TIME_INDEFINITE):q.aDur=q.aEnd-q.aBegin),q.aDur!=TIME_INDEFINITE&&q.tContainer)for(var w=q.childNodes,x=0;x<w.length;x++)HTML5Caption_computeActiveTimeIntervals(w.item(x));},HTML5Caption_getSubtitleSetRef=function(q,u){if(q.aBegin>=0){null!=q.parentNode&&q.parentNode.aBegin>=0&&q.parentNode.aBegin==q.aBegin&&q.parentNode.aEnd==q.aEnd||(u[u.length]=q,HTML5Caption_debug||(q.style.display="none"),q.df_isInTime=!1);for(var v=q.childNodes,w=v.length,x=0;w>x;x++){var y=v.item(x);1==y.nodeType&&HTML5Caption_getSubtitleSetRef(y,u);}}},HTML5Caption_getSubtitleSet=function(q){var u=new Array;return HTML5Caption_getSubtitleSetRef(q,u),u;},castLabs.parseUrl=function(q){var u,v,w,x,y;x=["protocol","hostname","port","pathname","search","hash","host"],v=videojs.Component.prototype.createEl("a",{href:q}),w=""===v.host&&"file:"!==v.protocol,w&&(u=videojs.Component.prototype.createEl("div"),u.innerHTML='<a href="'+q+'"></a>',v=u.firstChild,u.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(u)),y={};for(var A=0;A<x.length;A++)y[x[A]]=v[x[A]];return w&&document.body.removeChild(u),y;},castLabs.xhr=function(u,v,w){var x,y,A,z,C,B,E,G,F;"string"==typeof u&&(u={uri:u}),videojs.util.mergeOptions({method:"GET",timeout:45e3},u),v=v||function(){},G=function(){window.clearTimeout(E),v(null,y,y.response||y.responseText,w);},F=function(q){window.clearTimeout(E),q&&"string"!=typeof q||(q=new Error(q)),v(q,y);},x=window.XMLHttpRequest,"undefined"==typeof x&&(x=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(q){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(q){}try{return new window.ActiveXObject("Msxml2.XMLHTTP");}catch(q){}throw  new Error("This browser does not support XMLHttpRequest.");}),y=new x,y.uri=u.uri,A=castLabs.parseUrl(u.uri),z=window.location,B=A.protocol+A.host!==z.protocol+z.host,!B||!window.XDomainRequest||"withCredentials" in y?(C="file:"==A.protocol||"file:"==z.protocol,y.onreadystatechange=function(){if(4===y.readyState){if(y.timedout)return F("timeout");200===y.status||C&&0===y.status?G():F();}},u.timeout&&(E=window.setTimeout(function(){4!==y.readyState&&(y.timedout=!0,y.abort());},u.timeout))):(y=new window.XDomainRequest,y.onload=G,y.onerror=F,y.onprogress=function(){},y.ontimeout=function(){});try{y.open(u.method||"GET",u.uri,!0);}catch(q){return F(q);}u.withCredentials&&(y.withCredentials=!0),u.responseType&&(y.responseType=u.responseType);try{u.method&&"POST"==u.method&&u.params?(y.setRequestHeader("Content-type","application/x-www-form-urlencoded"),y.send(u.params)):y.send();}catch(q){return F(q);}return y;},castLabs.TextTrack=videojs.Component.extend({init:function(x,y){videojs.Component.call(this,x,y);var A=function(q,u){var v=q.length;if(2>v)return q;var w=Math.ceil(v/2);return z(A(q.slice(0,w),u),A(q.slice(w),u),u);},z=function(q,u,v){for(var w=[];q.length>0&&u.length>0;)w.push(q[0][v]<u[0][v]?q.shift():u.shift());return w=w.concat(q,u);};this.fastSort=A,isNaN(videojs.guid)&&(videojs.guid=0),this.id_=y.id||"vjs_"+y.kind+"_"+y.language+"_"+videojs.guid++,this.src_=y.src,this.sources_=y.sources,this.timescale_=y.timescale||1,this.playerId_=y.playerId,this.loadedUrls=[],this.pendingRequests=0,this.dflt_=y["default"]||y.dflt,this.title_=y.title,this.language_=y.srclang,this.label_=y.label,this.cues_=[],this.activeCues_=[],this.readyState_=0,this.mode_=0,this.kind_="subtitles",this.player_=x,this.el_=this.el(),this.el_.classList.add("vjs-subtitles"),this.el_.classList.add("vjs-text-track"),this.el_.innerHTML='<div id="captions"></div>',x.on("dispose",videojs.bind(this,this.deactivate,this.id_)),x.on("loadedmetadata",videojs.bind(this,this.deactivate,this.id_));var C=this.player_.getChild("textTrackDisplay");C.el().style.height=this.player().el().scrollHeight+75+"px",this.isLive=1/0===this.player().duration()?!0:!1;}}),castLabs.TextTrack.prototype.kind=function(){return this.kind_;},castLabs.TextTrack.prototype.src=function(){return this.src_;},castLabs.TextTrack.prototype.dflt=function(){return this.dflt_;},castLabs.TextTrack.prototype.title=function(){return this.title_;},castLabs.TextTrack.prototype.language=function(){return this.language_;},castLabs.TextTrack.prototype.label=function(){return this.label_;},castLabs.TextTrack.prototype.cues=function(){return this.cues_;},castLabs.TextTrack.prototype.activeCues=function(){return this.activeCues_;},castLabs.TextTrack.prototype.readyState=function(){return this.readyState_;},castLabs.TextTrack.prototype.mode=function(){return this.mode_;},castLabs.TextTrack.prototype.show=function(){this.activate(),this.mode_=2,videojs.Component.prototype.show.call(this);},castLabs.TextTrack.prototype.hide=function(){this.activate(),this.mode_=1,videojs.Component.prototype.hide.call(this);},castLabs.TextTrack.prototype.disable=function(){2==this.mode_&&this.hide(),this.deactivate(),this.mode_=0;},castLabs.TextTrack.prototype.activate=function(){if(!this.refreshHandler&&this.isLive){var v=this;this.refreshHandler=setInterval(function(){CL.configs.subtitlesOff===!0&&window.clearInterval(v.refreshHandler),v.player_.hasOwnProperty("setTextTrack")&&v.playerId_&&v.player_.setTextTrack(v.playerId_);for(var q=v.player_.subtitleTracks(),u=0;u<q.length;u++)q[u].id===v.playerId_&&(v.sources_=q[u].sources);v.readyState_=0,v.load();},5e3);}0===this.readyState_&&this.load(),0===this.mode_&&(this.player_.on("timeupdate",videojs.bind(this,this.update,this.id_)),this.player_.on("ended",videojs.bind(this,this.reset,this.id_)),("captions"===this.kind_||"subtitles"===this.kind_)&&this.player_.getChild("textTrackDisplay").addChild(this));},castLabs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",videojs.bind(this,this.update,this.id_)),this.player_.off("ended",videojs.bind(this,this.reset,this.id_)),this.reset(),this.player_.getChild("textTrackDisplay").removeChild(this);},castLabs.TextTrack.prototype.appendPendingCues=function(q,u){var v,w,x,y;if(this.pendingRequests--,w={response:q,startTime:u},y=!1,0===w.startTime?(this.parseCues(w.response,!0,w.startTime),this.player().trigger("firsttexttrackready")):this.pendingCues.push(w),0===this.pendingRequests){var A=(new Date).getTime();for(CL.configs.debug&&console.log("Loading cues took "+(A-this.startTime)/1e3+"secs"),this.startTime=(new Date).getTime(),v=0;v<this.pendingCues.length;v++)x=this.pendingCues[v],this.parseCues(x.response,!0,x.startTime);A=(new Date).getTime(),this.cues_=this.fastSort(this.cues_,"startTime"),CL.configs.debug&&console.log("Parsing cues took "+(A-this.startTime)/1e3+"secs"),this.player().trigger("texttracksready"),this.reset(),this.readyState_=2,this.trigger("loaded");}},castLabs.TextTrack.prototype.load=function(){var x,y,A,z;if(0===this.readyState_)if(this.startTime=(new Date).getTime(),this.readyState_=1,this.isTimeline=!0,!this.src_&&this.sources_){this.pendingRequests=this.pendingRequests+this.sources_.length,this.pendingCues=[];var C=function(q,u,v,w){return q?this.onError(q):void this.appendPendingCues(v,w.startTime);};for(y=0;y<this.sources_.length;y++){A=this.sources_[y];var B={startTime:A.startTime};z=!1;for(x in this.loadedUrls)if(this.loadedUrls[x]===A.src){this.pendingRequests--,z=!0;break;}z||(this.loadedUrls.push(A.src),castLabs.xhr(A.src,videojs.bind(this,C),B));}}else this.isTimeline=!1,this.pendingRequests=1,castLabs.xhr(this.src_,videojs.bind(this,function(q,u,v){return q?this.onError(q):(this.parseCues(v,!1,0),void this.player().trigger("texttracksready"));}));},castLabs.TextTrack.prototype.onError=function(q){this.error=q,this.readyState_=3,this.trigger("error");},castLabs.TextTrack.prototype.parseCues=function(u,v,w){var x,y,A,z=0;if(v){u=u.substring(u.indexOf("<tt"),u.length),u=u.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml");for(var C,B,E=/xmlns:(.+?)=/gi;C=E.exec(u);)B=C[1],-1==B.indexOf("tt")&&-1==B.indexOf("xhtm")&&-1==B.indexOf("smpt")&&(u=u.replace(new RegExp(B+":","g"),""));}if(CL.configs.debug&&console.log("startTime is "+w/this.timescale_),"<tt "===u.toLowerCase().substr(0,4)||"<?xml"===u.toLowerCase().substr(0,5)){var G=this.player(),F=new DOMParser,D=F.parseFromString(u,"text/xml");this.isTTML=!0;var H=G.currentTime();if(z=w/this.timescale_,"undefined"==typeof H)throw  new Error("currentTime is not supported by the Video element");D.bodyElement="undefined"==typeof D.getElementsByTagNameNS?D.documentElement.childNodes.item(1):D.getElementsByTagNameNS(DFXP_NS,"body").item(0);var L=!1;for(y=0;y<D.bodyElement.childNodes.length;y++)if("div"===D.bodyElement.childNodes[y].nodeName&&D.bodyElement.childNodes[y].attributes.length)for(A=0;A<D.bodyElement.childNodes[y].attributes.length;A++)"begin"==D.bodyElement.childNodes[y].attributes[A].name&&(L=!0);if(L){var I=u.split("<body>")[0];I+="<body>\n<div>\n";var K,M=1;for(y=0;y<D.bodyElement.childNodes.length;y++){var J,O,N,P=[];if("div"===D.bodyElement.childNodes[y].nodeName){{D.bodyElement.childNodes[y];}for(A=0;A<D.bodyElement.childNodes[y].attributes.length;A++)"begin"==D.bodyElement.childNodes[y].attributes[A].name&&(J=D.bodyElement.childNodes[y].attributes[A].value),"end"==D.bodyElement.childNodes[y].attributes[A].name&&(O=D.bodyElement.childNodes[y].attributes[A].value);for(A=0;A<D.bodyElement.childNodes[y].childNodes.length;A++)if("p"==D.bodyElement.childNodes[y].childNodes[A].nodeName){for(iii=0;iii<D.bodyElement.childNodes[y].childNodes[A].attributes.length;iii++)"region"==D.bodyElement.childNodes[y].childNodes[A].attributes[iii].name&&(N=D.bodyElement.childNodes[y].childNodes[A].attributes[iii].value,K=N);P.push(D.bodyElement.childNodes[y].childNodes[A].childNodes[0].nodeValue);}I+='<p region="'+N+'" begin="'+J+'" id="p'+M+'" end="'+O+'" >'+P.join("<br/>")+"</p>\n",M+=1;}}I+="</div>\n</body>\n</tt>",D=F.parseFromString(I,"text/xml"),D.bodyElement="undefined"==typeof D.getElementsByTagNameNS?D.documentElement.childNodes.item(1):D.getElementsByTagNameNS(DFXP_NS,"body").item(0);}HTML5Caption_computeActiveTimeIntervals(D.bodyElement);var R=0,V=0;G.offsetTop&&(R=G.offsetTop),G.offsetLeft&&(V=G.offsetLeft);var Q=HTML5Caption_convertDFXP2HTML(D.bodyElement,!1,R,V);if(null===Q)return ;HTML5Caption_convertDFXP2HTMLAttributes(D.documentElement,Q,!1,0,0);var U,Y=HTML5Caption_getSubtitleSet(Q);this.captionsElement_?U=this.captionsElement_:(U=document.getElementById("captions"),null===U&&(this.el_.innerHTML='<div id="captions"></div>',U=this.el_.children[0]),this.captionsElement_=U,this.orgParent=U.parentNode);try{U.appendChild(Q);}catch(q){CL.configs.debug&&console.log(q);}null===U.parentNode&&(CL.configs.debug&&console.log("captionsElement has no parent node, attaching..."),this.orgParent.appendChild(U));var b0,X=Y.length;for(y=0;X>y;y++)if(b0=Y[y],Z={id:y,index:this.cues_.length},Z.startTime=b0.aBegin+z,Z.endTime=b0.aEnd+z,1/0!=Z.endTime&&1/0!=Z.startTime){if(CL.configs.debug&&console.log("adding cue from/to "+Z.startTime+"/"+Z.endTime),Z.endTime-Z.startTime<.1&&(CL.configs.debug&&console.log("WARNING: Cue is short: "),CL.configs.debug&&console.log(Z)),Z.node=b0,void 0!==this.player().options().customCueParser){var a0;a0=this.player().options().customCueParser(Z),void 0!==a0&&null!==a0&&(Z=a0);}this.cues_.push(Z);}}else if("webvtt"===u.toLowerCase().substr(0,6)){var Z,W,e0,d0=u.split("\n"),c0="";for(y=1,j=d0.length;y<j;y++)if(c0=videojs.trim(d0[y])){for(-1==c0.indexOf("-->")?(x=c0,c0=videojs.trim(d0[++y])):x=this.cues_.length,Z={id:x,index:this.cues_.length},W=c0.split(/[\t ]+/),Z.startTime=this.parseCueTime(W[0]),Z.endTime=this.parseCueTime(W[2]),e0=[];d0[++y]&&(c0=videojs.trim(d0[y]));)e0.push(c0);Z.text=e0.join("<br/>"),this.cues_.push(Z);}}else CL.configs.debug&&CL.configs.debug&&console.log("Unknown subtitle format, skipping file.");},castLabs.TextTrack.prototype.parseCueTime=function(q){var u,v,w,x,y,A=q.split(":"),z=0;return 3==A.length?(u=A[0],v=A[1],w=A[2]):(u=0,v=A[0],w=A[1]),w=w.split(/\s+/),x=w.splice(0,1)[0],x=x.split(/\.|,/),y=parseFloat(x[1]),x=x[0],z+=3600*parseFloat(u),z+=60*parseFloat(v),z+=parseFloat(x),y&&(z+=y/1e3),z;},castLabs.TextTrack.prototype.update=function(){var q,u,v,w=this.activeCues_;if(this.cues_.length>0){var x=this.player_.options().trackTimeOffset||0,y=this.isLive===!0?this.player_.absoluteTime():this.player_.currentTime()+x;if(void 0===this.prevChange||y<this.prevChange||this.nextChange<=y||this.isLive){var A,z,C,B=this.cues_,E=this.player_.duration(),G=0,F=!1,D=[];for(y>=this.nextChange||void 0===this.nextChange||this.isLive?v=void 0!==this.firstActiveIndex?this.firstActiveIndex:0:(F=!0,v=void 0!==this.lastActiveIndex?this.lastActiveIndex:B.length-1),CL.configs.debug&&console.log("cue Current time is: "+y);;){if(C=B[v],CL.configs.debug&&console.log("comparing cue "+C.startTime+"/"+C.endTime),C.endTime<=y)G=Math.max(G,C.endTime),C.active&&(C.active=!1),this.isLive===!0&&(this.cues_.splice(v,1),v--);else if(y<C.startTime){if(E=Math.min(E,C.startTime),C.active&&(C.active=!1),!F)break;}else F?(D.splice(0,0,C),void 0===z&&v>0&&(z=v),A=v):(D.push(C),void 0===A&&(A=v),z=v),E=Math.min(E,C.endTime),G=Math.max(G,C.startTime),C.active=!0;if(F){if(0===v)break;v--;}else{if(v===B.length-1)break;v++;}}this.activeCues_=D,this.nextChange=E,this.prevChange=G,this.firstActiveIndex=A,this.lastActiveIndex=z,this.updateDisplay(),this.trigger("cuechange");}}for(q=this.activeCues_,v=0;v<w.length;v++)if(u=w[v],void 0!==u.node){for(var H=!1,L=0;L<q.length;L++)if(q[L]===u){H=!0;break;}if(!H){var I=u.node;I.style.display="none";}}},castLabs.TextTrack.prototype.updateDisplay=function(){for(var q=this.activeCues_,u="",v=0,w=q.length,x=!1;w>v;v++)if(void 0!==q[v].node){0===v&&null===this.captionsElement_.parentNode&&(this.orgParent.appendChild(this.captionsElement_),CL.configs.debug&&console.log("Warning: Reattaching missing captions element")),x=!0;var y=q[v].node;y.style.display=null===y.df_displayValue?"block":y.df_displayValue,"p"!=y.localName||y.hasOrigin!==!1||y.style.position||(y.style.position="absolute",y.style.left="0em",y.style.right="0em",y.style.bottom="0em",y.style.removeProperty("width"),y.style.removeProperty("height"),y.style.removeProperty("font-size"));}else u+='<span class="vjs-tt-cue" style="background-color:rgba(0,0,0,.5);position:absolute;left:0em;right:0em;bottom:0em">'+q[v].text+"</span>";x||(this.el_.innerHTML=""+u);},castLabs.TextTrack.prototype.reset=function(){this.nextChange=0,this.prevChange=this.player_.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0;},castLabs.SubtitlesTrack=castLabs.TextTrack.extend(),castLabs.SubtitlesTrack.prototype.kind_="subtitles",videojs.plugin("texttracks",function(G){var F=this;hideTextTrack=function(q){for(var u,v=F.textTracks_,w=0,x=v.length;x>w;w++)u=v[w],u.id()===q&&u.disable();return this;},showTextTrack=function(q,u){for(var v,w,x,y=F.textTracks_,A=0,z=y.length;z>A;A++)v=y[A],v.id()===q?(v.show(),w=v):u&&v.kind()==u&&v.mode()>0&&v.disable();return x=w?w.kind():u?u:!1,x&&this.trigger(x+"trackchange"),this;},addTextTrack=function(q,u,v,w){var x=F.textTracks_=F.textTracks_||[];w=w||{},w.kind=q,w.label=u,w.language=v;var y=new castLabs.TextTrack(F,w);return x.push(y),y;};var D=videojs.MenuItem.extend({init:function(q,u){var v={label:u.label_};videojs.MenuItem.call(this,q,v),this.track=u,this.on("click",this.onClick);}});D.prototype.onClick=function(){this.trigger({type:"selected",track:this.track});};var H=videojs.MenuButton.extend({init:function(u,v,w){u.textTracks_=[];var x,y=new castLabs.utils.Internationalization;if(x=void 0!==u.subtitleTracks?u.subtitleTracks():[],!(x.length<=0)){for(var A=0;A<x.length;A++){var z,C,B;C=x[A],z={src:C.src,sources:C.sources,timescale:C.timescale,playerId:C.id},B=y.translateLanguageCode(C.name,"en"),addTextTrack("subtitles",B,C.lang,z);}videojs.MenuButton.call(this,u,v,w),x.length<=0?this.hide():this.show(),this.el().setAttribute("aria-label","Subtitles Menu");var E=this;setTextTrack=function(q){E.selectItem({playerId:q});},u.setTextTrack=setTextTrack;}}});H.prototype.buttonText="Subtitles",H.prototype.className="vjs-subtitles-button",H.prototype.createItems=function(){var q,u=this;this.items=[];var v=new videojs.MenuItem(F,{label:"Off"});for(v.selected_=!1,v.on("click",function(){u.selectItem({}),this.selected(!1),CL.configs.subtitlesOff=!0;}),this.items.push(v),q=0;q<F.textTracks_.length;q++)this.items.push(this.createItem(F.textTracks_[q]));return this.items;},H.prototype.createItem=function(q){var u;return u=new D(this.player(),q),u.selected_=!1,u.on("selected",videojs.bind(this,this.selectItem)),u;},H.prototype.selectItem=function(q){this.player().activeSubtitleTrack=null;for(var u=1;u<this.items.length;u++)void 0!==q.track&&this.items[u].track.id()===q.track.id()||void 0!==q.playerId&&this.items[u].track.playerId_===q.playerId?(this.items[u].selected_===!0?(this.items[u].track.disable(),this.items[u].selected(!1),this.items[u].selected_=!1):(this.items[u].track.show(),this.items[u].selected(!0),this.items[u].selected_=!0,this.player().activeSubtitleTrack=this.items[u].track.playerId_,CL.configs.subtitlesOff=!1),this.player().trigger({type:"trackchanged",trackType:"text",trackId:this.items[u].track.playerId_,trackEnabled:this.items[u].selected_})):(this.items[u].selected_===!0&&this.player().trigger({type:"trackchanged",trackType:"text",trackId:this.items[u].track.playerId_,trackEnabled:!1}),this.items[u].track.disable(),this.items[u].selected(!1),this.items[u].selected_=!1);};var L=null;F.on("loadedmetadata",function(){null!==L&&L.dispose&&L.el()&&L.dispose(),L=new H(F,G),F.controlBar.addChild(L);});}),castLabs.utils||(castLabs.utils={}),castLabs.utils.Internationalization=function(){var w={ab:"Abkhazian",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",nb:"Bokmål, Norwegian; Norwegian Bokmål",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",es:"Spanish; Castilian",ca:"Catalan; Valencian",km:"Central Khmer",ch:"Chamorro",ce:"Chechen",ny:"Chichewa; Chewa; Nyanja",ny:"Chichewa; Chewa; Nyanja",zh:"Chinese",za:"Zhuang; Chuang",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi; Dhivehi; Maldivian",dv:"Divehi; Dhivehi; Maldivian",nl:"Dutch; Flemish",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",nl:"Dutch; Flemish",fr:"French",ff:"Fulah",gd:"Gaelic; Scottish Gaelic",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",ki:"Kikuyu; Gikuyu",el:"Greek, Modern (1453-)  ",kl:"Kalaallisut; Greenlandic",gn:"Guarani",gu:"Gujarati",ht:"Haitian; Haitian Creole",ht:"Haitian; Haitian Creole",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",is:"Icelandic",io:"Ido",ig:"Igbo",id:"Indonesian",ia:"Interlingua (International Auxiliary Language Association) ",ie:"Interlingue; Occidental",iu:"Inuktitut",ik:"Inupiaq",ga:"Irish",it:"Italian",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut; Greenlandic",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",ki:"Kikuyu; Gikuyu",rw:"Kinyarwanda",ky:"Kirghiz; Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kuanyama; Kwanyama",ku:"Kurdish",kj:"Kuanyama; Kwanyama",ky:"Kirghiz; Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lb:"Luxembourgish; Letzeburgesch",li:"Limburgan; Limburger; Limburgish",li:"Limburgan; Limburger; Limburgish",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lt:"Lithuanian",lu:"Luba-Katanga",lb:"Luxembourgish; Letzeburgesch",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",dv:"Divehi; Dhivehi; Maldivian",mt:"Maltese",gv:"Manx",mi:"Maori",mr:"Marathi",mh:"Marshallese",ro:"Romanian; Moldavian; Moldovan",ro:"Romanian; Moldavian; Moldovan",mn:"Mongolian",na:"Nauru",nv:"Navajo; Navaho",nv:"Navajo; Navaho",nd:"Ndebele, North; North Ndebele",nr:"Ndebele, South; South Ndebele",ng:"Ndonga",ne:"Nepali",nd:"Ndebele, North; North Ndebele",se:"Northern Sami",no:"Norwegian",nb:"Bokmål, Norwegian; Norwegian Bokmål",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",ii:"Sichuan Yi; Nuosu",ny:"Chichewa; Chewa; Nyanja",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",ie:"Interlingue; Occidental",oc:"Occitan (post 1500)  ",oj:"Ojibwa",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",or:"Oriya",om:"Oromo",os:"Ossetian; Ossetic",os:"Ossetian; Ossetic",pi:"Pali",pa:"Panjabi; Punjabi",ps:"Pushto; Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Panjabi; Punjabi",ps:"Pushto; Pashto",qu:"Quechua",ro:"Romanian; Moldavian; Moldovan",rm:"Romansh",rn:"Rundi",ru:"Russian",sm:"Samoan",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",gd:"Gaelic; Scottish Gaelic",sr:"Serbian",sn:"Shona",ii:"Sichuan Yi; Nuosu",sd:"Sindhi",si:"Sinhala; Sinhalese",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",so:"Somali",st:"Sotho, Southern",nr:"Ndebele, South; South Ndebele",es:"Spanish; Castilian",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",tl:"Tagalog",ty:"Tahitian",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga (Tonga Islands)  ",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",ug:"Uighur; Uyghur",uz:"Uzbek",ca:"Catalan; Valencian",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",fy:"Western Frisian",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zu:"Zulu"},x={abk:"Abkhazian",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe; Adygei",ady:"Adyghe; Adygei",aar:"Afar",afh:"Afrihili",afr:"Afrikaans",afa:"Afro-Asiatic languages",ain:"Ainu",aka:"Akan",akk:"Akkadian",alb:"Albanian",sqi:"Albanian",gsw:"Swiss German; Alemannic; Alsatian",ale:"Aleut",alg:"Algonquian languages",gsw:"Swiss German; Alemannic; Alsatian",tut:"Altaic languages",amh:"Amharic",anp:"Angika",apa:"Apache languages",ara:"Arabic",arg:"Aragonese",arp:"Arapaho",arw:"Arawak",arm:"Armenian",hye:"Armenian",rup:"Aromanian; Arumanian; Macedo-Romanian",art:"Artificial languages",rup:"Aromanian; Arumanian; Macedo-Romanian",asm:"Assamese",ast:"Asturian; Bable; Leonese; Asturleonese",ast:"Asturian; Bable; Leonese; Asturleonese",ath:"Athapascan languages",aus:"Australian languages",map:"Austronesian languages",ava:"Avaric",ave:"Avestan",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",ast:"Asturian; Bable; Leonese; Asturleonese",ban:"Balinese",bat:"Baltic languages",bal:"Baluchi",bam:"Bambara",bai:"Bamileke languages",bad:"Banda languages",bnt:"Bantu languages",bas:"Basa",bak:"Bashkir",baq:"Basque",eus:"Basque",btk:"Batak languages",bej:"Beja; Bedawiyet",bej:"Beja; Bedawiyet",bel:"Belarusian",bem:"Bemba",ben:"Bengali",ber:"Berber languages",bho:"Bhojpuri",bih:"Bihari languages",bik:"Bikol",byn:"Blin; Bilin",bin:"Bini; Edo",bis:"Bislama",byn:"Blin; Bilin",zbl:"Blissymbols; Blissymbolics; Bliss",zbl:"Blissymbols; Blissymbolics; Bliss",zbl:"Blissymbols; Blissymbolics; Bliss",nob:"Bokmål, Norwegian; Norwegian Bokmål",bos:"Bosnian",bra:"Braj",bre:"Breton",bug:"Buginese",bul:"Bulgarian",bua:"Buriat",bur:"Burmese",mya:"Burmese",cad:"Caddo",spa:"Spanish; Castilian",cat:"Catalan; Valencian",cau:"Caucasian languages",ceb:"Cebuano",cel:"Celtic languages",cai:"Central American Indian languages",khm:"Central Khmer",chg:"Chagatai",cmc:"Chamic languages",cha:"Chamorro",che:"Chechen",chr:"Cherokee",nya:"Chichewa; Chewa; Nyanja",chy:"Cheyenne",chb:"Chibcha",nya:"Chichewa; Chewa; Nyanja",chi:"Chinese",zho:"Chinese",chn:"Chinook jargon",chp:"Chipewyan; Dene Suline",cho:"Choctaw",zha:"Zhuang; Chuang",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",chk:"Chuukese",chv:"Chuvash",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",syc:"Classical Syriac",rar:"Rarotongan; Cook Islands Maori",cop:"Coptic",cor:"Cornish",cos:"Corsican",cre:"Cree",mus:"Creek",crp:"Creoles and pidgins",cpe:"Creoles and pidgins, English based",cpf:"Creoles and pidgins, French-based",cpp:"Creoles and pidgins, Portuguese-based",crh:"Crimean Tatar; Crimean Turkish",crh:"Crimean Tatar; Crimean Turkish",hrv:"Croatian",cus:"Cushitic languages",cze:"Czech",ces:"Czech",dak:"Dakota",dan:"Danish",dar:"Dargwa",del:"Delaware",chp:"Chipewyan; Dene Suline",div:"Divehi; Dhivehi; Maldivian",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",din:"Dinka",div:"Divehi; Dhivehi; Maldivian",doi:"Dogri",dgr:"Dogrib",dra:"Dravidian languages",dua:"Duala",dut:"Dutch; Flemish",nld:"Dutch; Flemish",dum:"Dutch, Middle (ca.1050-1350)",dyu:"Dyula",dzo:"Dzongkha",frs:"Eastern Frisian",bin:"Bini; Edo",efi:"Efik",egy:"Egyptian (Ancient)",eka:"Ekajuk",elx:"Elamite",eng:"English",enm:"English, Middle (1100-1500)",ang:"English, Old (ca.450-1100)",myv:"Erzya",epo:"Esperanto",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fat:"Fanti",fao:"Faroese",fij:"Fijian",fil:"Filipino; Pilipino",fin:"Finnish",fiu:"Finno-Ugrian languages",dut:"Dutch; Flemish",nld:"Dutch; Flemish",fon:"Fon",fre:"French",fra:"French",frm:"French, Middle (ca.1400-1600)",fro:"French, Old (842-ca.1400)",fur:"Friulian",ful:"Fulah",gaa:"Ga",gla:"Gaelic; Scottish Gaelic",car:"Galibi Carib",glg:"Galician",lug:"Ganda",gay:"Gayo",gba:"Gbaya",gez:"Geez",geo:"Georgian",kat:"Georgian",ger:"German",deu:"German",nds:"Low German; Low Saxon; German, Low; Saxon, Low",gmh:"German, Middle High (ca.1050-1500)",goh:"German, Old High (ca.750-1050)",gem:"Germanic languages",kik:"Kikuyu; Gikuyu",gil:"Gilbertese",gon:"Gondi",gor:"Gorontalo",got:"Gothic",grb:"Grebo",grc:"Greek, Ancient (to 1453)",gre:"Greek, Modern (1453-)",ell:"Greek, Modern (1453-)",kal:"Kalaallisut; Greenlandic",grn:"Guarani",guj:"Gujarati",gwi:"Gwich'in",hai:"Haida",hat:"Haitian; Haitian Creole",hat:"Haitian; Haitian Creole",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",him:"Himachali languages; Western Pahari languages",hin:"Hindi",hmo:"Hiri Motu",hit:"Hittite",hmn:"Hmong; Mong",hun:"Hungarian",hup:"Hupa",iba:"Iban",ice:"Icelandic",isl:"Icelandic",ido:"Ido",ibo:"Igbo",ijo:"Ijo languages",ilo:"Iloko",arc:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",smn:"Inari Sami",inc:"Indic languages",ine:"Indo-European languages",ind:"Indonesian",inh:"Ingush",ina:"Interlingua (International Auxiliary Language Association)",ile:"Interlingue; Occidental",iku:"Inuktitut",ipk:"Inupiaq",ira:"Iranian languages",gle:"Irish",mga:"Irish, Middle (900-1200)",sga:"Irish, Old (to 900)",iro:"Iroquoian languages",ita:"Italian",jpn:"Japanese",jav:"Javanese",kac:"Kachin; Jingpho",jrb:"Judeo-Arabic",jpr:"Judeo-Persian",kbd:"Kabardian",kab:"Kabyle",kac:"Kachin; Jingpho",kal:"Kalaallisut; Greenlandic",xal:"Kalmyk; Oirat",kam:"Kamba",kan:"Kannada",kau:"Kanuri",pam:"Pampanga; Kapampangan",kaa:"Kara-Kalpak",krc:"Karachay-Balkar",krl:"Karelian",kar:"Karen languages",kas:"Kashmiri",csb:"Kashubian",kaw:"Kawi",kaz:"Kazakh",kha:"Khasi",khi:"Khoisan languages",kho:"Khotanese; Sakan",kik:"Kikuyu; Gikuyu",kmb:"Kimbundu",kin:"Kinyarwanda",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",kir:"Kirghiz; Kyrgyz",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",tlh:"Klingon; tlhIngan-Hol",kom:"Komi",kon:"Kongo",kok:"Konkani",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",kro:"Kru languages",kua:"Kuanyama; Kwanyama",kum:"Kumyk",kur:"Kurdish",kru:"Kurukh",kut:"Kutenai",kua:"Kuanyama; Kwanyama",kir:"Kirghiz; Kyrgyz",lad:"Ladino",lah:"Lahnda",lam:"Lamba",day:"Land Dayak languages",lao:"Lao",lat:"Latin",lav:"Latvian",ast:"Asturian; Bable; Leonese; Asturleonese",ltz:"Luxembourgish; Letzeburgesch",lez:"Lezghian",lim:"Limburgan; Limburger; Limburgish",lim:"Limburgan; Limburger; Limburgish",lim:"Limburgan; Limburger; Limburgish",lin:"Lingala",lit:"Lithuanian",jbo:"Lojban",nds:"Low German; Low Saxon; German, Low; Saxon, Low",nds:"Low German; Low Saxon; German, Low; Saxon, Low",dsb:"Lower Sorbian",loz:"Lozi",lub:"Luba-Katanga",lua:"Luba-Lulua",lui:"Luiseno",smj:"Lule Sami",lun:"Lunda",luo:"Luo (Kenya and Tanzania)",lus:"Lushai",ltz:"Luxembourgish; Letzeburgesch",rup:"Aromanian; Arumanian; Macedo-Romanian",mac:"Macedonian",mkd:"Macedonian",mad:"Madurese",mag:"Magahi",mai:"Maithili",mak:"Makasar",mlg:"Malagasy",may:"Malay",msa:"Malay",mal:"Malayalam",div:"Divehi; Dhivehi; Maldivian",mlt:"Maltese",mnc:"Manchu",mdr:"Mandar",man:"Mandingo",mni:"Manipuri",mno:"Manobo languages",glv:"Manx",mao:"Maori",mri:"Maori",arn:"Mapudungun; Mapuche",arn:"Mapudungun; Mapuche",mar:"Marathi",chm:"Mari",mah:"Marshallese",mwr:"Marwari",mas:"Masai",myn:"Mayan languages",men:"Mende",mic:"Mi'kmaq; Micmac",mic:"Mi'kmaq; Micmac",min:"Minangkabau",mwl:"Mirandese",moh:"Mohawk",mdf:"Moksha",rum:"Romanian; Moldavian; Moldovan",ron:"Romanian; Moldavian; Moldovan",mkh:"Mon-Khmer languages",hmn:"Hmong; Mong",lol:"Mongo",mon:"Mongolian",mos:"Mossi",mul:"Multiple languages",mun:"Munda languages",nqo:"N'Ko",nah:"Nahuatl languages",nau:"Nauru",nav:"Navajo; Navaho",nav:"Navajo; Navaho",nde:"Ndebele, North; North Ndebele",nbl:"Ndebele, South; South Ndebele",ndo:"Ndonga",nap:"Neapolitan","new":"Nepal Bhasa; Newari",nep:"Nepali","new":"Nepal Bhasa; Newari",nia:"Nias",nic:"Niger-Kordofanian languages",ssa:"Nilo-Saharan languages",niu:"Niuean",zxx:"No linguistic content; Not applicable",nog:"Nogai",non:"Norse, Old",nai:"North American Indian languages",nde:"Ndebele, North; North Ndebele",frr:"Northern Frisian",sme:"Northern Sami",nso:"Pedi; Sepedi; Northern Sotho",nor:"Norwegian",nob:"Bokmål, Norwegian; Norwegian Bokmål",nno:"Norwegian Nynorsk; Nynorsk, Norwegian",zxx:"No linguistic content; Not applicable",nub:"Nubian languages",iii:"Sichuan Yi; Nuosu",nym:"Nyamwezi",nya:"Chichewa; Chewa; Nyanja",nyn:"Nyankole",nno:"Norwegian Nynorsk; Nynorsk, Norwegian",nyo:"Nyoro",nzi:"Nzima",ile:"Interlingue; Occidental",oci:"Occitan (post 1500)",pro:"Provençal, Old (to 1500);Occitan, Old (to 1500)",arc:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",xal:"Kalmyk; Oirat",oji:"Ojibwa",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetian; Ossetic",oss:"Ossetian; Ossetic",oto:"Otomian languages",pal:"Pahlavi",pau:"Palauan",pli:"Pali",pam:"Pampanga; Kapampangan",pag:"Pangasinan",pan:"Panjabi; Punjabi",pap:"Papiamento",paa:"Papuan languages",pus:"Pushto; Pashto",nso:"Pedi; Sepedi; Northern Sotho",per:"Persian",fas:"Persian",peo:"Persian, Old (ca.600-400 B.C.)",phi:"Philippine languages",phn:"Phoenician",fil:"Filipino; Pilipino",pon:"Pohnpeian",pol:"Polish",por:"Portuguese",pra:"Prakrit languages",pro:"Provençal, Old (to 1500);Occitan, Old (to 1500)",pan:"Panjabi; Punjabi",pus:"Pushto; Pashto",que:"Quechua",raj:"Rajasthani",rap:"Rapanui",rar:"Rarotongan; Cook Islands Maori","qaa-qtz":"Reserved for local use",roa:"Romance languages",rum:"Romanian; Moldavian; Moldovan",ron:"Romanian; Moldavian; Moldovan",roh:"Romansh",rom:"Romany",run:"Rundi",rus:"Russian",kho:"Khotanese; Sakan",sal:"Salishan languages",sam:"Samaritan Aramaic",smi:"Sami languages",smo:"Samoan",sad:"Sandawe",sag:"Sango",san:"Sanskrit",sat:"Santali",srd:"Sardinian",sas:"Sasak",nds:"Low German; Low Saxon; German, Low; Saxon, Low",sco:"Scots",gla:"Gaelic; Scottish Gaelic",sel:"Selkup",sem:"Semitic languages",nso:"Pedi; Sepedi; Northern Sotho",srp:"Serbian",srr:"Serer",shn:"Shan",sna:"Shona",iii:"Sichuan Yi; Nuosu",scn:"Sicilian",sid:"Sidamo",sgn:"Sign Languages",bla:"Siksika",snd:"Sindhi",sin:"Sinhala; Sinhalese",sin:"Sinhala; Sinhalese",sit:"Sino-Tibetan languages",sio:"Siouan languages",sms:"Skolt Sami",den:"Slave (Athapascan)",sla:"Slavic languages",slo:"Slovak",slk:"Slovak",slv:"Slovenian",sog:"Sogdian",som:"Somali",son:"Songhai languages",snk:"Soninke",wen:"Sorbian languages",nso:"Pedi; Sepedi; Northern Sotho",sot:"Sotho, Southern",sai:"South American Indian languages",nbl:"Ndebele, South; South Ndebele",alt:"Southern Altai",sma:"Southern Sami",spa:"Spanish; Castilian",srn:"Sranan Tongo",zgh:"Standard Moroccan Tamazight",suk:"Sukuma",sux:"Sumerian",sun:"Sundanese",sus:"Susu",swa:"Swahili",ssw:"Swati",swe:"Swedish",gsw:"Swiss German; Alemannic; Alsatian",syr:"Syriac",tgl:"Tagalog",tah:"Tahitian",tai:"Tai languages",tgk:"Tajik",tmh:"Tamashek",tam:"Tamil",tat:"Tatar",tel:"Telugu",ter:"Tereno",tet:"Tetum",tha:"Thai",tib:"Tibetan",bod:"Tibetan",tig:"Tigre",tir:"Tigrinya",tem:"Timne",tiv:"Tiv",tlh:"Klingon; tlhIngan-Hol",tli:"Tlingit",tpi:"Tok Pisin",tkl:"Tokelau",tog:"Tonga (Nyasa)",ton:"Tonga (Tonga Islands)",tsi:"Tsimshian",tso:"Tsonga",tsn:"Tswana",tum:"Tumbuka",tup:"Tupi languages",tur:"Turkish",ota:"Turkish, Ottoman (1500-1928)",tuk:"Turkmen",tvl:"Tuvalu",tyv:"Tuvinian",twi:"Twi",udm:"Udmurt",uga:"Ugaritic",uig:"Uighur; Uyghur",ukr:"Ukrainian",umb:"Umbundu",mis:"Uncoded languages",und:"Undetermined",hsb:"Upper Sorbian",urd:"Urdu",uig:"Uighur; Uyghur",uzb:"Uzbek",vai:"Vai",cat:"Catalan; Valencian",ven:"Venda",vie:"Vietnamese",vol:"Volapük",vot:"Votic",wak:"Wakashan languages",wln:"Walloon",war:"Waray",was:"Washo",wel:"Welsh",cym:"Welsh",fry:"Western Frisian",him:"Himachali languages; Western Pahari languages",wal:"Wolaitta; Wolaytta",wal:"Wolaitta; Wolaytta",wol:"Wolof",xho:"Xhosa",sah:"Yakut",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",ypk:"Yupik languages",znd:"Zande languages",zap:"Zapotec",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",zen:"Zenaga",zha:"Zhuang; Chuang",zul:"Zulu",zun:"Zuni"},y={},A=function(q,u){if(y[u])return void 0!=y[u][q]?y[u][q]:"Undefined";throw "Cannot find language mapping for target language "+u;},z=function(q,u){var v;if(y[q])for(v in u)y[q][v]=u[v];else y[q]=u;};return z("en",w),z("en",x),{translateLanguageCode:A,addLanguageMap:z};},function(){"use strict";function K(q,u){var v=Object.create(q.prototype);return q.apply(v,u)||v;}var M="dashjs",J="dashas",O="dashcs",N="dashhls";videojs.Dasheverywhere=function(z,C){var B=new castLabsDashJS.classes.Utils,E=!1,G=!1,F=!1;E=!!C.widevineLicenseServerURL&&null!==C.widevineLicenseServerURL&&-1===C.widevineLicenseServerURL.toLowerCase().indexOf("drmtoday"),G=!!C.accessLicenseServerURL&&null!==C.accessLicenseServerURL&&-1===C.accessLicenseServerURL.toLowerCase().indexOf("drmtoday"),F=!!C.playReadyLicenseServerURL&&null!==C.playReadyLicenseServerURL&&-1===C.playReadyLicenseServerURL.toLowerCase().indexOf("drmtoday"),(C.sendCustomData&&C.sendCustomData!==!0||E||G||F)&&B.sdfglksdfgkl(C),C.techs&&C.techs.length>0&&(videojs.Dasheverywhere.TECHS=C.techs),CL.manifest=videojs.util.mergeOptions(CL.defaultManifest,C);var D=videojs.Dasheverywhere.supportedTech();CL.configs=JSON.parse(JSON.stringify(CL.defaultConfigs)),CL.manifest=JSON.parse(JSON.stringify(CL.defaultManifest)),C.debug&&D&&console.log("Active tech: "+D);var H=function(){return D;},L=function(q,u){if(void 0===q||null===q||"audio"!==q&&"text"!==q)throw "Cannot set active track: Parameter 'type' must be 'audio' or 'text'.";if(void 0===u||null===u||""===u)throw "Cannot set active track: Parameter 'id' must not be empty.";"audio"===q?z.setAudioTrack(u):"text"===q&&z.setSubsTrack(u);},I=function(u,v){var w,x=z.options();CL.configs=JSON.parse(JSON.stringify(CL.defaultConfigs)),CL.manifest=JSON.parse(JSON.stringify(CL.defaultManifest)),B=new castLabsDashJS.classes.Utils,B.supportsMSE(),v.autoplay=x.autoplay,x.dasheverywhere=videojs.util.mergeOptions(x.dasheverywhere,v),CL.manifest=videojs.util.mergeOptions(CL.manifest,x.dasheverywhere),w=videojs.Dasheverywhere.supportedTech();try{z.pause(),w===M&&z.mediaPlayer&&z.mediaPlayer.removeEventListener&&(z.mediaPlayer.removeEventListener(),z.mediaPlayer.reset());}catch(q){}if(w===M){var y;try{y=z.el().childNodes[0],y.hidden=!0,z.one("loadstart",function(){y.hidden=!1;});}catch(q){}void 0!==z.mediaPlayer.eventBus&&(z.mediaPlayer.eventBus.removeEventListener("error",z.options().customErrorHandler,!1),z.mediaPlayer.eventBus.removeEventListener(MediaPlayer.events.MANIFEST_LOADED,z.options().onManifestLoaded,!1)),z.mediaPlayer.setConfig(x.dasheverywhere);try{var A=function(){z.manifestUrl=u,z.mediaPlayer.loadVideo(u),z.mediaPlayer.eventBus.addEventListener("error",z.options().customErrorHandler,!1),z.mediaPlayer.eventBus.addEventListener(MediaPlayer.events.MANIFEST_LOADED,z.options().onManifestLoaded,!1);};""!==y.src?(y.src="",y.setMediaKeys?y.setMediaKeys(null).then(function(){A();},function(){A();}):A()):A();}catch(q){}}else if(w===J)z.loadSrc(u,x.dasheverywhere);else if(w===O)z.loadSrc(u,x.dasheverywhere);else if(w===N){try{z.pause(),this.player().loadingSpinner.show(),z.one("loadeddata",function(){this.player().loadingSpinner.hide(),this.options().autoplay===!0&&this.player().play();});}catch(q){}z.src(u);}};switch(z.getActiveTech=H,z.setActiveTrack=L,z.loadVideo=I,D){case M:return K(videojs.Dashjs,arguments);case J:return K(videojs.Dashas,arguments);case O:return K(videojs.Silverlight,arguments);case N:return videojs.Hls.supportsNativeHls?K(videojs.Html5,arguments):K(videojs.Hls,arguments);default:throw  new Error("NO_SUPPORTED_PLAYBACK_TECHNOLOGY");}},videojs.Dasheverywhere.isSupported=function(){return !!this.supportedTech();},videojs.Dasheverywhere.canPlaySource=function(q){return "application/dash+xml"===q.type||"application/vnd.ms-sstr+xml"===q.type||"application/x-mpegURL"===q.type?"maybe":"";},videojs.Dasheverywhere.supportedTech=function(){var q=CL.configs.isWindows,u=CL.configs.isIE11,v=CL.configs.isFirefox,w=this.canUseTech.bind(this);return q&&v&&w(O)&&videojs.Silverlight.isSupported()?O:w(M)&&videojs.Dashjs.isSupported()&&(!u||u&&!CL.manifest.disableDASHJSOnIE11)?M:w(J)&&videojs.Dashas.isSupported()?J:w(O)&&videojs.Silverlight.isSupported()?O:w(N)&&videojs.Hls.isSupported()?N:void 0;},videojs.Dasheverywhere.canUseTech=function(q){var u,v;for(u=0,v=this.TECHS.length;v>u;u++)if(q===this.TECHS[u])return !0;return !1;},videojs.Dasheverywhere.TECHS=[M,J,O,N];}();